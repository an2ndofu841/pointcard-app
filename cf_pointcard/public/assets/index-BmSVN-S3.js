function um(u,i){for(var a=0;a<i.length;a++){const c=i[a];if(typeof c!="string"&&!Array.isArray(c)){for(const v in c)if(v!=="default"&&!(v in u)){const m=Object.getOwnPropertyDescriptor(c,v);m&&Object.defineProperty(u,v,m.get?m:{enumerable:!0,get:()=>c[v]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))c(v);new MutationObserver(v=>{for(const m of v)if(m.type==="childList")for(const w of m.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function a(v){const m={};return v.integrity&&(m.integrity=v.integrity),v.referrerPolicy&&(m.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?m.credentials="include":v.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(v){if(v.ep)return;v.ep=!0;const m=a(v);fetch(v.href,m)}})();var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nc(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function X2(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var i=u.default;if(typeof i=="function"){var a=function c(){var v=!1;try{v=this instanceof c}catch{}return v?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};a.prototype=i.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(u).forEach(function(c){var v=Object.getOwnPropertyDescriptor(u,c);Object.defineProperty(a,c,v.get?v:{enumerable:!0,get:function(){return u[c]}})}),a}var _h={exports:{}},Fl={};var kg;function K2(){if(kg)return Fl;kg=1;var u=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(c,v,m){var w=null;if(m!==void 0&&(w=""+m),v.key!==void 0&&(w=""+v.key),"key"in v){m={};for(var C in v)C!=="key"&&(m[C]=v[C])}else m=v;return v=m.ref,{$$typeof:u,type:c,key:w,ref:v!==void 0?v:null,props:m}}return Fl.Fragment=i,Fl.jsx=a,Fl.jsxs=a,Fl}var jg;function W2(){return jg||(jg=1,_h.exports=K2()),_h.exports}var Z=W2(),Ah={exports:{}},bt={};var Pg;function Q2(){if(Pg)return bt;Pg=1;var u=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.iterator;function F(L){return L===null||typeof L!="object"?null:(L=P&&L[P]||L["@@iterator"],typeof L=="function"?L:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,J={};function ne(L,Q,xe){this.props=L,this.context=Q,this.refs=J,this.updater=xe||q}ne.prototype.isReactComponent={},ne.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},ne.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function se(){}se.prototype=ne.prototype;function re(L,Q,xe){this.props=L,this.context=Q,this.refs=J,this.updater=xe||q}var Ce=re.prototype=new se;Ce.constructor=re,Y(Ce,ne.prototype),Ce.isPureReactComponent=!0;var Ke=Array.isArray;function Be(){}var te={H:null,A:null,T:null,S:null},Ge=Object.prototype.hasOwnProperty;function we(L,Q,xe){var Ee=xe.ref;return{$$typeof:u,type:L,key:Q,ref:Ee!==void 0?Ee:null,props:xe}}function pn(L,Q){return we(L.type,Q,L.props)}function Nt(L){return typeof L=="object"&&L!==null&&L.$$typeof===u}function Ve(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(xe){return Q[xe]})}var ot=/\/+/g;function Dt(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?Ve(""+L.key):Q.toString(36)}function pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Be,Be):(L.status="pending",L.then(function(Q){L.status==="pending"&&(L.status="fulfilled",L.value=Q)},function(Q){L.status==="pending"&&(L.status="rejected",L.reason=Q)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function he(L,Q,xe,Ee,Ue){var _e=typeof L;(_e==="undefined"||_e==="boolean")&&(L=null);var Je=!1;if(L===null)Je=!0;else switch(_e){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(L.$$typeof){case u:case i:Je=!0;break;case R:return Je=L._init,he(Je(L._payload),Q,xe,Ee,Ue)}}if(Je)return Ue=Ue(L),Je=Ee===""?"."+Dt(L,0):Ee,Ke(Ue)?(xe="",Je!=null&&(xe=Je.replace(ot,"$&/")+"/"),he(Ue,Q,xe,"",function(Dr){return Dr})):Ue!=null&&(Nt(Ue)&&(Ue=pn(Ue,xe+(Ue.key==null||L&&L.key===Ue.key?"":(""+Ue.key).replace(ot,"$&/")+"/")+Je)),Q.push(Ue)),1;Je=0;var mt=Ee===""?".":Ee+":";if(Ke(L))for(var Me=0;Me<L.length;Me++)Ee=L[Me],_e=mt+Dt(Ee,Me),Je+=he(Ee,Q,xe,_e,Ue);else if(Me=F(L),typeof Me=="function")for(L=Me.call(L),Me=0;!(Ee=L.next()).done;)Ee=Ee.value,_e=mt+Dt(Ee,Me++),Je+=he(Ee,Q,xe,_e,Ue);else if(_e==="object"){if(typeof L.then=="function")return he(pe(L),Q,xe,Ee,Ue);throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Je}function Ae(L,Q,xe){if(L==null)return L;var Ee=[],Ue=0;return he(L,Ee,"","",function(_e){return Q.call(xe,_e,Ue++)}),Ee}function Ze(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(xe){(L._status===0||L._status===-1)&&(L._status=1,L._result=xe)},function(xe){(L._status===0||L._status===-1)&&(L._status=2,L._result=xe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var pt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ht={map:Ae,forEach:function(L,Q,xe){Ae(L,function(){Q.apply(this,arguments)},xe)},count:function(L){var Q=0;return Ae(L,function(){Q++}),Q},toArray:function(L){return Ae(L,function(Q){return Q})||[]},only:function(L){if(!Nt(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return bt.Activity=N,bt.Children=ht,bt.Component=ne,bt.Fragment=a,bt.Profiler=v,bt.PureComponent=re,bt.StrictMode=c,bt.Suspense=T,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,bt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return te.H.useMemoCache(L)}},bt.cache=function(L){return function(){return L.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(L,Q,xe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Ee=Y({},L.props),Ue=L.key;if(Q!=null)for(_e in Q.key!==void 0&&(Ue=""+Q.key),Q)!Ge.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(Ee[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)Ee.children=xe;else if(1<_e){for(var Je=Array(_e),mt=0;mt<_e;mt++)Je[mt]=arguments[mt+2];Ee.children=Je}return we(L.type,Ue,Ee)},bt.createContext=function(L){return L={$$typeof:w,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:m,_context:L},L},bt.createElement=function(L,Q,xe){var Ee,Ue={},_e=null;if(Q!=null)for(Ee in Q.key!==void 0&&(_e=""+Q.key),Q)Ge.call(Q,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ue[Ee]=Q[Ee]);var Je=arguments.length-2;if(Je===1)Ue.children=xe;else if(1<Je){for(var mt=Array(Je),Me=0;Me<Je;Me++)mt[Me]=arguments[Me+2];Ue.children=mt}if(L&&L.defaultProps)for(Ee in Je=L.defaultProps,Je)Ue[Ee]===void 0&&(Ue[Ee]=Je[Ee]);return we(L,_e,Ue)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(L){return{$$typeof:C,render:L}},bt.isValidElement=Nt,bt.lazy=function(L){return{$$typeof:R,_payload:{_status:-1,_result:L},_init:Ze}},bt.memo=function(L,Q){return{$$typeof:E,type:L,compare:Q===void 0?null:Q}},bt.startTransition=function(L){var Q=te.T,xe={};te.T=xe;try{var Ee=L(),Ue=te.S;Ue!==null&&Ue(xe,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Be,pt)}catch(_e){pt(_e)}finally{Q!==null&&xe.types!==null&&(Q.types=xe.types),te.T=Q}},bt.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},bt.use=function(L){return te.H.use(L)},bt.useActionState=function(L,Q,xe){return te.H.useActionState(L,Q,xe)},bt.useCallback=function(L,Q){return te.H.useCallback(L,Q)},bt.useContext=function(L){return te.H.useContext(L)},bt.useDebugValue=function(){},bt.useDeferredValue=function(L,Q){return te.H.useDeferredValue(L,Q)},bt.useEffect=function(L,Q){return te.H.useEffect(L,Q)},bt.useEffectEvent=function(L){return te.H.useEffectEvent(L)},bt.useId=function(){return te.H.useId()},bt.useImperativeHandle=function(L,Q,xe){return te.H.useImperativeHandle(L,Q,xe)},bt.useInsertionEffect=function(L,Q){return te.H.useInsertionEffect(L,Q)},bt.useLayoutEffect=function(L,Q){return te.H.useLayoutEffect(L,Q)},bt.useMemo=function(L,Q){return te.H.useMemo(L,Q)},bt.useOptimistic=function(L,Q){return te.H.useOptimistic(L,Q)},bt.useReducer=function(L,Q,xe){return te.H.useReducer(L,Q,xe)},bt.useRef=function(L){return te.H.useRef(L)},bt.useState=function(L){return te.H.useState(L)},bt.useSyncExternalStore=function(L,Q,xe){return te.H.useSyncExternalStore(L,Q,xe)},bt.useTransition=function(){return te.H.useTransition()},bt.version="19.2.0",bt}var Ug;function nu(){return Ug||(Ug=1,Ah.exports=Q2()),Ah.exports}var me=nu(),Sh={exports:{}},Hl={},Ch={exports:{}},Th={};var zg;function Z2(){return zg||(zg=1,(function(u){function i(he,Ae){var Ze=he.length;he.push(Ae);e:for(;0<Ze;){var pt=Ze-1>>>1,ht=he[pt];if(0<v(ht,Ae))he[pt]=Ae,he[Ze]=ht,Ze=pt;else break e}}function a(he){return he.length===0?null:he[0]}function c(he){if(he.length===0)return null;var Ae=he[0],Ze=he.pop();if(Ze!==Ae){he[0]=Ze;e:for(var pt=0,ht=he.length,L=ht>>>1;pt<L;){var Q=2*(pt+1)-1,xe=he[Q],Ee=Q+1,Ue=he[Ee];if(0>v(xe,Ze))Ee<ht&&0>v(Ue,xe)?(he[pt]=Ue,he[Ee]=Ze,pt=Ee):(he[pt]=xe,he[Q]=Ze,pt=Q);else if(Ee<ht&&0>v(Ue,Ze))he[pt]=Ue,he[Ee]=Ze,pt=Ee;else break e}}return Ae}function v(he,Ae){var Ze=he.sortIndex-Ae.sortIndex;return Ze!==0?Ze:he.id-Ae.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;u.unstable_now=function(){return m.now()}}else{var w=Date,C=w.now();u.unstable_now=function(){return w.now()-C}}var T=[],E=[],R=1,N=null,P=3,F=!1,q=!1,Y=!1,J=!1,ne=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ce(he){for(var Ae=a(E);Ae!==null;){if(Ae.callback===null)c(E);else if(Ae.startTime<=he)c(E),Ae.sortIndex=Ae.expirationTime,i(T,Ae);else break;Ae=a(E)}}function Ke(he){if(Y=!1,Ce(he),!q)if(a(T)!==null)q=!0,Be||(Be=!0,Ve());else{var Ae=a(E);Ae!==null&&pe(Ke,Ae.startTime-he)}}var Be=!1,te=-1,Ge=5,we=-1;function pn(){return J?!0:!(u.unstable_now()-we<Ge)}function Nt(){if(J=!1,Be){var he=u.unstable_now();we=he;var Ae=!0;try{e:{q=!1,Y&&(Y=!1,se(te),te=-1),F=!0;var Ze=P;try{t:{for(Ce(he),N=a(T);N!==null&&!(N.expirationTime>he&&pn());){var pt=N.callback;if(typeof pt=="function"){N.callback=null,P=N.priorityLevel;var ht=pt(N.expirationTime<=he);if(he=u.unstable_now(),typeof ht=="function"){N.callback=ht,Ce(he),Ae=!0;break t}N===a(T)&&c(T),Ce(he)}else c(T);N=a(T)}if(N!==null)Ae=!0;else{var L=a(E);L!==null&&pe(Ke,L.startTime-he),Ae=!1}}break e}finally{N=null,P=Ze,F=!1}Ae=void 0}}finally{Ae?Ve():Be=!1}}}var Ve;if(typeof re=="function")Ve=function(){re(Nt)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,Dt=ot.port2;ot.port1.onmessage=Nt,Ve=function(){Dt.postMessage(null)}}else Ve=function(){ne(Nt,0)};function pe(he,Ae){te=ne(function(){he(u.unstable_now())},Ae)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(he){he.callback=null},u.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<he?Math.floor(1e3/he):5},u.unstable_getCurrentPriorityLevel=function(){return P},u.unstable_next=function(he){switch(P){case 1:case 2:case 3:var Ae=3;break;default:Ae=P}var Ze=P;P=Ae;try{return he()}finally{P=Ze}},u.unstable_requestPaint=function(){J=!0},u.unstable_runWithPriority=function(he,Ae){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var Ze=P;P=he;try{return Ae()}finally{P=Ze}},u.unstable_scheduleCallback=function(he,Ae,Ze){var pt=u.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?pt+Ze:pt):Ze=pt,he){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=Ze+ht,he={id:R++,callback:Ae,priorityLevel:he,startTime:Ze,expirationTime:ht,sortIndex:-1},Ze>pt?(he.sortIndex=Ze,i(E,he),a(T)===null&&he===a(E)&&(Y?(se(te),te=-1):Y=!0,pe(Ke,Ze-pt))):(he.sortIndex=ht,i(T,he),q||F||(q=!0,Be||(Be=!0,Ve()))),he},u.unstable_shouldYield=pn,u.unstable_wrapCallback=function(he){var Ae=P;return function(){var Ze=P;P=Ae;try{return he.apply(this,arguments)}finally{P=Ze}}}})(Th)),Th}var Fg;function J2(){return Fg||(Fg=1,Ch.exports=Z2()),Ch.exports}var Oh={exports:{}},Fr={};var Hg;function $2(){if(Hg)return Fr;Hg=1;var u=nu();function i(T){var E="https://react.dev/errors/"+T;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)E+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+T+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var c={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},v=Symbol.for("react.portal");function m(T,E,R){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:N==null?null:""+N,children:T,containerInfo:E,implementation:R}}var w=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(T,E){if(T==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Fr.createPortal=function(T,E){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(i(299));return m(T,E,null,R)},Fr.flushSync=function(T){var E=w.T,R=c.p;try{if(w.T=null,c.p=2,T)return T()}finally{w.T=E,c.p=R,c.d.f()}},Fr.preconnect=function(T,E){typeof T=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,c.d.C(T,E))},Fr.prefetchDNS=function(T){typeof T=="string"&&c.d.D(T)},Fr.preinit=function(T,E){if(typeof T=="string"&&E&&typeof E.as=="string"){var R=E.as,N=C(R,E.crossOrigin),P=typeof E.integrity=="string"?E.integrity:void 0,F=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;R==="style"?c.d.S(T,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:N,integrity:P,fetchPriority:F}):R==="script"&&c.d.X(T,{crossOrigin:N,integrity:P,fetchPriority:F,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Fr.preinitModule=function(T,E){if(typeof T=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var R=C(E.as,E.crossOrigin);c.d.M(T,{crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&c.d.M(T)},Fr.preload=function(T,E){if(typeof T=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var R=E.as,N=C(R,E.crossOrigin);c.d.L(T,R,{crossOrigin:N,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Fr.preloadModule=function(T,E){if(typeof T=="string")if(E){var R=C(E.as,E.crossOrigin);c.d.m(T,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else c.d.m(T)},Fr.requestFormReset=function(T){c.d.r(T)},Fr.unstable_batchedUpdates=function(T,E){return T(E)},Fr.useFormState=function(T,E,R){return w.H.useFormState(T,E,R)},Fr.useFormStatus=function(){return w.H.useHostTransitionStatus()},Fr.version="19.2.0",Fr}var Vg;function ev(){if(Vg)return Oh.exports;Vg=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(i){console.error(i)}}return u(),Oh.exports=$2(),Oh.exports}var qg;function tv(){if(qg)return Hl;qg=1;var u=J2(),i=nu(),a=ev();function c(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function w(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function C(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function T(e){if(m(e)!==e)throw Error(c(188))}function E(e){var n=e.alternate;if(!n){if(n=m(e),n===null)throw Error(c(188));return n!==e?null:e}for(var l=e,g=n;;){var b=l.return;if(b===null)break;var A=b.alternate;if(A===null){if(g=b.return,g!==null){l=g;continue}break}if(b.child===A.child){for(A=b.child;A;){if(A===l)return T(b),e;if(A===g)return T(b),n;A=A.sibling}throw Error(c(188))}if(l.return!==g.return)l=b,g=A;else{for(var I=!1,j=b.child;j;){if(j===l){I=!0,l=b,g=A;break}if(j===g){I=!0,g=b,l=A;break}j=j.sibling}if(!I){for(j=A.child;j;){if(j===l){I=!0,l=A,g=b;break}if(j===g){I=!0,g=A,l=b;break}j=j.sibling}if(!I)throw Error(c(189))}}if(l.alternate!==g)throw Error(c(190))}if(l.tag!==3)throw Error(c(188));return l.stateNode.current===l?e:n}function R(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=R(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,P=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Ke=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),pn=Symbol.for("react.memo_cache_sentinel"),Nt=Symbol.iterator;function Ve(e){return e===null||typeof e!="object"?null:(e=Nt&&e[Nt]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Symbol.for("react.client.reference");function Dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ot?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case ne:return"Profiler";case J:return"StrictMode";case Ke:return"Suspense";case Be:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case re:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case Ce:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return n=e.displayName||null,n!==null?n:Dt(e.type)||"Memo";case Ge:n=e._payload,e=e._init;try{return Dt(e(n))}catch{}}return null}var pe=Array.isArray,he=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze={pending:!1,data:null,method:null,action:null},pt=[],ht=-1;function L(e){return{current:e}}function Q(e){0>ht||(e.current=pt[ht],pt[ht]=null,ht--)}function xe(e,n){ht++,pt[ht]=e.current,e.current=n}var Ee=L(null),Ue=L(null),_e=L(null),Je=L(null);function mt(e,n){switch(xe(_e,n),xe(Ue,e),xe(Ee,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?ag(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=ag(n),e=sg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(Ee),xe(Ee,e)}function Me(){Q(Ee),Q(Ue),Q(_e)}function Dr(e){e.memoizedState!==null&&xe(Je,e);var n=Ee.current,l=sg(n,e.type);n!==l&&(xe(Ue,e),xe(Ee,l))}function Rn(e){Ue.current===e&&(Q(Ee),Q(Ue)),Je.current===e&&(Q(Je),jl._currentValue=Ze)}var Mt,Ct;function Mr(e){if(Mt===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);Mt=n&&n[1]||"",Ct=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+e+Ct}var jn=!1;function qi(e,n){if(!e||jn)return"";jn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(n){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(ye){var de=ye}Reflect.construct(e,[],Oe)}else{try{Oe.call()}catch(ye){de=ye}e.call(Oe.prototype)}}else{try{throw Error()}catch(ye){de=ye}(Oe=e())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(ye){if(ye&&de&&typeof ye.stack=="string")return[ye.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),I=A[0],j=A[1];if(I&&j){var W=I.split(`
`),fe=j.split(`
`);for(b=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;b<fe.length&&!fe[b].includes("DetermineComponentFrameRoot");)b++;if(g===W.length||b===fe.length)for(g=W.length-1,b=fe.length-1;1<=g&&0<=b&&W[g]!==fe[b];)b--;for(;1<=g&&0<=b;g--,b--)if(W[g]!==fe[b]){if(g!==1||b!==1)do if(g--,b--,0>b||W[g]!==fe[b]){var be=`
`+W[g].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=g&&0<=b);break}}}finally{jn=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?Mr(l):""}function Gn(e,n){switch(e.tag){case 26:case 27:case 5:return Mr(e.type);case 16:return Mr("Lazy");case 13:return e.child!==n&&n!==null?Mr("Suspense Fallback"):Mr("Suspense");case 19:return Mr("SuspenseList");case 0:case 15:return qi(e.type,!1);case 11:return qi(e.type.render,!1);case 1:return qi(e.type,!0);case 31:return Mr("Activity");default:return""}}function Jt(e){try{var n="",l=null;do n+=Gn(e,l),l=e,e=e.return;while(e);return n}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Rt=Object.prototype.hasOwnProperty,Mi=u.unstable_scheduleCallback,Fe=u.unstable_cancelCallback,Aa=u.unstable_shouldYield,la=u.unstable_requestPaint,wn=u.unstable_now,Gi=u.unstable_getCurrentPriorityLevel,Pn=u.unstable_ImmediatePriority,fi=u.unstable_UserBlockingPriority,vr=u.unstable_NormalPriority,Ln=u.unstable_LowPriority,Sa=u.unstable_IdlePriority,Yi=u.log,Xi=u.unstable_setDisableYieldValue,$t=null,De=null;function Bt(e){if(typeof Yi=="function"&&Xi(e),De&&typeof De.setStrictMode=="function")try{De.setStrictMode($t,e)}catch{}}var Ie=Math.clz32?Math.clz32:ua,nn=Math.log,Vr=Math.LN2;function ua(e){return e>>>=0,e===0?32:31-(nn(e)/Vr|0)|0}var ze=256,Tt=262144,qr=4194304;function Zr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ca(e,n,l){var g=e.pendingLanes;if(g===0)return 0;var b=0,A=e.suspendedLanes,I=e.pingedLanes;e=e.warmLanes;var j=g&134217727;return j!==0?(g=j&~A,g!==0?b=Zr(g):(I&=j,I!==0?b=Zr(I):l||(l=j&~e,l!==0&&(b=Zr(l))))):(j=g&~A,j!==0?b=Zr(j):I!==0?b=Zr(I):l||(l=g&~e,l!==0&&(b=Zr(l)))),b===0?0:n!==0&&n!==b&&(n&A)===0&&(A=b&-b,l=n&-n,A>=l||A===32&&(l&4194048)!==0)?n:b}function Yn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ps(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xn(){var e=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),e}function xr(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function wr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Br(e,n,l,g,b,A){var I=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var j=e.entanglements,W=e.expirationTimes,fe=e.hiddenUpdates;for(l=I&~l;0<l;){var be=31-Ie(l),Oe=1<<be;j[be]=0,W[be]=-1;var de=fe[be];if(de!==null)for(fe[be]=null,be=0;be<de.length;be++){var ye=de[be];ye!==null&&(ye.lane&=-536870913)}l&=~Oe}g!==0&&Ca(e,g,0),A!==0&&b===0&&e.tag!==0&&(e.suspendedLanes|=A&~(I&~n))}function Ca(e,n,l){e.pendingLanes|=n,e.suspendedLanes&=~n;var g=31-Ie(n);e.entangledLanes|=n,e.entanglements[g]=e.entanglements[g]|1073741824|l&261930}function Vt(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var g=31-Ie(l),b=1<<g;b&n|e[g]&n&&(e[g]|=n),l&=~b}}function An(e,n){var l=n&-n;return l=(l&42)!==0?1:$n(l),(l&(e.suspendedLanes|n))!==0?0:l}function $n(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function er(){var e=Ae.p;return e!==0?e:(e=window.event,e===void 0?32:Ng(e.type))}function He(e,n){var l=Ae.p;try{return Ae.p=e,n()}finally{Ae.p=l}}var br=Math.random().toString(36).slice(2),rn="__reactFiber$"+br,Pt="__reactProps$"+br,Un="__reactContainer$"+br,hi="__reactEvents$"+br,$a="__reactListeners$"+br,Kn="__reactHandles$"+br,Us="__reactResources$"+br,Gr="__reactMarker$"+br;function Er(e){delete e[rn],delete e[Pt],delete e[hi],delete e[$a],delete e[Kn]}function bn(e){var n=e[rn];if(n)return n;for(var l=e.parentNode;l;){if(n=l[Un]||l[rn]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=dg(e);e!==null;){if(l=e[rn])return l;e=dg(e)}return n}e=l,l=e.parentNode}return null}function st(e){if(e=e[rn]||e[Un]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function kr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(c(33))}function Sn(e){var n=e[Us];return n||(n=e[Us]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Cn(e){e[Gr]=!0}var Te=new Set,Ta={};function Xt(e,n){_r(e,n),_r(e+"Capture",n)}function _r(e,n){for(Ta[e]=n,e=0;e<n.length;e++)Te.add(n[e])}var Ki=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},It={};function Ot(e){return Rt.call(It,e)?!0:Rt.call(Ut,e)?!1:Ki.test(e)?It[e]=!0:(Ut[e]=!0,!1)}function xt(e,n,l){if(Ot(n))if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var g=n.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+l)}}function Wi(e,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+l)}}function jr(e,n,l,g){if(g===null)e.removeAttribute(l);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(n,l,""+g)}}function Lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ar(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mo(e,n,l){var g=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,A=g.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return b.call(this)},set:function(I){l=""+I,A.call(this,I)}}),Object.defineProperty(e,n,{enumerable:g.enumerable}),{getValue:function(){return l},setValue:function(I){l=""+I},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function cn(e){if(!e._valueTracker){var n=Ar(e)?"checked":"value";e._valueTracker=mo(e,n,""+e[n])}}function Jr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),g="";return e&&(g=Ar(e)?e.checked?"true":"false":e.value),e=g,e!==l?(n.setValue(e),!0):!1}function Kt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $r=/[\n"\\]/g;function vt(e){return e.replace($r,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function mn(e,n,l,g,b,A,I,j){e.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.type=I:e.removeAttribute("type"),n!=null?I==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Lt(n)):e.value!==""+Lt(n)&&(e.value=""+Lt(n)):I!=="submit"&&I!=="reset"||e.removeAttribute("value"),n!=null?V(e,I,Lt(n)):l!=null?V(e,I,Lt(l)):g!=null&&e.removeAttribute("value"),b==null&&A!=null&&(e.defaultChecked=!!A),b!=null&&(e.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+Lt(j):e.removeAttribute("name")}function le(e,n,l,g,b,A,I,j){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(e.type=A),n!=null||l!=null){if(!(A!=="submit"&&A!=="reset"||n!=null)){cn(e);return}l=l!=null?""+Lt(l):"",n=n!=null?""+Lt(n):l,j||n===e.value||(e.value=n),e.defaultValue=n}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,e.checked=j?e.checked:!!g,e.defaultChecked=!!g,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(e.name=I),cn(e)}function V(e,n,l){n==="number"&&Kt(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Ye(e,n,l,g){if(e=e.options,n){n={};for(var b=0;b<l.length;b++)n["$"+l[b]]=!0;for(l=0;l<e.length;l++)b=n.hasOwnProperty("$"+e[l].value),e[l].selected!==b&&(e[l].selected=b),b&&g&&(e[l].defaultSelected=!0)}else{for(l=""+Lt(l),n=null,b=0;b<e.length;b++){if(e[b].value===l){e[b].selected=!0,g&&(e[b].defaultSelected=!0);return}n!==null||e[b].disabled||(n=e[b])}n!==null&&(n.selected=!0)}}function In(e,n,l){if(n!=null&&(n=""+Lt(n),n!==e.value&&(e.value=n),l==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=l!=null?""+Lt(l):""}function tr(e,n,l,g){if(n==null){if(g!=null){if(l!=null)throw Error(c(92));if(pe(g)){if(1<g.length)throw Error(c(93));g=g[0]}l=g}l==null&&(l=""),n=l}l=Lt(n),e.defaultValue=l,g=e.textContent,g===l&&g!==""&&g!==null&&(e.value=g),cn(e)}function Qi(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dt(e,n,l){var g=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?g?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":g?e.setProperty(n,l):typeof l!="number"||l===0||zs.has(n)?n==="float"?e.cssFloat=l:e[n]=(""+l).trim():e[n]=l+"px"}function et(e,n,l){if(n!=null&&typeof n!="object")throw Error(c(62));if(e=e.style,l!=null){for(var g in l)!l.hasOwnProperty(g)||n!=null&&n.hasOwnProperty(g)||(g.indexOf("--")===0?e.setProperty(g,""):g==="float"?e.cssFloat="":e[g]="");for(var b in n)g=n[b],n.hasOwnProperty(b)&&l[b]!==g&&dt(e,b,g)}else for(var A in n)n.hasOwnProperty(A)&&dt(e,A,n[A])}function an(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yr(e){return Sr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function cr(){}var Pr=null;function es(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fn=null,en=null;function zn(e){var n=st(e);if(n&&(e=n.stateNode)){var l=e[Pt]||null;e:switch(e=n.stateNode,n.type){case"input":if(mn(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+vt(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var g=l[n];if(g!==e&&g.form===e.form){var b=g[Pt]||null;if(!b)throw Error(c(90));mn(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(n=0;n<l.length;n++)g=l[n],g.form===e.form&&Jr(g)}break e;case"textarea":In(e,l.value,l.defaultValue);break e;case"select":n=l.value,n!=null&&Ye(e,!!l.multiple,n,!1)}}}var tt=!1;function fa(e,n,l){if(tt)return e(n,l);tt=!0;try{var g=e(n);return g}finally{if(tt=!1,(fn!==null||en!==null)&&(ku(),fn&&(n=fn,e=en,en=fn=null,zn(n),e)))for(n=0;n<e.length;n++)zn(e[n])}}function ut(e,n){var l=e.stateNode;if(l===null)return null;var g=l[Pt]||null;if(g===null)return null;l=g[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(e=e.type,g=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!g;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(c(231,n,typeof l));return l}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fs=!1;if(zt)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Fs=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Fs=!1}var Xr=null,ei=null,ha=null;function ti(){if(ha)return ha;var e,n=ei,l=n.length,g,b="value"in Xr?Xr.value:Xr.textContent,A=b.length;for(e=0;e<l&&n[e]===b[e];e++);var I=l-e;for(g=1;g<=I&&n[l-g]===b[A-g];g++);return ha=b.slice(e,1<g?1-g:void 0)}function ni(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function di(){return!0}function Hs(){return!1}function En(e){function n(l,g,b,A,I){this._reactName=l,this._targetInst=b,this.type=g,this.nativeEvent=A,this.target=I,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(l=e[j],this[j]=l?l(A):A[j]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?di:Hs,this.isPropagationStopped=Hs,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),n}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wn=En(Kr),gi=N({},Kr,{view:0,detail:0}),Oa=En(gi),da,Vs,Na,ts=N({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(da=e.screenX-Na.screenX,Vs=e.screenY-Na.screenY):Vs=da=0,Na=e),da)},movementY:function(e){return"movementY"in e?e.movementY:Vs}}),qt=En(ts),ns=N({},ts,{dataTransfer:0}),Ra=En(ns),Wr=N({},gi,{relatedTarget:0}),ga=En(Wr),ge=N({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),wt=En(ge),Qn=N({},Kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pi=En(Qn),rs=N({},Kr,{data:0}),is=En(rs),qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Fn[e])?!!n[e]:!1}function mi(){return yn}var vn=N({},gi,{key:function(e){if(e.key){var n=qs[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zi=En(vn),Bi=N({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wt=En(Bi),nt=N({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),Ys=En(nt),Gt=N({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),yi=En(Gt),Li=N({},ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),as=En(Li),Ur=N({},Kr,{newState:0,oldState:0}),ss=En(Ur),vo=[9,13,27,32],Ji=zt&&"CompositionEvent"in window,vi=null;zt&&"documentMode"in document&&(vi=document.documentMode);var xo=zt&&"TextEvent"in window&&!vi,os=zt&&(!Ji||vi&&8<vi&&11>=vi),xi=" ",ls=!1;function Xs(e,n){switch(e){case"keyup":return vo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $i=!1;function wi(e,n){switch(e){case"compositionend":return pa(n);case"keypress":return n.which!==32?null:(ls=!0,xi);case"textInput":return e=n.data,e===xi&&ls?null:e;default:return null}}function us(e,n){if($i)return e==="compositionend"||!Ji&&Xs(e,n)?(e=ti(),ha=ei=Xr=null,$i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return os&&n.locale!=="ko"?null:n.data;default:return null}}var Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Cr[e.type]:n==="textarea"}function zr(e,n,l,g){fn?en?en.push(g):en=[g]:fn=g,n=Vu(n,"onChange"),0<n.length&&(l=new Wn("onChange","change",null,l,g),e.push({event:l,listeners:n}))}var ma=null,ea=null;function ol(e){$1(e,0)}function Da(e){var n=kr(e);if(Jr(n))return e}function dr(e,n){if(e==="change")return n}var ri=!1;if(zt){var sn;if(zt){var ii="oninput"in document;if(!ii){var ft=document.createElement("div");ft.setAttribute("oninput","return;"),ii=typeof ft.oninput=="function"}sn=ii}else sn=!1;ri=sn&&(!document.documentMode||9<document.documentMode)}function Ma(){ma&&(ma.detachEvent("onpropertychange",M),ea=ma=null)}function M(e){if(e.propertyName==="value"&&Da(ea)){var n=[];zr(n,ea,e,es(e)),fa(ol,n)}}function t(e,n,l){e==="focusin"?(Ma(),ma=n,ea=l,ma.attachEvent("onpropertychange",M)):e==="focusout"&&Ma()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Da(ea)}function o(e,n){if(e==="click")return Da(n)}function f(e,n){if(e==="input"||e==="change")return Da(n)}function d(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var p=typeof Object.is=="function"?Object.is:d;function s(e,n){if(p(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),g=Object.keys(n);if(l.length!==g.length)return!1;for(g=0;g<l.length;g++){var b=l[g];if(!Rt.call(n,b)||!p(e[b],n[b]))return!1}return!0}function h(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,n){var l=h(e);e=0;for(var g;l;){if(l.nodeType===3){if(g=e+l.textContent.length,e<=n&&g>=n)return{node:l,offset:n-e};e=g}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=h(l)}}function x(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?x(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function _(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Kt(e.document);n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=Kt(e.document)}return n}function S(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var O=zt&&"documentMode"in document&&11>=document.documentMode,D=null,B=null,k=null,U=!1;function z(e,n,l){var g=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;U||D==null||D!==Kt(g)||(g=D,"selectionStart"in g&&S(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),k&&s(k,g)||(k=g,g=Vu(B,"onSelect"),0<g.length&&(n=new Wn("onSelect","select",null,n,l),e.push({event:n,listeners:g}),n.target=D)))}function G(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var H={animationend:G("Animation","AnimationEnd"),animationiteration:G("Animation","AnimationIteration"),animationstart:G("Animation","AnimationStart"),transitionrun:G("Transition","TransitionRun"),transitionstart:G("Transition","TransitionStart"),transitioncancel:G("Transition","TransitionCancel"),transitionend:G("Transition","TransitionEnd")},K={},X={};zt&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);function ee(e){if(K[e])return K[e];if(!H[e])return e;var n=H[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in X)return K[e]=n[l];return e}var ae=ee("animationend"),oe=ee("animationiteration"),ce=ee("animationstart"),ve=ee("transitionrun"),Ne=ee("transitionstart"),je=ee("transitioncancel"),Re=ee("transitionend"),ke=new Map,Pe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pe.push("scrollEnd");function Le(e,n){ke.set(e,n),Xt(n,[e])}var qe=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},it=[],yt=0,_t=0;function gr(){for(var e=yt,n=_t=yt=0;n<e;){var l=it[n];it[n++]=null;var g=it[n];it[n++]=null;var b=it[n];it[n++]=null;var A=it[n];if(it[n++]=null,g!==null&&b!==null){var I=g.pending;I===null?b.next=b:(b.next=I.next,I.next=b),g.pending=b}A!==0&&Ks(l,b,A)}}function gt(e,n,l,g){it[yt++]=e,it[yt++]=n,it[yt++]=l,it[yt++]=g,_t|=g,e.lanes|=g,e=e.alternate,e!==null&&(e.lanes|=g)}function rr(e,n,l,g){return gt(e,n,l,g),ir(e)}function Dn(e,n){return gt(e,null,null,n),ir(e)}function Ks(e,n,l){e.lanes|=l;var g=e.alternate;g!==null&&(g.lanes|=l);for(var b=!1,A=e.return;A!==null;)A.childLanes|=l,g=A.alternate,g!==null&&(g.childLanes|=l),A.tag===22&&(e=A.stateNode,e===null||e._visibility&1||(b=!0)),e=A,A=A.return;return e.tag===3?(A=e.stateNode,b&&n!==null&&(b=31-Ie(l),e=A.hiddenUpdates,g=e[b],g===null?e[b]=[n]:g.push(n),n.lane=l|536870912),A):null}function ir(e){if(50<Rl)throw Rl=0,Xf=null,Error(c(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ai={};function ll(e,n,l,g){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(e,n,l,g){return new ll(e,n,l,g)}function Pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ba(e,n){var l=e.alternate;return l===null?(l=bi(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Ld(e,n){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,n=l.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function su(e,n,l,g,b,A){var I=0;if(g=e,typeof e=="function")Pc(e)&&(I=1);else if(typeof e=="string")I=L2(e,l,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=bi(31,l,n,b),e.elementType=we,e.lanes=A,e;case Y:return Ws(l.children,b,A,n);case J:I=8,b|=24;break;case ne:return e=bi(12,l,n,b|2),e.elementType=ne,e.lanes=A,e;case Ke:return e=bi(13,l,n,b),e.elementType=Ke,e.lanes=A,e;case Be:return e=bi(19,l,n,b),e.elementType=Be,e.lanes=A,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case re:I=10;break e;case se:I=9;break e;case Ce:I=11;break e;case te:I=14;break e;case Ge:I=16,g=null;break e}I=29,l=Error(c(130,e===null?"null":typeof e,"")),g=null}return n=bi(I,l,n,b),n.elementType=e,n.type=g,n.lanes=A,n}function Ws(e,n,l,g){return e=bi(7,e,g,n),e.lanes=l,e}function Uc(e,n,l){return e=bi(6,e,null,n),e.lanes=l,e}function kd(e){var n=bi(18,null,null,0);return n.stateNode=e,n}function zc(e,n,l){return n=bi(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var jd=new WeakMap;function ki(e,n){if(typeof e=="object"&&e!==null){var l=jd.get(e);return l!==void 0?l:(n={value:e,source:n,stack:Jt(n)},jd.set(e,n),n)}return{value:e,source:n,stack:Jt(n)}}var wo=[],bo=0,ou=null,ul=0,ji=[],Pi=0,cs=null,ya=1,va="";function La(e,n){wo[bo++]=ul,wo[bo++]=ou,ou=e,ul=n}function Pd(e,n,l){ji[Pi++]=ya,ji[Pi++]=va,ji[Pi++]=cs,cs=e;var g=ya;e=va;var b=32-Ie(g)-1;g&=~(1<<b),l+=1;var A=32-Ie(n)+b;if(30<A){var I=b-b%5;A=(g&(1<<I)-1).toString(32),g>>=I,b-=I,ya=1<<32-Ie(n)+b|l<<b|g,va=A+e}else ya=1<<A|l<<b|g,va=e}function Fc(e){e.return!==null&&(La(e,1),Pd(e,1,0))}function Hc(e){for(;e===ou;)ou=wo[--bo],wo[bo]=null,ul=wo[--bo],wo[bo]=null;for(;e===cs;)cs=ji[--Pi],ji[Pi]=null,va=ji[--Pi],ji[Pi]=null,ya=ji[--Pi],ji[Pi]=null}function Ud(e,n){ji[Pi++]=ya,ji[Pi++]=va,ji[Pi++]=cs,ya=n.id,va=n.overflow,cs=e}var Tr=null,Tn=null,Yt=!1,fs=null,Ui=!1,Vc=Error(c(519));function hs(e){var n=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(ki(n,e)),Vc}function zd(e){var n=e.stateNode,l=e.type,g=e.memoizedProps;switch(n[rn]=e,n[Pt]=g,l){case"dialog":jt("cancel",n),jt("close",n);break;case"iframe":case"object":case"embed":jt("load",n);break;case"video":case"audio":for(l=0;l<Dl.length;l++)jt(Dl[l],n);break;case"source":jt("error",n);break;case"img":case"image":case"link":jt("error",n),jt("load",n);break;case"details":jt("toggle",n);break;case"input":jt("invalid",n),le(n,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":jt("invalid",n);break;case"textarea":jt("invalid",n),tr(n,g.value,g.defaultValue,g.children)}l=g.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||g.suppressHydrationWarning===!0||rg(n.textContent,l)?(g.popover!=null&&(jt("beforetoggle",n),jt("toggle",n)),g.onScroll!=null&&jt("scroll",n),g.onScrollEnd!=null&&jt("scrollend",n),g.onClick!=null&&(n.onclick=cr),n=!0):n=!1,n||hs(e,!0)}function Fd(e){for(Tr=e.return;Tr;)switch(Tr.tag){case 5:case 31:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:Tr=Tr.return}}function Eo(e){if(e!==Tr)return!1;if(!Yt)return Fd(e),Yt=!0,!1;var n=e.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||lh(e.type,e.memoizedProps)),l=!l),l&&Tn&&hs(e),Fd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Tn=hg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Tn=hg(e)}else n===27?(n=Tn,Cs(e.type)?(e=dh,dh=null,Tn=e):Tn=n):Tn=Tr?Fi(e.stateNode.nextSibling):null;return!0}function Qs(){Tn=Tr=null,Yt=!1}function qc(){var e=fs;return e!==null&&(ui===null?ui=e:ui.push.apply(ui,e),fs=null),e}function cl(e){fs===null?fs=[e]:fs.push(e)}var Gc=L(null),Zs=null,ka=null;function ds(e,n,l){xe(Gc,n._currentValue),n._currentValue=l}function ja(e){e._currentValue=Gc.current,Q(Gc)}function Yc(e,n,l){for(;e!==null;){var g=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,g!==null&&(g.childLanes|=n)):g!==null&&(g.childLanes&n)!==n&&(g.childLanes|=n),e===l)break;e=e.return}}function Xc(e,n,l,g){var b=e.child;for(b!==null&&(b.return=e);b!==null;){var A=b.dependencies;if(A!==null){var I=b.child;A=A.firstContext;e:for(;A!==null;){var j=A;A=b;for(var W=0;W<n.length;W++)if(j.context===n[W]){A.lanes|=l,j=A.alternate,j!==null&&(j.lanes|=l),Yc(A.return,l,e),g||(I=null);break e}A=j.next}}else if(b.tag===18){if(I=b.return,I===null)throw Error(c(341));I.lanes|=l,A=I.alternate,A!==null&&(A.lanes|=l),Yc(I,l,e),I=null}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===e){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}}function _o(e,n,l,g){e=null;for(var b=n,A=!1;b!==null;){if(!A){if((b.flags&524288)!==0)A=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var I=b.alternate;if(I===null)throw Error(c(387));if(I=I.memoizedProps,I!==null){var j=b.type;p(b.pendingProps.value,I.value)||(e!==null?e.push(j):e=[j])}}else if(b===Je.current){if(I=b.alternate,I===null)throw Error(c(387));I.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(e!==null?e.push(jl):e=[jl])}b=b.return}e!==null&&Xc(n,e,l,g),n.flags|=262144}function lu(e){for(e=e.firstContext;e!==null;){if(!p(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Js(e){Zs=e,ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Or(e){return Hd(Zs,e)}function uu(e,n){return Zs===null&&Js(e),Hd(e,n)}function Hd(e,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},ka===null){if(e===null)throw Error(c(308));ka=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ka=ka.next=n;return l}var Iy=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(l,g){e.push(g)}};this.abort=function(){n.aborted=!0,e.forEach(function(l){return l()})}},Dy=u.unstable_scheduleCallback,My=u.unstable_NormalPriority,ar={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new Iy,data:new Map,refCount:0}}function fl(e){e.refCount--,e.refCount===0&&Dy(My,function(){e.controller.abort()})}var hl=null,Wc=0,Ao=0,So=null;function By(e,n){if(hl===null){var l=hl=[];Wc=0,Ao=$f(),So={status:"pending",value:void 0,then:function(g){l.push(g)}}}return Wc++,n.then(Vd,Vd),n}function Vd(){if(--Wc===0&&hl!==null){So!==null&&(So.status="fulfilled");var e=hl;hl=null,Ao=0,So=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ly(e,n){var l=[],g={status:"pending",value:null,reason:null,then:function(b){l.push(b)}};return e.then(function(){g.status="fulfilled",g.value=n;for(var b=0;b<l.length;b++)(0,l[b])(n)},function(b){for(g.status="rejected",g.reason=b,b=0;b<l.length;b++)(0,l[b])(void 0)}),g}var qd=he.S;he.S=function(e,n){T1=wn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&By(e,n),qd!==null&&qd(e,n)};var $s=L(null);function Qc(){var e=$s.current;return e!==null?e:xn.pooledCache}function cu(e,n){n===null?xe($s,$s.current):xe($s,n.pool)}function Gd(){var e=Qc();return e===null?null:{parent:ar._currentValue,pool:e}}var Co=Error(c(460)),Zc=Error(c(474)),fu=Error(c(542)),hu={then:function(){}};function Yd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xd(e,n,l){switch(l=e[l],l===void 0?e.push(n):l!==n&&(n.then(cr,cr),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Wd(e),e;default:if(typeof n.status=="string")n.then(cr,cr);else{if(e=xn,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=n,e.status="pending",e.then(function(g){if(n.status==="pending"){var b=n;b.status="fulfilled",b.value=g}},function(g){if(n.status==="pending"){var b=n;b.status="rejected",b.reason=g}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Wd(e),e}throw to=n,Co}}function eo(e){try{var n=e._init;return n(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(to=l,Co):l}}var to=null;function Kd(){if(to===null)throw Error(c(459));var e=to;return to=null,e}function Wd(e){if(e===Co||e===fu)throw Error(c(483))}var To=null,dl=0;function du(e){var n=dl;return dl+=1,To===null&&(To=[]),Xd(To,e,n)}function gl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function gu(e,n){throw n.$$typeof===P?Error(c(525)):(e=Object.prototype.toString.call(n),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qd(e){function n(ie,$){if(e){var ue=ie.deletions;ue===null?(ie.deletions=[$],ie.flags|=16):ue.push($)}}function l(ie,$){if(!e)return null;for(;$!==null;)n(ie,$),$=$.sibling;return null}function g(ie){for(var $=new Map;ie!==null;)ie.key!==null?$.set(ie.key,ie):$.set(ie.index,ie),ie=ie.sibling;return $}function b(ie,$){return ie=Ba(ie,$),ie.index=0,ie.sibling=null,ie}function A(ie,$,ue){return ie.index=ue,e?(ue=ie.alternate,ue!==null?(ue=ue.index,ue<$?(ie.flags|=67108866,$):ue):(ie.flags|=67108866,$)):(ie.flags|=1048576,$)}function I(ie){return e&&ie.alternate===null&&(ie.flags|=67108866),ie}function j(ie,$,ue,Se){return $===null||$.tag!==6?($=Uc(ue,ie.mode,Se),$.return=ie,$):($=b($,ue),$.return=ie,$)}function W(ie,$,ue,Se){var at=ue.type;return at===Y?be(ie,$,ue.props.children,Se,ue.key):$!==null&&($.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Ge&&eo(at)===$.type)?($=b($,ue.props),gl($,ue),$.return=ie,$):($=su(ue.type,ue.key,ue.props,null,ie.mode,Se),gl($,ue),$.return=ie,$)}function fe(ie,$,ue,Se){return $===null||$.tag!==4||$.stateNode.containerInfo!==ue.containerInfo||$.stateNode.implementation!==ue.implementation?($=zc(ue,ie.mode,Se),$.return=ie,$):($=b($,ue.children||[]),$.return=ie,$)}function be(ie,$,ue,Se,at){return $===null||$.tag!==7?($=Ws(ue,ie.mode,Se,at),$.return=ie,$):($=b($,ue),$.return=ie,$)}function Oe(ie,$,ue){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Uc(""+$,ie.mode,ue),$.return=ie,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case F:return ue=su($.type,$.key,$.props,null,ie.mode,ue),gl(ue,$),ue.return=ie,ue;case q:return $=zc($,ie.mode,ue),$.return=ie,$;case Ge:return $=eo($),Oe(ie,$,ue)}if(pe($)||Ve($))return $=Ws($,ie.mode,ue,null),$.return=ie,$;if(typeof $.then=="function")return Oe(ie,du($),ue);if($.$$typeof===re)return Oe(ie,uu(ie,$),ue);gu(ie,$)}return null}function de(ie,$,ue,Se){var at=$!==null?$.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return at!==null?null:j(ie,$,""+ue,Se);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case F:return ue.key===at?W(ie,$,ue,Se):null;case q:return ue.key===at?fe(ie,$,ue,Se):null;case Ge:return ue=eo(ue),de(ie,$,ue,Se)}if(pe(ue)||Ve(ue))return at!==null?null:be(ie,$,ue,Se,null);if(typeof ue.then=="function")return de(ie,$,du(ue),Se);if(ue.$$typeof===re)return de(ie,$,uu(ie,ue),Se);gu(ie,ue)}return null}function ye(ie,$,ue,Se,at){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ie=ie.get(ue)||null,j($,ie,""+Se,at);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case F:return ie=ie.get(Se.key===null?ue:Se.key)||null,W($,ie,Se,at);case q:return ie=ie.get(Se.key===null?ue:Se.key)||null,fe($,ie,Se,at);case Ge:return Se=eo(Se),ye(ie,$,ue,Se,at)}if(pe(Se)||Ve(Se))return ie=ie.get(ue)||null,be($,ie,Se,at,null);if(typeof Se.then=="function")return ye(ie,$,ue,du(Se),at);if(Se.$$typeof===re)return ye(ie,$,ue,uu($,Se),at);gu($,Se)}return null}function We(ie,$,ue,Se){for(var at=null,Qt=null,$e=$,St=$=0,Ht=null;$e!==null&&St<ue.length;St++){$e.index>St?(Ht=$e,$e=null):Ht=$e.sibling;var Zt=de(ie,$e,ue[St],Se);if(Zt===null){$e===null&&($e=Ht);break}e&&$e&&Zt.alternate===null&&n(ie,$e),$=A(Zt,$,St),Qt===null?at=Zt:Qt.sibling=Zt,Qt=Zt,$e=Ht}if(St===ue.length)return l(ie,$e),Yt&&La(ie,St),at;if($e===null){for(;St<ue.length;St++)$e=Oe(ie,ue[St],Se),$e!==null&&($=A($e,$,St),Qt===null?at=$e:Qt.sibling=$e,Qt=$e);return Yt&&La(ie,St),at}for($e=g($e);St<ue.length;St++)Ht=ye($e,ie,St,ue[St],Se),Ht!==null&&(e&&Ht.alternate!==null&&$e.delete(Ht.key===null?St:Ht.key),$=A(Ht,$,St),Qt===null?at=Ht:Qt.sibling=Ht,Qt=Ht);return e&&$e.forEach(function(Is){return n(ie,Is)}),Yt&&La(ie,St),at}function lt(ie,$,ue,Se){if(ue==null)throw Error(c(151));for(var at=null,Qt=null,$e=$,St=$=0,Ht=null,Zt=ue.next();$e!==null&&!Zt.done;St++,Zt=ue.next()){$e.index>St?(Ht=$e,$e=null):Ht=$e.sibling;var Is=de(ie,$e,Zt.value,Se);if(Is===null){$e===null&&($e=Ht);break}e&&$e&&Is.alternate===null&&n(ie,$e),$=A(Is,$,St),Qt===null?at=Is:Qt.sibling=Is,Qt=Is,$e=Ht}if(Zt.done)return l(ie,$e),Yt&&La(ie,St),at;if($e===null){for(;!Zt.done;St++,Zt=ue.next())Zt=Oe(ie,Zt.value,Se),Zt!==null&&($=A(Zt,$,St),Qt===null?at=Zt:Qt.sibling=Zt,Qt=Zt);return Yt&&La(ie,St),at}for($e=g($e);!Zt.done;St++,Zt=ue.next())Zt=ye($e,ie,St,Zt.value,Se),Zt!==null&&(e&&Zt.alternate!==null&&$e.delete(Zt.key===null?St:Zt.key),$=A(Zt,$,St),Qt===null?at=Zt:Qt.sibling=Zt,Qt=Zt);return e&&$e.forEach(function(Y2){return n(ie,Y2)}),Yt&&La(ie,St),at}function gn(ie,$,ue,Se){if(typeof ue=="object"&&ue!==null&&ue.type===Y&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case F:e:{for(var at=ue.key;$!==null;){if($.key===at){if(at=ue.type,at===Y){if($.tag===7){l(ie,$.sibling),Se=b($,ue.props.children),Se.return=ie,ie=Se;break e}}else if($.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Ge&&eo(at)===$.type){l(ie,$.sibling),Se=b($,ue.props),gl(Se,ue),Se.return=ie,ie=Se;break e}l(ie,$);break}else n(ie,$);$=$.sibling}ue.type===Y?(Se=Ws(ue.props.children,ie.mode,Se,ue.key),Se.return=ie,ie=Se):(Se=su(ue.type,ue.key,ue.props,null,ie.mode,Se),gl(Se,ue),Se.return=ie,ie=Se)}return I(ie);case q:e:{for(at=ue.key;$!==null;){if($.key===at)if($.tag===4&&$.stateNode.containerInfo===ue.containerInfo&&$.stateNode.implementation===ue.implementation){l(ie,$.sibling),Se=b($,ue.children||[]),Se.return=ie,ie=Se;break e}else{l(ie,$);break}else n(ie,$);$=$.sibling}Se=zc(ue,ie.mode,Se),Se.return=ie,ie=Se}return I(ie);case Ge:return ue=eo(ue),gn(ie,$,ue,Se)}if(pe(ue))return We(ie,$,ue,Se);if(Ve(ue)){if(at=Ve(ue),typeof at!="function")throw Error(c(150));return ue=at.call(ue),lt(ie,$,ue,Se)}if(typeof ue.then=="function")return gn(ie,$,du(ue),Se);if(ue.$$typeof===re)return gn(ie,$,uu(ie,ue),Se);gu(ie,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,$!==null&&$.tag===6?(l(ie,$.sibling),Se=b($,ue),Se.return=ie,ie=Se):(l(ie,$),Se=Uc(ue,ie.mode,Se),Se.return=ie,ie=Se),I(ie)):l(ie,$)}return function(ie,$,ue,Se){try{dl=0;var at=gn(ie,$,ue,Se);return To=null,at}catch($e){if($e===Co||$e===fu)throw $e;var Qt=bi(29,$e,null,ie.mode);return Qt.lanes=Se,Qt.return=ie,Qt}finally{}}}var no=Qd(!0),Zd=Qd(!1),gs=!1;function Jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ps(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ms(e,n,l){var g=e.updateQueue;if(g===null)return null;if(g=g.shared,(tn&2)!==0){var b=g.pending;return b===null?n.next=n:(n.next=b.next,b.next=n),g.pending=n,n=ir(e),Ks(e,null,l),n}return gt(e,g,n,l),ir(e)}function pl(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var g=n.lanes;g&=e.pendingLanes,l|=g,n.lanes=l,Vt(e,l)}}function ef(e,n){var l=e.updateQueue,g=e.alternate;if(g!==null&&(g=g.updateQueue,l===g)){var b=null,A=null;if(l=l.firstBaseUpdate,l!==null){do{var I={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};A===null?b=A=I:A=A.next=I,l=l.next}while(l!==null);A===null?b=A=n:A=A.next=n}else b=A=n;l={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}var tf=!1;function ml(){if(tf){var e=So;if(e!==null)throw e}}function yl(e,n,l,g){tf=!1;var b=e.updateQueue;gs=!1;var A=b.firstBaseUpdate,I=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var W=j,fe=W.next;W.next=null,I===null?A=fe:I.next=fe,I=W;var be=e.alternate;be!==null&&(be=be.updateQueue,j=be.lastBaseUpdate,j!==I&&(j===null?be.firstBaseUpdate=fe:j.next=fe,be.lastBaseUpdate=W))}if(A!==null){var Oe=b.baseState;I=0,be=fe=W=null,j=A;do{var de=j.lane&-536870913,ye=de!==j.lane;if(ye?(Ft&de)===de:(g&de)===de){de!==0&&de===Ao&&(tf=!0),be!==null&&(be=be.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var We=e,lt=j;de=n;var gn=l;switch(lt.tag){case 1:if(We=lt.payload,typeof We=="function"){Oe=We.call(gn,Oe,de);break e}Oe=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=lt.payload,de=typeof We=="function"?We.call(gn,Oe,de):We,de==null)break e;Oe=N({},Oe,de);break e;case 2:gs=!0}}de=j.callback,de!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=b.callbacks,ye===null?b.callbacks=[de]:ye.push(de))}else ye={lane:de,tag:j.tag,payload:j.payload,callback:j.callback,next:null},be===null?(fe=be=ye,W=Oe):be=be.next=ye,I|=de;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;ye=j,j=ye.next,ye.next=null,b.lastBaseUpdate=ye,b.shared.pending=null}}while(!0);be===null&&(W=Oe),b.baseState=W,b.firstBaseUpdate=fe,b.lastBaseUpdate=be,A===null&&(b.shared.lanes=0),bs|=I,e.lanes=I,e.memoizedState=Oe}}function Jd(e,n){if(typeof e!="function")throw Error(c(191,e));e.call(n)}function $d(e,n){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Jd(l[e],n)}var Oo=L(null),pu=L(0);function e0(e,n){e=Ya,xe(pu,e),xe(Oo,n),Ya=e|n.baseLanes}function nf(){xe(pu,Ya),xe(Oo,Oo.current)}function rf(){Ya=pu.current,Q(Oo),Q(pu)}var Ei=L(null),zi=null;function ys(e){var n=e.alternate;xe(Zn,Zn.current&1),xe(Ei,e),zi===null&&(n===null||Oo.current!==null||n.memoizedState!==null)&&(zi=e)}function af(e){xe(Zn,Zn.current),xe(Ei,e),zi===null&&(zi=e)}function t0(e){e.tag===22?(xe(Zn,Zn.current),xe(Ei,e),zi===null&&(zi=e)):vs()}function vs(){xe(Zn,Zn.current),xe(Ei,Ei.current)}function _i(e){Q(Ei),zi===e&&(zi=null),Q(Zn)}var Zn=L(0);function mu(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fh(l)||hh(l)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Pa=0,At=null,hn=null,sr=null,yu=!1,No=!1,ro=!1,vu=0,vl=0,Ro=null,ky=0;function Hn(){throw Error(c(321))}function sf(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!p(e[l],n[l]))return!1;return!0}function of(e,n,l,g,b,A){return Pa=A,At=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,he.H=e===null||e.memoizedState===null?P0:Ef,ro=!1,A=l(g,b),ro=!1,No&&(A=r0(n,l,g,b)),n0(e),A}function n0(e){he.H=bl;var n=hn!==null&&hn.next!==null;if(Pa=0,sr=hn=At=null,yu=!1,vl=0,Ro=null,n)throw Error(c(300));e===null||or||(e=e.dependencies,e!==null&&lu(e)&&(or=!0))}function r0(e,n,l,g){At=e;var b=0;do{if(No&&(Ro=null),vl=0,No=!1,25<=b)throw Error(c(301));if(b+=1,sr=hn=null,e.updateQueue!=null){var A=e.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}he.H=U0,A=n(l,g)}while(No);return A}function jy(){var e=he.H,n=e.useState()[0];return n=typeof n.then=="function"?xl(n):n,e=e.useState()[0],(hn!==null?hn.memoizedState:null)!==e&&(At.flags|=1024),n}function lf(){var e=vu!==0;return vu=0,e}function uf(e,n,l){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l}function cf(e){if(yu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}yu=!1}Pa=0,sr=hn=At=null,No=!1,vl=vu=0,Ro=null}function Qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?At.memoizedState=sr=e:sr=sr.next=e,sr}function Jn(){if(hn===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=hn.next;var n=sr===null?At.memoizedState:sr.next;if(n!==null)sr=n,hn=e;else{if(e===null)throw At.alternate===null?Error(c(467)):Error(c(310));hn=e,e={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},sr===null?At.memoizedState=sr=e:sr=sr.next=e}return sr}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(e){var n=vl;return vl+=1,Ro===null&&(Ro=[]),e=Xd(Ro,e,n),n=At,(sr===null?n.memoizedState:sr.next)===null&&(n=n.alternate,he.H=n===null||n.memoizedState===null?P0:Ef),e}function wu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xl(e);if(e.$$typeof===re)return Or(e)}throw Error(c(438,String(e)))}function ff(e){var n=null,l=At.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var g=At.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(n={data:g.data.map(function(b){return b.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=xu(),At.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(e),g=0;g<e;g++)l[g]=pn;return n.index++,l}function Ua(e,n){return typeof n=="function"?n(e):n}function bu(e){var n=Jn();return hf(n,hn,e)}function hf(e,n,l){var g=e.queue;if(g===null)throw Error(c(311));g.lastRenderedReducer=l;var b=e.baseQueue,A=g.pending;if(A!==null){if(b!==null){var I=b.next;b.next=A.next,A.next=I}n.baseQueue=b=A,g.pending=null}if(A=e.baseState,b===null)e.memoizedState=A;else{n=b.next;var j=I=null,W=null,fe=n,be=!1;do{var Oe=fe.lane&-536870913;if(Oe!==fe.lane?(Ft&Oe)===Oe:(Pa&Oe)===Oe){var de=fe.revertLane;if(de===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Oe===Ao&&(be=!0);else if((Pa&de)===de){fe=fe.next,de===Ao&&(be=!0);continue}else Oe={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},W===null?(j=W=Oe,I=A):W=W.next=Oe,At.lanes|=de,bs|=de;Oe=fe.action,ro&&l(A,Oe),A=fe.hasEagerState?fe.eagerState:l(A,Oe)}else de={lane:Oe,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},W===null?(j=W=de,I=A):W=W.next=de,At.lanes|=Oe,bs|=Oe;fe=fe.next}while(fe!==null&&fe!==n);if(W===null?I=A:W.next=j,!p(A,e.memoizedState)&&(or=!0,be&&(l=So,l!==null)))throw l;e.memoizedState=A,e.baseState=I,e.baseQueue=W,g.lastRenderedState=A}return b===null&&(g.lanes=0),[e.memoizedState,g.dispatch]}function df(e){var n=Jn(),l=n.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=e;var g=l.dispatch,b=l.pending,A=n.memoizedState;if(b!==null){l.pending=null;var I=b=b.next;do A=e(A,I.action),I=I.next;while(I!==b);p(A,n.memoizedState)||(or=!0),n.memoizedState=A,n.baseQueue===null&&(n.baseState=A),l.lastRenderedState=A}return[A,g]}function i0(e,n,l){var g=At,b=Jn(),A=Yt;if(A){if(l===void 0)throw Error(c(407));l=l()}else l=n();var I=!p((hn||b).memoizedState,l);if(I&&(b.memoizedState=l,or=!0),b=b.queue,mf(o0.bind(null,g,b,e),[e]),b.getSnapshot!==n||I||sr!==null&&sr.memoizedState.tag&1){if(g.flags|=2048,Io(9,{destroy:void 0},s0.bind(null,g,b,l,n),null),xn===null)throw Error(c(349));A||(Pa&127)!==0||a0(g,n,l)}return l}function a0(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=At.updateQueue,n===null?(n=xu(),At.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function s0(e,n,l,g){n.value=l,n.getSnapshot=g,l0(n)&&u0(e)}function o0(e,n,l){return l(function(){l0(n)&&u0(e)})}function l0(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!p(e,l)}catch{return!0}}function u0(e){var n=Dn(e,2);n!==null&&ci(n,e,2)}function gf(e){var n=Qr();if(typeof e=="function"){var l=e;if(e=l(),ro){Bt(!0);try{l()}finally{Bt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:e},n}function c0(e,n,l,g){return e.baseState=l,hf(e,hn,typeof g=="function"?g:Ua)}function Py(e,n,l,g,b){if(Au(e))throw Error(c(485));if(e=n.action,e!==null){var A={payload:b,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){A.listeners.push(I)}};he.T!==null?l(!0):A.isTransition=!1,g(A),l=n.pending,l===null?(A.next=n.pending=A,f0(n,A)):(A.next=l.next,n.pending=l.next=A)}}function f0(e,n){var l=n.action,g=n.payload,b=e.state;if(n.isTransition){var A=he.T,I={};he.T=I;try{var j=l(b,g),W=he.S;W!==null&&W(I,j),h0(e,n,j)}catch(fe){pf(e,n,fe)}finally{A!==null&&I.types!==null&&(A.types=I.types),he.T=A}}else try{A=l(b,g),h0(e,n,A)}catch(fe){pf(e,n,fe)}}function h0(e,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(g){d0(e,n,g)},function(g){return pf(e,n,g)}):d0(e,n,l)}function d0(e,n,l){n.status="fulfilled",n.value=l,g0(n),e.state=l,n=e.pending,n!==null&&(l=n.next,l===n?e.pending=null:(l=l.next,n.next=l,f0(e,l)))}function pf(e,n,l){var g=e.pending;if(e.pending=null,g!==null){g=g.next;do n.status="rejected",n.reason=l,g0(n),n=n.next;while(n!==g)}e.action=null}function g0(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function p0(e,n){return n}function m0(e,n){if(Yt){var l=xn.formState;if(l!==null){e:{var g=At;if(Yt){if(Tn){t:{for(var b=Tn,A=Ui;b.nodeType!==8;){if(!A){b=null;break t}if(b=Fi(b.nextSibling),b===null){b=null;break t}}A=b.data,b=A==="F!"||A==="F"?b:null}if(b){Tn=Fi(b.nextSibling),g=b.data==="F!";break e}}hs(g)}g=!1}g&&(n=l[0])}}return l=Qr(),l.memoizedState=l.baseState=n,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p0,lastRenderedState:n},l.queue=g,l=L0.bind(null,At,g),g.dispatch=l,g=gf(!1),A=bf.bind(null,At,!1,g.queue),g=Qr(),b={state:n,dispatch:null,action:e,pending:null},g.queue=b,l=Py.bind(null,At,b,A,l),b.dispatch=l,g.memoizedState=e,[n,l,!1]}function y0(e){var n=Jn();return v0(n,hn,e)}function v0(e,n,l){if(n=hf(e,n,p0)[0],e=bu(Ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var g=xl(n)}catch(I){throw I===Co?fu:I}else g=n;n=Jn();var b=n.queue,A=b.dispatch;return l!==n.memoizedState&&(At.flags|=2048,Io(9,{destroy:void 0},Uy.bind(null,b,l),null)),[g,A,e]}function Uy(e,n){e.action=n}function x0(e){var n=Jn(),l=hn;if(l!==null)return v0(n,l,e);Jn(),n=n.memoizedState,l=Jn();var g=l.queue.dispatch;return l.memoizedState=e,[n,g,!1]}function Io(e,n,l,g){return e={tag:e,create:l,deps:g,inst:n,next:null},n=At.updateQueue,n===null&&(n=xu(),At.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=e.next=e:(g=l.next,l.next=e,e.next=g,n.lastEffect=e),e}function w0(){return Jn().memoizedState}function Eu(e,n,l,g){var b=Qr();At.flags|=e,b.memoizedState=Io(1|n,{destroy:void 0},l,g===void 0?null:g)}function _u(e,n,l,g){var b=Jn();g=g===void 0?null:g;var A=b.memoizedState.inst;hn!==null&&g!==null&&sf(g,hn.memoizedState.deps)?b.memoizedState=Io(n,A,l,g):(At.flags|=e,b.memoizedState=Io(1|n,A,l,g))}function b0(e,n){Eu(8390656,8,e,n)}function mf(e,n){_u(2048,8,e,n)}function zy(e){At.flags|=4;var n=At.updateQueue;if(n===null)n=xu(),At.updateQueue=n,n.events=[e];else{var l=n.events;l===null?n.events=[e]:l.push(e)}}function E0(e){var n=Jn().memoizedState;return zy({ref:n,nextImpl:e}),function(){if((tn&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}function _0(e,n){return _u(4,2,e,n)}function A0(e,n){return _u(4,4,e,n)}function S0(e,n){if(typeof n=="function"){e=e();var l=n(e);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function C0(e,n,l){l=l!=null?l.concat([e]):null,_u(4,4,S0.bind(null,n,e),l)}function yf(){}function T0(e,n){var l=Jn();n=n===void 0?null:n;var g=l.memoizedState;return n!==null&&sf(n,g[1])?g[0]:(l.memoizedState=[e,n],e)}function O0(e,n){var l=Jn();n=n===void 0?null:n;var g=l.memoizedState;if(n!==null&&sf(n,g[1]))return g[0];if(g=e(),ro){Bt(!0);try{e()}finally{Bt(!1)}}return l.memoizedState=[g,n],g}function vf(e,n,l){return l===void 0||(Pa&1073741824)!==0&&(Ft&261930)===0?e.memoizedState=n:(e.memoizedState=l,e=N1(),At.lanes|=e,bs|=e,l)}function N0(e,n,l,g){return p(l,n)?l:Oo.current!==null?(e=vf(e,l,g),p(e,n)||(or=!0),e):(Pa&42)===0||(Pa&1073741824)!==0&&(Ft&261930)===0?(or=!0,e.memoizedState=l):(e=N1(),At.lanes|=e,bs|=e,n)}function R0(e,n,l,g,b){var A=Ae.p;Ae.p=A!==0&&8>A?A:8;var I=he.T,j={};he.T=j,bf(e,!1,n,l);try{var W=b(),fe=he.S;if(fe!==null&&fe(j,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var be=Ly(W,g);wl(e,n,be,Ci(e))}else wl(e,n,g,Ci(e))}catch(Oe){wl(e,n,{then:function(){},status:"rejected",reason:Oe},Ci())}finally{Ae.p=A,I!==null&&j.types!==null&&(I.types=j.types),he.T=I}}function Fy(){}function xf(e,n,l,g){if(e.tag!==5)throw Error(c(476));var b=I0(e).queue;R0(e,b,n,Ze,l===null?Fy:function(){return D0(e),l(g)})}function I0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ze,baseState:Ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:Ze},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:l},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function D0(e){var n=I0(e);n.next===null&&(n=e.alternate.memoizedState),wl(e,n.next.queue,{},Ci())}function wf(){return Or(jl)}function M0(){return Jn().memoizedState}function B0(){return Jn().memoizedState}function Hy(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var l=Ci();e=ps(l);var g=ms(n,e,l);g!==null&&(ci(g,n,l),pl(g,n,l)),n={cache:Kc()},e.payload=n;return}n=n.return}}function Vy(e,n,l){var g=Ci();l={lane:g,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Au(e)?k0(n,l):(l=rr(e,n,l,g),l!==null&&(ci(l,e,g),j0(l,n,g)))}function L0(e,n,l){var g=Ci();wl(e,n,l,g)}function wl(e,n,l,g){var b={lane:g,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Au(e))k0(n,b);else{var A=e.alternate;if(e.lanes===0&&(A===null||A.lanes===0)&&(A=n.lastRenderedReducer,A!==null))try{var I=n.lastRenderedState,j=A(I,l);if(b.hasEagerState=!0,b.eagerState=j,p(j,I))return gt(e,n,b,0),xn===null&&gr(),!1}catch{}finally{}if(l=rr(e,n,b,g),l!==null)return ci(l,e,g),j0(l,n,g),!0}return!1}function bf(e,n,l,g){if(g={lane:2,revertLane:$f(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Au(e)){if(n)throw Error(c(479))}else n=rr(e,l,g,2),n!==null&&ci(n,e,2)}function Au(e){var n=e.alternate;return e===At||n!==null&&n===At}function k0(e,n){No=yu=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function j0(e,n,l){if((l&4194048)!==0){var g=n.lanes;g&=e.pendingLanes,l|=g,n.lanes=l,Vt(e,l)}}var bl={readContext:Or,use:wu,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn};bl.useEffectEvent=Hn;var P0={readContext:Or,use:wu,useCallback:function(e,n){return Qr().memoizedState=[e,n===void 0?null:n],e},useContext:Or,useEffect:b0,useImperativeHandle:function(e,n,l){l=l!=null?l.concat([e]):null,Eu(4194308,4,S0.bind(null,n,e),l)},useLayoutEffect:function(e,n){return Eu(4194308,4,e,n)},useInsertionEffect:function(e,n){Eu(4,2,e,n)},useMemo:function(e,n){var l=Qr();n=n===void 0?null:n;var g=e();if(ro){Bt(!0);try{e()}finally{Bt(!1)}}return l.memoizedState=[g,n],g},useReducer:function(e,n,l){var g=Qr();if(l!==void 0){var b=l(n);if(ro){Bt(!0);try{l(n)}finally{Bt(!1)}}}else b=n;return g.memoizedState=g.baseState=b,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:b},g.queue=e,e=e.dispatch=Vy.bind(null,At,e),[g.memoizedState,e]},useRef:function(e){var n=Qr();return e={current:e},n.memoizedState=e},useState:function(e){e=gf(e);var n=e.queue,l=L0.bind(null,At,n);return n.dispatch=l,[e.memoizedState,l]},useDebugValue:yf,useDeferredValue:function(e,n){var l=Qr();return vf(l,e,n)},useTransition:function(){var e=gf(!1);return e=R0.bind(null,At,e.queue,!0,!1),Qr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,l){var g=At,b=Qr();if(Yt){if(l===void 0)throw Error(c(407));l=l()}else{if(l=n(),xn===null)throw Error(c(349));(Ft&127)!==0||a0(g,n,l)}b.memoizedState=l;var A={value:l,getSnapshot:n};return b.queue=A,b0(o0.bind(null,g,A,e),[e]),g.flags|=2048,Io(9,{destroy:void 0},s0.bind(null,g,A,l,n),null),l},useId:function(){var e=Qr(),n=xn.identifierPrefix;if(Yt){var l=va,g=ya;l=(g&~(1<<32-Ie(g)-1)).toString(32)+l,n="_"+n+"R_"+l,l=vu++,0<l&&(n+="H"+l.toString(32)),n+="_"}else l=ky++,n="_"+n+"r_"+l.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:wf,useFormState:m0,useActionState:m0,useOptimistic:function(e){var n=Qr();n.memoizedState=n.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=bf.bind(null,At,!0,l),l.dispatch=n,[e,n]},useMemoCache:ff,useCacheRefresh:function(){return Qr().memoizedState=Hy.bind(null,At)},useEffectEvent:function(e){var n=Qr(),l={impl:e};return n.memoizedState=l,function(){if((tn&2)!==0)throw Error(c(440));return l.impl.apply(void 0,arguments)}}},Ef={readContext:Or,use:wu,useCallback:T0,useContext:Or,useEffect:mf,useImperativeHandle:C0,useInsertionEffect:_0,useLayoutEffect:A0,useMemo:O0,useReducer:bu,useRef:w0,useState:function(){return bu(Ua)},useDebugValue:yf,useDeferredValue:function(e,n){var l=Jn();return N0(l,hn.memoizedState,e,n)},useTransition:function(){var e=bu(Ua)[0],n=Jn().memoizedState;return[typeof e=="boolean"?e:xl(e),n]},useSyncExternalStore:i0,useId:M0,useHostTransitionStatus:wf,useFormState:y0,useActionState:y0,useOptimistic:function(e,n){var l=Jn();return c0(l,hn,e,n)},useMemoCache:ff,useCacheRefresh:B0};Ef.useEffectEvent=E0;var U0={readContext:Or,use:wu,useCallback:T0,useContext:Or,useEffect:mf,useImperativeHandle:C0,useInsertionEffect:_0,useLayoutEffect:A0,useMemo:O0,useReducer:df,useRef:w0,useState:function(){return df(Ua)},useDebugValue:yf,useDeferredValue:function(e,n){var l=Jn();return hn===null?vf(l,e,n):N0(l,hn.memoizedState,e,n)},useTransition:function(){var e=df(Ua)[0],n=Jn().memoizedState;return[typeof e=="boolean"?e:xl(e),n]},useSyncExternalStore:i0,useId:M0,useHostTransitionStatus:wf,useFormState:x0,useActionState:x0,useOptimistic:function(e,n){var l=Jn();return hn!==null?c0(l,hn,e,n):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:ff,useCacheRefresh:B0};U0.useEffectEvent=E0;function _f(e,n,l,g){n=e.memoizedState,l=l(g,n),l=l==null?n:N({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Af={enqueueSetState:function(e,n,l){e=e._reactInternals;var g=Ci(),b=ps(g);b.payload=n,l!=null&&(b.callback=l),n=ms(e,b,g),n!==null&&(ci(n,e,g),pl(n,e,g))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var g=Ci(),b=ps(g);b.tag=1,b.payload=n,l!=null&&(b.callback=l),n=ms(e,b,g),n!==null&&(ci(n,e,g),pl(n,e,g))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=Ci(),g=ps(l);g.tag=2,n!=null&&(g.callback=n),n=ms(e,g,l),n!==null&&(ci(n,e,l),pl(n,e,l))}};function z0(e,n,l,g,b,A,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(g,A,I):n.prototype&&n.prototype.isPureReactComponent?!s(l,g)||!s(b,A):!0}function F0(e,n,l,g){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,g),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,g),n.state!==e&&Af.enqueueReplaceState(n,n.state,null)}function io(e,n){var l=n;if("ref"in n){l={};for(var g in n)g!=="ref"&&(l[g]=n[g])}if(e=e.defaultProps){l===n&&(l=N({},l));for(var b in e)l[b]===void 0&&(l[b]=e[b])}return l}function H0(e){qe(e)}function V0(e){console.error(e)}function q0(e){qe(e)}function Su(e,n){try{var l=e.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(g){setTimeout(function(){throw g})}}function G0(e,n,l){try{var g=e.onCaughtError;g(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Sf(e,n,l){return l=ps(l),l.tag=3,l.payload={element:null},l.callback=function(){Su(e,n)},l}function Y0(e){return e=ps(e),e.tag=3,e}function X0(e,n,l,g){var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var A=g.value;e.payload=function(){return b(A)},e.callback=function(){G0(n,l,g)}}var I=l.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(e.callback=function(){G0(n,l,g),typeof b!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var j=g.stack;this.componentDidCatch(g.value,{componentStack:j!==null?j:""})})}function qy(e,n,l,g,b){if(l.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(n=l.alternate,n!==null&&_o(n,l,b,!0),l=Ei.current,l!==null){switch(l.tag){case 31:case 13:return zi===null?ju():l.alternate===null&&Vn===0&&(Vn=3),l.flags&=-257,l.flags|=65536,l.lanes=b,g===hu?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([g]):n.add(g),Qf(e,g,b)),!1;case 22:return l.flags|=65536,g===hu?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([g])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([g]):l.add(g)),Qf(e,g,b)),!1}throw Error(c(435,l.tag))}return Qf(e,g,b),ju(),!1}if(Yt)return n=Ei.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=b,g!==Vc&&(e=Error(c(422),{cause:g}),cl(ki(e,l)))):(g!==Vc&&(n=Error(c(423),{cause:g}),cl(ki(n,l))),e=e.current.alternate,e.flags|=65536,b&=-b,e.lanes|=b,g=ki(g,l),b=Sf(e.stateNode,g,b),ef(e,b),Vn!==4&&(Vn=2)),!1;var A=Error(c(520),{cause:g});if(A=ki(A,l),Nl===null?Nl=[A]:Nl.push(A),Vn!==4&&(Vn=2),n===null)return!0;g=ki(g,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,e=b&-b,l.lanes|=e,e=Sf(l.stateNode,g,e),ef(l,e),!1;case 1:if(n=l.type,A=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Es===null||!Es.has(A))))return l.flags|=65536,b&=-b,l.lanes|=b,b=Y0(b),X0(b,e,l,g),ef(l,b),!1}l=l.return}while(l!==null);return!1}var Cf=Error(c(461)),or=!1;function Nr(e,n,l,g){n.child=e===null?Zd(n,null,l,g):no(n,e.child,l,g)}function K0(e,n,l,g,b){l=l.render;var A=n.ref;if("ref"in g){var I={};for(var j in g)j!=="ref"&&(I[j]=g[j])}else I=g;return Js(n),g=of(e,n,l,I,A,b),j=lf(),e!==null&&!or?(uf(e,n,b),za(e,n,b)):(Yt&&j&&Fc(n),n.flags|=1,Nr(e,n,g,b),n.child)}function W0(e,n,l,g,b){if(e===null){var A=l.type;return typeof A=="function"&&!Pc(A)&&A.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=A,Q0(e,n,A,g,b)):(e=su(l.type,null,g,n,n.mode,b),e.ref=n.ref,e.return=n,n.child=e)}if(A=e.child,!Bf(e,b)){var I=A.memoizedProps;if(l=l.compare,l=l!==null?l:s,l(I,g)&&e.ref===n.ref)return za(e,n,b)}return n.flags|=1,e=Ba(A,g),e.ref=n.ref,e.return=n,n.child=e}function Q0(e,n,l,g,b){if(e!==null){var A=e.memoizedProps;if(s(A,g)&&e.ref===n.ref)if(or=!1,n.pendingProps=g=A,Bf(e,b))(e.flags&131072)!==0&&(or=!0);else return n.lanes=e.lanes,za(e,n,b)}return Tf(e,n,l,g,b)}function Z0(e,n,l,g){var b=g.children,A=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((n.flags&128)!==0){if(A=A!==null?A.baseLanes|l:l,e!==null){for(g=n.child=e.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~A}else g=0,n.child=null;return J0(e,n,A,l,g)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&cu(n,A!==null?A.cachePool:null),A!==null?e0(n,A):nf(),t0(n);else return g=n.lanes=536870912,J0(e,n,A!==null?A.baseLanes|l:l,l,g)}else A!==null?(cu(n,A.cachePool),e0(n,A),vs(),n.memoizedState=null):(e!==null&&cu(n,null),nf(),vs());return Nr(e,n,b,l),n.child}function El(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function J0(e,n,l,g,b){var A=Qc();return A=A===null?null:{parent:ar._currentValue,pool:A},n.memoizedState={baseLanes:l,cachePool:A},e!==null&&cu(n,null),nf(),t0(n),e!==null&&_o(e,n,g,!0),n.childLanes=b,null}function Cu(e,n){return n=Ou({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function $0(e,n,l){return no(n,e.child,null,l),e=Cu(n,n.pendingProps),e.flags|=2,_i(n),n.memoizedState=null,e}function Gy(e,n,l){var g=n.pendingProps,b=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Yt){if(g.mode==="hidden")return e=Cu(n,g),n.lanes=536870912,El(null,e);if(af(n),(e=Tn)?(e=fg(e,Ui),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:cs!==null?{id:ya,overflow:va}:null,retryLane:536870912,hydrationErrors:null},l=kd(e),l.return=n,n.child=l,Tr=n,Tn=null)):e=null,e===null)throw hs(n);return n.lanes=536870912,null}return Cu(n,g)}var A=e.memoizedState;if(A!==null){var I=A.dehydrated;if(af(n),b)if(n.flags&256)n.flags&=-257,n=$0(e,n,l);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(c(558));else if(or||_o(e,n,l,!1),b=(l&e.childLanes)!==0,or||b){if(g=xn,g!==null&&(I=An(g,l),I!==0&&I!==A.retryLane))throw A.retryLane=I,Dn(e,I),ci(g,e,I),Cf;ju(),n=$0(e,n,l)}else e=A.treeContext,Tn=Fi(I.nextSibling),Tr=n,Yt=!0,fs=null,Ui=!1,e!==null&&Ud(n,e),n=Cu(n,g),n.flags|=4096;return n}return e=Ba(e.child,{mode:g.mode,children:g.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tu(e,n){var l=n.ref;if(l===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(c(284));(e===null||e.ref!==l)&&(n.flags|=4194816)}}function Tf(e,n,l,g,b){return Js(n),l=of(e,n,l,g,void 0,b),g=lf(),e!==null&&!or?(uf(e,n,b),za(e,n,b)):(Yt&&g&&Fc(n),n.flags|=1,Nr(e,n,l,b),n.child)}function e1(e,n,l,g,b,A){return Js(n),n.updateQueue=null,l=r0(n,g,l,b),n0(e),g=lf(),e!==null&&!or?(uf(e,n,A),za(e,n,A)):(Yt&&g&&Fc(n),n.flags|=1,Nr(e,n,l,A),n.child)}function t1(e,n,l,g,b){if(Js(n),n.stateNode===null){var A=ai,I=l.contextType;typeof I=="object"&&I!==null&&(A=Or(I)),A=new l(g,A),n.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Af,n.stateNode=A,A._reactInternals=n,A=n.stateNode,A.props=g,A.state=n.memoizedState,A.refs={},Jc(n),I=l.contextType,A.context=typeof I=="object"&&I!==null?Or(I):ai,A.state=n.memoizedState,I=l.getDerivedStateFromProps,typeof I=="function"&&(_f(n,l,I,g),A.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(I=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),I!==A.state&&Af.enqueueReplaceState(A,A.state,null),yl(n,g,A,b),ml(),A.state=n.memoizedState),typeof A.componentDidMount=="function"&&(n.flags|=4194308),g=!0}else if(e===null){A=n.stateNode;var j=n.memoizedProps,W=io(l,j);A.props=W;var fe=A.context,be=l.contextType;I=ai,typeof be=="object"&&be!==null&&(I=Or(be));var Oe=l.getDerivedStateFromProps;be=typeof Oe=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=n.pendingProps!==j,be||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||fe!==I)&&F0(n,A,g,I),gs=!1;var de=n.memoizedState;A.state=de,yl(n,g,A,b),ml(),fe=n.memoizedState,j||de!==fe||gs?(typeof Oe=="function"&&(_f(n,l,Oe,g),fe=n.memoizedState),(W=gs||z0(n,l,W,g,de,fe,I))?(be||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(n.flags|=4194308)):(typeof A.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=g,n.memoizedState=fe),A.props=g,A.state=fe,A.context=I,g=W):(typeof A.componentDidMount=="function"&&(n.flags|=4194308),g=!1)}else{A=n.stateNode,$c(e,n),I=n.memoizedProps,be=io(l,I),A.props=be,Oe=n.pendingProps,de=A.context,fe=l.contextType,W=ai,typeof fe=="object"&&fe!==null&&(W=Or(fe)),j=l.getDerivedStateFromProps,(fe=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==Oe||de!==W)&&F0(n,A,g,W),gs=!1,de=n.memoizedState,A.state=de,yl(n,g,A,b),ml();var ye=n.memoizedState;I!==Oe||de!==ye||gs||e!==null&&e.dependencies!==null&&lu(e.dependencies)?(typeof j=="function"&&(_f(n,l,j,g),ye=n.memoizedState),(be=gs||z0(n,l,be,g,de,ye,W)||e!==null&&e.dependencies!==null&&lu(e.dependencies))?(fe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,ye,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,ye,W)),typeof A.componentDidUpdate=="function"&&(n.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof A.componentDidUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(n.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(n.flags|=1024),n.memoizedProps=g,n.memoizedState=ye),A.props=g,A.state=ye,A.context=W,g=be):(typeof A.componentDidUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(n.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(n.flags|=1024),g=!1)}return A=g,Tu(e,n),g=(n.flags&128)!==0,A||g?(A=n.stateNode,l=g&&typeof l.getDerivedStateFromError!="function"?null:A.render(),n.flags|=1,e!==null&&g?(n.child=no(n,e.child,null,b),n.child=no(n,null,l,b)):Nr(e,n,l,b),n.memoizedState=A.state,e=n.child):e=za(e,n,b),e}function n1(e,n,l,g){return Qs(),n.flags|=256,Nr(e,n,l,g),n.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(e){return{baseLanes:e,cachePool:Gd()}}function Rf(e,n,l){return e=e!==null?e.childLanes&~l:0,n&&(e|=Si),e}function r1(e,n,l){var g=n.pendingProps,b=!1,A=(n.flags&128)!==0,I;if((I=A)||(I=e!==null&&e.memoizedState===null?!1:(Zn.current&2)!==0),I&&(b=!0,n.flags&=-129),I=(n.flags&32)!==0,n.flags&=-33,e===null){if(Yt){if(b?ys(n):vs(),(e=Tn)?(e=fg(e,Ui),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:cs!==null?{id:ya,overflow:va}:null,retryLane:536870912,hydrationErrors:null},l=kd(e),l.return=n,n.child=l,Tr=n,Tn=null)):e=null,e===null)throw hs(n);return hh(e)?n.lanes=32:n.lanes=536870912,null}var j=g.children;return g=g.fallback,b?(vs(),b=n.mode,j=Ou({mode:"hidden",children:j},b),g=Ws(g,b,l,null),j.return=n,g.return=n,j.sibling=g,n.child=j,g=n.child,g.memoizedState=Nf(l),g.childLanes=Rf(e,I,l),n.memoizedState=Of,El(null,g)):(ys(n),If(n,j))}var W=e.memoizedState;if(W!==null&&(j=W.dehydrated,j!==null)){if(A)n.flags&256?(ys(n),n.flags&=-257,n=Df(e,n,l)):n.memoizedState!==null?(vs(),n.child=e.child,n.flags|=128,n=null):(vs(),j=g.fallback,b=n.mode,g=Ou({mode:"visible",children:g.children},b),j=Ws(j,b,l,null),j.flags|=2,g.return=n,j.return=n,g.sibling=j,n.child=g,no(n,e.child,null,l),g=n.child,g.memoizedState=Nf(l),g.childLanes=Rf(e,I,l),n.memoizedState=Of,n=El(null,g));else if(ys(n),hh(j)){if(I=j.nextSibling&&j.nextSibling.dataset,I)var fe=I.dgst;I=fe,g=Error(c(419)),g.stack="",g.digest=I,cl({value:g,source:null,stack:null}),n=Df(e,n,l)}else if(or||_o(e,n,l,!1),I=(l&e.childLanes)!==0,or||I){if(I=xn,I!==null&&(g=An(I,l),g!==0&&g!==W.retryLane))throw W.retryLane=g,Dn(e,g),ci(I,e,g),Cf;fh(j)||ju(),n=Df(e,n,l)}else fh(j)?(n.flags|=192,n.child=e.child,n=null):(e=W.treeContext,Tn=Fi(j.nextSibling),Tr=n,Yt=!0,fs=null,Ui=!1,e!==null&&Ud(n,e),n=If(n,g.children),n.flags|=4096);return n}return b?(vs(),j=g.fallback,b=n.mode,W=e.child,fe=W.sibling,g=Ba(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,fe!==null?j=Ba(fe,j):(j=Ws(j,b,l,null),j.flags|=2),j.return=n,g.return=n,g.sibling=j,n.child=g,El(null,g),g=n.child,j=e.child.memoizedState,j===null?j=Nf(l):(b=j.cachePool,b!==null?(W=ar._currentValue,b=b.parent!==W?{parent:W,pool:W}:b):b=Gd(),j={baseLanes:j.baseLanes|l,cachePool:b}),g.memoizedState=j,g.childLanes=Rf(e,I,l),n.memoizedState=Of,El(e.child,g)):(ys(n),l=e.child,e=l.sibling,l=Ba(l,{mode:"visible",children:g.children}),l.return=n,l.sibling=null,e!==null&&(I=n.deletions,I===null?(n.deletions=[e],n.flags|=16):I.push(e)),n.child=l,n.memoizedState=null,l)}function If(e,n){return n=Ou({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ou(e,n){return e=bi(22,e,null,n),e.lanes=0,e}function Df(e,n,l){return no(n,e.child,null,l),e=If(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function i1(e,n,l){e.lanes|=n;var g=e.alternate;g!==null&&(g.lanes|=n),Yc(e.return,n,l)}function Mf(e,n,l,g,b,A){var I=e.memoizedState;I===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:g,tail:l,tailMode:b,treeForkCount:A}:(I.isBackwards=n,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=l,I.tailMode=b,I.treeForkCount=A)}function a1(e,n,l){var g=n.pendingProps,b=g.revealOrder,A=g.tail;g=g.children;var I=Zn.current,j=(I&2)!==0;if(j?(I=I&1|2,n.flags|=128):I&=1,xe(Zn,I),Nr(e,n,g,l),g=Yt?ul:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&i1(e,l,n);else if(e.tag===19)i1(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(b){case"forwards":for(l=n.child,b=null;l!==null;)e=l.alternate,e!==null&&mu(e)===null&&(b=l),l=l.sibling;l=b,l===null?(b=n.child,n.child=null):(b=l.sibling,l.sibling=null),Mf(n,!1,b,l,A,g);break;case"backwards":case"unstable_legacy-backwards":for(l=null,b=n.child,n.child=null;b!==null;){if(e=b.alternate,e!==null&&mu(e)===null){n.child=b;break}e=b.sibling,b.sibling=l,l=b,b=e}Mf(n,!0,l,null,A,g);break;case"together":Mf(n,!1,null,null,void 0,g);break;default:n.memoizedState=null}return n.child}function za(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),bs|=n.lanes,(l&n.childLanes)===0)if(e!==null){if(_o(e,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(c(153));if(n.child!==null){for(e=n.child,l=Ba(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=Ba(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function Bf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&lu(e)))}function Yy(e,n,l){switch(n.tag){case 3:mt(n,n.stateNode.containerInfo),ds(n,ar,e.memoizedState.cache),Qs();break;case 27:case 5:Dr(n);break;case 4:mt(n,n.stateNode.containerInfo);break;case 10:ds(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,af(n),null;break;case 13:var g=n.memoizedState;if(g!==null)return g.dehydrated!==null?(ys(n),n.flags|=128,null):(l&n.child.childLanes)!==0?r1(e,n,l):(ys(n),e=za(e,n,l),e!==null?e.sibling:null);ys(n);break;case 19:var b=(e.flags&128)!==0;if(g=(l&n.childLanes)!==0,g||(_o(e,n,l,!1),g=(l&n.childLanes)!==0),b){if(g)return a1(e,n,l);n.flags|=128}if(b=n.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),xe(Zn,Zn.current),g)break;return null;case 22:return n.lanes=0,Z0(e,n,l,n.pendingProps);case 24:ds(n,ar,e.memoizedState.cache)}return za(e,n,l)}function s1(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps)or=!0;else{if(!Bf(e,l)&&(n.flags&128)===0)return or=!1,Yy(e,n,l);or=(e.flags&131072)!==0}else or=!1,Yt&&(n.flags&1048576)!==0&&Pd(n,ul,n.index);switch(n.lanes=0,n.tag){case 16:e:{var g=n.pendingProps;if(e=eo(n.elementType),n.type=e,typeof e=="function")Pc(e)?(g=io(e,g),n.tag=1,n=t1(null,n,e,g,l)):(n.tag=0,n=Tf(null,n,e,g,l));else{if(e!=null){var b=e.$$typeof;if(b===Ce){n.tag=11,n=K0(null,n,e,g,l);break e}else if(b===te){n.tag=14,n=W0(null,n,e,g,l);break e}}throw n=Dt(e)||e,Error(c(306,n,""))}}return n;case 0:return Tf(e,n,n.type,n.pendingProps,l);case 1:return g=n.type,b=io(g,n.pendingProps),t1(e,n,g,b,l);case 3:e:{if(mt(n,n.stateNode.containerInfo),e===null)throw Error(c(387));g=n.pendingProps;var A=n.memoizedState;b=A.element,$c(e,n),yl(n,g,null,l);var I=n.memoizedState;if(g=I.cache,ds(n,ar,g),g!==A.cache&&Xc(n,[ar],l,!0),ml(),g=I.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:I.cache},n.updateQueue.baseState=A,n.memoizedState=A,n.flags&256){n=n1(e,n,g,l);break e}else if(g!==b){b=ki(Error(c(424)),n),cl(b),n=n1(e,n,g,l);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tn=Fi(e.firstChild),Tr=n,Yt=!0,fs=null,Ui=!0,l=Zd(n,null,g,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qs(),g===b){n=za(e,n,l);break e}Nr(e,n,g,l)}n=n.child}return n;case 26:return Tu(e,n),e===null?(l=yg(n.type,null,n.pendingProps,null))?n.memoizedState=l:Yt||(l=n.type,e=n.pendingProps,g=qu(_e.current).createElement(l),g[rn]=n,g[Pt]=e,Rr(g,l,e),Cn(g),n.stateNode=g):n.memoizedState=yg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Dr(n),e===null&&Yt&&(g=n.stateNode=gg(n.type,n.pendingProps,_e.current),Tr=n,Ui=!0,b=Tn,Cs(n.type)?(dh=b,Tn=Fi(g.firstChild)):Tn=b),Nr(e,n,n.pendingProps.children,l),Tu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Yt&&((b=g=Tn)&&(g=E2(g,n.type,n.pendingProps,Ui),g!==null?(n.stateNode=g,Tr=n,Tn=Fi(g.firstChild),Ui=!1,b=!0):b=!1),b||hs(n)),Dr(n),b=n.type,A=n.pendingProps,I=e!==null?e.memoizedProps:null,g=A.children,lh(b,A)?g=null:I!==null&&lh(b,I)&&(n.flags|=32),n.memoizedState!==null&&(b=of(e,n,jy,null,null,l),jl._currentValue=b),Tu(e,n),Nr(e,n,g,l),n.child;case 6:return e===null&&Yt&&((e=l=Tn)&&(l=_2(l,n.pendingProps,Ui),l!==null?(n.stateNode=l,Tr=n,Tn=null,e=!0):e=!1),e||hs(n)),null;case 13:return r1(e,n,l);case 4:return mt(n,n.stateNode.containerInfo),g=n.pendingProps,e===null?n.child=no(n,null,g,l):Nr(e,n,g,l),n.child;case 11:return K0(e,n,n.type,n.pendingProps,l);case 7:return Nr(e,n,n.pendingProps,l),n.child;case 8:return Nr(e,n,n.pendingProps.children,l),n.child;case 12:return Nr(e,n,n.pendingProps.children,l),n.child;case 10:return g=n.pendingProps,ds(n,n.type,g.value),Nr(e,n,g.children,l),n.child;case 9:return b=n.type._context,g=n.pendingProps.children,Js(n),b=Or(b),g=g(b),n.flags|=1,Nr(e,n,g,l),n.child;case 14:return W0(e,n,n.type,n.pendingProps,l);case 15:return Q0(e,n,n.type,n.pendingProps,l);case 19:return a1(e,n,l);case 31:return Gy(e,n,l);case 22:return Z0(e,n,l,n.pendingProps);case 24:return Js(n),g=Or(ar),e===null?(b=Qc(),b===null&&(b=xn,A=Kc(),b.pooledCache=A,A.refCount++,A!==null&&(b.pooledCacheLanes|=l),b=A),n.memoizedState={parent:g,cache:b},Jc(n),ds(n,ar,b)):((e.lanes&l)!==0&&($c(e,n),yl(n,null,null,l),ml()),b=e.memoizedState,A=n.memoizedState,b.parent!==g?(b={parent:g,cache:g},n.memoizedState=b,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=b),ds(n,ar,g)):(g=A.cache,ds(n,ar,g),g!==b.cache&&Xc(n,[ar],l,!0))),Nr(e,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(c(156,n.tag))}function Fa(e){e.flags|=4}function Lf(e,n,l,g,b){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(b&335544128)===b)if(e.stateNode.complete)e.flags|=8192;else if(M1())e.flags|=8192;else throw to=hu,Zc}else e.flags&=-16777217}function o1(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Eg(n))if(M1())e.flags|=8192;else throw to=hu,Zc}function Nu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Xn():536870912,e.lanes|=n,Lo|=n)}function _l(e,n){if(!Yt)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:g.sibling=null}}function On(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,g=0;if(n)for(var b=e.child;b!==null;)l|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=e,b=b.sibling;else for(b=e.child;b!==null;)l|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=e,b=b.sibling;return e.subtreeFlags|=g,e.childLanes=l,n}function Xy(e,n,l){var g=n.pendingProps;switch(Hc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(n),null;case 1:return On(n),null;case 3:return l=n.stateNode,g=null,e!==null&&(g=e.memoizedState.cache),n.memoizedState.cache!==g&&(n.flags|=2048),ja(ar),Me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Eo(n)?Fa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,qc())),On(n),null;case 26:var b=n.type,A=n.memoizedState;return e===null?(Fa(n),A!==null?(On(n),o1(n,A)):(On(n),Lf(n,b,null,g,l))):A?A!==e.memoizedState?(Fa(n),On(n),o1(n,A)):(On(n),n.flags&=-16777217):(e=e.memoizedProps,e!==g&&Fa(n),On(n),Lf(n,b,e,g,l)),null;case 27:if(Rn(n),l=_e.current,b=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==g&&Fa(n);else{if(!g){if(n.stateNode===null)throw Error(c(166));return On(n),null}e=Ee.current,Eo(n)?zd(n):(e=gg(b,g,l),n.stateNode=e,Fa(n))}return On(n),null;case 5:if(Rn(n),b=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==g&&Fa(n);else{if(!g){if(n.stateNode===null)throw Error(c(166));return On(n),null}if(A=Ee.current,Eo(n))zd(n);else{var I=qu(_e.current);switch(A){case 1:A=I.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=I.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=I.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof g.is=="string"?I.createElement("select",{is:g.is}):I.createElement("select"),g.multiple?A.multiple=!0:g.size&&(A.size=g.size);break;default:A=typeof g.is=="string"?I.createElement(b,{is:g.is}):I.createElement(b)}}A[rn]=n,A[Pt]=g;e:for(I=n.child;I!==null;){if(I.tag===5||I.tag===6)A.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===n)break e;for(;I.sibling===null;){if(I.return===null||I.return===n)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}n.stateNode=A;e:switch(Rr(A,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Fa(n)}}return On(n),Lf(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,l),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==g&&Fa(n);else{if(typeof g!="string"&&n.stateNode===null)throw Error(c(166));if(e=_e.current,Eo(n)){if(e=n.stateNode,l=n.memoizedProps,g=null,b=Tr,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}e[rn]=n,e=!!(e.nodeValue===l||g!==null&&g.suppressHydrationWarning===!0||rg(e.nodeValue,l)),e||hs(n,!0)}else e=qu(e).createTextNode(g),e[rn]=n,n.stateNode=e}return On(n),null;case 31:if(l=n.memoizedState,e===null||e.memoizedState!==null){if(g=Eo(n),l!==null){if(e===null){if(!g)throw Error(c(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[rn]=n}else Qs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;On(n),e=!1}else l=qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return n.flags&256?(_i(n),n):(_i(n),null);if((n.flags&128)!==0)throw Error(c(558))}return On(n),null;case 13:if(g=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(b=Eo(n),g!==null&&g.dehydrated!==null){if(e===null){if(!b)throw Error(c(318));if(b=n.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(c(317));b[rn]=n}else Qs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;On(n),b=!1}else b=qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=b),b=!0;if(!b)return n.flags&256?(_i(n),n):(_i(n),null)}return _i(n),(n.flags&128)!==0?(n.lanes=l,n):(l=g!==null,e=e!==null&&e.memoizedState!==null,l&&(g=n.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==b&&(g.flags|=2048)),l!==e&&l&&(n.child.flags|=8192),Nu(n,n.updateQueue),On(n),null);case 4:return Me(),e===null&&rh(n.stateNode.containerInfo),On(n),null;case 10:return ja(n.type),On(n),null;case 19:if(Q(Zn),g=n.memoizedState,g===null)return On(n),null;if(b=(n.flags&128)!==0,A=g.rendering,A===null)if(b)_l(g,!1);else{if(Vn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(A=mu(e),A!==null){for(n.flags|=128,_l(g,!1),e=A.updateQueue,n.updateQueue=e,Nu(n,e),n.subtreeFlags=0,e=l,l=n.child;l!==null;)Ld(l,e),l=l.sibling;return xe(Zn,Zn.current&1|2),Yt&&La(n,g.treeForkCount),n.child}e=e.sibling}g.tail!==null&&wn()>Bu&&(n.flags|=128,b=!0,_l(g,!1),n.lanes=4194304)}else{if(!b)if(e=mu(A),e!==null){if(n.flags|=128,b=!0,e=e.updateQueue,n.updateQueue=e,Nu(n,e),_l(g,!0),g.tail===null&&g.tailMode==="hidden"&&!A.alternate&&!Yt)return On(n),null}else 2*wn()-g.renderingStartTime>Bu&&l!==536870912&&(n.flags|=128,b=!0,_l(g,!1),n.lanes=4194304);g.isBackwards?(A.sibling=n.child,n.child=A):(e=g.last,e!==null?e.sibling=A:n.child=A,g.last=A)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=wn(),e.sibling=null,l=Zn.current,xe(Zn,b?l&1|2:l&1),Yt&&La(n,g.treeForkCount),e):(On(n),null);case 22:case 23:return _i(n),rf(),g=n.memoizedState!==null,e!==null?e.memoizedState!==null!==g&&(n.flags|=8192):g&&(n.flags|=8192),g?(l&536870912)!==0&&(n.flags&128)===0&&(On(n),n.subtreeFlags&6&&(n.flags|=8192)):On(n),l=n.updateQueue,l!==null&&Nu(n,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),g=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(g=n.memoizedState.cachePool.pool),g!==l&&(n.flags|=2048),e!==null&&Q($s),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ja(ar),On(n),null;case 25:return null;case 30:return null}throw Error(c(156,n.tag))}function Ky(e,n){switch(Hc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ja(ar),Me(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Rn(n),null;case 31:if(n.memoizedState!==null){if(_i(n),n.alternate===null)throw Error(c(340));Qs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(_i(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(c(340));Qs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Q(Zn),null;case 4:return Me(),null;case 10:return ja(n.type),null;case 22:case 23:return _i(n),rf(),e!==null&&Q($s),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ja(ar),null;case 25:return null;default:return null}}function l1(e,n){switch(Hc(n),n.tag){case 3:ja(ar),Me();break;case 26:case 27:case 5:Rn(n);break;case 4:Me();break;case 31:n.memoizedState!==null&&_i(n);break;case 13:_i(n);break;case 19:Q(Zn);break;case 10:ja(n.type);break;case 22:case 23:_i(n),rf(),e!==null&&Q($s);break;case 24:ja(ar)}}function Al(e,n){try{var l=n.updateQueue,g=l!==null?l.lastEffect:null;if(g!==null){var b=g.next;l=b;do{if((l.tag&e)===e){g=void 0;var A=l.create,I=l.inst;g=A(),I.destroy=g}l=l.next}while(l!==b)}}catch(j){ln(n,n.return,j)}}function xs(e,n,l){try{var g=n.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var A=b.next;g=A;do{if((g.tag&e)===e){var I=g.inst,j=I.destroy;if(j!==void 0){I.destroy=void 0,b=n;var W=l,fe=j;try{fe()}catch(be){ln(b,W,be)}}}g=g.next}while(g!==A)}}catch(be){ln(n,n.return,be)}}function u1(e){var n=e.updateQueue;if(n!==null){var l=e.stateNode;try{$d(n,l)}catch(g){ln(e,e.return,g)}}}function c1(e,n,l){l.props=io(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(g){ln(e,n,g)}}function Sl(e,n){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var g=e.stateNode;break;case 30:g=e.stateNode;break;default:g=e.stateNode}typeof l=="function"?e.refCleanup=l(g):l.current=g}}catch(b){ln(e,n,b)}}function xa(e,n){var l=e.ref,g=e.refCleanup;if(l!==null)if(typeof g=="function")try{g()}catch(b){ln(e,n,b)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(b){ln(e,n,b)}else l.current=null}function f1(e){var n=e.type,l=e.memoizedProps,g=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&g.focus();break e;case"img":l.src?g.src=l.src:l.srcSet&&(g.srcset=l.srcSet)}}catch(b){ln(e,e.return,b)}}function kf(e,n,l){try{var g=e.stateNode;m2(g,e.type,l,n),g[Pt]=n}catch(b){ln(e,e.return,b)}}function h1(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Cs(e.type)||e.tag===4}function jf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||h1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Cs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pf(e,n,l){var g=e.tag;if(g===5||g===6)e=e.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(e),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=cr));else if(g!==4&&(g===27&&Cs(e.type)&&(l=e.stateNode,n=null),e=e.child,e!==null))for(Pf(e,n,l),e=e.sibling;e!==null;)Pf(e,n,l),e=e.sibling}function Ru(e,n,l){var g=e.tag;if(g===5||g===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(g!==4&&(g===27&&Cs(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Ru(e,n,l),e=e.sibling;e!==null;)Ru(e,n,l),e=e.sibling}function d1(e){var n=e.stateNode,l=e.memoizedProps;try{for(var g=e.type,b=n.attributes;b.length;)n.removeAttributeNode(b[0]);Rr(n,g,l),n[rn]=e,n[Pt]=l}catch(A){ln(e,e.return,A)}}var Ha=!1,lr=!1,Uf=!1,g1=typeof WeakSet=="function"?WeakSet:Set,pr=null;function Wy(e,n){if(e=e.containerInfo,sh=Zu,e=_(e),S(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var g=l.getSelection&&l.getSelection();if(g&&g.rangeCount!==0){l=g.anchorNode;var b=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{l.nodeType,A.nodeType}catch{l=null;break e}var I=0,j=-1,W=-1,fe=0,be=0,Oe=e,de=null;t:for(;;){for(var ye;Oe!==l||b!==0&&Oe.nodeType!==3||(j=I+b),Oe!==A||g!==0&&Oe.nodeType!==3||(W=I+g),Oe.nodeType===3&&(I+=Oe.nodeValue.length),(ye=Oe.firstChild)!==null;)de=Oe,Oe=ye;for(;;){if(Oe===e)break t;if(de===l&&++fe===b&&(j=I),de===A&&++be===g&&(W=I),(ye=Oe.nextSibling)!==null)break;Oe=de,de=Oe.parentNode}Oe=ye}l=j===-1||W===-1?null:{start:j,end:W}}else l=null}l=l||{start:0,end:0}}else l=null;for(oh={focusedElem:e,selectionRange:l},Zu=!1,pr=n;pr!==null;)if(n=pr,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pr=e;else for(;pr!==null;){switch(n=pr,A=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)b=e[l],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&A!==null){e=void 0,l=n,b=A.memoizedProps,A=A.memoizedState,g=l.stateNode;try{var We=io(l.type,b);e=g.getSnapshotBeforeUpdate(We,A),g.__reactInternalSnapshotBeforeUpdate=e}catch(lt){ln(l,l.return,lt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,l=e.nodeType,l===9)ch(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ch(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=n.sibling,e!==null){e.return=n.return,pr=e;break}pr=n.return}}function p1(e,n,l){var g=l.flags;switch(l.tag){case 0:case 11:case 15:qa(e,l),g&4&&Al(5,l);break;case 1:if(qa(e,l),g&4)if(e=l.stateNode,n===null)try{e.componentDidMount()}catch(I){ln(l,l.return,I)}else{var b=io(l.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(b,n,e.__reactInternalSnapshotBeforeUpdate)}catch(I){ln(l,l.return,I)}}g&64&&u1(l),g&512&&Sl(l,l.return);break;case 3:if(qa(e,l),g&64&&(e=l.updateQueue,e!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{$d(e,n)}catch(I){ln(l,l.return,I)}}break;case 27:n===null&&g&4&&d1(l);case 26:case 5:qa(e,l),n===null&&g&4&&f1(l),g&512&&Sl(l,l.return);break;case 12:qa(e,l);break;case 31:qa(e,l),g&4&&v1(e,l);break;case 13:qa(e,l),g&4&&x1(e,l),g&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=i2.bind(null,l),A2(e,l))));break;case 22:if(g=l.memoizedState!==null||Ha,!g){n=n!==null&&n.memoizedState!==null||lr,b=Ha;var A=lr;Ha=g,(lr=n)&&!A?Ga(e,l,(l.subtreeFlags&8772)!==0):qa(e,l),Ha=b,lr=A}break;case 30:break;default:qa(e,l)}}function m1(e){var n=e.alternate;n!==null&&(e.alternate=null,m1(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Er(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Mn=null,si=!1;function Va(e,n,l){for(l=l.child;l!==null;)y1(e,n,l),l=l.sibling}function y1(e,n,l){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount($t,l)}catch{}switch(l.tag){case 26:lr||xa(l,n),Va(e,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:lr||xa(l,n);var g=Mn,b=si;Cs(l.type)&&(Mn=l.stateNode,si=!1),Va(e,n,l),Bl(l.stateNode),Mn=g,si=b;break;case 5:lr||xa(l,n);case 6:if(g=Mn,b=si,Mn=null,Va(e,n,l),Mn=g,si=b,Mn!==null)if(si)try{(Mn.nodeType===9?Mn.body:Mn.nodeName==="HTML"?Mn.ownerDocument.body:Mn).removeChild(l.stateNode)}catch(A){ln(l,n,A)}else try{Mn.removeChild(l.stateNode)}catch(A){ln(l,n,A)}break;case 18:Mn!==null&&(si?(e=Mn,ug(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Vo(e)):ug(Mn,l.stateNode));break;case 4:g=Mn,b=si,Mn=l.stateNode.containerInfo,si=!0,Va(e,n,l),Mn=g,si=b;break;case 0:case 11:case 14:case 15:xs(2,l,n),lr||xs(4,l,n),Va(e,n,l);break;case 1:lr||(xa(l,n),g=l.stateNode,typeof g.componentWillUnmount=="function"&&c1(l,n,g)),Va(e,n,l);break;case 21:Va(e,n,l);break;case 22:lr=(g=lr)||l.memoizedState!==null,Va(e,n,l),lr=g;break;default:Va(e,n,l)}}function v1(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vo(e)}catch(l){ln(n,n.return,l)}}}function x1(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vo(e)}catch(l){ln(n,n.return,l)}}function Qy(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new g1),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new g1),n;default:throw Error(c(435,e.tag))}}function Iu(e,n){var l=Qy(e);n.forEach(function(g){if(!l.has(g)){l.add(g);var b=a2.bind(null,e,g);g.then(b,b)}})}function oi(e,n){var l=n.deletions;if(l!==null)for(var g=0;g<l.length;g++){var b=l[g],A=e,I=n,j=I;e:for(;j!==null;){switch(j.tag){case 27:if(Cs(j.type)){Mn=j.stateNode,si=!1;break e}break;case 5:Mn=j.stateNode,si=!1;break e;case 3:case 4:Mn=j.stateNode.containerInfo,si=!0;break e}j=j.return}if(Mn===null)throw Error(c(160));y1(A,I,b),Mn=null,si=!1,A=b.alternate,A!==null&&(A.return=null),b.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)w1(n,e),n=n.sibling}var ta=null;function w1(e,n){var l=e.alternate,g=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:oi(n,e),li(e),g&4&&(xs(3,e,e.return),Al(3,e),xs(5,e,e.return));break;case 1:oi(n,e),li(e),g&512&&(lr||l===null||xa(l,l.return)),g&64&&Ha&&(e=e.updateQueue,e!==null&&(g=e.callbacks,g!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?g:l.concat(g))));break;case 26:var b=ta;if(oi(n,e),li(e),g&512&&(lr||l===null||xa(l,l.return)),g&4){var A=l!==null?l.memoizedState:null;if(g=e.memoizedState,l===null)if(g===null)if(e.stateNode===null){e:{g=e.type,l=e.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":A=b.getElementsByTagName("title")[0],(!A||A[Gr]||A[rn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=b.createElement(g),b.head.insertBefore(A,b.querySelector("head > title"))),Rr(A,g,l),A[rn]=e,Cn(A),g=A;break e;case"link":var I=wg("link","href",b).get(g+(l.href||""));if(I){for(var j=0;j<I.length;j++)if(A=I[j],A.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&A.getAttribute("rel")===(l.rel==null?null:l.rel)&&A.getAttribute("title")===(l.title==null?null:l.title)&&A.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){I.splice(j,1);break t}}A=b.createElement(g),Rr(A,g,l),b.head.appendChild(A);break;case"meta":if(I=wg("meta","content",b).get(g+(l.content||""))){for(j=0;j<I.length;j++)if(A=I[j],A.getAttribute("content")===(l.content==null?null:""+l.content)&&A.getAttribute("name")===(l.name==null?null:l.name)&&A.getAttribute("property")===(l.property==null?null:l.property)&&A.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&A.getAttribute("charset")===(l.charSet==null?null:l.charSet)){I.splice(j,1);break t}}A=b.createElement(g),Rr(A,g,l),b.head.appendChild(A);break;default:throw Error(c(468,g))}A[rn]=e,Cn(A),g=A}e.stateNode=g}else bg(b,e.type,e.stateNode);else e.stateNode=xg(b,g,e.memoizedProps);else A!==g?(A===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):A.count--,g===null?bg(b,e.type,e.stateNode):xg(b,g,e.memoizedProps)):g===null&&e.stateNode!==null&&kf(e,e.memoizedProps,l.memoizedProps)}break;case 27:oi(n,e),li(e),g&512&&(lr||l===null||xa(l,l.return)),l!==null&&g&4&&kf(e,e.memoizedProps,l.memoizedProps);break;case 5:if(oi(n,e),li(e),g&512&&(lr||l===null||xa(l,l.return)),e.flags&32){b=e.stateNode;try{Qi(b,"")}catch(We){ln(e,e.return,We)}}g&4&&e.stateNode!=null&&(b=e.memoizedProps,kf(e,b,l!==null?l.memoizedProps:b)),g&1024&&(Uf=!0);break;case 6:if(oi(n,e),li(e),g&4){if(e.stateNode===null)throw Error(c(162));g=e.memoizedProps,l=e.stateNode;try{l.nodeValue=g}catch(We){ln(e,e.return,We)}}break;case 3:if(Xu=null,b=ta,ta=Gu(n.containerInfo),oi(n,e),ta=b,li(e),g&4&&l!==null&&l.memoizedState.isDehydrated)try{Vo(n.containerInfo)}catch(We){ln(e,e.return,We)}Uf&&(Uf=!1,b1(e));break;case 4:g=ta,ta=Gu(e.stateNode.containerInfo),oi(n,e),li(e),ta=g;break;case 12:oi(n,e),li(e);break;case 31:oi(n,e),li(e),g&4&&(g=e.updateQueue,g!==null&&(e.updateQueue=null,Iu(e,g)));break;case 13:oi(n,e),li(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Mu=wn()),g&4&&(g=e.updateQueue,g!==null&&(e.updateQueue=null,Iu(e,g)));break;case 22:b=e.memoizedState!==null;var W=l!==null&&l.memoizedState!==null,fe=Ha,be=lr;if(Ha=fe||b,lr=be||W,oi(n,e),lr=be,Ha=fe,li(e),g&8192)e:for(n=e.stateNode,n._visibility=b?n._visibility&-2:n._visibility|1,b&&(l===null||W||Ha||lr||ao(e)),l=null,n=e;;){if(n.tag===5||n.tag===26){if(l===null){W=l=n;try{if(A=W.stateNode,b)I=A.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{j=W.stateNode;var Oe=W.memoizedProps.style,de=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;j.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(We){ln(W,W.return,We)}}}else if(n.tag===6){if(l===null){W=n;try{W.stateNode.nodeValue=b?"":W.memoizedProps}catch(We){ln(W,W.return,We)}}}else if(n.tag===18){if(l===null){W=n;try{var ye=W.stateNode;b?cg(ye,!0):cg(W.stateNode,!1)}catch(We){ln(W,W.return,We)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}g&4&&(g=e.updateQueue,g!==null&&(l=g.retryQueue,l!==null&&(g.retryQueue=null,Iu(e,l))));break;case 19:oi(n,e),li(e),g&4&&(g=e.updateQueue,g!==null&&(e.updateQueue=null,Iu(e,g)));break;case 30:break;case 21:break;default:oi(n,e),li(e)}}function li(e){var n=e.flags;if(n&2){try{for(var l,g=e.return;g!==null;){if(h1(g)){l=g;break}g=g.return}if(l==null)throw Error(c(160));switch(l.tag){case 27:var b=l.stateNode,A=jf(e);Ru(e,A,b);break;case 5:var I=l.stateNode;l.flags&32&&(Qi(I,""),l.flags&=-33);var j=jf(e);Ru(e,j,I);break;case 3:case 4:var W=l.stateNode.containerInfo,fe=jf(e);Pf(e,fe,W);break;default:throw Error(c(161))}}catch(be){ln(e,e.return,be)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function b1(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;b1(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function qa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)p1(e,n.alternate,n),n=n.sibling}function ao(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:xs(4,n,n.return),ao(n);break;case 1:xa(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&c1(n,n.return,l),ao(n);break;case 27:Bl(n.stateNode);case 26:case 5:xa(n,n.return),ao(n);break;case 22:n.memoizedState===null&&ao(n);break;case 30:ao(n);break;default:ao(n)}e=e.sibling}}function Ga(e,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var g=n.alternate,b=e,A=n,I=A.flags;switch(A.tag){case 0:case 11:case 15:Ga(b,A,l),Al(4,A);break;case 1:if(Ga(b,A,l),g=A,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(fe){ln(g,g.return,fe)}if(g=A,b=g.updateQueue,b!==null){var j=g.stateNode;try{var W=b.shared.hiddenCallbacks;if(W!==null)for(b.shared.hiddenCallbacks=null,b=0;b<W.length;b++)Jd(W[b],j)}catch(fe){ln(g,g.return,fe)}}l&&I&64&&u1(A),Sl(A,A.return);break;case 27:d1(A);case 26:case 5:Ga(b,A,l),l&&g===null&&I&4&&f1(A),Sl(A,A.return);break;case 12:Ga(b,A,l);break;case 31:Ga(b,A,l),l&&I&4&&v1(b,A);break;case 13:Ga(b,A,l),l&&I&4&&x1(b,A);break;case 22:A.memoizedState===null&&Ga(b,A,l),Sl(A,A.return);break;case 30:break;default:Ga(b,A,l)}n=n.sibling}}function zf(e,n){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&fl(l))}function Ff(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&fl(e))}function na(e,n,l,g){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)E1(e,n,l,g),n=n.sibling}function E1(e,n,l,g){var b=n.flags;switch(n.tag){case 0:case 11:case 15:na(e,n,l,g),b&2048&&Al(9,n);break;case 1:na(e,n,l,g);break;case 3:na(e,n,l,g),b&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&fl(e)));break;case 12:if(b&2048){na(e,n,l,g),e=n.stateNode;try{var A=n.memoizedProps,I=A.id,j=A.onPostCommit;typeof j=="function"&&j(I,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(W){ln(n,n.return,W)}}else na(e,n,l,g);break;case 31:na(e,n,l,g);break;case 13:na(e,n,l,g);break;case 23:break;case 22:A=n.stateNode,I=n.alternate,n.memoizedState!==null?A._visibility&2?na(e,n,l,g):Cl(e,n):A._visibility&2?na(e,n,l,g):(A._visibility|=2,Do(e,n,l,g,(n.subtreeFlags&10256)!==0||!1)),b&2048&&zf(I,n);break;case 24:na(e,n,l,g),b&2048&&Ff(n.alternate,n);break;default:na(e,n,l,g)}}function Do(e,n,l,g,b){for(b=b&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var A=e,I=n,j=l,W=g,fe=I.flags;switch(I.tag){case 0:case 11:case 15:Do(A,I,j,W,b),Al(8,I);break;case 23:break;case 22:var be=I.stateNode;I.memoizedState!==null?be._visibility&2?Do(A,I,j,W,b):Cl(A,I):(be._visibility|=2,Do(A,I,j,W,b)),b&&fe&2048&&zf(I.alternate,I);break;case 24:Do(A,I,j,W,b),b&&fe&2048&&Ff(I.alternate,I);break;default:Do(A,I,j,W,b)}n=n.sibling}}function Cl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=e,g=n,b=g.flags;switch(g.tag){case 22:Cl(l,g),b&2048&&zf(g.alternate,g);break;case 24:Cl(l,g),b&2048&&Ff(g.alternate,g);break;default:Cl(l,g)}n=n.sibling}}var Tl=8192;function Mo(e,n,l){if(e.subtreeFlags&Tl)for(e=e.child;e!==null;)_1(e,n,l),e=e.sibling}function _1(e,n,l){switch(e.tag){case 26:Mo(e,n,l),e.flags&Tl&&e.memoizedState!==null&&k2(l,ta,e.memoizedState,e.memoizedProps);break;case 5:Mo(e,n,l);break;case 3:case 4:var g=ta;ta=Gu(e.stateNode.containerInfo),Mo(e,n,l),ta=g;break;case 22:e.memoizedState===null&&(g=e.alternate,g!==null&&g.memoizedState!==null?(g=Tl,Tl=16777216,Mo(e,n,l),Tl=g):Mo(e,n,l));break;default:Mo(e,n,l)}}function A1(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ol(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var g=n[l];pr=g,C1(g,e)}A1(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)S1(e),e=e.sibling}function S1(e){switch(e.tag){case 0:case 11:case 15:Ol(e),e.flags&2048&&xs(9,e,e.return);break;case 3:Ol(e);break;case 12:Ol(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Du(e)):Ol(e);break;default:Ol(e)}}function Du(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var g=n[l];pr=g,C1(g,e)}A1(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:xs(8,n,n.return),Du(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,Du(n));break;default:Du(n)}e=e.sibling}}function C1(e,n){for(;pr!==null;){var l=pr;switch(l.tag){case 0:case 11:case 15:xs(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var g=l.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:fl(l.memoizedState.cache)}if(g=l.child,g!==null)g.return=l,pr=g;else e:for(l=e;pr!==null;){g=pr;var b=g.sibling,A=g.return;if(m1(g),g===l){pr=null;break e}if(b!==null){b.return=A,pr=b;break e}pr=A}}}var Zy={getCacheForType:function(e){var n=Or(ar),l=n.data.get(e);return l===void 0&&(l=e(),n.data.set(e,l)),l},cacheSignal:function(){return Or(ar).controller.signal}},Jy=typeof WeakMap=="function"?WeakMap:Map,tn=0,xn=null,kt=null,Ft=0,on=0,Ai=null,ws=!1,Bo=!1,Hf=!1,Ya=0,Vn=0,bs=0,so=0,Vf=0,Si=0,Lo=0,Nl=null,ui=null,qf=!1,Mu=0,T1=0,Bu=1/0,Lu=null,Es=null,fr=0,_s=null,ko=null,Xa=0,Gf=0,Yf=null,O1=null,Rl=0,Xf=null;function Ci(){return(tn&2)!==0&&Ft!==0?Ft&-Ft:he.T!==null?$f():er()}function N1(){if(Si===0)if((Ft&536870912)===0||Yt){var e=Tt;Tt<<=1,(Tt&3932160)===0&&(Tt=262144),Si=e}else Si=536870912;return e=Ei.current,e!==null&&(e.flags|=32),Si}function ci(e,n,l){(e===xn&&(on===2||on===9)||e.cancelPendingCommit!==null)&&(jo(e,0),As(e,Ft,Si,!1)),wr(e,l),((tn&2)===0||e!==xn)&&(e===xn&&((tn&2)===0&&(so|=l),Vn===4&&As(e,Ft,Si,!1)),wa(e))}function R1(e,n,l){if((tn&6)!==0)throw Error(c(327));var g=!l&&(n&127)===0&&(n&e.expiredLanes)===0||Yn(e,n),b=g?t2(e,n):Wf(e,n,!0),A=g;do{if(b===0){Bo&&!g&&As(e,n,0,!1);break}else{if(l=e.current.alternate,A&&!$y(l)){b=Wf(e,n,!1),A=!1;continue}if(b===2){if(A=n,e.errorRecoveryDisabledLanes&A)var I=0;else I=e.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){n=I;e:{var j=e;b=Nl;var W=j.current.memoizedState.isDehydrated;if(W&&(jo(j,I).flags|=256),I=Wf(j,I,!1),I!==2){if(Hf&&!W){j.errorRecoveryDisabledLanes|=A,so|=A,b=4;break e}A=ui,ui=b,A!==null&&(ui===null?ui=A:ui.push.apply(ui,A))}b=I}if(A=!1,b!==2)continue}}if(b===1){jo(e,0),As(e,n,0,!0);break}e:{switch(g=e,A=b,A){case 0:case 1:throw Error(c(345));case 4:if((n&4194048)!==n)break;case 6:As(g,n,Si,!ws);break e;case 2:ui=null;break;case 3:case 5:break;default:throw Error(c(329))}if((n&62914560)===n&&(b=Mu+300-wn(),10<b)){if(As(g,n,Si,!ws),ca(g,0,!0)!==0)break e;Xa=n,g.timeoutHandle=og(I1.bind(null,g,l,ui,Lu,qf,n,Si,so,Lo,ws,A,"Throttled",-0,0),b);break e}I1(g,l,ui,Lu,qf,n,Si,so,Lo,ws,A,null,-0,0)}}break}while(!0);wa(e)}function I1(e,n,l,g,b,A,I,j,W,fe,be,Oe,de,ye){if(e.timeoutHandle=-1,Oe=n.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cr},_1(n,A,Oe);var We=(A&62914560)===A?Mu-wn():(A&4194048)===A?T1-wn():0;if(We=j2(Oe,We),We!==null){Xa=A,e.cancelPendingCommit=We(U1.bind(null,e,n,A,l,g,b,I,j,W,be,Oe,null,de,ye)),As(e,A,I,!fe);return}}U1(e,n,A,l,g,b,I,j,W)}function $y(e){for(var n=e;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var g=0;g<l.length;g++){var b=l[g],A=b.getSnapshot;b=b.value;try{if(!p(A(),b))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function As(e,n,l,g){n&=~Vf,n&=~so,e.suspendedLanes|=n,e.pingedLanes&=~n,g&&(e.warmLanes|=n),g=e.expirationTimes;for(var b=n;0<b;){var A=31-Ie(b),I=1<<A;g[A]=-1,b&=~I}l!==0&&Ca(e,l,n)}function ku(){return(tn&6)===0?(Il(0),!1):!0}function Kf(){if(kt!==null){if(on===0)var e=kt.return;else e=kt,ka=Zs=null,cf(e),To=null,dl=0,e=kt;for(;e!==null;)l1(e.alternate,e),e=e.return;kt=null}}function jo(e,n){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,x2(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Xa=0,Kf(),xn=e,kt=l=Ba(e.current,null),Ft=n,on=0,Ai=null,ws=!1,Bo=Yn(e,n),Hf=!1,Lo=Si=Vf=so=bs=Vn=0,ui=Nl=null,qf=!1,(n&8)!==0&&(n|=n&32);var g=e.entangledLanes;if(g!==0)for(e=e.entanglements,g&=n;0<g;){var b=31-Ie(g),A=1<<b;n|=e[b],g&=~A}return Ya=n,gr(),l}function D1(e,n){At=null,he.H=bl,n===Co||n===fu?(n=Kd(),on=3):n===Zc?(n=Kd(),on=4):on=n===Cf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ai=n,kt===null&&(Vn=1,Su(e,ki(n,e.current)))}function M1(){var e=Ei.current;return e===null?!0:(Ft&4194048)===Ft?zi===null:(Ft&62914560)===Ft||(Ft&536870912)!==0?e===zi:!1}function B1(){var e=he.H;return he.H=bl,e===null?bl:e}function L1(){var e=he.A;return he.A=Zy,e}function ju(){Vn=4,ws||(Ft&4194048)!==Ft&&Ei.current!==null||(Bo=!0),(bs&134217727)===0&&(so&134217727)===0||xn===null||As(xn,Ft,Si,!1)}function Wf(e,n,l){var g=tn;tn|=2;var b=B1(),A=L1();(xn!==e||Ft!==n)&&(Lu=null,jo(e,n)),n=!1;var I=Vn;e:do try{if(on!==0&&kt!==null){var j=kt,W=Ai;switch(on){case 8:Kf(),I=6;break e;case 3:case 2:case 9:case 6:Ei.current===null&&(n=!0);var fe=on;if(on=0,Ai=null,Po(e,j,W,fe),l&&Bo){I=0;break e}break;default:fe=on,on=0,Ai=null,Po(e,j,W,fe)}}e2(),I=Vn;break}catch(be){D1(e,be)}while(!0);return n&&e.shellSuspendCounter++,ka=Zs=null,tn=g,he.H=b,he.A=A,kt===null&&(xn=null,Ft=0,gr()),I}function e2(){for(;kt!==null;)k1(kt)}function t2(e,n){var l=tn;tn|=2;var g=B1(),b=L1();xn!==e||Ft!==n?(Lu=null,Bu=wn()+500,jo(e,n)):Bo=Yn(e,n);e:do try{if(on!==0&&kt!==null){n=kt;var A=Ai;t:switch(on){case 1:on=0,Ai=null,Po(e,n,A,1);break;case 2:case 9:if(Yd(A)){on=0,Ai=null,j1(n);break}n=function(){on!==2&&on!==9||xn!==e||(on=7),wa(e)},A.then(n,n);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:Yd(A)?(on=0,Ai=null,j1(n)):(on=0,Ai=null,Po(e,n,A,7));break;case 5:var I=null;switch(kt.tag){case 26:I=kt.memoizedState;case 5:case 27:var j=kt;if(I?Eg(I):j.stateNode.complete){on=0,Ai=null;var W=j.sibling;if(W!==null)kt=W;else{var fe=j.return;fe!==null?(kt=fe,Pu(fe)):kt=null}break t}}on=0,Ai=null,Po(e,n,A,5);break;case 6:on=0,Ai=null,Po(e,n,A,6);break;case 8:Kf(),Vn=6;break e;default:throw Error(c(462))}}n2();break}catch(be){D1(e,be)}while(!0);return ka=Zs=null,he.H=g,he.A=b,tn=l,kt!==null?0:(xn=null,Ft=0,gr(),Vn)}function n2(){for(;kt!==null&&!Aa();)k1(kt)}function k1(e){var n=s1(e.alternate,e,Ya);e.memoizedProps=e.pendingProps,n===null?Pu(e):kt=n}function j1(e){var n=e,l=n.alternate;switch(n.tag){case 15:case 0:n=e1(l,n,n.pendingProps,n.type,void 0,Ft);break;case 11:n=e1(l,n,n.pendingProps,n.type.render,n.ref,Ft);break;case 5:cf(n);default:l1(l,n),n=kt=Ld(n,Ya),n=s1(l,n,Ya)}e.memoizedProps=e.pendingProps,n===null?Pu(e):kt=n}function Po(e,n,l,g){ka=Zs=null,cf(n),To=null,dl=0;var b=n.return;try{if(qy(e,b,n,l,Ft)){Vn=1,Su(e,ki(l,e.current)),kt=null;return}}catch(A){if(b!==null)throw kt=b,A;Vn=1,Su(e,ki(l,e.current)),kt=null;return}n.flags&32768?(Yt||g===1?e=!0:Bo||(Ft&536870912)!==0?e=!1:(ws=e=!0,(g===2||g===9||g===3||g===6)&&(g=Ei.current,g!==null&&g.tag===13&&(g.flags|=16384))),P1(n,e)):Pu(n)}function Pu(e){var n=e;do{if((n.flags&32768)!==0){P1(n,ws);return}e=n.return;var l=Xy(n.alternate,n,Ya);if(l!==null){kt=l;return}if(n=n.sibling,n!==null){kt=n;return}kt=n=e}while(n!==null);Vn===0&&(Vn=5)}function P1(e,n){do{var l=Ky(e.alternate,e);if(l!==null){l.flags&=32767,kt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(e=e.sibling,e!==null)){kt=e;return}kt=e=l}while(e!==null);Vn=6,kt=null}function U1(e,n,l,g,b,A,I,j,W){e.cancelPendingCommit=null;do Uu();while(fr!==0);if((tn&6)!==0)throw Error(c(327));if(n!==null){if(n===e.current)throw Error(c(177));if(A=n.lanes|n.childLanes,A|=_t,Br(e,l,A,I,j,W),e===xn&&(kt=xn=null,Ft=0),ko=n,_s=e,Xa=l,Gf=A,Yf=b,O1=g,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s2(vr,function(){return q1(),null})):(e.callbackNode=null,e.callbackPriority=0),g=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||g){g=he.T,he.T=null,b=Ae.p,Ae.p=2,I=tn,tn|=4;try{Wy(e,n,l)}finally{tn=I,Ae.p=b,he.T=g}}fr=1,z1(),F1(),H1()}}function z1(){if(fr===1){fr=0;var e=_s,n=ko,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=he.T,he.T=null;var g=Ae.p;Ae.p=2;var b=tn;tn|=4;try{w1(n,e);var A=oh,I=_(e.containerInfo),j=A.focusedElem,W=A.selectionRange;if(I!==j&&j&&j.ownerDocument&&x(j.ownerDocument.documentElement,j)){if(W!==null&&S(j)){var fe=W.start,be=W.end;if(be===void 0&&(be=fe),"selectionStart"in j)j.selectionStart=fe,j.selectionEnd=Math.min(be,j.value.length);else{var Oe=j.ownerDocument||document,de=Oe&&Oe.defaultView||window;if(de.getSelection){var ye=de.getSelection(),We=j.textContent.length,lt=Math.min(W.start,We),gn=W.end===void 0?lt:Math.min(W.end,We);!ye.extend&&lt>gn&&(I=gn,gn=lt,lt=I);var ie=y(j,lt),$=y(j,gn);if(ie&&$&&(ye.rangeCount!==1||ye.anchorNode!==ie.node||ye.anchorOffset!==ie.offset||ye.focusNode!==$.node||ye.focusOffset!==$.offset)){var ue=Oe.createRange();ue.setStart(ie.node,ie.offset),ye.removeAllRanges(),lt>gn?(ye.addRange(ue),ye.extend($.node,$.offset)):(ue.setEnd($.node,$.offset),ye.addRange(ue))}}}}for(Oe=[],ye=j;ye=ye.parentNode;)ye.nodeType===1&&Oe.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Oe.length;j++){var Se=Oe[j];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Zu=!!sh,oh=sh=null}finally{tn=b,Ae.p=g,he.T=l}}e.current=n,fr=2}}function F1(){if(fr===2){fr=0;var e=_s,n=ko,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=he.T,he.T=null;var g=Ae.p;Ae.p=2;var b=tn;tn|=4;try{p1(e,n.alternate,n)}finally{tn=b,Ae.p=g,he.T=l}}fr=3}}function H1(){if(fr===4||fr===3){fr=0,la();var e=_s,n=ko,l=Xa,g=O1;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?fr=5:(fr=0,ko=_s=null,V1(e,e.pendingLanes));var b=e.pendingLanes;if(b===0&&(Es=null),Lr(l),n=n.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot($t,n,void 0,(n.current.flags&128)===128)}catch{}if(g!==null){n=he.T,b=Ae.p,Ae.p=2,he.T=null;try{for(var A=e.onRecoverableError,I=0;I<g.length;I++){var j=g[I];A(j.value,{componentStack:j.stack})}}finally{he.T=n,Ae.p=b}}(Xa&3)!==0&&Uu(),wa(e),b=e.pendingLanes,(l&261930)!==0&&(b&42)!==0?e===Xf?Rl++:(Rl=0,Xf=e):Rl=0,Il(0)}}function V1(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,fl(n)))}function Uu(){return z1(),F1(),H1(),q1()}function q1(){if(fr!==5)return!1;var e=_s,n=Gf;Gf=0;var l=Lr(Xa),g=he.T,b=Ae.p;try{Ae.p=32>l?32:l,he.T=null,l=Yf,Yf=null;var A=_s,I=Xa;if(fr=0,ko=_s=null,Xa=0,(tn&6)!==0)throw Error(c(331));var j=tn;if(tn|=4,S1(A.current),E1(A,A.current,I,l),tn=j,Il(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot($t,A)}catch{}return!0}finally{Ae.p=b,he.T=g,V1(e,n)}}function G1(e,n,l){n=ki(l,n),n=Sf(e.stateNode,n,2),e=ms(e,n,2),e!==null&&(wr(e,2),wa(e))}function ln(e,n,l){if(e.tag===3)G1(e,e,l);else for(;n!==null;){if(n.tag===3){G1(n,e,l);break}else if(n.tag===1){var g=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Es===null||!Es.has(g))){e=ki(l,e),l=Y0(2),g=ms(n,l,2),g!==null&&(X0(l,g,n,e),wr(g,2),wa(g));break}}n=n.return}}function Qf(e,n,l){var g=e.pingCache;if(g===null){g=e.pingCache=new Jy;var b=new Set;g.set(n,b)}else b=g.get(n),b===void 0&&(b=new Set,g.set(n,b));b.has(l)||(Hf=!0,b.add(l),e=r2.bind(null,e,n,l),n.then(e,e))}function r2(e,n,l){var g=e.pingCache;g!==null&&g.delete(n),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,xn===e&&(Ft&l)===l&&(Vn===4||Vn===3&&(Ft&62914560)===Ft&&300>wn()-Mu?(tn&2)===0&&jo(e,0):Vf|=l,Lo===Ft&&(Lo=0)),wa(e)}function Y1(e,n){n===0&&(n=Xn()),e=Dn(e,n),e!==null&&(wr(e,n),wa(e))}function i2(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),Y1(e,l)}function a2(e,n){var l=0;switch(e.tag){case 31:case 13:var g=e.stateNode,b=e.memoizedState;b!==null&&(l=b.retryLane);break;case 19:g=e.stateNode;break;case 22:g=e.stateNode._retryCache;break;default:throw Error(c(314))}g!==null&&g.delete(n),Y1(e,l)}function s2(e,n){return Mi(e,n)}var zu=null,Uo=null,Zf=!1,Fu=!1,Jf=!1,Ss=0;function wa(e){e!==Uo&&e.next===null&&(Uo===null?zu=Uo=e:Uo=Uo.next=e),Fu=!0,Zf||(Zf=!0,l2())}function Il(e,n){if(!Jf&&Fu){Jf=!0;do for(var l=!1,g=zu;g!==null;){if(e!==0){var b=g.pendingLanes;if(b===0)var A=0;else{var I=g.suspendedLanes,j=g.pingedLanes;A=(1<<31-Ie(42|e)+1)-1,A&=b&~(I&~j),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(l=!0,Q1(g,A))}else A=Ft,A=ca(g,g===xn?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||Yn(g,A)||(l=!0,Q1(g,A));g=g.next}while(l);Jf=!1}}function o2(){X1()}function X1(){Fu=Zf=!1;var e=0;Ss!==0&&v2()&&(e=Ss);for(var n=wn(),l=null,g=zu;g!==null;){var b=g.next,A=K1(g,n);A===0?(g.next=null,l===null?zu=b:l.next=b,b===null&&(Uo=l)):(l=g,(e!==0||(A&3)!==0)&&(Fu=!0)),g=b}fr!==0&&fr!==5||Il(e),Ss!==0&&(Ss=0)}function K1(e,n){for(var l=e.suspendedLanes,g=e.pingedLanes,b=e.expirationTimes,A=e.pendingLanes&-62914561;0<A;){var I=31-Ie(A),j=1<<I,W=b[I];W===-1?((j&l)===0||(j&g)!==0)&&(b[I]=Ps(j,n)):W<=n&&(e.expiredLanes|=j),A&=~j}if(n=xn,l=Ft,l=ca(e,e===n?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),g=e.callbackNode,l===0||e===n&&(on===2||on===9)||e.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Yn(e,l)){if(n=l&-l,n===e.callbackPriority)return n;switch(g!==null&&Fe(g),Lr(l)){case 2:case 8:l=fi;break;case 32:l=vr;break;case 268435456:l=Sa;break;default:l=vr}return g=W1.bind(null,e),l=Mi(l,g),e.callbackPriority=n,e.callbackNode=l,n}return g!==null&&g!==null&&Fe(g),e.callbackPriority=2,e.callbackNode=null,2}function W1(e,n){if(fr!==0&&fr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Uu()&&e.callbackNode!==l)return null;var g=Ft;return g=ca(e,e===xn?g:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),g===0?null:(R1(e,g,n),K1(e,wn()),e.callbackNode!=null&&e.callbackNode===l?W1.bind(null,e):null)}function Q1(e,n){if(Uu())return null;R1(e,n,!0)}function l2(){w2(function(){(tn&6)!==0?Mi(Pn,o2):X1()})}function $f(){if(Ss===0){var e=Ao;e===0&&(e=ze,ze<<=1,(ze&261888)===0&&(ze=256)),Ss=e}return Ss}function Z1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yr(""+e)}function J1(e,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,e.id&&l.setAttribute("form",e.id),n.parentNode.insertBefore(l,n),e=new FormData(e),l.parentNode.removeChild(l),e}function u2(e,n,l,g,b){if(n==="submit"&&l&&l.stateNode===b){var A=Z1((b[Pt]||null).action),I=g.submitter;I&&(n=(n=I[Pt]||null)?Z1(n.formAction):I.getAttribute("formAction"),n!==null&&(A=n,I=null));var j=new Wn("action","action",null,g,b);e.push({event:j,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Ss!==0){var W=I?J1(b,I):new FormData(b);xf(l,{pending:!0,data:W,method:b.method,action:A},null,W)}}else typeof A=="function"&&(j.preventDefault(),W=I?J1(b,I):new FormData(b),xf(l,{pending:!0,data:W,method:b.method,action:A},A,W))},currentTarget:b}]})}}for(var eh=0;eh<Pe.length;eh++){var th=Pe[eh],c2=th.toLowerCase(),f2=th[0].toUpperCase()+th.slice(1);Le(c2,"on"+f2)}Le(ae,"onAnimationEnd"),Le(oe,"onAnimationIteration"),Le(ce,"onAnimationStart"),Le("dblclick","onDoubleClick"),Le("focusin","onFocus"),Le("focusout","onBlur"),Le(ve,"onTransitionRun"),Le(Ne,"onTransitionStart"),Le(je,"onTransitionCancel"),Le(Re,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function $1(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var g=e[l],b=g.event;g=g.listeners;e:{var A=void 0;if(n)for(var I=g.length-1;0<=I;I--){var j=g[I],W=j.instance,fe=j.currentTarget;if(j=j.listener,W!==A&&b.isPropagationStopped())break e;A=j,b.currentTarget=fe;try{A(b)}catch(be){qe(be)}b.currentTarget=null,A=W}else for(I=0;I<g.length;I++){if(j=g[I],W=j.instance,fe=j.currentTarget,j=j.listener,W!==A&&b.isPropagationStopped())break e;A=j,b.currentTarget=fe;try{A(b)}catch(be){qe(be)}b.currentTarget=null,A=W}}}}function jt(e,n){var l=n[hi];l===void 0&&(l=n[hi]=new Set);var g=e+"__bubble";l.has(g)||(eg(n,e,2,!1),l.add(g))}function nh(e,n,l){var g=0;n&&(g|=4),eg(l,e,g,n)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[Hu]){e[Hu]=!0,Te.forEach(function(l){l!=="selectionchange"&&(h2.has(l)||nh(l,!1,e),nh(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Hu]||(n[Hu]=!0,nh("selectionchange",!1,n))}}function eg(e,n,l,g){switch(Ng(n)){case 2:var b=z2;break;case 8:b=F2;break;default:b=vh}l=b.bind(null,n,l,e),b=void 0,!Fs||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(b=!0),g?b!==void 0?e.addEventListener(n,l,{capture:!0,passive:b}):e.addEventListener(n,l,!0):b!==void 0?e.addEventListener(n,l,{passive:b}):e.addEventListener(n,l,!1)}function ih(e,n,l,g,b){var A=g;if((n&1)===0&&(n&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var j=g.stateNode.containerInfo;if(j===b)break;if(I===4)for(I=g.return;I!==null;){var W=I.tag;if((W===3||W===4)&&I.stateNode.containerInfo===b)return;I=I.return}for(;j!==null;){if(I=bn(j),I===null)return;if(W=I.tag,W===5||W===6||W===26||W===27){g=A=I;continue e}j=j.parentNode}}g=g.return}fa(function(){var fe=A,be=es(l),Oe=[];e:{var de=ke.get(e);if(de!==void 0){var ye=Wn,We=e;switch(e){case"keypress":if(ni(l)===0)break e;case"keydown":case"keyup":ye=Zi;break;case"focusin":We="focus",ye=ga;break;case"focusout":We="blur",ye=ga;break;case"beforeblur":case"afterblur":ye=ga;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Ys;break;case ae:case oe:case ce:ye=wt;break;case Re:ye=yi;break;case"scroll":case"scrollend":ye=Oa;break;case"wheel":ye=as;break;case"copy":case"cut":case"paste":ye=pi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Wt;break;case"toggle":case"beforetoggle":ye=ss}var lt=(n&4)!==0,gn=!lt&&(e==="scroll"||e==="scrollend"),ie=lt?de!==null?de+"Capture":null:de;lt=[];for(var $=fe,ue;$!==null;){var Se=$;if(ue=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ue===null||ie===null||(Se=ut($,ie),Se!=null&&lt.push(Ml($,Se,ue))),gn)break;$=$.return}0<lt.length&&(de=new ye(de,We,null,l,be),Oe.push({event:de,listeners:lt}))}}if((n&7)===0){e:{if(de=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",de&&l!==Pr&&(We=l.relatedTarget||l.fromElement)&&(bn(We)||We[Un]))break e;if((ye||de)&&(de=be.window===be?be:(de=be.ownerDocument)?de.defaultView||de.parentWindow:window,ye?(We=l.relatedTarget||l.toElement,ye=fe,We=We?bn(We):null,We!==null&&(gn=m(We),lt=We.tag,We!==gn||lt!==5&&lt!==27&&lt!==6)&&(We=null)):(ye=null,We=fe),ye!==We)){if(lt=qt,Se="onMouseLeave",ie="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(lt=Wt,Se="onPointerLeave",ie="onPointerEnter",$="pointer"),gn=ye==null?de:kr(ye),ue=We==null?de:kr(We),de=new lt(Se,$+"leave",ye,l,be),de.target=gn,de.relatedTarget=ue,Se=null,bn(be)===fe&&(lt=new lt(ie,$+"enter",We,l,be),lt.target=ue,lt.relatedTarget=gn,Se=lt),gn=Se,ye&&We)t:{for(lt=d2,ie=ye,$=We,ue=0,Se=ie;Se;Se=lt(Se))ue++;Se=0;for(var at=$;at;at=lt(at))Se++;for(;0<ue-Se;)ie=lt(ie),ue--;for(;0<Se-ue;)$=lt($),Se--;for(;ue--;){if(ie===$||$!==null&&ie===$.alternate){lt=ie;break t}ie=lt(ie),$=lt($)}lt=null}else lt=null;ye!==null&&tg(Oe,de,ye,lt,!1),We!==null&&gn!==null&&tg(Oe,gn,We,lt,!0)}}e:{if(de=fe?kr(fe):window,ye=de.nodeName&&de.nodeName.toLowerCase(),ye==="select"||ye==="input"&&de.type==="file")var Qt=dr;else if(Ia(de))if(ri)Qt=f;else{Qt=r;var $e=t}else ye=de.nodeName,!ye||ye.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?fe&&an(fe.elementType)&&(Qt=dr):Qt=o;if(Qt&&(Qt=Qt(e,fe))){zr(Oe,Qt,l,be);break e}$e&&$e(e,de,fe),e==="focusout"&&fe&&de.type==="number"&&fe.memoizedProps.value!=null&&V(de,"number",de.value)}switch($e=fe?kr(fe):window,e){case"focusin":(Ia($e)||$e.contentEditable==="true")&&(D=$e,B=fe,k=null);break;case"focusout":k=B=D=null;break;case"mousedown":U=!0;break;case"contextmenu":case"mouseup":case"dragend":U=!1,z(Oe,l,be);break;case"selectionchange":if(O)break;case"keydown":case"keyup":z(Oe,l,be)}var St;if(Ji)e:{switch(e){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else $i?Xs(e,l)&&(Ht="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ht="onCompositionStart");Ht&&(os&&l.locale!=="ko"&&($i||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&$i&&(St=ti()):(Xr=be,ei="value"in Xr?Xr.value:Xr.textContent,$i=!0)),$e=Vu(fe,Ht),0<$e.length&&(Ht=new is(Ht,e,null,l,be),Oe.push({event:Ht,listeners:$e}),St?Ht.data=St:(St=pa(l),St!==null&&(Ht.data=St)))),(St=xo?wi(e,l):us(e,l))&&(Ht=Vu(fe,"onBeforeInput"),0<Ht.length&&($e=new is("onBeforeInput","beforeinput",null,l,be),Oe.push({event:$e,listeners:Ht}),$e.data=St)),u2(Oe,e,fe,l,be)}$1(Oe,n)})}function Ml(e,n,l){return{instance:e,listener:n,currentTarget:l}}function Vu(e,n){for(var l=n+"Capture",g=[];e!==null;){var b=e,A=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||A===null||(b=ut(e,l),b!=null&&g.unshift(Ml(e,b,A)),b=ut(e,n),b!=null&&g.push(Ml(e,b,A))),e.tag===3)return g;e=e.return}return[]}function d2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tg(e,n,l,g,b){for(var A=n._reactName,I=[];l!==null&&l!==g;){var j=l,W=j.alternate,fe=j.stateNode;if(j=j.tag,W!==null&&W===g)break;j!==5&&j!==26&&j!==27||fe===null||(W=fe,b?(fe=ut(l,A),fe!=null&&I.unshift(Ml(l,fe,W))):b||(fe=ut(l,A),fe!=null&&I.push(Ml(l,fe,W)))),l=l.return}I.length!==0&&e.push({event:n,listeners:I})}var g2=/\r\n?/g,p2=/\u0000|\uFFFD/g;function ng(e){return(typeof e=="string"?e:""+e).replace(g2,`
`).replace(p2,"")}function rg(e,n){return n=ng(n),ng(e)===n}function dn(e,n,l,g,b,A){switch(l){case"children":typeof g=="string"?n==="body"||n==="textarea"&&g===""||Qi(e,g):(typeof g=="number"||typeof g=="bigint")&&n!=="body"&&Qi(e,""+g);break;case"className":Wi(e,"class",g);break;case"tabIndex":Wi(e,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Wi(e,l,g);break;case"style":et(e,g,A);break;case"data":if(n!=="object"){Wi(e,"data",g);break}case"src":case"href":if(g===""&&(n!=="a"||l!=="href")){e.removeAttribute(l);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){e.removeAttribute(l);break}g=Yr(""+g),e.setAttribute(l,g);break;case"action":case"formAction":if(typeof g=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(l==="formAction"?(n!=="input"&&dn(e,n,"name",b.name,b,null),dn(e,n,"formEncType",b.formEncType,b,null),dn(e,n,"formMethod",b.formMethod,b,null),dn(e,n,"formTarget",b.formTarget,b,null)):(dn(e,n,"encType",b.encType,b,null),dn(e,n,"method",b.method,b,null),dn(e,n,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){e.removeAttribute(l);break}g=Yr(""+g),e.setAttribute(l,g);break;case"onClick":g!=null&&(e.onclick=cr);break;case"onScroll":g!=null&&jt("scroll",e);break;case"onScrollEnd":g!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(c(61));if(l=g.__html,l!=null){if(b.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"multiple":e.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":e.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){e.removeAttribute("xlink:href");break}l=Yr(""+g),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(l,""+g):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":g===!0?e.setAttribute(l,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?e.setAttribute(l,g):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?e.setAttribute(l,g):e.removeAttribute(l);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?e.removeAttribute(l):e.setAttribute(l,g);break;case"popover":jt("beforetoggle",e),jt("toggle",e),xt(e,"popover",g);break;case"xlinkActuate":jr(e,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":jr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":jr(e,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":jr(e,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":jr(e,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":jr(e,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":jr(e,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":jr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":jr(e,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":xt(e,"is",g);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=yo.get(l)||l,xt(e,l,g))}}function ah(e,n,l,g,b,A){switch(l){case"style":et(e,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(c(61));if(l=g.__html,l!=null){if(b.children!=null)throw Error(c(60));e.innerHTML=l}}break;case"children":typeof g=="string"?Qi(e,g):(typeof g=="number"||typeof g=="bigint")&&Qi(e,""+g);break;case"onScroll":g!=null&&jt("scroll",e);break;case"onScrollEnd":g!=null&&jt("scrollend",e);break;case"onClick":g!=null&&(e.onclick=cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ta.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(b=l.endsWith("Capture"),n=l.slice(2,b?l.length-7:void 0),A=e[Pt]||null,A=A!=null?A[l]:null,typeof A=="function"&&e.removeEventListener(n,A,b),typeof g=="function")){typeof A!="function"&&A!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(n,g,b);break e}l in e?e[l]=g:g===!0?e.setAttribute(l,""):xt(e,l,g)}}}function Rr(e,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var g=!1,b=!1,A;for(A in l)if(l.hasOwnProperty(A)){var I=l[A];if(I!=null)switch(A){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:dn(e,n,A,I,l,null)}}b&&dn(e,n,"srcSet",l.srcSet,l,null),g&&dn(e,n,"src",l.src,l,null);return;case"input":jt("invalid",e);var j=A=I=b=null,W=null,fe=null;for(g in l)if(l.hasOwnProperty(g)){var be=l[g];if(be!=null)switch(g){case"name":b=be;break;case"type":I=be;break;case"checked":W=be;break;case"defaultChecked":fe=be;break;case"value":A=be;break;case"defaultValue":j=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(c(137,n));break;default:dn(e,n,g,be,l,null)}}le(e,A,j,W,fe,I,b,!1);return;case"select":jt("invalid",e),g=I=A=null;for(b in l)if(l.hasOwnProperty(b)&&(j=l[b],j!=null))switch(b){case"value":A=j;break;case"defaultValue":I=j;break;case"multiple":g=j;default:dn(e,n,b,j,l,null)}n=A,l=I,e.multiple=!!g,n!=null?Ye(e,!!g,n,!1):l!=null&&Ye(e,!!g,l,!0);return;case"textarea":jt("invalid",e),A=b=g=null;for(I in l)if(l.hasOwnProperty(I)&&(j=l[I],j!=null))switch(I){case"value":g=j;break;case"defaultValue":b=j;break;case"children":A=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(c(91));break;default:dn(e,n,I,j,l,null)}tr(e,g,b,A);return;case"option":for(W in l)if(l.hasOwnProperty(W)&&(g=l[W],g!=null))switch(W){case"selected":e.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:dn(e,n,W,g,l,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(g=0;g<Dl.length;g++)jt(Dl[g],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in l)if(l.hasOwnProperty(fe)&&(g=l[fe],g!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,n));default:dn(e,n,fe,g,l,null)}return;default:if(an(n)){for(be in l)l.hasOwnProperty(be)&&(g=l[be],g!==void 0&&ah(e,n,be,g,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(g=l[j],g!=null&&dn(e,n,j,g,l,null))}function m2(e,n,l,g){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,A=null,I=null,j=null,W=null,fe=null,be=null;for(ye in l){var Oe=l[ye];if(l.hasOwnProperty(ye)&&Oe!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":W=Oe;default:g.hasOwnProperty(ye)||dn(e,n,ye,null,g,Oe)}}for(var de in g){var ye=g[de];if(Oe=l[de],g.hasOwnProperty(de)&&(ye!=null||Oe!=null))switch(de){case"type":A=ye;break;case"name":b=ye;break;case"checked":fe=ye;break;case"defaultChecked":be=ye;break;case"value":I=ye;break;case"defaultValue":j=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(c(137,n));break;default:ye!==Oe&&dn(e,n,de,ye,g,Oe)}}mn(e,I,j,W,fe,be,A,b);return;case"select":ye=I=j=de=null;for(A in l)if(W=l[A],l.hasOwnProperty(A)&&W!=null)switch(A){case"value":break;case"multiple":ye=W;default:g.hasOwnProperty(A)||dn(e,n,A,null,g,W)}for(b in g)if(A=g[b],W=l[b],g.hasOwnProperty(b)&&(A!=null||W!=null))switch(b){case"value":de=A;break;case"defaultValue":j=A;break;case"multiple":I=A;default:A!==W&&dn(e,n,b,A,g,W)}n=j,l=I,g=ye,de!=null?Ye(e,!!l,de,!1):!!g!=!!l&&(n!=null?Ye(e,!!l,n,!0):Ye(e,!!l,l?[]:"",!1));return;case"textarea":ye=de=null;for(j in l)if(b=l[j],l.hasOwnProperty(j)&&b!=null&&!g.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:dn(e,n,j,null,g,b)}for(I in g)if(b=g[I],A=l[I],g.hasOwnProperty(I)&&(b!=null||A!=null))switch(I){case"value":de=b;break;case"defaultValue":ye=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:b!==A&&dn(e,n,I,b,g,A)}In(e,de,ye);return;case"option":for(var We in l)if(de=l[We],l.hasOwnProperty(We)&&de!=null&&!g.hasOwnProperty(We))switch(We){case"selected":e.selected=!1;break;default:dn(e,n,We,null,g,de)}for(W in g)if(de=g[W],ye=l[W],g.hasOwnProperty(W)&&de!==ye&&(de!=null||ye!=null))switch(W){case"selected":e.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:dn(e,n,W,de,g,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in l)de=l[lt],l.hasOwnProperty(lt)&&de!=null&&!g.hasOwnProperty(lt)&&dn(e,n,lt,null,g,de);for(fe in g)if(de=g[fe],ye=l[fe],g.hasOwnProperty(fe)&&de!==ye&&(de!=null||ye!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(c(137,n));break;default:dn(e,n,fe,de,g,ye)}return;default:if(an(n)){for(var gn in l)de=l[gn],l.hasOwnProperty(gn)&&de!==void 0&&!g.hasOwnProperty(gn)&&ah(e,n,gn,void 0,g,de);for(be in g)de=g[be],ye=l[be],!g.hasOwnProperty(be)||de===ye||de===void 0&&ye===void 0||ah(e,n,be,de,g,ye);return}}for(var ie in l)de=l[ie],l.hasOwnProperty(ie)&&de!=null&&!g.hasOwnProperty(ie)&&dn(e,n,ie,null,g,de);for(Oe in g)de=g[Oe],ye=l[Oe],!g.hasOwnProperty(Oe)||de===ye||de==null&&ye==null||dn(e,n,Oe,de,g,ye)}function ig(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function y2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,l=performance.getEntriesByType("resource"),g=0;g<l.length;g++){var b=l[g],A=b.transferSize,I=b.initiatorType,j=b.duration;if(A&&j&&ig(I)){for(I=0,j=b.responseEnd,g+=1;g<l.length;g++){var W=l[g],fe=W.startTime;if(fe>j)break;var be=W.transferSize,Oe=W.initiatorType;be&&ig(Oe)&&(W=W.responseEnd,I+=be*(W<j?1:(j-fe)/(W-fe)))}if(--g,n+=8*(A+I)/(b.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sh=null,oh=null;function qu(e){return e.nodeType===9?e:e.ownerDocument}function ag(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function lh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var uh=null;function v2(){var e=window.event;return e&&e.type==="popstate"?e===uh?!1:(uh=e,!0):(uh=null,!1)}var og=typeof setTimeout=="function"?setTimeout:void 0,x2=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,w2=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(e){return lg.resolve(null).then(e).catch(b2)}:og;function b2(e){setTimeout(function(){throw e})}function Cs(e){return e==="head"}function ug(e,n){var l=n,g=0;do{var b=l.nextSibling;if(e.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"||l==="/&"){if(g===0){e.removeChild(b),Vo(n);return}g--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")g++;else if(l==="html")Bl(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Bl(l);for(var A=l.firstChild;A;){var I=A.nextSibling,j=A.nodeName;A[Gr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&A.rel.toLowerCase()==="stylesheet"||l.removeChild(A),A=I}}else l==="body"&&Bl(e.ownerDocument.body);l=b}while(l);Vo(n)}function cg(e,n){var l=e;e=0;do{var g=l.nextSibling;if(l.nodeType===1?n?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(n?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=g}while(l)}function ch(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ch(l),Er(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function E2(e,n,l,g){for(;e.nodeType===1;){var b=l;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!g&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(g){if(!e[Gr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(A=e.getAttribute("rel"),A==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(A!==b.rel||e.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||e.getAttribute("title")!==(b.title==null?null:b.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(A=e.getAttribute("src"),(A!==(b.src==null?null:b.src)||e.getAttribute("type")!==(b.type==null?null:b.type)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&A&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var A=b.name==null?null:""+b.name;if(b.type==="hidden"&&e.getAttribute("name")===A)return e}else return e;if(e=Fi(e.nextSibling),e===null)break}return null}function _2(e,n,l){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Fi(e.nextSibling),e===null))return null;return e}function fg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Fi(e.nextSibling),e===null))return null;return e}function fh(e){return e.data==="$?"||e.data==="$~"}function hh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function A2(e,n){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||l.readyState!=="loading")n();else{var g=function(){n(),l.removeEventListener("DOMContentLoaded",g)};l.addEventListener("DOMContentLoaded",g),e._reactRetry=g}}function Fi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var dh=null;function hg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(n===0)return Fi(e.nextSibling);n--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||n++}e=e.nextSibling}return null}function dg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(n===0)return e;n--}else l!=="/$"&&l!=="/&"||n++}e=e.previousSibling}return null}function gg(e,n,l){switch(n=qu(l),e){case"html":if(e=n.documentElement,!e)throw Error(c(452));return e;case"head":if(e=n.head,!e)throw Error(c(453));return e;case"body":if(e=n.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Bl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Er(e)}var Hi=new Map,pg=new Set;function Gu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ka=Ae.d;Ae.d={f:S2,r:C2,D:T2,C:O2,L:N2,m:R2,X:D2,S:I2,M:M2};function S2(){var e=Ka.f(),n=ku();return e||n}function C2(e){var n=st(e);n!==null&&n.tag===5&&n.type==="form"?D0(n):Ka.r(e)}var zo=typeof document>"u"?null:document;function mg(e,n,l){var g=zo;if(g&&typeof n=="string"&&n){var b=vt(n);b='link[rel="'+e+'"][href="'+b+'"]',typeof l=="string"&&(b+='[crossorigin="'+l+'"]'),pg.has(b)||(pg.add(b),e={rel:e,crossOrigin:l,href:n},g.querySelector(b)===null&&(n=g.createElement("link"),Rr(n,"link",e),Cn(n),g.head.appendChild(n)))}}function T2(e){Ka.D(e),mg("dns-prefetch",e,null)}function O2(e,n){Ka.C(e,n),mg("preconnect",e,n)}function N2(e,n,l){Ka.L(e,n,l);var g=zo;if(g&&e&&n){var b='link[rel="preload"][as="'+vt(n)+'"]';n==="image"&&l&&l.imageSrcSet?(b+='[imagesrcset="'+vt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(b+='[imagesizes="'+vt(l.imageSizes)+'"]')):b+='[href="'+vt(e)+'"]';var A=b;switch(n){case"style":A=Fo(e);break;case"script":A=Ho(e)}Hi.has(A)||(e=N({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:e,as:n},l),Hi.set(A,e),g.querySelector(b)!==null||n==="style"&&g.querySelector(Ll(A))||n==="script"&&g.querySelector(kl(A))||(n=g.createElement("link"),Rr(n,"link",e),Cn(n),g.head.appendChild(n)))}}function R2(e,n){Ka.m(e,n);var l=zo;if(l&&e){var g=n&&typeof n.as=="string"?n.as:"script",b='link[rel="modulepreload"][as="'+vt(g)+'"][href="'+vt(e)+'"]',A=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ho(e)}if(!Hi.has(A)&&(e=N({rel:"modulepreload",href:e},n),Hi.set(A,e),l.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kl(A)))return}g=l.createElement("link"),Rr(g,"link",e),Cn(g),l.head.appendChild(g)}}}function I2(e,n,l){Ka.S(e,n,l);var g=zo;if(g&&e){var b=Sn(g).hoistableStyles,A=Fo(e);n=n||"default";var I=b.get(A);if(!I){var j={loading:0,preload:null};if(I=g.querySelector(Ll(A)))j.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},l),(l=Hi.get(A))&&gh(e,l);var W=I=g.createElement("link");Cn(W),Rr(W,"link",e),W._p=new Promise(function(fe,be){W.onload=fe,W.onerror=be}),W.addEventListener("load",function(){j.loading|=1}),W.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Yu(I,n,g)}I={type:"stylesheet",instance:I,count:1,state:j},b.set(A,I)}}}function D2(e,n){Ka.X(e,n);var l=zo;if(l&&e){var g=Sn(l).hoistableScripts,b=Ho(e),A=g.get(b);A||(A=l.querySelector(kl(b)),A||(e=N({src:e,async:!0},n),(n=Hi.get(b))&&ph(e,n),A=l.createElement("script"),Cn(A),Rr(A,"link",e),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function M2(e,n){Ka.M(e,n);var l=zo;if(l&&e){var g=Sn(l).hoistableScripts,b=Ho(e),A=g.get(b);A||(A=l.querySelector(kl(b)),A||(e=N({src:e,async:!0,type:"module"},n),(n=Hi.get(b))&&ph(e,n),A=l.createElement("script"),Cn(A),Rr(A,"link",e),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(b,A))}}function yg(e,n,l,g){var b=(b=_e.current)?Gu(b):null;if(!b)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=Fo(l.href),l=Sn(b).hoistableStyles,g=l.get(n),g||(g={type:"style",instance:null,count:0,state:null},l.set(n,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Fo(l.href);var A=Sn(b).hoistableStyles,I=A.get(e);if(I||(b=b.ownerDocument||b,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(e,I),(A=b.querySelector(Ll(e)))&&!A._p&&(I.instance=A,I.state.loading=5),Hi.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Hi.set(e,l),A||B2(b,e,l,I.state))),n&&g===null)throw Error(c(528,""));return I}if(n&&g!==null)throw Error(c(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ho(l),l=Sn(b).hoistableScripts,g=l.get(n),g||(g={type:"script",instance:null,count:0,state:null},l.set(n,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Fo(e){return'href="'+vt(e)+'"'}function Ll(e){return'link[rel="stylesheet"]['+e+"]"}function vg(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function B2(e,n,l,g){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?g.loading=1:(n=e.createElement("link"),g.preload=n,n.addEventListener("load",function(){return g.loading|=1}),n.addEventListener("error",function(){return g.loading|=2}),Rr(n,"link",l),Cn(n),e.head.appendChild(n))}function Ho(e){return'[src="'+vt(e)+'"]'}function kl(e){return"script[async]"+e}function xg(e,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var g=e.querySelector('style[data-href~="'+vt(l.href)+'"]');if(g)return n.instance=g,Cn(g),g;var b=N({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return g=(e.ownerDocument||e).createElement("style"),Cn(g),Rr(g,"style",b),Yu(g,l.precedence,e),n.instance=g;case"stylesheet":b=Fo(l.href);var A=e.querySelector(Ll(b));if(A)return n.state.loading|=4,n.instance=A,Cn(A),A;g=vg(l),(b=Hi.get(b))&&gh(g,b),A=(e.ownerDocument||e).createElement("link"),Cn(A);var I=A;return I._p=new Promise(function(j,W){I.onload=j,I.onerror=W}),Rr(A,"link",g),n.state.loading|=4,Yu(A,l.precedence,e),n.instance=A;case"script":return A=Ho(l.src),(b=e.querySelector(kl(A)))?(n.instance=b,Cn(b),b):(g=l,(b=Hi.get(A))&&(g=N({},l),ph(g,b)),e=e.ownerDocument||e,b=e.createElement("script"),Cn(b),Rr(b,"link",g),e.head.appendChild(b),n.instance=b);case"void":return null;default:throw Error(c(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(g=n.instance,n.state.loading|=4,Yu(g,l.precedence,e));return n.instance}function Yu(e,n,l){for(var g=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,A=b,I=0;I<g.length;I++){var j=g[I];if(j.dataset.precedence===n)A=j;else if(A!==b)break}A?A.parentNode.insertBefore(e,A.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(e,n.firstChild))}function gh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ph(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xu=null;function wg(e,n,l){if(Xu===null){var g=new Map,b=Xu=new Map;b.set(l,g)}else b=Xu,g=b.get(l),g||(g=new Map,b.set(l,g));if(g.has(e))return g;for(g.set(e,null),l=l.getElementsByTagName(e),b=0;b<l.length;b++){var A=l[b];if(!(A[Gr]||A[rn]||e==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var I=A.getAttribute(n)||"";I=e+I;var j=g.get(I);j?j.push(A):g.set(I,[A])}}return g}function bg(e,n,l){e=e.ownerDocument||e,e.head.insertBefore(l,n==="title"?e.querySelector("head > title"):null)}function L2(e,n,l){if(l===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Eg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function k2(e,n,l,g){if(l.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Fo(g.href),A=n.querySelector(Ll(b));if(A){n=A._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ku.bind(e),n.then(e,e)),l.state.loading|=4,l.instance=A,Cn(A);return}A=n.ownerDocument||n,g=vg(g),(b=Hi.get(b))&&gh(g,b),A=A.createElement("link"),Cn(A);var I=A;I._p=new Promise(function(j,W){I.onload=j,I.onerror=W}),Rr(A,"link",g),l.instance=A}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,n),(n=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Ku.bind(e),n.addEventListener("load",l),n.addEventListener("error",l))}}var mh=0;function j2(e,n){return e.stylesheets&&e.count===0&&Qu(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var g=setTimeout(function(){if(e.stylesheets&&Qu(e,e.stylesheets),e.unsuspend){var A=e.unsuspend;e.unsuspend=null,A()}},6e4+n);0<e.imgBytes&&mh===0&&(mh=62500*y2());var b=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qu(e,e.stylesheets),e.unsuspend)){var A=e.unsuspend;e.unsuspend=null,A()}},(e.imgBytes>mh?50:800)+n);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wu=null;function Qu(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wu=new Map,n.forEach(P2,e),Wu=null,Ku.call(e))}function P2(e,n){if(!(n.state.loading&4)){var l=Wu.get(e);if(l)var g=l.get(null);else{l=new Map,Wu.set(e,l);for(var b=e.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<b.length;A++){var I=b[A];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(l.set(I.dataset.precedence,I),g=I)}g&&l.set(null,g)}b=n.instance,I=b.getAttribute("data-precedence"),A=l.get(I)||g,A===g&&l.set(null,b),l.set(I,b),this.count++,g=Ku.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),A?A.parentNode.insertBefore(b,A.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(b,e.firstChild)),n.state.loading|=4}}var jl={$$typeof:re,Provider:null,Consumer:null,_currentValue:Ze,_currentValue2:Ze,_threadCount:0};function U2(e,n,l,g,b,A,I,j,W){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=A,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function _g(e,n,l,g,b,A,I,j,W,fe,be,Oe){return e=new U2(e,n,l,I,W,fe,be,Oe,j),n=1,A===!0&&(n|=24),A=bi(3,null,null,n),e.current=A,A.stateNode=e,n=Kc(),n.refCount++,e.pooledCache=n,n.refCount++,A.memoizedState={element:g,isDehydrated:l,cache:n},Jc(A),e}function Ag(e){return e?(e=ai,e):ai}function Sg(e,n,l,g,b,A){b=Ag(b),g.context===null?g.context=b:g.pendingContext=b,g=ps(n),g.payload={element:l},A=A===void 0?null:A,A!==null&&(g.callback=A),l=ms(e,g,n),l!==null&&(ci(l,e,n),pl(l,e,n))}function Cg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function yh(e,n){Cg(e,n),(e=e.alternate)&&Cg(e,n)}function Tg(e){if(e.tag===13||e.tag===31){var n=Dn(e,67108864);n!==null&&ci(n,e,67108864),yh(e,67108864)}}function Og(e){if(e.tag===13||e.tag===31){var n=Ci();n=$n(n);var l=Dn(e,n);l!==null&&ci(l,e,n),yh(e,n)}}var Zu=!0;function z2(e,n,l,g){var b=he.T;he.T=null;var A=Ae.p;try{Ae.p=2,vh(e,n,l,g)}finally{Ae.p=A,he.T=b}}function F2(e,n,l,g){var b=he.T;he.T=null;var A=Ae.p;try{Ae.p=8,vh(e,n,l,g)}finally{Ae.p=A,he.T=b}}function vh(e,n,l,g){if(Zu){var b=xh(g);if(b===null)ih(e,n,g,Ju,l),Rg(e,g);else if(V2(b,e,n,l,g))g.stopPropagation();else if(Rg(e,g),n&4&&-1<H2.indexOf(e)){for(;b!==null;){var A=st(b);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var I=Zr(A.pendingLanes);if(I!==0){var j=A;for(j.pendingLanes|=2,j.entangledLanes|=2;I;){var W=1<<31-Ie(I);j.entanglements[1]|=W,I&=~W}wa(A),(tn&6)===0&&(Bu=wn()+500,Il(0))}}break;case 31:case 13:j=Dn(A,2),j!==null&&ci(j,A,2),ku(),yh(A,2)}if(A=xh(g),A===null&&ih(e,n,g,Ju,l),A===b)break;b=A}b!==null&&g.stopPropagation()}else ih(e,n,g,null,l)}}function xh(e){return e=es(e),wh(e)}var Ju=null;function wh(e){if(Ju=null,e=bn(e),e!==null){var n=m(e);if(n===null)e=null;else{var l=n.tag;if(l===13){if(e=w(n),e!==null)return e;e=null}else if(l===31){if(e=C(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Ju=e,null}function Ng(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gi()){case Pn:return 2;case fi:return 8;case vr:case Ln:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var bh=!1,Ts=null,Os=null,Ns=null,Pl=new Map,Ul=new Map,Rs=[],H2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rg(e,n){switch(e){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Pl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(n.pointerId)}}function zl(e,n,l,g,b,A){return e===null||e.nativeEvent!==A?(e={blockedOn:n,domEventName:l,eventSystemFlags:g,nativeEvent:A,targetContainers:[b]},n!==null&&(n=st(n),n!==null&&Tg(n)),e):(e.eventSystemFlags|=g,n=e.targetContainers,b!==null&&n.indexOf(b)===-1&&n.push(b),e)}function V2(e,n,l,g,b){switch(n){case"focusin":return Ts=zl(Ts,e,n,l,g,b),!0;case"dragenter":return Os=zl(Os,e,n,l,g,b),!0;case"mouseover":return Ns=zl(Ns,e,n,l,g,b),!0;case"pointerover":var A=b.pointerId;return Pl.set(A,zl(Pl.get(A)||null,e,n,l,g,b)),!0;case"gotpointercapture":return A=b.pointerId,Ul.set(A,zl(Ul.get(A)||null,e,n,l,g,b)),!0}return!1}function Ig(e){var n=bn(e.target);if(n!==null){var l=m(n);if(l!==null){if(n=l.tag,n===13){if(n=w(l),n!==null){e.blockedOn=n,He(e.priority,function(){Og(l)});return}}else if(n===31){if(n=C(l),n!==null){e.blockedOn=n,He(e.priority,function(){Og(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $u(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=xh(e.nativeEvent);if(l===null){l=e.nativeEvent;var g=new l.constructor(l.type,l);Pr=g,l.target.dispatchEvent(g),Pr=null}else return n=st(l),n!==null&&Tg(n),e.blockedOn=l,!1;n.shift()}return!0}function Dg(e,n,l){$u(e)&&l.delete(n)}function q2(){bh=!1,Ts!==null&&$u(Ts)&&(Ts=null),Os!==null&&$u(Os)&&(Os=null),Ns!==null&&$u(Ns)&&(Ns=null),Pl.forEach(Dg),Ul.forEach(Dg)}function ec(e,n){e.blockedOn===n&&(e.blockedOn=null,bh||(bh=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,q2)))}var tc=null;function Mg(e){tc!==e&&(tc=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){tc===e&&(tc=null);for(var n=0;n<e.length;n+=3){var l=e[n],g=e[n+1],b=e[n+2];if(typeof g!="function"){if(wh(g||l)===null)continue;break}var A=st(l);A!==null&&(e.splice(n,3),n-=3,xf(A,{pending:!0,data:b,method:l.method,action:g},g,b))}}))}function Vo(e){function n(W){return ec(W,e)}Ts!==null&&ec(Ts,e),Os!==null&&ec(Os,e),Ns!==null&&ec(Ns,e),Pl.forEach(n),Ul.forEach(n);for(var l=0;l<Rs.length;l++){var g=Rs[l];g.blockedOn===e&&(g.blockedOn=null)}for(;0<Rs.length&&(l=Rs[0],l.blockedOn===null);)Ig(l),l.blockedOn===null&&Rs.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(g=0;g<l.length;g+=3){var b=l[g],A=l[g+1],I=b[Pt]||null;if(typeof A=="function")I||Mg(l);else if(I){var j=null;if(A&&A.hasAttribute("formAction")){if(b=A,I=A[Pt]||null)j=I.formAction;else if(wh(b)!==null)continue}else j=I.action;typeof j=="function"?l[g+1]=j:(l.splice(g,3),g-=3),Mg(l)}}}function Bg(){function e(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(I){return b=I})},focusReset:"manual",scroll:"manual"})}function n(){b!==null&&(b(),b=null),g||setTimeout(l,20)}function l(){if(!g&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(l,100),function(){g=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),b!==null&&(b(),b=null)}}}function Eh(e){this._internalRoot=e}nc.prototype.render=Eh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(c(409));var l=n.current,g=Ci();Sg(l,g,e,n,null,null)},nc.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Sg(e.current,2,null,e,null,null),ku(),n[Un]=null}};function nc(e){this._internalRoot=e}nc.prototype.unstable_scheduleHydration=function(e){if(e){var n=er();e={blockedOn:null,target:e,priority:n};for(var l=0;l<Rs.length&&n!==0&&n<Rs[l].priority;l++);Rs.splice(l,0,e),l===0&&Ig(e)}};var Lg=i.version;if(Lg!=="19.2.0")throw Error(c(527,Lg,"19.2.0"));Ae.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=E(n),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var G2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{$t=rc.inject(G2),De=rc}catch{}}return Hl.createRoot=function(e,n){if(!v(e))throw Error(c(299));var l=!1,g="",b=H0,A=V0,I=q0;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(g=n.identifierPrefix),n.onUncaughtError!==void 0&&(b=n.onUncaughtError),n.onCaughtError!==void 0&&(A=n.onCaughtError),n.onRecoverableError!==void 0&&(I=n.onRecoverableError)),n=_g(e,1,!1,null,null,l,g,null,b,A,I,Bg),e[Un]=n.current,rh(e),new Eh(n)},Hl.hydrateRoot=function(e,n,l){if(!v(e))throw Error(c(299));var g=!1,b="",A=H0,I=V0,j=q0,W=null;return l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(I=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(W=l.formState)),n=_g(e,1,!0,n,l??null,g,b,W,A,I,j,Bg),n.context=Ag(null),l=n.current,g=Ci(),g=$n(g),b=ps(g),b.callback=null,ms(l,b,g),l=g,n.current.lanes=l,wr(n,l),wa(n),e[Un]=n.current,rh(e),new nc(n)},Hl.version="19.2.0",Hl}var Gg;function nv(){if(Gg)return Sh.exports;Gg=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(i){console.error(i)}}return u(),Sh.exports=tv(),Sh.exports}var rv=nv();var Yg="popstate";function iv(u={}){function i(c,v){let{pathname:m,search:w,hash:C}=c.location;return ed("",{pathname:m,search:w,hash:C},v.state&&v.state.usr||null,v.state&&v.state.key||"default")}function a(c,v){return typeof v=="string"?v:Ql(v)}return sv(i,a,null,u)}function Bn(u,i){if(u===!1||u===null||typeof u>"u")throw new Error(i)}function Vi(u,i){if(!u){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function av(){return Math.random().toString(36).substring(2,10)}function Xg(u,i){return{usr:u.state,key:u.key,idx:i}}function ed(u,i,a=null,c){return{pathname:typeof u=="string"?u:u.pathname,search:"",hash:"",...typeof i=="string"?nl(i):i,state:a,key:i&&i.key||c||av()}}function Ql({pathname:u="/",search:i="",hash:a=""}){return i&&i!=="?"&&(u+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(u+=a.charAt(0)==="#"?a:"#"+a),u}function nl(u){let i={};if(u){let a=u.indexOf("#");a>=0&&(i.hash=u.substring(a),u=u.substring(0,a));let c=u.indexOf("?");c>=0&&(i.search=u.substring(c),u=u.substring(0,c)),u&&(i.pathname=u)}return i}function sv(u,i,a,c={}){let{window:v=document.defaultView,v5Compat:m=!1}=c,w=v.history,C="POP",T=null,E=R();E==null&&(E=0,w.replaceState({...w.state,idx:E},""));function R(){return(w.state||{idx:null}).idx}function N(){C="POP";let J=R(),ne=J==null?null:J-E;E=J,T&&T({action:C,location:Y.location,delta:ne})}function P(J,ne){C="PUSH";let se=ed(Y.location,J,ne);E=R()+1;let re=Xg(se,E),Ce=Y.createHref(se);try{w.pushState(re,"",Ce)}catch(Ke){if(Ke instanceof DOMException&&Ke.name==="DataCloneError")throw Ke;v.location.assign(Ce)}m&&T&&T({action:C,location:Y.location,delta:1})}function F(J,ne){C="REPLACE";let se=ed(Y.location,J,ne);E=R();let re=Xg(se,E),Ce=Y.createHref(se);w.replaceState(re,"",Ce),m&&T&&T({action:C,location:Y.location,delta:0})}function q(J){return ov(J)}let Y={get action(){return C},get location(){return u(v,w)},listen(J){if(T)throw new Error("A history only accepts one active listener");return v.addEventListener(Yg,N),T=J,()=>{v.removeEventListener(Yg,N),T=null}},createHref(J){return i(v,J)},createURL:q,encodeLocation(J){let ne=q(J);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:P,replace:F,go(J){return w.go(J)}};return Y}function ov(u,i=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(a,"No window.location.(origin|href) available to create URL");let c=typeof u=="string"?u:Ql(u);return c=c.replace(/ $/,"%20"),!i&&c.startsWith("//")&&(c=a+c),new URL(c,a)}function cm(u,i,a="/"){return lv(u,i,a,!1)}function lv(u,i,a,c){let v=typeof i=="string"?nl(i):i,m=Ja(v.pathname||"/",a);if(m==null)return null;let w=fm(u);uv(w);let C=null;for(let T=0;C==null&&T<w.length;++T){let E=wv(m);C=vv(w[T],E,c)}return C}function fm(u,i=[],a=[],c="",v=!1){let m=(w,C,T=v,E)=>{let R={relativePath:E===void 0?w.path||"":E,caseSensitive:w.caseSensitive===!0,childrenIndex:C,route:w};if(R.relativePath.startsWith("/")){if(!R.relativePath.startsWith(c)&&T)return;Bn(R.relativePath.startsWith(c),`Absolute route path "${R.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(c.length)}let N=Za([c,R.relativePath]),P=a.concat(R);w.children&&w.children.length>0&&(Bn(w.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),fm(w.children,i,P,N,T)),!(w.path==null&&!w.index)&&i.push({path:N,score:mv(N,w.index),routesMeta:P})};return u.forEach((w,C)=>{if(w.path===""||!w.path?.includes("?"))m(w,C);else for(let T of hm(w.path))m(w,C,!0,T)}),i}function hm(u){let i=u.split("/");if(i.length===0)return[];let[a,...c]=i,v=a.endsWith("?"),m=a.replace(/\?$/,"");if(c.length===0)return v?[m,""]:[m];let w=hm(c.join("/")),C=[];return C.push(...w.map(T=>T===""?m:[m,T].join("/"))),v&&C.push(...w),C.map(T=>u.startsWith("/")&&T===""?"/":T)}function uv(u){u.sort((i,a)=>i.score!==a.score?a.score-i.score:yv(i.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var cv=/^:[\w-]+$/,fv=3,hv=2,dv=1,gv=10,pv=-2,Kg=u=>u==="*";function mv(u,i){let a=u.split("/"),c=a.length;return a.some(Kg)&&(c+=pv),i&&(c+=hv),a.filter(v=>!Kg(v)).reduce((v,m)=>v+(cv.test(m)?fv:m===""?dv:gv),c)}function yv(u,i){return u.length===i.length&&u.slice(0,-1).every((c,v)=>c===i[v])?u[u.length-1]-i[i.length-1]:0}function vv(u,i,a=!1){let{routesMeta:c}=u,v={},m="/",w=[];for(let C=0;C<c.length;++C){let T=c[C],E=C===c.length-1,R=m==="/"?i:i.slice(m.length)||"/",N=wc({path:T.relativePath,caseSensitive:T.caseSensitive,end:E},R),P=T.route;if(!N&&E&&a&&!c[c.length-1].route.index&&(N=wc({path:T.relativePath,caseSensitive:T.caseSensitive,end:!1},R)),!N)return null;Object.assign(v,N.params),w.push({params:v,pathname:Za([m,N.pathname]),pathnameBase:Sv(Za([m,N.pathnameBase])),route:P}),N.pathnameBase!=="/"&&(m=Za([m,N.pathnameBase]))}return w}function wc(u,i){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[a,c]=xv(u.path,u.caseSensitive,u.end),v=i.match(a);if(!v)return null;let m=v[0],w=m.replace(/(.)\/+$/,"$1"),C=v.slice(1);return{params:c.reduce((E,{paramName:R,isOptional:N},P)=>{if(R==="*"){let q=C[P]||"";w=m.slice(0,m.length-q.length).replace(/(.)\/+$/,"$1")}const F=C[P];return N&&!F?E[R]=void 0:E[R]=(F||"").replace(/%2F/g,"/"),E},{}),pathname:m,pathnameBase:w,pattern:u}}function xv(u,i=!1,a=!0){Vi(u==="*"||!u.endsWith("*")||u.endsWith("/*"),`Route path "${u}" will be treated as if it were "${u.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${u.replace(/\*$/,"/*")}".`);let c=[],v="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,C,T)=>(c.push({paramName:C,isOptional:T!=null}),T?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return u.endsWith("*")?(c.push({paramName:"*"}),v+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?v+="\\/*$":u!==""&&u!=="/"&&(v+="(?:(?=\\/|$))"),[new RegExp(v,i?void 0:"i"),c]}function wv(u){try{return u.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Vi(!1,`The URL path "${u}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),u}}function Ja(u,i){if(i==="/")return u;if(!u.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,c=u.charAt(a);return c&&c!=="/"?null:u.slice(a)||"/"}var bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ev=u=>bv.test(u);function _v(u,i="/"){let{pathname:a,search:c="",hash:v=""}=typeof u=="string"?nl(u):u,m;if(a)if(Ev(a))m=a;else{if(a.includes("//")){let w=a;a=a.replace(/\/\/+/g,"/"),Vi(!1,`Pathnames cannot have embedded double slashes - normalizing ${w} -> ${a}`)}a.startsWith("/")?m=Wg(a.substring(1),"/"):m=Wg(a,i)}else m=i;return{pathname:m,search:Cv(c),hash:Tv(v)}}function Wg(u,i){let a=i.replace(/\/+$/,"").split("/");return u.split("/").forEach(v=>{v===".."?a.length>1&&a.pop():v!=="."&&a.push(v)}),a.length>1?a.join("/"):"/"}function Nh(u,i,a,c){return`Cannot include a '${u}' character in a manually specified \`to.${i}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Av(u){return u.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function yd(u){let i=Av(u);return i.map((a,c)=>c===i.length-1?a.pathname:a.pathnameBase)}function vd(u,i,a,c=!1){let v;typeof u=="string"?v=nl(u):(v={...u},Bn(!v.pathname||!v.pathname.includes("?"),Nh("?","pathname","search",v)),Bn(!v.pathname||!v.pathname.includes("#"),Nh("#","pathname","hash",v)),Bn(!v.search||!v.search.includes("#"),Nh("#","search","hash",v)));let m=u===""||v.pathname==="",w=m?"/":v.pathname,C;if(w==null)C=a;else{let N=i.length-1;if(!c&&w.startsWith("..")){let P=w.split("/");for(;P[0]==="..";)P.shift(),N-=1;v.pathname=P.join("/")}C=N>=0?i[N]:"/"}let T=_v(v,C),E=w&&w!=="/"&&w.endsWith("/"),R=(m||w===".")&&a.endsWith("/");return!T.pathname.endsWith("/")&&(E||R)&&(T.pathname+="/"),T}var Za=u=>u.join("/").replace(/\/\/+/g,"/"),Sv=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),Cv=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,Tv=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function Ov(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dm=["POST","PUT","PATCH","DELETE"];new Set(dm);var Nv=["GET",...dm];new Set(Nv);var rl=me.createContext(null);rl.displayName="DataRouter";var Rc=me.createContext(null);Rc.displayName="DataRouterState";me.createContext(!1);var gm=me.createContext({isTransitioning:!1});gm.displayName="ViewTransition";var Rv=me.createContext(new Map);Rv.displayName="Fetchers";var Iv=me.createContext(null);Iv.displayName="Await";var oa=me.createContext(null);oa.displayName="Navigation";var ru=me.createContext(null);ru.displayName="Location";var _a=me.createContext({outlet:null,matches:[],isDataRoute:!1});_a.displayName="Route";var xd=me.createContext(null);xd.displayName="RouteError";function Dv(u,{relative:i}={}){Bn(il(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=me.useContext(oa),{hash:v,pathname:m,search:w}=iu(u,{relative:i}),C=m;return a!=="/"&&(C=m==="/"?a:Za([a,m])),c.createHref({pathname:C,search:w,hash:v})}function il(){return me.useContext(ru)!=null}function ks(){return Bn(il(),"useLocation() may be used only in the context of a <Router> component."),me.useContext(ru).location}var pm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mm(u){me.useContext(oa).static||me.useLayoutEffect(u)}function Ic(){let{isDataRoute:u}=me.useContext(_a);return u?Gv():Mv()}function Mv(){Bn(il(),"useNavigate() may be used only in the context of a <Router> component.");let u=me.useContext(rl),{basename:i,navigator:a}=me.useContext(oa),{matches:c}=me.useContext(_a),{pathname:v}=ks(),m=JSON.stringify(yd(c)),w=me.useRef(!1);return mm(()=>{w.current=!0}),me.useCallback((T,E={})=>{if(Vi(w.current,pm),!w.current)return;if(typeof T=="number"){a.go(T);return}let R=vd(T,JSON.parse(m),v,E.relative==="path");u==null&&i!=="/"&&(R.pathname=R.pathname==="/"?i:Za([i,R.pathname])),(E.replace?a.replace:a.push)(R,E.state,E)},[i,a,m,v,u])}me.createContext(null);function iu(u,{relative:i}={}){let{matches:a}=me.useContext(_a),{pathname:c}=ks(),v=JSON.stringify(yd(a));return me.useMemo(()=>vd(u,JSON.parse(v),c,i==="path"),[u,v,c,i])}function Bv(u,i){return ym(u,i)}function ym(u,i,a,c,v){Bn(il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=me.useContext(oa),{matches:w}=me.useContext(_a),C=w[w.length-1],T=C?C.params:{},E=C?C.pathname:"/",R=C?C.pathnameBase:"/",N=C&&C.route;{let se=N&&N.path||"";vm(E,!N||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let P=ks(),F;if(i){let se=typeof i=="string"?nl(i):i;Bn(R==="/"||se.pathname?.startsWith(R),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${R}" but pathname "${se.pathname}" was given in the \`location\` prop.`),F=se}else F=P;let q=F.pathname||"/",Y=q;if(R!=="/"){let se=R.replace(/^\//,"").split("/");Y="/"+q.replace(/^\//,"").split("/").slice(se.length).join("/")}let J=cm(u,{pathname:Y});Vi(N||J!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Vi(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=Uv(J&&J.map(se=>Object.assign({},se,{params:Object.assign({},T,se.params),pathname:Za([R,m.encodeLocation?m.encodeLocation(se.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?R:Za([R,m.encodeLocation?m.encodeLocation(se.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:se.pathnameBase])})),w,a,c,v);return i&&ne?me.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},ne):ne}function Lv(){let u=qv(),i=Ov(u)?`${u.status} ${u.statusText}`:u instanceof Error?u.message:JSON.stringify(u),a=u instanceof Error?u.stack:null,c="rgba(200,200,200, 0.5)",v={padding:"0.5rem",backgroundColor:c},m={padding:"2px 4px",backgroundColor:c},w=null;return console.error("Error handled by React Router default ErrorBoundary:",u),w=me.createElement(me.Fragment,null,me.createElement("p",null," Hey developer "),me.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",me.createElement("code",{style:m},"ErrorBoundary")," or"," ",me.createElement("code",{style:m},"errorElement")," prop on your route.")),me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},i),a?me.createElement("pre",{style:v},a):null,w)}var kv=me.createElement(Lv,null),jv=class extends me.Component{constructor(u){super(u),this.state={location:u.location,revalidation:u.revalidation,error:u.error}}static getDerivedStateFromError(u){return{error:u}}static getDerivedStateFromProps(u,i){return i.location!==u.location||i.revalidation!=="idle"&&u.revalidation==="idle"?{error:u.error,location:u.location,revalidation:u.revalidation}:{error:u.error!==void 0?u.error:i.error,location:i.location,revalidation:u.revalidation||i.revalidation}}componentDidCatch(u,i){this.props.onError?this.props.onError(u,i):console.error("React Router caught the following error during render",u)}render(){return this.state.error!==void 0?me.createElement(_a.Provider,{value:this.props.routeContext},me.createElement(xd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pv({routeContext:u,match:i,children:a}){let c=me.useContext(rl);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),me.createElement(_a.Provider,{value:u},a)}function Uv(u,i=[],a=null,c=null,v=null){if(u==null){if(!a)return null;if(a.errors)u=a.matches;else if(i.length===0&&!a.initialized&&a.matches.length>0)u=a.matches;else return null}let m=u,w=a?.errors;if(w!=null){let R=m.findIndex(N=>N.route.id&&w?.[N.route.id]!==void 0);Bn(R>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(w).join(",")}`),m=m.slice(0,Math.min(m.length,R+1))}let C=!1,T=-1;if(a)for(let R=0;R<m.length;R++){let N=m[R];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(T=R),N.route.id){let{loaderData:P,errors:F}=a,q=N.route.loader&&!P.hasOwnProperty(N.route.id)&&(!F||F[N.route.id]===void 0);if(N.route.lazy||q){C=!0,T>=0?m=m.slice(0,T+1):m=[m[0]];break}}}let E=a&&c?(R,N)=>{c(R,{location:a.location,params:a.matches?.[0]?.params??{},errorInfo:N})}:void 0;return m.reduceRight((R,N,P)=>{let F,q=!1,Y=null,J=null;a&&(F=w&&N.route.id?w[N.route.id]:void 0,Y=N.route.errorElement||kv,C&&(T<0&&P===0?(vm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,J=null):T===P&&(q=!0,J=N.route.hydrateFallbackElement||null)));let ne=i.concat(m.slice(0,P+1)),se=()=>{let re;return F?re=Y:q?re=J:N.route.Component?re=me.createElement(N.route.Component,null):N.route.element?re=N.route.element:re=R,me.createElement(Pv,{match:N,routeContext:{outlet:R,matches:ne,isDataRoute:a!=null},children:re})};return a&&(N.route.ErrorBoundary||N.route.errorElement||P===0)?me.createElement(jv,{location:a.location,revalidation:a.revalidation,component:Y,error:F,children:se(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:E}):se()},null)}function wd(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zv(u){let i=me.useContext(rl);return Bn(i,wd(u)),i}function Fv(u){let i=me.useContext(Rc);return Bn(i,wd(u)),i}function Hv(u){let i=me.useContext(_a);return Bn(i,wd(u)),i}function bd(u){let i=Hv(u),a=i.matches[i.matches.length-1];return Bn(a.route.id,`${u} can only be used on routes that contain a unique "id"`),a.route.id}function Vv(){return bd("useRouteId")}function qv(){let u=me.useContext(xd),i=Fv("useRouteError"),a=bd("useRouteError");return u!==void 0?u:i.errors?.[a]}function Gv(){let{router:u}=zv("useNavigate"),i=bd("useNavigate"),a=me.useRef(!1);return mm(()=>{a.current=!0}),me.useCallback(async(v,m={})=>{Vi(a.current,pm),a.current&&(typeof v=="number"?u.navigate(v):await u.navigate(v,{fromRouteId:i,...m}))},[u,i])}var Qg={};function vm(u,i,a){!i&&!Qg[u]&&(Qg[u]=!0,Vi(!1,a))}me.memo(Yv);function Yv({routes:u,future:i,state:a,unstable_onError:c}){return ym(u,void 0,a,c,i)}function xm({to:u,replace:i,state:a,relative:c}){Bn(il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:v}=me.useContext(oa);Vi(!v,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=me.useContext(_a),{pathname:w}=ks(),C=Ic(),T=vd(u,yd(m),w,c==="path"),E=JSON.stringify(T);return me.useEffect(()=>{C(JSON.parse(E),{replace:i,state:a,relative:c})},[C,E,c,i,a]),null}function uo(u){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xv({basename:u="/",children:i=null,location:a,navigationType:c="POP",navigator:v,static:m=!1}){Bn(!il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=u.replace(/^\/*/,"/"),C=me.useMemo(()=>({basename:w,navigator:v,static:m,future:{}}),[w,v,m]);typeof a=="string"&&(a=nl(a));let{pathname:T="/",search:E="",hash:R="",state:N=null,key:P="default"}=a,F=me.useMemo(()=>{let q=Ja(T,w);return q==null?null:{location:{pathname:q,search:E,hash:R,state:N,key:P},navigationType:c}},[w,T,E,R,N,P,c]);return Vi(F!=null,`<Router basename="${w}"> is not able to match the URL "${T}${E}${R}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:me.createElement(oa.Provider,{value:C},me.createElement(ru.Provider,{children:i,value:F}))}function Kv({children:u,location:i}){return Bv(td(u),i)}function td(u,i=[]){let a=[];return me.Children.forEach(u,(c,v)=>{if(!me.isValidElement(c))return;let m=[...i,v];if(c.type===me.Fragment){a.push.apply(a,td(c.props.children,m));return}Bn(c.type===uo,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!c.props.index||!c.props.children,"An index route cannot have child routes.");let w={id:c.props.id||m.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(w.children=td(c.props.children,m)),a.push(w)}),a}var mc="get",yc="application/x-www-form-urlencoded";function Dc(u){return u!=null&&typeof u.tagName=="string"}function Wv(u){return Dc(u)&&u.tagName.toLowerCase()==="button"}function Qv(u){return Dc(u)&&u.tagName.toLowerCase()==="form"}function Zv(u){return Dc(u)&&u.tagName.toLowerCase()==="input"}function Jv(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function $v(u,i){return u.button===0&&(!i||i==="_self")&&!Jv(u)}var ic=null;function ex(){if(ic===null)try{new FormData(document.createElement("form"),0),ic=!1}catch{ic=!0}return ic}var tx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rh(u){return u!=null&&!tx.has(u)?(Vi(!1,`"${u}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yc}"`),null):u}function nx(u,i){let a,c,v,m,w;if(Qv(u)){let C=u.getAttribute("action");c=C?Ja(C,i):null,a=u.getAttribute("method")||mc,v=Rh(u.getAttribute("enctype"))||yc,m=new FormData(u)}else if(Wv(u)||Zv(u)&&(u.type==="submit"||u.type==="image")){let C=u.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let T=u.getAttribute("formaction")||C.getAttribute("action");if(c=T?Ja(T,i):null,a=u.getAttribute("formmethod")||C.getAttribute("method")||mc,v=Rh(u.getAttribute("formenctype"))||Rh(C.getAttribute("enctype"))||yc,m=new FormData(C,u),!ex()){let{name:E,type:R,value:N}=u;if(R==="image"){let P=E?`${E}.`:"";m.append(`${P}x`,"0"),m.append(`${P}y`,"0")}else E&&m.append(E,N)}}else{if(Dc(u))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=mc,c=null,v=yc,w=u}return m&&v==="text/plain"&&(w=m,m=void 0),{action:c,method:a.toLowerCase(),encType:v,formData:m,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ed(u,i){if(u===!1||u===null||typeof u>"u")throw new Error(i)}function rx(u,i,a){let c=typeof u=="string"?new URL(u,typeof window>"u"?"server://singlefetch/":window.location.origin):u;return c.pathname==="/"?c.pathname=`_root.${a}`:i&&Ja(c.pathname,i)==="/"?c.pathname=`${i.replace(/\/$/,"")}/_root.${a}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${a}`,c}async function ix(u,i){if(u.id in i)return i[u.id];try{let a=await import(u.module);return i[u.id]=a,a}catch(a){return console.error(`Error loading route module \`${u.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ax(u){return u==null?!1:u.href==null?u.rel==="preload"&&typeof u.imageSrcSet=="string"&&typeof u.imageSizes=="string":typeof u.rel=="string"&&typeof u.href=="string"}async function sx(u,i,a){let c=await Promise.all(u.map(async v=>{let m=i.routes[v.route.id];if(m){let w=await ix(m,a);return w.links?w.links():[]}return[]}));return cx(c.flat(1).filter(ax).filter(v=>v.rel==="stylesheet"||v.rel==="preload").map(v=>v.rel==="stylesheet"?{...v,rel:"prefetch",as:"style"}:{...v,rel:"prefetch"}))}function Zg(u,i,a,c,v,m){let w=(T,E)=>a[E]?T.route.id!==a[E].route.id:!0,C=(T,E)=>a[E].pathname!==T.pathname||a[E].route.path?.endsWith("*")&&a[E].params["*"]!==T.params["*"];return m==="assets"?i.filter((T,E)=>w(T,E)||C(T,E)):m==="data"?i.filter((T,E)=>{let R=c.routes[T.route.id];if(!R||!R.hasLoader)return!1;if(w(T,E)||C(T,E))return!0;if(T.route.shouldRevalidate){let N=T.route.shouldRevalidate({currentUrl:new URL(v.pathname+v.search+v.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(u,window.origin),nextParams:T.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function ox(u,i,{includeHydrateFallback:a}={}){return lx(u.map(c=>{let v=i.routes[c.route.id];if(!v)return[];let m=[v.module];return v.clientActionModule&&(m=m.concat(v.clientActionModule)),v.clientLoaderModule&&(m=m.concat(v.clientLoaderModule)),a&&v.hydrateFallbackModule&&(m=m.concat(v.hydrateFallbackModule)),v.imports&&(m=m.concat(v.imports)),m}).flat(1))}function lx(u){return[...new Set(u)]}function ux(u){let i={},a=Object.keys(u).sort();for(let c of a)i[c]=u[c];return i}function cx(u,i){let a=new Set;return new Set(i),u.reduce((c,v)=>{let m=JSON.stringify(ux(v));return a.has(m)||(a.add(m),c.push({key:m,link:v})),c},[])}function wm(){let u=me.useContext(rl);return Ed(u,"You must render this element inside a <DataRouterContext.Provider> element"),u}function fx(){let u=me.useContext(Rc);return Ed(u,"You must render this element inside a <DataRouterStateContext.Provider> element"),u}var _d=me.createContext(void 0);_d.displayName="FrameworkContext";function bm(){let u=me.useContext(_d);return Ed(u,"You must render this element inside a <HydratedRouter> element"),u}function hx(u,i){let a=me.useContext(_d),[c,v]=me.useState(!1),[m,w]=me.useState(!1),{onFocus:C,onBlur:T,onMouseEnter:E,onMouseLeave:R,onTouchStart:N}=i,P=me.useRef(null);me.useEffect(()=>{if(u==="render"&&w(!0),u==="viewport"){let Y=ne=>{ne.forEach(se=>{w(se.isIntersecting)})},J=new IntersectionObserver(Y,{threshold:.5});return P.current&&J.observe(P.current),()=>{J.disconnect()}}},[u]),me.useEffect(()=>{if(c){let Y=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(Y)}}},[c]);let F=()=>{v(!0)},q=()=>{v(!1),w(!1)};return a?u!=="intent"?[m,P,{}]:[m,P,{onFocus:Vl(C,F),onBlur:Vl(T,q),onMouseEnter:Vl(E,F),onMouseLeave:Vl(R,q),onTouchStart:Vl(N,F)}]:[!1,P,{}]}function Vl(u,i){return a=>{u&&u(a),a.defaultPrevented||i(a)}}function dx({page:u,...i}){let{router:a}=wm(),c=me.useMemo(()=>cm(a.routes,u,a.basename),[a.routes,u,a.basename]);return c?me.createElement(px,{page:u,matches:c,...i}):null}function gx(u){let{manifest:i,routeModules:a}=bm(),[c,v]=me.useState([]);return me.useEffect(()=>{let m=!1;return sx(u,i,a).then(w=>{m||v(w)}),()=>{m=!0}},[u,i,a]),c}function px({page:u,matches:i,...a}){let c=ks(),{manifest:v,routeModules:m}=bm(),{basename:w}=wm(),{loaderData:C,matches:T}=fx(),E=me.useMemo(()=>Zg(u,i,T,v,c,"data"),[u,i,T,v,c]),R=me.useMemo(()=>Zg(u,i,T,v,c,"assets"),[u,i,T,v,c]),N=me.useMemo(()=>{if(u===c.pathname+c.search+c.hash)return[];let q=new Set,Y=!1;if(i.forEach(ne=>{let se=v.routes[ne.route.id];!se||!se.hasLoader||(!E.some(re=>re.route.id===ne.route.id)&&ne.route.id in C&&m[ne.route.id]?.shouldRevalidate||se.hasClientLoader?Y=!0:q.add(ne.route.id))}),q.size===0)return[];let J=rx(u,w,"data");return Y&&q.size>0&&J.searchParams.set("_routes",i.filter(ne=>q.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[J.pathname+J.search]},[w,C,c,v,E,i,u,m]),P=me.useMemo(()=>ox(R,v),[R,v]),F=gx(R);return me.createElement(me.Fragment,null,N.map(q=>me.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...a})),P.map(q=>me.createElement("link",{key:q,rel:"modulepreload",href:q,...a})),F.map(({key:q,link:Y})=>me.createElement("link",{key:q,nonce:a.nonce,...Y})))}function mx(...u){return i=>{u.forEach(a=>{typeof a=="function"?a(i):a!=null&&(a.current=i)})}}var Em=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Em&&(window.__reactRouterVersion="7.9.6")}catch{}function yx({basename:u,children:i,window:a}){let c=me.useRef();c.current==null&&(c.current=iv({window:a,v5Compat:!0}));let v=c.current,[m,w]=me.useState({action:v.action,location:v.location}),C=me.useCallback(T=>{me.startTransition(()=>w(T))},[w]);return me.useLayoutEffect(()=>v.listen(C),[v,C]),me.createElement(Xv,{basename:u,children:i,location:m.location,navigationType:m.action,navigator:v})}var _m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ea=me.forwardRef(function({onClick:i,discover:a="render",prefetch:c="none",relative:v,reloadDocument:m,replace:w,state:C,target:T,to:E,preventScrollReset:R,viewTransition:N,...P},F){let{basename:q}=me.useContext(oa),Y=typeof E=="string"&&_m.test(E),J,ne=!1;if(typeof E=="string"&&Y&&(J=E,Em))try{let we=new URL(window.location.href),pn=E.startsWith("//")?new URL(we.protocol+E):new URL(E),Nt=Ja(pn.pathname,q);pn.origin===we.origin&&Nt!=null?E=Nt+pn.search+pn.hash:ne=!0}catch{Vi(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=Dv(E,{relative:v}),[re,Ce,Ke]=hx(c,P),Be=bx(E,{replace:w,state:C,target:T,preventScrollReset:R,relative:v,viewTransition:N});function te(we){i&&i(we),we.defaultPrevented||Be(we)}let Ge=me.createElement("a",{...P,...Ke,href:J||se,onClick:ne||m?i:te,ref:mx(F,Ce),target:T,"data-discover":!Y&&a==="render"?"true":void 0});return re&&!Y?me.createElement(me.Fragment,null,Ge,me.createElement(dx,{page:se})):Ge});Ea.displayName="Link";var vx=me.forwardRef(function({"aria-current":i="page",caseSensitive:a=!1,className:c="",end:v=!1,style:m,to:w,viewTransition:C,children:T,...E},R){let N=iu(w,{relative:E.relative}),P=ks(),F=me.useContext(Rc),{navigator:q,basename:Y}=me.useContext(oa),J=F!=null&&Cx(N)&&C===!0,ne=q.encodeLocation?q.encodeLocation(N).pathname:N.pathname,se=P.pathname,re=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;a||(se=se.toLowerCase(),re=re?re.toLowerCase():null,ne=ne.toLowerCase()),re&&Y&&(re=Ja(re,Y)||re);const Ce=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Ke=se===ne||!v&&se.startsWith(ne)&&se.charAt(Ce)==="/",Be=re!=null&&(re===ne||!v&&re.startsWith(ne)&&re.charAt(ne.length)==="/"),te={isActive:Ke,isPending:Be,isTransitioning:J},Ge=Ke?i:void 0,we;typeof c=="function"?we=c(te):we=[c,Ke?"active":null,Be?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let pn=typeof m=="function"?m(te):m;return me.createElement(Ea,{...E,"aria-current":Ge,className:we,ref:R,style:pn,to:w,viewTransition:C},typeof T=="function"?T(te):T)});vx.displayName="NavLink";var xx=me.forwardRef(({discover:u="render",fetcherKey:i,navigate:a,reloadDocument:c,replace:v,state:m,method:w=mc,action:C,onSubmit:T,relative:E,preventScrollReset:R,viewTransition:N,...P},F)=>{let q=Ax(),Y=Sx(C,{relative:E}),J=w.toLowerCase()==="get"?"get":"post",ne=typeof C=="string"&&_m.test(C),se=re=>{if(T&&T(re),re.defaultPrevented)return;re.preventDefault();let Ce=re.nativeEvent.submitter,Ke=Ce?.getAttribute("formmethod")||w;q(Ce||re.currentTarget,{fetcherKey:i,method:Ke,navigate:a,replace:v,state:m,relative:E,preventScrollReset:R,viewTransition:N})};return me.createElement("form",{ref:F,method:J,action:Y,onSubmit:c?T:se,...P,"data-discover":!ne&&u==="render"?"true":void 0})});xx.displayName="Form";function wx(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Am(u){let i=me.useContext(rl);return Bn(i,wx(u)),i}function bx(u,{target:i,replace:a,state:c,preventScrollReset:v,relative:m,viewTransition:w}={}){let C=Ic(),T=ks(),E=iu(u,{relative:m});return me.useCallback(R=>{if($v(R,i)){R.preventDefault();let N=a!==void 0?a:Ql(T)===Ql(E);C(u,{replace:N,state:c,preventScrollReset:v,relative:m,viewTransition:w})}},[T,C,E,a,c,i,u,v,m,w])}var Ex=0,_x=()=>`__${String(++Ex)}__`;function Ax(){let{router:u}=Am("useSubmit"),{basename:i}=me.useContext(oa),a=Vv();return me.useCallback(async(c,v={})=>{let{action:m,method:w,encType:C,formData:T,body:E}=nx(c,i);if(v.navigate===!1){let R=v.fetcherKey||_x();await u.fetch(R,a,v.action||m,{preventScrollReset:v.preventScrollReset,formData:T,body:E,formMethod:v.method||w,formEncType:v.encType||C,flushSync:v.flushSync})}else await u.navigate(v.action||m,{preventScrollReset:v.preventScrollReset,formData:T,body:E,formMethod:v.method||w,formEncType:v.encType||C,replace:v.replace,state:v.state,fromRouteId:a,flushSync:v.flushSync,viewTransition:v.viewTransition})},[u,i,a])}function Sx(u,{relative:i}={}){let{basename:a}=me.useContext(oa),c=me.useContext(_a);Bn(c,"useFormAction must be used inside a RouteContext");let[v]=c.matches.slice(-1),m={...iu(u||".",{relative:i})},w=ks();if(u==null){m.search=w.search;let C=new URLSearchParams(m.search),T=C.getAll("index");if(T.some(R=>R==="")){C.delete("index"),T.filter(N=>N).forEach(N=>C.append("index",N));let R=C.toString();m.search=R?`?${R}`:""}}return(!u||u===".")&&v.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(m.pathname=m.pathname==="/"?a:Za([a,m.pathname])),Ql(m)}function Cx(u,{relative:i}={}){let a=me.useContext(gm);Bn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Am("useViewTransitionState"),v=iu(u,{relative:i});if(!a.isTransitioning)return!1;let m=Ja(a.currentLocation.pathname,c)||a.currentLocation.pathname,w=Ja(a.nextLocation.pathname,c)||a.nextLocation.pathname;return wc(v.pathname,w)!=null||wc(v.pathname,m)!=null}var nd=function(u,i){return nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(a[v]=c[v])},nd(u,i)};function Sm(u,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");nd(u,i);function a(){this.constructor=u}u.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}var bc=function(){return bc=Object.assign||function(i){for(var a,c=1,v=arguments.length;c<v;c++){a=arguments[c];for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(i[m]=a[m])}return i},bc.apply(this,arguments)};function al(u,i){var a={};for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&i.indexOf(c)<0&&(a[c]=u[c]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,c=Object.getOwnPropertySymbols(u);v<c.length;v++)i.indexOf(c[v])<0&&Object.prototype.propertyIsEnumerable.call(u,c[v])&&(a[c[v]]=u[c[v]]);return a}function Cm(u,i,a,c){var v=arguments.length,m=v<3?i:c===null?c=Object.getOwnPropertyDescriptor(i,a):c,w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(u,i,a,c);else for(var C=u.length-1;C>=0;C--)(w=u[C])&&(m=(v<3?w(m):v>3?w(i,a,m):w(i,a))||m);return v>3&&m&&Object.defineProperty(i,a,m),m}function Tm(u,i){return function(a,c){i(a,c,u)}}function Om(u,i,a,c,v,m){function w(ne){if(ne!==void 0&&typeof ne!="function")throw new TypeError("Function expected");return ne}for(var C=c.kind,T=C==="getter"?"get":C==="setter"?"set":"value",E=!i&&u?c.static?u:u.prototype:null,R=i||(E?Object.getOwnPropertyDescriptor(E,c.name):{}),N,P=!1,F=a.length-1;F>=0;F--){var q={};for(var Y in c)q[Y]=Y==="access"?{}:c[Y];for(var Y in c.access)q.access[Y]=c.access[Y];q.addInitializer=function(ne){if(P)throw new TypeError("Cannot add initializers after decoration has completed");m.push(w(ne||null))};var J=(0,a[F])(C==="accessor"?{get:R.get,set:R.set}:R[T],q);if(C==="accessor"){if(J===void 0)continue;if(J===null||typeof J!="object")throw new TypeError("Object expected");(N=w(J.get))&&(R.get=N),(N=w(J.set))&&(R.set=N),(N=w(J.init))&&v.unshift(N)}else(N=w(J))&&(C==="field"?v.unshift(N):R[T]=N)}E&&Object.defineProperty(E,c.name,R),P=!0}function Nm(u,i,a){for(var c=arguments.length>2,v=0;v<i.length;v++)a=c?i[v].call(u,a):i[v].call(u);return c?a:void 0}function Rm(u){return typeof u=="symbol"?u:"".concat(u)}function Im(u,i,a){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(u,"name",{configurable:!0,value:a?"".concat(a," ",i):i})}function Dm(u,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,i)}function Qe(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})}function Mm(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return w.next=C(0),w.throw=C(1),w.return=C(2),typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}var Mc=Object.create?(function(u,i,a,c){c===void 0&&(c=a);var v=Object.getOwnPropertyDescriptor(i,a);(!v||("get"in v?!i.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(u,c,v)}):(function(u,i,a,c){c===void 0&&(c=a),u[c]=i[a]});function Bm(u,i){for(var a in u)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&Mc(i,u,a)}function Ec(u){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&u[i],c=0;if(a)return a.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ad(u,i){var a=typeof Symbol=="function"&&u[Symbol.iterator];if(!a)return u;var c=a.call(u),v,m=[],w;try{for(;(i===void 0||i-- >0)&&!(v=c.next()).done;)m.push(v.value)}catch(C){w={error:C}}finally{try{v&&!v.done&&(a=c.return)&&a.call(c)}finally{if(w)throw w.error}}return m}function Lm(){for(var u=[],i=0;i<arguments.length;i++)u=u.concat(Ad(arguments[i]));return u}function km(){for(var u=0,i=0,a=arguments.length;i<a;i++)u+=arguments[i].length;for(var c=Array(u),v=0,i=0;i<a;i++)for(var m=arguments[i],w=0,C=m.length;w<C;w++,v++)c[v]=m[w];return c}function jm(u,i,a){if(a||arguments.length===2)for(var c=0,v=i.length,m;c<v;c++)(m||!(c in i))&&(m||(m=Array.prototype.slice.call(i,0,c)),m[c]=i[c]);return u.concat(m||Array.prototype.slice.call(i))}function tl(u){return this instanceof tl?(this.v=u,this):new tl(u)}function Pm(u,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a.apply(u,i||[]),v,m=[];return v=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),C("next"),C("throw"),C("return",w),v[Symbol.asyncIterator]=function(){return this},v;function w(F){return function(q){return Promise.resolve(q).then(F,N)}}function C(F,q){c[F]&&(v[F]=function(Y){return new Promise(function(J,ne){m.push([F,Y,J,ne])>1||T(F,Y)})},q&&(v[F]=q(v[F])))}function T(F,q){try{E(c[F](q))}catch(Y){P(m[0][3],Y)}}function E(F){F.value instanceof tl?Promise.resolve(F.value.v).then(R,N):P(m[0][2],F)}function R(F){T("next",F)}function N(F){T("throw",F)}function P(F,q){F(q),m.shift(),m.length&&T(m[0][0],m[0][1])}}function Um(u){var i,a;return i={},c("next"),c("throw",function(v){throw v}),c("return"),i[Symbol.iterator]=function(){return this},i;function c(v,m){i[v]=u[v]?function(w){return(a=!a)?{value:tl(u[v](w)),done:!1}:m?m(w):w}:m}}function zm(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=u[Symbol.asyncIterator],a;return i?i.call(u):(u=typeof Ec=="function"?Ec(u):u[Symbol.iterator](),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(m){a[m]=u[m]&&function(w){return new Promise(function(C,T){w=u[m](w),v(C,T,w.done,w.value)})}}function v(m,w,C,T){Promise.resolve(T).then(function(E){m({value:E,done:C})},w)}}function Fm(u,i){return Object.defineProperty?Object.defineProperty(u,"raw",{value:i}):u.raw=i,u}var Tx=Object.create?(function(u,i){Object.defineProperty(u,"default",{enumerable:!0,value:i})}):function(u,i){u.default=i},rd=function(u){return rd=Object.getOwnPropertyNames||function(i){var a=[];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[a.length]=c);return a},rd(u)};function Hm(u){if(u&&u.__esModule)return u;var i={};if(u!=null)for(var a=rd(u),c=0;c<a.length;c++)a[c]!=="default"&&Mc(i,u,a[c]);return Tx(i,u),i}function Vm(u){return u&&u.__esModule?u:{default:u}}function qm(u,i,a,c){if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?u!==i||!c:!i.has(u))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?c:a==="a"?c.call(u):c?c.value:i.get(u)}function Gm(u,i,a,c,v){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!v)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?u!==i||!v:!i.has(u))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?v.call(u,a):v?v.value=a:i.set(u,a),a}function Ym(u,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof u=="function"?i===u:u.has(i)}function Xm(u,i,a){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var c,v;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=i[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=i[Symbol.dispose],a&&(v=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");v&&(c=function(){try{v.call(this)}catch(m){return Promise.reject(m)}}),u.stack.push({value:i,dispose:c,async:a})}else a&&u.stack.push({async:!0});return i}var Ox=typeof SuppressedError=="function"?SuppressedError:function(u,i,a){var c=new Error(a);return c.name="SuppressedError",c.error=u,c.suppressed=i,c};function Km(u){function i(m){u.error=u.hasError?new Ox(m,u.error,"An error was suppressed during disposal."):m,u.hasError=!0}var a,c=0;function v(){for(;a=u.stack.pop();)try{if(!a.async&&c===1)return c=0,u.stack.push(a),Promise.resolve().then(v);if(a.dispose){var m=a.dispose.call(a.value);if(a.async)return c|=2,Promise.resolve(m).then(v,function(w){return i(w),v()})}else c|=1}catch(w){i(w)}if(c===1)return u.hasError?Promise.reject(u.error):Promise.resolve();if(u.hasError)throw u.error}return v()}function Wm(u,i){return typeof u=="string"&&/^\.\.?\//.test(u)?u.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,v,m,w){return c?i?".jsx":".js":v&&(!m||!w)?a:v+m+"."+w.toLowerCase()+"js"}):u}const Nx={__extends:Sm,__assign:bc,__rest:al,__decorate:Cm,__param:Tm,__esDecorate:Om,__runInitializers:Nm,__propKey:Rm,__setFunctionName:Im,__metadata:Dm,__awaiter:Qe,__generator:Mm,__createBinding:Mc,__exportStar:Bm,__values:Ec,__read:Ad,__spread:Lm,__spreadArrays:km,__spreadArray:jm,__await:tl,__asyncGenerator:Pm,__asyncDelegator:Um,__asyncValues:zm,__makeTemplateObject:Fm,__importStar:Hm,__importDefault:Vm,__classPrivateFieldGet:qm,__classPrivateFieldSet:Gm,__classPrivateFieldIn:Ym,__addDisposableResource:Xm,__disposeResources:Km,__rewriteRelativeImportExtension:Wm},Rx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Xm,get __assign(){return bc},__asyncDelegator:Um,__asyncGenerator:Pm,__asyncValues:zm,__await:tl,__awaiter:Qe,__classPrivateFieldGet:qm,__classPrivateFieldIn:Ym,__classPrivateFieldSet:Gm,__createBinding:Mc,__decorate:Cm,__disposeResources:Km,__esDecorate:Om,__exportStar:Bm,__extends:Sm,__generator:Mm,__importDefault:Vm,__importStar:Hm,__makeTemplateObject:Fm,__metadata:Dm,__param:Tm,__propKey:Rm,__read:Ad,__rest:al,__rewriteRelativeImportExtension:Wm,__runInitializers:Nm,__setFunctionName:Im,__spread:Lm,__spreadArray:jm,__spreadArrays:km,__values:Ec,default:Nx},Symbol.toStringTag,{value:"Module"})),Ix=u=>u?(...i)=>u(...i):(...i)=>fetch(...i);class Sd extends Error{constructor(i,a="FunctionsError",c){super(i),this.name=a,this.context=c}}class Dx extends Sd{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class Jg extends Sd{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class $g extends Sd{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var id;(function(u){u.Any="any",u.ApNortheast1="ap-northeast-1",u.ApNortheast2="ap-northeast-2",u.ApSouth1="ap-south-1",u.ApSoutheast1="ap-southeast-1",u.ApSoutheast2="ap-southeast-2",u.CaCentral1="ca-central-1",u.EuCentral1="eu-central-1",u.EuWest1="eu-west-1",u.EuWest2="eu-west-2",u.EuWest3="eu-west-3",u.SaEast1="sa-east-1",u.UsEast1="us-east-1",u.UsWest1="us-west-1",u.UsWest2="us-west-2"})(id||(id={}));class Mx{constructor(i,{headers:a={},customFetch:c,region:v=id.Any}={}){this.url=i,this.headers=a,this.region=v,this.fetch=Ix(c)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return Qe(this,arguments,void 0,function*(a,c={}){var v;let m,w;try{const{headers:C,method:T,body:E,signal:R,timeout:N}=c;let P={},{region:F}=c;F||(F=this.region);const q=new URL(`${this.url}/${a}`);F&&F!=="any"&&(P["x-region"]=F,q.searchParams.set("forceFunctionRegion",F));let Y;E&&(C&&!Object.prototype.hasOwnProperty.call(C,"Content-Type")||!C)?typeof Blob<"u"&&E instanceof Blob||E instanceof ArrayBuffer?(P["Content-Type"]="application/octet-stream",Y=E):typeof E=="string"?(P["Content-Type"]="text/plain",Y=E):typeof FormData<"u"&&E instanceof FormData?Y=E:(P["Content-Type"]="application/json",Y=JSON.stringify(E)):Y=E;let J=R;N&&(w=new AbortController,m=setTimeout(()=>w.abort(),N),R?(J=w.signal,R.addEventListener("abort",()=>w.abort())):J=w.signal);const ne=yield this.fetch(q.toString(),{method:T||"POST",headers:Object.assign(Object.assign(Object.assign({},P),this.headers),C),body:Y,signal:J}).catch(Ke=>{throw new Dx(Ke)}),se=ne.headers.get("x-relay-error");if(se&&se==="true")throw new Jg(ne);if(!ne.ok)throw new $g(ne);let re=((v=ne.headers.get("Content-Type"))!==null&&v!==void 0?v:"text/plain").split(";")[0].trim(),Ce;return re==="application/json"?Ce=yield ne.json():re==="application/octet-stream"||re==="application/pdf"?Ce=yield ne.blob():re==="text/event-stream"?Ce=ne:re==="multipart/form-data"?Ce=yield ne.formData():Ce=yield ne.text(),{data:Ce,error:null,response:ne}}catch(C){return{data:null,error:C,response:C instanceof $g||C instanceof Jg?C.context:void 0}}finally{m&&clearTimeout(m)}})}}var Hr={};const sl=X2(Rx);var ac={},sc={},oc={},lc={},uc={},cc={},ep;function Qm(){if(ep)return cc;ep=1,Object.defineProperty(cc,"__esModule",{value:!0});class u extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return cc.default=u,cc}var tp;function Zm(){if(tp)return uc;tp=1,Object.defineProperty(uc,"__esModule",{value:!0});const i=sl.__importDefault(Qm());class a{constructor(v){var m,w;this.shouldThrowOnError=!1,this.method=v.method,this.url=v.url,this.headers=new Headers(v.headers),this.schema=v.schema,this.body=v.body,this.shouldThrowOnError=(m=v.shouldThrowOnError)!==null&&m!==void 0?m:!1,this.signal=v.signal,this.isMaybeSingle=(w=v.isMaybeSingle)!==null&&w!==void 0?w:!1,v.fetch?this.fetch=v.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(v,m){return this.headers=new Headers(this.headers),this.headers.set(v,m),this}then(v,m){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const w=this.fetch;let C=w(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async T=>{var E,R,N,P;let F=null,q=null,Y=null,J=T.status,ne=T.statusText;if(T.ok){if(this.method!=="HEAD"){const Ke=await T.text();Ke===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((E=this.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?q=Ke:q=JSON.parse(Ke))}const re=(R=this.headers.get("Prefer"))===null||R===void 0?void 0:R.match(/count=(exact|planned|estimated)/),Ce=(N=T.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");re&&Ce&&Ce.length>1&&(Y=parseInt(Ce[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(q)&&(q.length>1?(F={code:"PGRST116",details:`Results contain ${q.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},q=null,Y=null,J=406,ne="Not Acceptable"):q.length===1?q=q[0]:q=null)}else{const re=await T.text();try{F=JSON.parse(re),Array.isArray(F)&&T.status===404&&(q=[],F=null,J=200,ne="OK")}catch{T.status===404&&re===""?(J=204,ne="No Content"):F={message:re}}if(F&&this.isMaybeSingle&&(!((P=F?.details)===null||P===void 0)&&P.includes("0 rows"))&&(F=null,J=200,ne="OK"),F&&this.shouldThrowOnError)throw new i.default(F)}return{error:F,data:q,count:Y,status:J,statusText:ne}});return this.shouldThrowOnError||(C=C.catch(T=>{var E,R,N,P,F,q;let Y="";const J=T?.cause;if(J){const ne=(E=J?.message)!==null&&E!==void 0?E:"",se=(R=J?.code)!==null&&R!==void 0?R:"";Y=`${(N=T?.name)!==null&&N!==void 0?N:"FetchError"}: ${T?.message}`,Y+=`

Caused by: ${(P=J?.name)!==null&&P!==void 0?P:"Error"}: ${ne}`,se&&(Y+=` (${se})`),J?.stack&&(Y+=`
${J.stack}`)}else Y=(F=T?.stack)!==null&&F!==void 0?F:"";return{error:{message:`${(q=T?.name)!==null&&q!==void 0?q:"FetchError"}: ${T?.message}`,details:Y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),C.then(v,m)}returns(){return this}overrideTypes(){return this}}return uc.default=a,uc}var np;function Jm(){if(np)return lc;np=1,Object.defineProperty(lc,"__esModule",{value:!0});const i=sl.__importDefault(Zm());class a extends i.default{select(v){let m=!1;const w=(v??"*").split("").map(C=>/\s/.test(C)&&!m?"":(C==='"'&&(m=!m),C)).join("");return this.url.searchParams.set("select",w),this.headers.append("Prefer","return=representation"),this}order(v,{ascending:m=!0,nullsFirst:w,foreignTable:C,referencedTable:T=C}={}){const E=T?`${T}.order`:"order",R=this.url.searchParams.get(E);return this.url.searchParams.set(E,`${R?`${R},`:""}${v}.${m?"asc":"desc"}${w===void 0?"":w?".nullsfirst":".nullslast"}`),this}limit(v,{foreignTable:m,referencedTable:w=m}={}){const C=typeof w>"u"?"limit":`${w}.limit`;return this.url.searchParams.set(C,`${v}`),this}range(v,m,{foreignTable:w,referencedTable:C=w}={}){const T=typeof C>"u"?"offset":`${C}.offset`,E=typeof C>"u"?"limit":`${C}.limit`;return this.url.searchParams.set(T,`${v}`),this.url.searchParams.set(E,`${m-v+1}`),this}abortSignal(v){return this.signal=v,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:v=!1,verbose:m=!1,settings:w=!1,buffers:C=!1,wal:T=!1,format:E="text"}={}){var R;const N=[v?"analyze":null,m?"verbose":null,w?"settings":null,C?"buffers":null,T?"wal":null].filter(Boolean).join("|"),P=(R=this.headers.get("Accept"))!==null&&R!==void 0?R:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${E}; for="${P}"; options=${N};`),E==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(v){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${v}`),this}}return lc.default=a,lc}var rp;function Cd(){if(rp)return oc;rp=1,Object.defineProperty(oc,"__esModule",{value:!0});const i=sl.__importDefault(Jm()),a=new RegExp("[,()]");class c extends i.default{eq(m,w){return this.url.searchParams.append(m,`eq.${w}`),this}neq(m,w){return this.url.searchParams.append(m,`neq.${w}`),this}gt(m,w){return this.url.searchParams.append(m,`gt.${w}`),this}gte(m,w){return this.url.searchParams.append(m,`gte.${w}`),this}lt(m,w){return this.url.searchParams.append(m,`lt.${w}`),this}lte(m,w){return this.url.searchParams.append(m,`lte.${w}`),this}like(m,w){return this.url.searchParams.append(m,`like.${w}`),this}likeAllOf(m,w){return this.url.searchParams.append(m,`like(all).{${w.join(",")}}`),this}likeAnyOf(m,w){return this.url.searchParams.append(m,`like(any).{${w.join(",")}}`),this}ilike(m,w){return this.url.searchParams.append(m,`ilike.${w}`),this}ilikeAllOf(m,w){return this.url.searchParams.append(m,`ilike(all).{${w.join(",")}}`),this}ilikeAnyOf(m,w){return this.url.searchParams.append(m,`ilike(any).{${w.join(",")}}`),this}regexMatch(m,w){return this.url.searchParams.append(m,`match.${w}`),this}regexIMatch(m,w){return this.url.searchParams.append(m,`imatch.${w}`),this}is(m,w){return this.url.searchParams.append(m,`is.${w}`),this}isDistinct(m,w){return this.url.searchParams.append(m,`isdistinct.${w}`),this}in(m,w){const C=Array.from(new Set(w)).map(T=>typeof T=="string"&&a.test(T)?`"${T}"`:`${T}`).join(",");return this.url.searchParams.append(m,`in.(${C})`),this}contains(m,w){return typeof w=="string"?this.url.searchParams.append(m,`cs.${w}`):Array.isArray(w)?this.url.searchParams.append(m,`cs.{${w.join(",")}}`):this.url.searchParams.append(m,`cs.${JSON.stringify(w)}`),this}containedBy(m,w){return typeof w=="string"?this.url.searchParams.append(m,`cd.${w}`):Array.isArray(w)?this.url.searchParams.append(m,`cd.{${w.join(",")}}`):this.url.searchParams.append(m,`cd.${JSON.stringify(w)}`),this}rangeGt(m,w){return this.url.searchParams.append(m,`sr.${w}`),this}rangeGte(m,w){return this.url.searchParams.append(m,`nxl.${w}`),this}rangeLt(m,w){return this.url.searchParams.append(m,`sl.${w}`),this}rangeLte(m,w){return this.url.searchParams.append(m,`nxr.${w}`),this}rangeAdjacent(m,w){return this.url.searchParams.append(m,`adj.${w}`),this}overlaps(m,w){return typeof w=="string"?this.url.searchParams.append(m,`ov.${w}`):this.url.searchParams.append(m,`ov.{${w.join(",")}}`),this}textSearch(m,w,{config:C,type:T}={}){let E="";T==="plain"?E="pl":T==="phrase"?E="ph":T==="websearch"&&(E="w");const R=C===void 0?"":`(${C})`;return this.url.searchParams.append(m,`${E}fts${R}.${w}`),this}match(m){return Object.entries(m).forEach(([w,C])=>{this.url.searchParams.append(w,`eq.${C}`)}),this}not(m,w,C){return this.url.searchParams.append(m,`not.${w}.${C}`),this}or(m,{foreignTable:w,referencedTable:C=w}={}){const T=C?`${C}.or`:"or";return this.url.searchParams.append(T,`(${m})`),this}filter(m,w,C){return this.url.searchParams.append(m,`${w}.${C}`),this}}return oc.default=c,oc}var ip;function $m(){if(ip)return sc;ip=1,Object.defineProperty(sc,"__esModule",{value:!0});const i=sl.__importDefault(Cd());class a{constructor(v,{headers:m={},schema:w,fetch:C}){this.url=v,this.headers=new Headers(m),this.schema=w,this.fetch=C}select(v,m){const{head:w=!1,count:C}=m??{},T=w?"HEAD":"GET";let E=!1;const R=(v??"*").split("").map(N=>/\s/.test(N)&&!E?"":(N==='"'&&(E=!E),N)).join("");return this.url.searchParams.set("select",R),C&&this.headers.append("Prefer",`count=${C}`),new i.default({method:T,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(v,{count:m,defaultToNull:w=!0}={}){var C;const T="POST";if(m&&this.headers.append("Prefer",`count=${m}`),w||this.headers.append("Prefer","missing=default"),Array.isArray(v)){const E=v.reduce((R,N)=>R.concat(Object.keys(N)),[]);if(E.length>0){const R=[...new Set(E)].map(N=>`"${N}"`);this.url.searchParams.set("columns",R.join(","))}}return new i.default({method:T,url:this.url,headers:this.headers,schema:this.schema,body:v,fetch:(C=this.fetch)!==null&&C!==void 0?C:fetch})}upsert(v,{onConflict:m,ignoreDuplicates:w=!1,count:C,defaultToNull:T=!0}={}){var E;const R="POST";if(this.headers.append("Prefer",`resolution=${w?"ignore":"merge"}-duplicates`),m!==void 0&&this.url.searchParams.set("on_conflict",m),C&&this.headers.append("Prefer",`count=${C}`),T||this.headers.append("Prefer","missing=default"),Array.isArray(v)){const N=v.reduce((P,F)=>P.concat(Object.keys(F)),[]);if(N.length>0){const P=[...new Set(N)].map(F=>`"${F}"`);this.url.searchParams.set("columns",P.join(","))}}return new i.default({method:R,url:this.url,headers:this.headers,schema:this.schema,body:v,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch})}update(v,{count:m}={}){var w;const C="PATCH";return m&&this.headers.append("Prefer",`count=${m}`),new i.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:v,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}delete({count:v}={}){var m;const w="DELETE";return v&&this.headers.append("Prefer",`count=${v}`),new i.default({method:w,url:this.url,headers:this.headers,schema:this.schema,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return sc.default=a,sc}var ap;function Bx(){if(ap)return ac;ap=1,Object.defineProperty(ac,"__esModule",{value:!0});const u=sl,i=u.__importDefault($m()),a=u.__importDefault(Cd());class c{constructor(m,{headers:w={},schema:C,fetch:T}={}){this.url=m,this.headers=new Headers(w),this.schemaName=C,this.fetch=T}from(m){if(!m||typeof m!="string"||m.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const w=new URL(`${this.url}/${m}`);return new i.default(w,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(m){return new c(this.url,{headers:this.headers,schema:m,fetch:this.fetch})}rpc(m,w={},{head:C=!1,get:T=!1,count:E}={}){var R;let N;const P=new URL(`${this.url}/rpc/${m}`);let F;C||T?(N=C?"HEAD":"GET",Object.entries(w).filter(([Y,J])=>J!==void 0).map(([Y,J])=>[Y,Array.isArray(J)?`{${J.join(",")}}`:`${J}`]).forEach(([Y,J])=>{P.searchParams.append(Y,J)})):(N="POST",F=w);const q=new Headers(this.headers);return E&&q.set("Prefer",`count=${E}`),new a.default({method:N,url:P,headers:q,schema:this.schemaName,body:F,fetch:(R=this.fetch)!==null&&R!==void 0?R:fetch})}}return ac.default=c,ac}var sp;function Lx(){if(sp)return Hr;sp=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.PostgrestError=Hr.PostgrestBuilder=Hr.PostgrestTransformBuilder=Hr.PostgrestFilterBuilder=Hr.PostgrestQueryBuilder=Hr.PostgrestClient=void 0;const u=sl,i=u.__importDefault(Bx());Hr.PostgrestClient=i.default;const a=u.__importDefault($m());Hr.PostgrestQueryBuilder=a.default;const c=u.__importDefault(Cd());Hr.PostgrestFilterBuilder=c.default;const v=u.__importDefault(Jm());Hr.PostgrestTransformBuilder=v.default;const m=u.__importDefault(Zm());Hr.PostgrestBuilder=m.default;const w=u.__importDefault(Qm());return Hr.PostgrestError=w.default,Hr.default={PostgrestClient:i.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:v.default,PostgrestBuilder:m.default,PostgrestError:w.default},Hr}var ey=Lx();const ty=Nc(ey),kx=um({__proto__:null,default:ty},[ey]),{PostgrestClient:jx,PostgrestQueryBuilder:J_,PostgrestFilterBuilder:$_,PostgrestTransformBuilder:eA,PostgrestBuilder:tA,PostgrestError:nA}=ty||kx;class Px{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const c=a.node,v=parseInt(c.replace(/^v/,"").split(".")[0]);return v>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${v} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${v} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let a=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(a+=`

Suggested solution: ${i.workaround}`),new Error(a)}static createWebSocket(i,a){const c=this.getWebSocketConstructor();return new c(i,a)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const Ux="2.86.0",zx=`realtime-js/${Ux}`,ny="1.0.0",Fx="2.0.0",op=ny,ad=1e4,Hx=1e3,Vx=100;var fo;(function(u){u[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed"})(fo||(fo={}));var hr;(function(u){u.closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving"})(hr||(hr={}));var aa;(function(u){u.close="phx_close",u.error="phx_error",u.join="phx_join",u.reply="phx_reply",u.leave="phx_leave",u.access_token="access_token"})(aa||(aa={}));var sd;(function(u){u.websocket="websocket"})(sd||(sd={}));var ho;(function(u){u.Connecting="connecting",u.Open="open",u.Closing="closing",u.Closed="closed"})(ho||(ho={}));class qx{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,a){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(i));let c=[i.join_ref,i.ref,i.topic,i.event,i.payload];return a(JSON.stringify(c))}_binaryEncodeUserBroadcastPush(i){var a;return this._isArrayBuffer((a=i.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var a,c;const v=(c=(a=i.payload)===null||a===void 0?void 0:a.payload)!==null&&c!==void 0?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,v)}_encodeJsonUserBroadcastPush(i){var a,c;const v=(c=(a=i.payload)===null||a===void 0?void 0:a.payload)!==null&&c!==void 0?c:{},w=new TextEncoder().encode(JSON.stringify(v)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,w)}_encodeUserBroadcastPush(i,a,c){var v,m;const w=i.topic,C=(v=i.ref)!==null&&v!==void 0?v:"",T=(m=i.join_ref)!==null&&m!==void 0?m:"",E=i.payload.event,R=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},N=Object.keys(R).length===0?"":JSON.stringify(R);if(T.length>255)throw new Error(`joinRef length ${T.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`ref length ${C.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`topic length ${w.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`userEvent length ${E.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const P=this.USER_BROADCAST_PUSH_META_LENGTH+T.length+C.length+w.length+E.length+N.length,F=new ArrayBuffer(this.HEADER_LENGTH+P);let q=new DataView(F),Y=0;q.setUint8(Y++,this.KINDS.userBroadcastPush),q.setUint8(Y++,T.length),q.setUint8(Y++,C.length),q.setUint8(Y++,w.length),q.setUint8(Y++,E.length),q.setUint8(Y++,N.length),q.setUint8(Y++,a),Array.from(T,ne=>q.setUint8(Y++,ne.charCodeAt(0))),Array.from(C,ne=>q.setUint8(Y++,ne.charCodeAt(0))),Array.from(w,ne=>q.setUint8(Y++,ne.charCodeAt(0))),Array.from(E,ne=>q.setUint8(Y++,ne.charCodeAt(0))),Array.from(N,ne=>q.setUint8(Y++,ne.charCodeAt(0)));var J=new Uint8Array(F.byteLength+c.byteLength);return J.set(new Uint8Array(F),0),J.set(new Uint8Array(c),F.byteLength),J.buffer}decode(i,a){if(this._isArrayBuffer(i)){let c=this._binaryDecode(i);return a(c)}if(typeof i=="string"){const c=JSON.parse(i),[v,m,w,C,T]=c;return a({join_ref:v,ref:m,topic:w,event:C,payload:T})}return a({})}_binaryDecode(i){const a=new DataView(i),c=a.getUint8(0),v=new TextDecoder;switch(c){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(i,a,v)}}_decodeUserBroadcast(i,a,c){const v=a.getUint8(1),m=a.getUint8(2),w=a.getUint8(3),C=a.getUint8(4);let T=this.HEADER_LENGTH+4;const E=c.decode(i.slice(T,T+v));T=T+v;const R=c.decode(i.slice(T,T+m));T=T+m;const N=c.decode(i.slice(T,T+w));T=T+w;const P=i.slice(T,i.byteLength),F=C===this.JSON_ENCODING?JSON.parse(c.decode(P)):P,q={type:this.BROADCAST_EVENT,event:R,payload:F};return w>0&&(q.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:E,event:this.BROADCAST_EVENT,payload:q}}_isArrayBuffer(i){var a;return i instanceof ArrayBuffer||((a=i?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(i,a){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([c])=>a.includes(c)))}}class ry{constructor(i,a){this.callback=i,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _n;(function(u){u.abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange"})(_n||(_n={}));const lp=(u,i,a={})=>{var c;const v=(c=a.skipTypes)!==null&&c!==void 0?c:[];return i?Object.keys(i).reduce((m,w)=>(m[w]=Gx(w,u,i,v),m),{}):{}},Gx=(u,i,a,c)=>{const v=i.find(C=>C.name===u),m=v?.type,w=a[u];return m&&!c.includes(m)?iy(m,w):od(w)},iy=(u,i)=>{if(u.charAt(0)==="_"){const a=u.slice(1,u.length);return Wx(i,a)}switch(u){case _n.bool:return Yx(i);case _n.float4:case _n.float8:case _n.int2:case _n.int4:case _n.int8:case _n.numeric:case _n.oid:return Xx(i);case _n.json:case _n.jsonb:return Kx(i);case _n.timestamp:return Qx(i);case _n.abstime:case _n.date:case _n.daterange:case _n.int4range:case _n.int8range:case _n.money:case _n.reltime:case _n.text:case _n.time:case _n.timestamptz:case _n.timetz:case _n.tsrange:case _n.tstzrange:return od(i);default:return od(i)}},od=u=>u,Yx=u=>{switch(u){case"t":return!0;case"f":return!1;default:return u}},Xx=u=>{if(typeof u=="string"){const i=parseFloat(u);if(!Number.isNaN(i))return i}return u},Kx=u=>{if(typeof u=="string")try{return JSON.parse(u)}catch(i){return console.log(`JSON parse error: ${i}`),u}return u},Wx=(u,i)=>{if(typeof u!="string")return u;const a=u.length-1,c=u[a];if(u[0]==="{"&&c==="}"){let m;const w=u.slice(1,a);try{m=JSON.parse("["+w+"]")}catch{m=w?w.split(","):[]}return m.map(C=>iy(i,C))}return u},Qx=u=>typeof u=="string"?u.replace(" ","T"):u,ay=u=>{const i=new URL(u);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class Ih{constructor(i,a,c={},v=ad){this.channel=i,this.event=a,this.payload=c,this.timeout=v,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,a){var c;return this._hasReceived(i)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:i,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:a}){this.recHooks.filter(c=>c.status===i).forEach(c=>c.callback(a))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var up;(function(u){u.SYNC="sync",u.JOIN="join",u.LEAVE="leave"})(up||(up={}));class Xl{constructor(i,a){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},v=>{const{onJoin:m,onLeave:w,onSync:C}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xl.syncState(this.state,v,m,w),this.pendingDiffs.forEach(T=>{this.state=Xl.syncDiff(this.state,T,m,w)}),this.pendingDiffs=[],C()}),this.channel._on(c.diff,{},v=>{const{onJoin:m,onLeave:w,onSync:C}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(v):(this.state=Xl.syncDiff(this.state,v,m,w),C())}),this.onJoin((v,m,w)=>{this.channel._trigger("presence",{event:"join",key:v,currentPresences:m,newPresences:w})}),this.onLeave((v,m,w)=>{this.channel._trigger("presence",{event:"leave",key:v,currentPresences:m,leftPresences:w})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,a,c,v){const m=this.cloneDeep(i),w=this.transformState(a),C={},T={};return this.map(m,(E,R)=>{w[E]||(T[E]=R)}),this.map(w,(E,R)=>{const N=m[E];if(N){const P=R.map(J=>J.presence_ref),F=N.map(J=>J.presence_ref),q=R.filter(J=>F.indexOf(J.presence_ref)<0),Y=N.filter(J=>P.indexOf(J.presence_ref)<0);q.length>0&&(C[E]=q),Y.length>0&&(T[E]=Y)}else C[E]=R}),this.syncDiff(m,{joins:C,leaves:T},c,v)}static syncDiff(i,a,c,v){const{joins:m,leaves:w}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),v||(v=()=>{}),this.map(m,(C,T)=>{var E;const R=(E=i[C])!==null&&E!==void 0?E:[];if(i[C]=this.cloneDeep(T),R.length>0){const N=i[C].map(F=>F.presence_ref),P=R.filter(F=>N.indexOf(F.presence_ref)<0);i[C].unshift(...P)}c(C,R,T)}),this.map(w,(C,T)=>{let E=i[C];if(!E)return;const R=T.map(N=>N.presence_ref);E=E.filter(N=>R.indexOf(N.presence_ref)<0),i[C]=E,v(C,E,T),E.length===0&&delete i[C]}),i}static map(i,a){return Object.getOwnPropertyNames(i).map(c=>a(c,i[c]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((a,c)=>{const v=i[c];return"metas"in v?a[c]=v.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):a[c]=v,a},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cp;(function(u){u.ALL="*",u.INSERT="INSERT",u.UPDATE="UPDATE",u.DELETE="DELETE"})(cp||(cp={}));var Kl;(function(u){u.BROADCAST="broadcast",u.PRESENCE="presence",u.POSTGRES_CHANGES="postgres_changes",u.SYSTEM="system"})(Kl||(Kl={}));var Wa;(function(u){u.SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR"})(Wa||(Wa={}));class Td{constructor(i,a={config:{}},c){var v,m;if(this.topic=i,this.params=a,this.socket=c,this.bindings={},this.state=hr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Ih(this,aa.join,this.params,this.timeout),this.rejoinTimer=new ry(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(w=>w.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hr.closed,this.socket._remove(this)}),this._onError(w=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,w),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",w=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,w),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(w,C)=>{this._trigger(this._replyEventName(C),w)}),this.presence=new Xl(this),this.broadcastEndpointURL=ay(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(v=this.params.config)===null||v===void 0?void 0:v.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,a=this.timeout){var c,v,m;if(this.socket.isConnected()||this.socket.connect(),this.state==hr.closed){const{config:{broadcast:w,presence:C,private:T}}=this.params,E=(v=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(F=>F.filter))!==null&&v!==void 0?v:[],R=!!this.bindings[Kl.PRESENCE]&&this.bindings[Kl.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,N={},P={broadcast:w,presence:Object.assign(Object.assign({},C),{enabled:R}),postgres_changes:E,private:T};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(F=>i?.(Wa.CHANNEL_ERROR,F)),this._onClose(()=>i?.(Wa.CLOSED)),this.updateJoinPayload(Object.assign({config:P},N)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:F})=>{var q;if(this.socket.setAuth(),F===void 0){i?.(Wa.SUBSCRIBED);return}else{const Y=this.bindings.postgres_changes,J=(q=Y?.length)!==null&&q!==void 0?q:0,ne=[];for(let se=0;se<J;se++){const re=Y[se],{filter:{event:Ce,schema:Ke,table:Be,filter:te}}=re,Ge=F&&F[se];if(Ge&&Ge.event===Ce&&Ge.schema===Ke&&Ge.table===Be&&Ge.filter===te)ne.push(Object.assign(Object.assign({},re),{id:Ge.id}));else{this.unsubscribe(),this.state=hr.errored,i?.(Wa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ne,i&&i(Wa.SUBSCRIBED);return}}).receive("error",F=>{this.state=hr.errored,i?.(Wa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(F).join(", ")||"error")))}).receive("timeout",()=>{i?.(Wa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,a={}){return await this.send({type:"presence",event:"track",payload:i},a.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,a,c){return this.state===hr.joined&&i===Kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(i,a,c)}async httpSend(i,a,c={}){var v;const m=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const w={method:"POST",headers:{Authorization:m,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})},C=await this._fetchWithTimeout(this.broadcastEndpointURL,w,(v=c.timeout)!==null&&v!==void 0?v:this.timeout);if(C.status===202)return{success:!0};let T=C.statusText;try{const E=await C.json();T=E.error||E.message||T}catch{}return Promise.reject(new Error(T))}async send(i,a={}){var c,v;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:w}=i,T={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:w,private:this.private}]})};try{const E=await this._fetchWithTimeout(this.broadcastEndpointURL,T,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((v=E.body)===null||v===void 0?void 0:v.cancel()),E.ok?"ok":"error"}catch(E){return E.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var w,C,T;const E=this._push(i.type,i,a.timeout||this.timeout);i.type==="broadcast"&&!(!((T=(C=(w=this.params)===null||w===void 0?void 0:w.config)===null||C===void 0?void 0:C.broadcast)===null||T===void 0)&&T.ack)&&m("ok"),E.receive("ok",()=>m("ok")),E.receive("error",()=>m("error")),E.receive("timeout",()=>m("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=hr.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(v=>{c=new Ih(this,aa.leave,{},i),c.receive("ok",()=>{a(),v("ok")}).receive("timeout",()=>{a(),v("timed out")}).receive("error",()=>{v("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hr.closed,this.bindings={}}async _fetchWithTimeout(i,a,c){const v=new AbortController,m=setTimeout(()=>v.abort(),c),w=await this.socket.fetch(i,Object.assign(Object.assign({},a),{signal:v.signal}));return clearTimeout(m),w}_push(i,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let v=new Ih(this,i,a,c);return this._canPush()?v.send():this._addToPushBuffer(v),v}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>Vx){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(i,a,c){return a}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,a,c){var v,m;const w=i.toLocaleLowerCase(),{close:C,error:T,leave:E,join:R}=aa;if(c&&[C,T,E,R].indexOf(w)>=0&&c!==this._joinRef())return;let P=this._onMessage(w,a,c);if(a&&!P)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(w)?(v=this.bindings.postgres_changes)===null||v===void 0||v.filter(F=>{var q,Y,J;return((q=F.filter)===null||q===void 0?void 0:q.event)==="*"||((J=(Y=F.filter)===null||Y===void 0?void 0:Y.event)===null||J===void 0?void 0:J.toLocaleLowerCase())===w}).map(F=>F.callback(P,c)):(m=this.bindings[w])===null||m===void 0||m.filter(F=>{var q,Y,J,ne,se,re;if(["broadcast","presence","postgres_changes"].includes(w))if("id"in F){const Ce=F.id,Ke=(q=F.filter)===null||q===void 0?void 0:q.event;return Ce&&((Y=a.ids)===null||Y===void 0?void 0:Y.includes(Ce))&&(Ke==="*"||Ke?.toLocaleLowerCase()===((J=a.data)===null||J===void 0?void 0:J.type.toLocaleLowerCase()))}else{const Ce=(se=(ne=F?.filter)===null||ne===void 0?void 0:ne.event)===null||se===void 0?void 0:se.toLocaleLowerCase();return Ce==="*"||Ce===((re=a?.event)===null||re===void 0?void 0:re.toLocaleLowerCase())}else return F.type.toLocaleLowerCase()===w}).map(F=>{if(typeof P=="object"&&"ids"in P){const q=P.data,{schema:Y,table:J,commit_timestamp:ne,type:se,errors:re}=q;P=Object.assign(Object.assign({},{schema:Y,table:J,commit_timestamp:ne,eventType:se,new:{},old:{},errors:re}),this._getPayloadRecords(q))}F.callback(P,c)})}_isClosed(){return this.state===hr.closed}_isJoined(){return this.state===hr.joined}_isJoining(){return this.state===hr.joining}_isLeaving(){return this.state===hr.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,a,c){const v=i.toLocaleLowerCase(),m={type:v,filter:a,callback:c};return this.bindings[v]?this.bindings[v].push(m):this.bindings[v]=[m],this}_off(i,a){const c=i.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(v=>{var m;return!(((m=v.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===c&&Td.isEqual(v.filter,a))})),this}static isEqual(i,a){if(Object.keys(i).length!==Object.keys(a).length)return!1;for(const c in i)if(i[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(aa.close,{},i)}_onError(i){this._on(aa.error,{},a=>i(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hr.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const a={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(a.new=lp(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(a.old=lp(i.columns,i.old_record)),a}}const Dh=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Zx=[1e3,2e3,5e3,1e4],Jx=1e4,$x=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ew{constructor(i,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ad,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dh,this.ref=0,this.reconnectTimer=null,this.vsn=op,this.logger=Dh,this.conn=null,this.sendBuffer=[],this.serializer=new qx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=v=>v?(...m)=>v(...m):(...m)=>fetch(...m),!(!((c=a?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${i}/${sd.websocket}`,this.httpEndpoint=ay(i),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Px.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const a=i.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const a=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const i=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,a,c){this.logger(i,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case fo.connecting:return ho.Connecting;case fo.open:return ho.Open;case fo.closing:return ho.Closing;default:return ho.Closed}}isConnected(){return this.connectionState()===ho.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,a={config:{}}){const c=`realtime:${i}`,v=this.getChannels().find(m=>m.topic===c);if(v)return v;{const m=new Td(`realtime:${i}`,a,this);return this.channels.push(m),m}}push(i){const{topic:a,event:c,payload:v,ref:m}=i,w=()=>{this.encode(i,C=>{var T;(T=this.conn)===null||T===void 0||T.send(C)})};this.log("push",`${a} ${c} (${m})`,v),this.isConnected()?w():this.sendBuffer.push(w)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(Hx,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let a=this.channels.find(c=>c.topic===i&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${i}"`),a.unsubscribe())}_remove(i){this.channels=this.channels.filter(a=>a.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(E){this.log("error","error in heartbeat callback",E)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:v,payload:m,ref:w}=a,C=w?`(${w})`:"",T=m.status||"";this.log("receive",`${T} ${c} ${v} ${C}`.trim(),m),this.channels.filter(E=>E._isMember(c)).forEach(E=>E._trigger(v,m,w)),this._triggerStateCallbacks("message",a)})}_clearTimer(i){var a;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fo.open||this.conn.readyState===fo.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(i){var a;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i)}_triggerChanError(){this.channels.forEach(i=>i._trigger(aa.error))}_appendParams(i,a){if(Object.keys(a).length===0)return i;const c=i.match(/\?/)?"&":"?",v=new URLSearchParams(a);return`${i}${c}${v}`}_workerObjectUrl(i){let a;if(i)a=i;else{const c=new Blob([$x],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(i,a=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(i=null){let a;i?a=i:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const v={access_token:a,version:zx};a&&c.updateJoinPayload(v),c.joinedOnce&&c._isJoined()&&c._push(aa.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${i}`,a)})}_triggerStateCallbacks(i,a){try{this.stateChangeCallbacks[i].forEach(c=>{try{c(a)}catch(v){this.log("error",`error in ${i} callback`,v)}})}catch(c){this.log("error",`error triggering ${i} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new ry(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var a,c,v,m,w,C,T,E,R,N,P,F;switch(this.transport=(a=i?.transport)!==null&&a!==void 0?a:null,this.timeout=(c=i?.timeout)!==null&&c!==void 0?c:ad,this.heartbeatIntervalMs=(v=i?.heartbeatIntervalMs)!==null&&v!==void 0?v:fc.HEARTBEAT_INTERVAL,this.worker=(m=i?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(w=i?.accessToken)!==null&&w!==void 0?w:null,this.heartbeatCallback=(C=i?.heartbeatCallback)!==null&&C!==void 0?C:Dh,this.vsn=(T=i?.vsn)!==null&&T!==void 0?T:op,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(E=i?.reconnectAfterMs)!==null&&E!==void 0?E:(q=>Zx[q-1]||Jx),this.vsn){case ny:this.encode=(R=i?.encode)!==null&&R!==void 0?R:((q,Y)=>Y(JSON.stringify(q))),this.decode=(N=i?.decode)!==null&&N!==void 0?N:((q,Y)=>Y(JSON.parse(q)));break;case Fx:this.encode=(P=i?.encode)!==null&&P!==void 0?P:this.serializer.encode.bind(this.serializer),this.decode=(F=i?.decode)!==null&&F!==void 0?F:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}class Bc extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function kn(u){return typeof u=="object"&&u!==null&&"__isStorageError"in u}class tw extends Bc{constructor(i,a,c){super(i),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ld extends Bc{constructor(i,a){super(i),this.name="StorageUnknownError",this.originalError=a}}const Od=u=>u?(...i)=>u(...i):(...i)=>fetch(...i),nw=()=>Response,ud=u=>{if(Array.isArray(u))return u.map(a=>ud(a));if(typeof u=="function"||u!==Object(u))return u;const i={};return Object.entries(u).forEach(([a,c])=>{const v=a.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));i[v]=ud(c)}),i},rw=u=>{if(typeof u!="object"||u===null)return!1;const i=Object.getPrototypeOf(u);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},iw=u=>!u||typeof u!="string"||u.length===0||u.length>100||u.trim()!==u||u.includes("/")||u.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(u),Mh=u=>{var i;return u.msg||u.message||u.error_description||(typeof u.error=="string"?u.error:(i=u.error)===null||i===void 0?void 0:i.message)||JSON.stringify(u)},aw=(u,i,a)=>Qe(void 0,void 0,void 0,function*(){const c=yield nw();u instanceof c&&!a?.noResolveJson?u.json().then(v=>{const m=u.status||500,w=v?.statusCode||m+"";i(new tw(Mh(v),m,w))}).catch(v=>{i(new ld(Mh(v),v))}):i(new ld(Mh(u),u))}),sw=(u,i,a,c)=>{const v={method:u,headers:i?.headers||{}};return u==="GET"||!c?v:(rw(c)?(v.headers=Object.assign({"Content-Type":"application/json"},i?.headers),v.body=JSON.stringify(c)):v.body=c,i?.duplex&&(v.duplex=i.duplex),Object.assign(Object.assign({},v),a))};function au(u,i,a,c,v,m){return Qe(this,void 0,void 0,function*(){return new Promise((w,C)=>{u(a,sw(i,c,v,m)).then(T=>{if(!T.ok)throw T;return c?.noResolveJson?T:T.json()}).then(T=>w(T)).catch(T=>aw(T,C,c))})})}function Zl(u,i,a,c){return Qe(this,void 0,void 0,function*(){return au(u,"GET",i,a,c)})}function ia(u,i,a,c,v){return Qe(this,void 0,void 0,function*(){return au(u,"POST",i,c,v,a)})}function cd(u,i,a,c,v){return Qe(this,void 0,void 0,function*(){return au(u,"PUT",i,c,v,a)})}function ow(u,i,a,c){return Qe(this,void 0,void 0,function*(){return au(u,"HEAD",i,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function Nd(u,i,a,c,v){return Qe(this,void 0,void 0,function*(){return au(u,"DELETE",i,c,v,a)})}class lw{constructor(i,a){this.downloadFn=i,this.shouldThrowOnError=a}then(i,a){return this.execute().then(i,a)}execute(){return Qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}}var sy;class uw{constructor(i,a){this.downloadFn=i,this.shouldThrowOnError=a,this[sy]="BlobDownloadBuilder",this.promise=null}asStream(){return new lw(this.downloadFn,this.shouldThrowOnError)}then(i,a){return this.getPromise().then(i,a)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(kn(i))return{data:null,error:i};throw i}})}}sy=Symbol.toStringTag;const cw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fw{constructor(i,a={},c,v){this.shouldThrowOnError=!1,this.url=i,this.headers=a,this.bucketId=c,this.fetch=Od(v)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(i,a,c,v){return Qe(this,void 0,void 0,function*(){try{let m;const w=Object.assign(Object.assign({},fp),v);let C=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(w.upsert)});const T=w.metadata;typeof Blob<"u"&&c instanceof Blob?(m=new FormData,m.append("cacheControl",w.cacheControl),T&&m.append("metadata",this.encodeMetadata(T)),m.append("",c)):typeof FormData<"u"&&c instanceof FormData?(m=c,m.has("cacheControl")||m.append("cacheControl",w.cacheControl),T&&!m.has("metadata")&&m.append("metadata",this.encodeMetadata(T))):(m=c,C["cache-control"]=`max-age=${w.cacheControl}`,C["content-type"]=w.contentType,T&&(C["x-metadata"]=this.toBase64(this.encodeMetadata(T))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!w.duplex&&(w.duplex="half")),v?.headers&&(C=Object.assign(Object.assign({},C),v.headers));const E=this._removeEmptyFolders(a),R=this._getFinalPath(E),N=yield(i=="PUT"?cd:ia)(this.fetch,`${this.url}/object/${R}`,m,Object.assign({headers:C},w?.duplex?{duplex:w.duplex}:{}));return{data:{path:E,id:N.Id,fullPath:N.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(kn(m))return{data:null,error:m};throw m}})}upload(i,a,c){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,a,c)})}uploadToSignedUrl(i,a,c,v){return Qe(this,void 0,void 0,function*(){const m=this._removeEmptyFolders(i),w=this._getFinalPath(m),C=new URL(this.url+`/object/upload/sign/${w}`);C.searchParams.set("token",a);try{let T;const E=Object.assign({upsert:fp.upsert},v),R=Object.assign(Object.assign({},this.headers),{"x-upsert":String(E.upsert)});typeof Blob<"u"&&c instanceof Blob?(T=new FormData,T.append("cacheControl",E.cacheControl),T.append("",c)):typeof FormData<"u"&&c instanceof FormData?(T=c,T.append("cacheControl",E.cacheControl)):(T=c,R["cache-control"]=`max-age=${E.cacheControl}`,R["content-type"]=E.contentType);const N=yield cd(this.fetch,C.toString(),T,{headers:R});return{data:{path:m,fullPath:N.Key},error:null}}catch(T){if(this.shouldThrowOnError)throw T;if(kn(T))return{data:null,error:T};throw T}})}createSignedUploadUrl(i,a){return Qe(this,void 0,void 0,function*(){try{let c=this._getFinalPath(i);const v=Object.assign({},this.headers);a?.upsert&&(v["x-upsert"]="true");const m=yield ia(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:v}),w=new URL(this.url+m.url),C=w.searchParams.get("token");if(!C)throw new Bc("No token returned by API");return{data:{signedUrl:w.toString(),path:i,token:C},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kn(c))return{data:null,error:c};throw c}})}update(i,a,c){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,a,c)})}move(i,a,c){return Qe(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers}),error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}copy(i,a,c){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield ia(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}createSignedUrl(i,a,c){return Qe(this,void 0,void 0,function*(){try{let v=this._getFinalPath(i),m=yield ia(this.fetch,`${this.url}/object/sign/${v}`,Object.assign({expiresIn:a},c?.transform?{transform:c.transform}:{}),{headers:this.headers});const w=c?.download?`&download=${c.download===!0?"":c.download}`:"";return m={signedUrl:encodeURI(`${this.url}${m.signedURL}${w}`)},{data:m,error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}createSignedUrls(i,a,c){return Qe(this,void 0,void 0,function*(){try{const v=yield ia(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:i},{headers:this.headers}),m=c?.download?`&download=${c.download===!0?"":c.download}`:"";return{data:v.map(w=>Object.assign(Object.assign({},w),{signedUrl:w.signedURL?encodeURI(`${this.url}${w.signedURL}${m}`):null})),error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}download(i,a){const v=typeof a?.transform<"u"?"render/image/authenticated":"object",m=this.transformOptsToQueryString(a?.transform||{}),w=m?`?${m}`:"",C=this._getFinalPath(i),T=()=>Zl(this.fetch,`${this.url}/${v}/${C}${w}`,{headers:this.headers,noResolveJson:!0});return new uw(T,this.shouldThrowOnError)}info(i){return Qe(this,void 0,void 0,function*(){const a=this._getFinalPath(i);try{const c=yield Zl(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:ud(c),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kn(c))return{data:null,error:c};throw c}})}exists(i){return Qe(this,void 0,void 0,function*(){const a=this._getFinalPath(i);try{return yield ow(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kn(c)&&c instanceof ld){const v=c.originalError;if([400,404].includes(v?.status))return{data:!1,error:c}}throw c}})}getPublicUrl(i,a){const c=this._getFinalPath(i),v=[],m=a?.download?`download=${a.download===!0?"":a.download}`:"";m!==""&&v.push(m);const C=typeof a?.transform<"u"?"render/image":"object",T=this.transformOptsToQueryString(a?.transform||{});T!==""&&v.push(T);let E=v.join("&");return E!==""&&(E=`?${E}`),{data:{publicUrl:encodeURI(`${this.url}/${C}/public/${c}${E}`)}}}remove(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}list(i,a,c){return Qe(this,void 0,void 0,function*(){try{const v=Object.assign(Object.assign(Object.assign({},cw),a),{prefix:i||""});return{data:yield ia(this.fetch,`${this.url}/object/list/${this.bucketId}`,v,{headers:this.headers},c),error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}listV2(i,a){return Qe(this,void 0,void 0,function*(){try{const c=Object.assign({},i);return{data:yield ia(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kn(c))return{data:null,error:c};throw c}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const a=[];return i.width&&a.push(`width=${i.width}`),i.height&&a.push(`height=${i.height}`),i.resize&&a.push(`resize=${i.resize}`),i.format&&a.push(`format=${i.format}`),i.quality&&a.push(`quality=${i.quality}`),a.join("&")}}const oy="2.86.0",ly={"X-Client-Info":`storage-js/${oy}`};class hw{constructor(i,a={},c,v){this.shouldThrowOnError=!1;const m=new URL(i);v?.useNewHostname&&/supabase\.(co|in|red)$/.test(m.hostname)&&!m.hostname.includes("storage.supabase.")&&(m.hostname=m.hostname.replace("supabase.","storage.supabase.")),this.url=m.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ly),a),this.fetch=Od(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(i){return Qe(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(i);return{data:yield Zl(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}getBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Zl(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}createBucket(i){return Qe(this,arguments,void 0,function*(a,c={public:!1}){try{return{data:yield ia(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:c.type,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(kn(v))return{data:null,error:v};throw v}})}updateBucket(i,a){return Qe(this,void 0,void 0,function*(){try{return{data:yield cd(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kn(c))return{data:null,error:c};throw c}})}emptyBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}deleteBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(i){const a={};return i&&("limit"in i&&(a.limit=String(i.limit)),"offset"in i&&(a.offset=String(i.offset)),i.search&&(a.search=i.search),i.sortColumn&&(a.sortColumn=i.sortColumn),i.sortOrder&&(a.sortOrder=i.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}var Jl=class extends Error{constructor(u,i){super(u),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&i.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function dw(u,i,a){const c=new URL(i,u);if(a)for(const[v,m]of Object.entries(a))m!==void 0&&c.searchParams.set(v,m);return c.toString()}async function gw(u){return!u||u.type==="none"?{}:u.type==="bearer"?{Authorization:`Bearer ${u.token}`}:u.type==="header"?{[u.name]:u.value}:u.type==="custom"?await u.getHeaders():{}}function pw(u){const i=u.fetchImpl??globalThis.fetch;return{async request({method:a,path:c,query:v,body:m,headers:w}){const C=dw(u.baseUrl,c,v),T=await gw(u.auth),E=await i(C,{method:a,headers:{...m?{"Content-Type":"application/json"}:{},...T,...w},body:m?JSON.stringify(m):void 0}),R=await E.text(),N=(E.headers.get("content-type")||"").includes("application/json"),P=N&&R?JSON.parse(R):R;if(!E.ok){const F=N?P:void 0,q=F?.error;throw new Jl(q?.message??`Request failed with status ${E.status}`,{status:E.status,icebergType:q?.type,icebergCode:q?.code,details:F})}return{status:E.status,headers:E.headers,data:P}}}}function hc(u){return u.join("")}var mw=class{constructor(u,i=""){this.client=u,this.prefix=i}async listNamespaces(u){const i=u?{parent:hc(u.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(c=>({namespace:c}))}async createNamespace(u,i){const a={namespace:u.namespace,properties:i?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(u){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hc(u.namespace)}`})}async loadNamespaceMetadata(u){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(u.namespace)}`})).data.properties}}async namespaceExists(u){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hc(u.namespace)}`}),!0}catch(i){if(i instanceof Jl&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(u,i){try{return await this.createNamespace(u,i)}catch(a){if(a instanceof Jl&&a.status===409)return;throw a}}};function qo(u){return u.join("")}var yw=class{constructor(u,i="",a){this.client=u,this.prefix=i,this.accessDelegation=a}async listTables(u){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables`})).data.identifiers}async createTable(u,i){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables`,body:i,headers:a})).data.metadata}async updateTable(u,i){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables/${u.name}`,body:i});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(u,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables/${u.name}`,query:{purgeRequested:String(i?.purge??!1)}})}async loadTable(u){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables/${u.name}`,headers:i})).data.metadata}async tableExists(u){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qo(u.namespace)}/tables/${u.name}`,headers:i}),!0}catch(a){if(a instanceof Jl&&a.status===404)return!1;throw a}}async createTableIfNotExists(u,i){try{return await this.createTable(u,i)}catch(a){if(a instanceof Jl&&a.status===409)return await this.loadTable({namespace:u.namespace,name:i.name});throw a}}},vw=class{constructor(u){let i="v1";u.catalogName&&(i+=`/${u.catalogName}`);const a=u.baseUrl.endsWith("/")?u.baseUrl:`${u.baseUrl}/`;this.client=pw({baseUrl:a,auth:u.auth,fetchImpl:u.fetch}),this.accessDelegation=u.accessDelegation?.join(","),this.namespaceOps=new mw(this.client,i),this.tableOps=new yw(this.client,i,this.accessDelegation)}async listNamespaces(u){return this.namespaceOps.listNamespaces(u)}async createNamespace(u,i){return this.namespaceOps.createNamespace(u,i)}async dropNamespace(u){await this.namespaceOps.dropNamespace(u)}async loadNamespaceMetadata(u){return this.namespaceOps.loadNamespaceMetadata(u)}async listTables(u){return this.tableOps.listTables(u)}async createTable(u,i){return this.tableOps.createTable(u,i)}async updateTable(u,i){return this.tableOps.updateTable(u,i)}async dropTable(u,i){await this.tableOps.dropTable(u,i)}async loadTable(u){return this.tableOps.loadTable(u)}async namespaceExists(u){return this.namespaceOps.namespaceExists(u)}async tableExists(u){return this.tableOps.tableExists(u)}async createNamespaceIfNotExists(u,i){return this.namespaceOps.createNamespaceIfNotExists(u,i)}async createTableIfNotExists(u,i){return this.tableOps.createTableIfNotExists(u,i)}};class xw{constructor(i,a={},c){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ly),a),this.fetch=Od(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/bucket`,{name:i},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}listBuckets(i){return Qe(this,void 0,void 0,function*(){try{const a=new URLSearchParams;i?.limit!==void 0&&a.set("limit",i.limit.toString()),i?.offset!==void 0&&a.set("offset",i.offset.toString()),i?.sortColumn&&a.set("sortColumn",i.sortColumn),i?.sortOrder&&a.set("sortOrder",i.sortOrder),i?.search&&a.set("search",i.search);const c=a.toString(),v=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:yield Zl(this.fetch,v,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}deleteBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(kn(a))return{data:null,error:a};throw a}})}from(i){if(!iw(i))throw new Bc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new vw({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:()=>Qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Rd={"X-Client-Info":`storage-js/${oy}`,"Content-Type":"application/json"};class uy extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ri(u){return typeof u=="object"&&u!==null&&"__isStorageVectorsError"in u}class Bh extends uy{constructor(i,a,c){super(i),this.name="StorageVectorsApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ww extends uy{constructor(i,a){super(i),this.name="StorageVectorsUnknownError",this.originalError=a}}var hp;(function(u){u.InternalError="InternalError",u.S3VectorConflictException="S3VectorConflictException",u.S3VectorNotFoundException="S3VectorNotFoundException",u.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",u.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",u.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(hp||(hp={}));const Id=u=>u?(...i)=>u(...i):(...i)=>fetch(...i),bw=u=>{if(typeof u!="object"||u===null)return!1;const i=Object.getPrototypeOf(u);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},dp=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),Ew=(u,i,a)=>Qe(void 0,void 0,void 0,function*(){if(u&&typeof u=="object"&&"status"in u&&"ok"in u&&typeof u.status=="number"&&!a?.noResolveJson){const v=u.status||500,m=u;if(typeof m.json=="function")m.json().then(w=>{const C=w?.statusCode||w?.code||v+"";i(new Bh(dp(w),v,C))}).catch(()=>{const w=v+"",C=m.statusText||`HTTP ${v} error`;i(new Bh(C,v,w))});else{const w=v+"",C=m.statusText||`HTTP ${v} error`;i(new Bh(C,v,w))}}else i(new ww(dp(u),u))}),_w=(u,i,a,c)=>{const v={method:u,headers:i?.headers||{}};return c?(bw(c)?(v.headers=Object.assign({"Content-Type":"application/json"},i?.headers),v.body=JSON.stringify(c)):v.body=c,Object.assign(Object.assign({},v),a)):v};function Aw(u,i,a,c,v,m){return Qe(this,void 0,void 0,function*(){return new Promise((w,C)=>{u(a,_w(i,c,v,m)).then(T=>{if(!T.ok)throw T;if(c?.noResolveJson)return T;const E=T.headers.get("content-type");return!E||!E.includes("application/json")?{}:T.json()}).then(T=>w(T)).catch(T=>Ew(T,C,c))})})}function Ii(u,i,a,c,v){return Qe(this,void 0,void 0,function*(){return Aw(u,"POST",i,c,v,a)})}class Sw{constructor(i,a={},c){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),a),this.fetch=Id(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(i){return Qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateIndex`,i,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}getIndex(i,a){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:i,indexName:a},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ri(c))return{data:null,error:c};throw c}})}listIndexes(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/ListIndexes`,i,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}deleteIndex(i,a){return Qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:i,indexName:a},{headers:this.headers}))||{},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ri(c))return{data:null,error:c};throw c}})}}class Cw{constructor(i,a={},c){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),a),this.fetch=Id(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(i){return Qe(this,void 0,void 0,function*(){try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/PutVectors`,i,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}getVectors(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectors`,i,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}listVectors(i){return Qe(this,void 0,void 0,function*(){try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:yield Ii(this.fetch,`${this.url}/ListVectors`,i,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}queryVectors(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/QueryVectors`,i,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}deleteVectors(i){return Qe(this,void 0,void 0,function*(){try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectors`,i,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}}class Tw{constructor(i,a={},c){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),a),this.fetch=Id(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}getBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:i},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}listBuckets(){return Qe(this,arguments,void 0,function*(i={}){try{return{data:yield Ii(this.fetch,`${this.url}/ListVectorBuckets`,i,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}deleteBucket(i){return Qe(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ri(a))return{data:null,error:a};throw a}})}}class Ow extends Tw{constructor(i,a={}){super(i,a.headers||{},a.fetch)}from(i){return new Nw(this.url,this.headers,i,this.fetch)}createBucket(i){const a=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Qe(this,void 0,void 0,function*(){return a.createBucket.call(this,i)})}getBucket(i){const a=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Qe(this,void 0,void 0,function*(){return a.getBucket.call(this,i)})}listBuckets(){const i=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Qe(this,arguments,void 0,function*(a={}){return i.listBuckets.call(this,a)})}deleteBucket(i){const a=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Qe(this,void 0,void 0,function*(){return a.deleteBucket.call(this,i)})}}class Nw extends Sw{constructor(i,a,c,v){super(i,a,v),this.vectorBucketName=c}createIndex(i){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Qe(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const i=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Qe(this,arguments,void 0,function*(a={}){return i.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(i){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Qe(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,i)})}deleteIndex(i){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Qe(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,i)})}index(i){return new Rw(this.url,this.headers,this.vectorBucketName,i,this.fetch)}}class Rw extends Cw{constructor(i,a,c,v,m){super(i,a,m),this.vectorBucketName=c,this.indexName=v}putVectors(i){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Qe(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(i){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Qe(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const i=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Qe(this,arguments,void 0,function*(a={}){return i.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(i){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Qe(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(i){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Qe(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Iw extends hw{constructor(i,a={},c,v){super(i,a,c,v)}from(i){return new fw(this.url,this.headers,i,this.fetch)}get vectors(){return new Ow(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xw(this.url+"/iceberg",this.headers,this.fetch)}}const Dw="2.86.0";let Gl="";typeof Deno<"u"?Gl="deno":typeof document<"u"?Gl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gl="react-native":Gl="node";const Mw={"X-Client-Info":`supabase-js-${Gl}/${Dw}`},Bw={headers:Mw},Lw={schema:"public"},kw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jw={},Pw=u=>u?(...i)=>u(...i):(...i)=>fetch(...i),Uw=()=>Headers,zw=(u,i,a)=>{const c=Pw(a),v=Uw();return async(m,w)=>{var C;const T=(C=await i())!==null&&C!==void 0?C:u;let E=new v(w?.headers);return E.has("apikey")||E.set("apikey",u),E.has("Authorization")||E.set("Authorization",`Bearer ${T}`),c(m,Object.assign(Object.assign({},w),{headers:E}))}};function Fw(u){return u.endsWith("/")?u:u+"/"}function Hw(u,i){var a,c;const{db:v,auth:m,realtime:w,global:C}=u,{db:T,auth:E,realtime:R,global:N}=i,P={db:Object.assign(Object.assign({},T),v),auth:Object.assign(Object.assign({},E),m),realtime:Object.assign(Object.assign({},R),w),storage:{},global:Object.assign(Object.assign(Object.assign({},N),C),{headers:Object.assign(Object.assign({},(a=N?.headers)!==null&&a!==void 0?a:{}),(c=C?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return u.accessToken?P.accessToken=u.accessToken:delete P.accessToken,P}function Vw(u){const i=u?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fw(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cy="2.86.0",Zo=30*1e3,fd=3,Lh=fd*Zo,qw="http://localhost:9999",Gw="supabase.auth.token",Yw={"X-Client-Info":`gotrue-js/${cy}`},hd="X-Supabase-Api-Version",fy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kw=600*1e3;class $l extends Error{constructor(i,a,c){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function rt(u){return typeof u=="object"&&u!==null&&"__isAuthError"in u}class Ww extends $l{constructor(i,a,c){super(i,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function Qw(u){return rt(u)&&u.name==="AuthApiError"}class go extends $l{constructor(i,a){super(i),this.name="AuthUnknownError",this.originalError=a}}class js extends $l{constructor(i,a,c,v){super(i,c,v),this.name=a,this.status=c}}class Ti extends js{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zw(u){return rt(u)&&u.name==="AuthSessionMissingError"}class Go extends js{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dc extends js{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class gc extends js{constructor(i,a=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jw(u){return rt(u)&&u.name==="AuthImplicitGrantRedirectError"}class gp extends js{constructor(i,a=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dd extends js{constructor(i,a){super(i,"AuthRetryableFetchError",a,void 0)}}function kh(u){return rt(u)&&u.name==="AuthRetryableFetchError"}class pp extends js{constructor(i,a,c){super(i,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class gd extends js{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const _c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mp=` 	
\r=`.split(""),$w=(()=>{const u=new Array(128);for(let i=0;i<u.length;i+=1)u[i]=-1;for(let i=0;i<mp.length;i+=1)u[mp[i].charCodeAt(0)]=-2;for(let i=0;i<_c.length;i+=1)u[_c[i].charCodeAt(0)]=i;return u})();function yp(u,i,a){if(u!==null)for(i.queue=i.queue<<8|u,i.queuedBits+=8;i.queuedBits>=6;){const c=i.queue>>i.queuedBits-6&63;a(_c[c]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const c=i.queue>>i.queuedBits-6&63;a(_c[c]),i.queuedBits-=6}}function hy(u,i,a){const c=$w[u];if(c>-1)for(i.queue=i.queue<<6|c,i.queuedBits+=6;i.queuedBits>=8;)a(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(u)}"`)}}function vp(u){const i=[],a=w=>{i.push(String.fromCodePoint(w))},c={utf8seq:0,codepoint:0},v={queue:0,queuedBits:0},m=w=>{nb(w,c,a)};for(let w=0;w<u.length;w+=1)hy(u.charCodeAt(w),v,m);return i.join("")}function eb(u,i){if(u<=127){i(u);return}else if(u<=2047){i(192|u>>6),i(128|u&63);return}else if(u<=65535){i(224|u>>12),i(128|u>>6&63),i(128|u&63);return}else if(u<=1114111){i(240|u>>18),i(128|u>>12&63),i(128|u>>6&63),i(128|u&63);return}throw new Error(`Unrecognized Unicode codepoint: ${u.toString(16)}`)}function tb(u,i){for(let a=0;a<u.length;a+=1){let c=u.charCodeAt(a);if(c>55295&&c<=56319){const v=(c-55296)*1024&65535;c=(u.charCodeAt(a+1)-56320&65535|v)+65536,a+=1}eb(c,i)}}function nb(u,i,a){if(i.utf8seq===0){if(u<=127){a(u);return}for(let c=1;c<6;c+=1)if((u>>7-c&1)===0){i.utf8seq=c;break}if(i.utf8seq===2)i.codepoint=u&31;else if(i.utf8seq===3)i.codepoint=u&15;else if(i.utf8seq===4)i.codepoint=u&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(u<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|u&63,i.utf8seq-=1,i.utf8seq===0&&a(i.codepoint)}}function el(u){const i=[],a={queue:0,queuedBits:0},c=v=>{i.push(v)};for(let v=0;v<u.length;v+=1)hy(u.charCodeAt(v),a,c);return new Uint8Array(i)}function rb(u){const i=[];return tb(u,a=>i.push(a)),new Uint8Array(i)}function po(u){const i=[],a={queue:0,queuedBits:0},c=v=>{i.push(v)};return u.forEach(v=>yp(v,a,c)),yp(null,a,c),i.join("")}function ib(u){return Math.round(Date.now()/1e3)+u}function ab(){return Symbol("auth-callback")}const Ir=()=>typeof window<"u"&&typeof document<"u",oo={tested:!1,writable:!1},dy=()=>{if(!Ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oo.tested)return oo.writable;const u=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(u,u),globalThis.localStorage.removeItem(u),oo.tested=!0,oo.writable=!0}catch{oo.tested=!0,oo.writable=!1}return oo.writable};function sb(u){const i={},a=new URL(u);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((v,m)=>{i[m]=v})}catch{}return a.searchParams.forEach((c,v)=>{i[v]=c}),i}const gy=u=>u?(...i)=>u(...i):(...i)=>fetch(...i),ob=u=>typeof u=="object"&&u!==null&&"status"in u&&"ok"in u&&"json"in u&&typeof u.json=="function",Jo=async(u,i,a)=>{await u.setItem(i,JSON.stringify(a))},lo=async(u,i)=>{const a=await u.getItem(i);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Ds=async(u,i)=>{await u.removeItem(i)};class Lc{constructor(){this.promise=new Lc.promiseConstructor((i,a)=>{this.resolve=i,this.reject=a})}}Lc.promiseConstructor=Promise;function jh(u){const i=u.split(".");if(i.length!==3)throw new gd("Invalid JWT structure");for(let c=0;c<i.length;c++)if(!Xw.test(i[c]))throw new gd("JWT not in base64url format");return{header:JSON.parse(vp(i[0])),payload:JSON.parse(vp(i[1])),signature:el(i[2]),raw:{header:i[0],payload:i[1]}}}async function lb(u){return await new Promise(i=>{setTimeout(()=>i(null),u)})}function ub(u,i){return new Promise((c,v)=>{(async()=>{for(let m=0;m<1/0;m++)try{const w=await u(m);if(!i(m,null,w)){c(w);return}}catch(w){if(!i(m,w)){v(w);return}}})()})}function cb(u){return("0"+u.toString(16)).substr(-2)}function fb(){const i=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let v="";for(let m=0;m<56;m++)v+=a.charAt(Math.floor(Math.random()*c));return v}return crypto.getRandomValues(i),Array.from(i,cb).join("")}async function hb(u){const a=new TextEncoder().encode(u),c=await crypto.subtle.digest("SHA-256",a),v=new Uint8Array(c);return Array.from(v).map(m=>String.fromCharCode(m)).join("")}async function db(u){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),u;const a=await hb(u);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yo(u,i,a=!1){const c=fb();let v=c;a&&(v+="/PASSWORD_RECOVERY"),await Jo(u,`${i}-code-verifier`,v);const m=await db(c);return[m,c===m?"plain":"s256"]}const gb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pb(u){const i=u.headers.get(hd);if(!i||!i.match(gb))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function mb(u){if(!u)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(u<=i)throw new Error("JWT has expired")}function yb(u){switch(u){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xo(u){if(!vb.test(u))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ph(){const u={};return new Proxy(u,{get:(i,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xb(u,i){return new Proxy(u,{get:(a,c,v)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const m=c.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,c,v)}return!i.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(a,c,v)}})}function xp(u){return JSON.parse(JSON.stringify(u))}const co=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),wb=[502,503,504];async function wp(u){var i;if(!ob(u))throw new dd(co(u),0);if(wb.includes(u.status))throw new dd(co(u),u.status);let a;try{a=await u.json()}catch(m){throw new go(co(m),m)}let c;const v=pb(u);if(v&&v.getTime()>=fy["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new pp(co(a),u.status,((i=a.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(c==="session_not_found")throw new Ti}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((m,w)=>m&&typeof w=="string",!0))throw new pp(co(a),u.status,a.weak_password.reasons);throw new Ww(co(a),u.status||500,c)}const bb=(u,i,a,c)=>{const v={method:u,headers:i?.headers||{}};return u==="GET"?v:(v.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),v.body=JSON.stringify(c),Object.assign(Object.assign({},v),a))};async function ct(u,i,a,c){var v;const m=Object.assign({},c?.headers);m[hd]||(m[hd]=fy["2024-01-01"].name),c?.jwt&&(m.Authorization=`Bearer ${c.jwt}`);const w=(v=c?.query)!==null&&v!==void 0?v:{};c?.redirectTo&&(w.redirect_to=c.redirectTo);const C=Object.keys(w).length?"?"+new URLSearchParams(w).toString():"",T=await Eb(u,i,a+C,{headers:m,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(T):{data:Object.assign({},T),error:null}}async function Eb(u,i,a,c,v,m){const w=bb(i,c,v,m);let C;try{C=await u(a,Object.assign({},w))}catch(T){throw console.error(T),new dd(co(T),0)}if(C.ok||await wp(C),c?.noResolveJson)return C;try{return await C.json()}catch(T){await wp(T)}}function ra(u){var i;let a=null;Sb(u)&&(a=Object.assign({},u),u.expires_at||(a.expires_at=ib(u.expires_in)));const c=(i=u.user)!==null&&i!==void 0?i:u;return{data:{session:a,user:c},error:null}}function bp(u){const i=ra(u);return!i.error&&u.weak_password&&typeof u.weak_password=="object"&&Array.isArray(u.weak_password.reasons)&&u.weak_password.reasons.length&&u.weak_password.message&&typeof u.weak_password.message=="string"&&u.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(i.data.weak_password=u.weak_password),i}function Bs(u){var i;return{data:{user:(i=u.user)!==null&&i!==void 0?i:u},error:null}}function _b(u){return{data:u,error:null}}function Ab(u){const{action_link:i,email_otp:a,hashed_token:c,redirect_to:v,verification_type:m}=u,w=al(u,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),C={action_link:i,email_otp:a,hashed_token:c,redirect_to:v,verification_type:m},T=Object.assign({},w);return{data:{properties:C,user:T},error:null}}function Ep(u){return u}function Sb(u){return u.access_token&&u.refresh_token&&u.expires_in}const Uh=["global","local","others"];class Cb{constructor({url:i="",headers:a={},fetch:c}){this.url=i,this.headers=a,this.fetch=gy(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,a=Uh[0]){if(Uh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uh.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(c){if(rt(c))return{data:null,error:c};throw c}}async inviteUserByEmail(i,a={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Bs})}catch(c){if(rt(c))return{data:{user:null},error:c};throw c}}async generateLink(i){try{const{options:a}=i,c=al(i,["options"]),v=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(v.new_email=c?.newEmail,delete v.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:v,headers:this.headers,xform:Ab,redirectTo:a?.redirectTo})}catch(a){if(rt(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(i){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:Bs})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async listUsers(i){var a,c,v,m,w,C,T;try{const E={nextPage:null,lastPage:0,total:0},R=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=i?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(m=(v=i?.perPage)===null||v===void 0?void 0:v.toString())!==null&&m!==void 0?m:""},xform:Ep});if(R.error)throw R.error;const N=await R.json(),P=(w=R.headers.get("x-total-count"))!==null&&w!==void 0?w:0,F=(T=(C=R.headers.get("link"))===null||C===void 0?void 0:C.split(","))!==null&&T!==void 0?T:[];return F.length>0&&(F.forEach(q=>{const Y=parseInt(q.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(q.split(";")[1].split("=")[1]);E[`${J}Page`]=Y}),E.total=parseInt(P)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(rt(E))return{data:{users:[]},error:E};throw E}}async getUserById(i){Xo(i);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:Bs})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async updateUserById(i,a){Xo(i);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:a,headers:this.headers,xform:Bs})}catch(c){if(rt(c))return{data:{user:null},error:c};throw c}}async deleteUser(i,a=!1){Xo(i);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:a},xform:Bs})}catch(c){if(rt(c))return{data:{user:null},error:c};throw c}}async _listFactors(i){Xo(i.userId);try{const{data:a,error:c}=await ct(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:v=>({data:{factors:v},error:null})});return{data:a,error:c}}catch(a){if(rt(a))return{data:null,error:a};throw a}}async _deleteFactor(i){Xo(i.userId),Xo(i.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}async _listOAuthClients(i){var a,c,v,m,w,C,T;try{const E={nextPage:null,lastPage:0,total:0},R=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=i?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(m=(v=i?.perPage)===null||v===void 0?void 0:v.toString())!==null&&m!==void 0?m:""},xform:Ep});if(R.error)throw R.error;const N=await R.json(),P=(w=R.headers.get("x-total-count"))!==null&&w!==void 0?w:0,F=(T=(C=R.headers.get("link"))===null||C===void 0?void 0:C.split(","))!==null&&T!==void 0?T:[];return F.length>0&&(F.forEach(q=>{const Y=parseInt(q.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(q.split(";")[1].split("=")[1]);E[`${J}Page`]=Y}),E.total=parseInt(P)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(rt(E))return{data:{clients:[]},error:E};throw E}}async _createOAuthClient(i){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(rt(a))return{data:null,error:a};throw a}}async _getOAuthClient(i){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(rt(a))return{data:null,error:a};throw a}}async _updateOAuthClient(i,a){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:a,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if(rt(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(i){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(i){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(rt(a))return{data:null,error:a};throw a}}}function _p(u={}){return{getItem:i=>u[i]||null,setItem:(i,a)=>{u[i]=a},removeItem:i=>{delete u[i]}}}const Ko={debug:!!(globalThis&&dy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class py extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class Tb extends py{}async function Ob(u,i,a){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",u,i);const c=new globalThis.AbortController;return i>0&&setTimeout(()=>{c.abort(),Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",u)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(u,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async v=>{if(v){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",u,v.name);try{return await a()}finally{Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",u,v.name)}}else{if(i===0)throw Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",u),new Tb(`Acquiring an exclusive Navigator LockManager lock "${u}" immediately failed`);if(Ko.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function Nb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function my(u){if(!/^0x[a-fA-F0-9]{40}$/.test(u))throw new Error(`@supabase/auth-js: Address "${u}" is invalid.`);return u.toLowerCase()}function Rb(u){return parseInt(u,16)}function Ib(u){const i=new TextEncoder().encode(u);return"0x"+Array.from(i,c=>c.toString(16).padStart(2,"0")).join("")}function Db(u){var i;const{chainId:a,domain:c,expirationTime:v,issuedAt:m=new Date,nonce:w,notBefore:C,requestId:T,resources:E,scheme:R,uri:N,version:P}=u;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(w&&w.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${w}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(P!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${P}`);if(!((i=u.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${u.statement}`)}const F=my(u.address),q=R?`${R}://${c}`:c,Y=u.statement?`${u.statement}
`:"",J=`${q} wants you to sign in with your Ethereum account:
${F}

${Y}`;let ne=`URI: ${N}
Version: ${P}
Chain ID: ${a}${w?`
Nonce: ${w}`:""}
Issued At: ${m.toISOString()}`;if(v&&(ne+=`
Expiration Time: ${v.toISOString()}`),C&&(ne+=`
Not Before: ${C.toISOString()}`),T&&(ne+=`
Request ID: ${T}`),E){let se=`
Resources:`;for(const re of E){if(!re||typeof re!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${re}`);se+=`
- ${re}`}ne+=se}return`${J}
${ne}`}class ur extends Error{constructor({message:i,code:a,cause:c,name:v}){var m;super(i,{cause:c}),this.__isWebAuthnError=!0,this.name=(m=v??(c instanceof Error?c.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=a}}class Ac extends ur{constructor(i,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:i}),this.name="WebAuthnUnknownError",this.originalError=a}}function Mb({error:u,options:i}){var a,c,v;const{publicKey:m}=i;if(!m)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ur({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else if(u.name==="ConstraintError"){if(((a=m.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new ur({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:u});if(i.mediation==="conditional"&&((c=m.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new ur({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:u});if(((v=m.authenticatorSelection)===null||v===void 0?void 0:v.userVerification)==="required")return new ur({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:u})}else{if(u.name==="InvalidStateError")return new ur({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:u});if(u.name==="NotAllowedError")return new ur({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="NotSupportedError")return m.pubKeyCredParams.filter(C=>C.type==="public-key").length===0?new ur({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:u}):new ur({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:u});if(u.name==="SecurityError"){const w=window.location.hostname;if(yy(w)){if(m.rp.id!==w)return new ur({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new ur({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:u})}else if(u.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}function Bb({error:u,options:i}){const{publicKey:a}=i;if(!a)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(i.signal instanceof AbortSignal)return new ur({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else{if(u.name==="NotAllowedError")return new ur({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="SecurityError"){const c=window.location.hostname;if(yy(c)){if(a.rpId!==c)return new ur({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}class Lb{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const kb=new Lb;function jb(u){if(!u)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(u);const{challenge:i,user:a,excludeCredentials:c}=u,v=al(u,["challenge","user","excludeCredentials"]),m=el(i).buffer,w=Object.assign(Object.assign({},a),{id:el(a.id).buffer}),C=Object.assign(Object.assign({},v),{challenge:m,user:w});if(c&&c.length>0){C.excludeCredentials=new Array(c.length);for(let T=0;T<c.length;T++){const E=c[T];C.excludeCredentials[T]=Object.assign(Object.assign({},E),{id:el(E.id).buffer,type:E.type||"public-key",transports:E.transports})}}return C}function Pb(u){if(!u)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(u);const{challenge:i,allowCredentials:a}=u,c=al(u,["challenge","allowCredentials"]),v=el(i).buffer,m=Object.assign(Object.assign({},c),{challenge:v});if(a&&a.length>0){m.allowCredentials=new Array(a.length);for(let w=0;w<a.length;w++){const C=a[w];m.allowCredentials[w]=Object.assign(Object.assign({},C),{id:el(C.id).buffer,type:C.type||"public-key",transports:C.transports})}}return m}function Ub(u){var i;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const a=u;return{id:u.id,rawId:u.id,response:{attestationObject:po(new Uint8Array(u.response.attestationObject)),clientDataJSON:po(new Uint8Array(u.response.clientDataJSON))},type:"public-key",clientExtensionResults:u.getClientExtensionResults(),authenticatorAttachment:(i=a.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function zb(u){var i;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const a=u,c=u.getClientExtensionResults(),v=u.response;return{id:u.id,rawId:u.id,response:{authenticatorData:po(new Uint8Array(v.authenticatorData)),clientDataJSON:po(new Uint8Array(v.clientDataJSON)),signature:po(new Uint8Array(v.signature)),userHandle:v.userHandle?po(new Uint8Array(v.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(i=a.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function yy(u){return u==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(u)}function Ap(){var u,i;return!!(Ir()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((u=navigator?.credentials)===null||u===void 0?void 0:u.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function Fb(u){try{const i=await navigator.credentials.create(u);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",i)}:{data:null,error:new Ac("Empty credential response",i)}}catch(i){return{data:null,error:Mb({error:i,options:u})}}}async function Hb(u){try{const i=await navigator.credentials.get(u);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",i)}:{data:null,error:new Ac("Empty credential response",i)}}catch(i){return{data:null,error:Bb({error:i,options:u})}}}const Vb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sc(...u){const i=v=>v!==null&&typeof v=="object"&&!Array.isArray(v),a=v=>v instanceof ArrayBuffer||ArrayBuffer.isView(v),c={};for(const v of u)if(v)for(const m in v){const w=v[m];if(w!==void 0)if(Array.isArray(w))c[m]=w;else if(a(w))c[m]=w;else if(i(w)){const C=c[m];i(C)?c[m]=Sc(C,w):c[m]=Sc(w)}else c[m]=w}return c}function Gb(u,i){return Sc(Vb,u,i||{})}function Yb(u,i){return Sc(qb,u,i||{})}class Xb{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:a,friendlyName:c,signal:v},m){try{const{data:w,error:C}=await this.client.mfa.challenge({factorId:i,webauthn:a});if(!w)return{data:null,error:C};const T=v??kb.createNewAbortSignal();if(w.webauthn.type==="create"){const{user:E}=w.webauthn.credential_options.publicKey;E.name||(E.name=`${E.id}:${c}`),E.displayName||(E.displayName=E.name)}switch(w.webauthn.type){case"create":{const E=Gb(w.webauthn.credential_options.publicKey,m?.create),{data:R,error:N}=await Fb({publicKey:E,signal:T});return R?{data:{factorId:i,challengeId:w.id,webauthn:{type:w.webauthn.type,credential_response:R}},error:null}:{data:null,error:N}}case"request":{const E=Yb(w.webauthn.credential_options.publicKey,m?.request),{data:R,error:N}=await Hb(Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:E,signal:T}));return R?{data:{factorId:i,challengeId:w.id,webauthn:{type:w.webauthn.type,credential_response:R}},error:null}:{data:null,error:N}}}}catch(w){return rt(w)?{data:null,error:w}:{data:null,error:new go("Unexpected error in challenge",w)}}}async _verify({challengeId:i,factorId:a,webauthn:c}){return this.client.mfa.verify({factorId:a,challengeId:i,webauthn:c})}async _authenticate({factorId:i,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:v}={}},m){if(!a)return{data:null,error:new $l("rpId is required for WebAuthn authentication")};try{if(!Ap())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:w,error:C}=await this.challenge({factorId:i,webauthn:{rpId:a,rpOrigins:c},signal:v},{request:m});if(!w)return{data:null,error:C};const{webauthn:T}=w;return this._verify({factorId:i,challengeId:w.challengeId,webauthn:{type:T.type,rpId:a,rpOrigins:c,credential_response:T.credential_response}})}catch(w){return rt(w)?{data:null,error:w}:{data:null,error:new go("Unexpected error in authenticate",w)}}}async _register({friendlyName:i,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:v}={}},m){if(!a)return{data:null,error:new $l("rpId is required for WebAuthn registration")};try{if(!Ap())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:w,error:C}=await this._enroll({friendlyName:i});if(!w)return await this.client.mfa.listFactors().then(R=>{var N;return(N=R.data)===null||N===void 0?void 0:N.all.find(P=>P.factor_type==="webauthn"&&P.friendly_name===i&&P.status!=="unverified")}).then(R=>R?this.client.mfa.unenroll({factorId:R?.id}):void 0),{data:null,error:C};const{data:T,error:E}=await this._challenge({factorId:w.id,friendlyName:w.friendly_name,webauthn:{rpId:a,rpOrigins:c},signal:v},{create:m});return T?this._verify({factorId:w.id,challengeId:T.challengeId,webauthn:{rpId:a,rpOrigins:c,type:T.webauthn.type,credential_response:T.webauthn.credential_response}}):{data:null,error:E}}catch(w){return rt(w)?{data:null,error:w}:{data:null,error:new go("Unexpected error in register",w)}}}}Nb();const Kb={url:qw,storageKey:Gw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Sp(u,i,a){return await a()}const Wo={};class eu{get jwks(){var i,a;return(a=(i=Wo[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(i){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,a;return(a=(i=Wo[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{cachedAt:i})}constructor(i){var a,c,v;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},Kb),i);if(this.storageKey=m.storageKey,this.instanceID=(a=eu.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&Ir()){const w=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(w),this.logDebugMessages&&console.trace(w)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new Cb({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=gy(m.fetch),this.lock=m.lock||Sp,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,m.lock?this.lock=m.lock:Ir()&&(!((c=globalThis?.navigator)===null||c===void 0)&&c.locks)?this.lock=Ob:this.lock=Sp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:dy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_p(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=_p(this.memoryStorage)),Ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(w){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",w)}(v=this.broadcastChannel)===null||v===void 0||v.addEventListener("message",async w=>{this._debug("received broadcast notification from other tab or client",w),await this._notifyAllSubscribers(w.data.event,w.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cy}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let a={},c="none";if(Ir()&&(a=sb(window.location.href),this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce")),Ir()&&this.detectSessionInUrl&&c!=="none"){const{data:v,error:m}=await this._getSessionFromURL(a,c);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),Jw(m)){const T=(i=m.details)===null||i===void 0?void 0:i.code;if(T==="identity_already_exists"||T==="identity_not_found"||T==="single_identity_not_deletable")return{error:m}}return await this._removeSession(),{error:m}}const{session:w,redirectType:C}=v;return this._debug("#_initialize()","detected session in URL",w,"redirect type",C),await this._saveSession(w),setTimeout(async()=>{C==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",w):await this._notifyAllSubscribers("SIGNED_IN",w)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return rt(a)?this._returnResult({error:a}):this._returnResult({error:new go("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var a,c,v;try{const m=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=i?.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(v=i?.options)===null||v===void 0?void 0:v.captchaToken}},xform:ra}),{data:w,error:C}=m;if(C||!w)return this._returnResult({data:{user:null,session:null},error:C});const T=w.session,E=w.user;return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",T)),this._returnResult({data:{user:E,session:T},error:null})}catch(m){if(rt(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(i){var a,c,v;try{let m;if("email"in i){const{email:R,password:N,options:P}=i;let F=null,q=null;this.flowType==="pkce"&&([F,q]=await Yo(this.storage,this.storageKey)),m=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:P?.emailRedirectTo,body:{email:R,password:N,data:(a=P?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:P?.captchaToken},code_challenge:F,code_challenge_method:q},xform:ra})}else if("phone"in i){const{phone:R,password:N,options:P}=i;m=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:R,password:N,data:(c=P?.data)!==null&&c!==void 0?c:{},channel:(v=P?.channel)!==null&&v!==void 0?v:"sms",gotrue_meta_security:{captcha_token:P?.captchaToken}},xform:ra})}else throw new dc("You must provide either an email or phone number and a password");const{data:w,error:C}=m;if(C||!w)return this._returnResult({data:{user:null,session:null},error:C});const T=w.session,E=w.user;return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",T)),this._returnResult({data:{user:E,session:T},error:null})}catch(m){if(rt(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(i){try{let a;if("email"in i){const{email:m,password:w,options:C}=i;a=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:w,gotrue_meta_security:{captcha_token:C?.captchaToken}},xform:bp})}else if("phone"in i){const{phone:m,password:w,options:C}=i;a=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:w,gotrue_meta_security:{captcha_token:C?.captchaToken}},xform:bp})}else throw new dc("You must provide either an email or phone number and a password");const{data:c,error:v}=a;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!c||!c.session||!c.user){const m=new Go;return this._returnResult({data:{user:null,session:null},error:m})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:v})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(i){var a,c,v,m;return await this._handleProviderSignIn(i.provider,{redirectTo:(a=i.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=i.options)===null||c===void 0?void 0:c.scopes,queryParams:(v=i.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:(m=i.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:a}=i;switch(a){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(i){var a,c,v,m,w,C,T,E,R,N,P;let F,q;if("message"in i)F=i.message,q=i.signature;else{const{chain:Y,wallet:J,statement:ne,options:se}=i;let re;if(Ir())if(typeof J=="object")re=J;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")re=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!se?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");re=J}const Ce=new URL((a=se?.url)!==null&&a!==void 0?a:window.location.href),Ke=await re.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ke||Ke.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Be=my(Ke[0]);let te=(c=se?.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!te){const we=await re.request({method:"eth_chainId"});te=Rb(we)}const Ge={domain:Ce.host,address:Be,statement:ne,uri:Ce.href,version:"1",chainId:te,nonce:(v=se?.signInWithEthereum)===null||v===void 0?void 0:v.nonce,issuedAt:(w=(m=se?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&w!==void 0?w:new Date,expirationTime:(C=se?.signInWithEthereum)===null||C===void 0?void 0:C.expirationTime,notBefore:(T=se?.signInWithEthereum)===null||T===void 0?void 0:T.notBefore,requestId:(E=se?.signInWithEthereum)===null||E===void 0?void 0:E.requestId,resources:(R=se?.signInWithEthereum)===null||R===void 0?void 0:R.resources};F=Db(Ge),q=await re.request({method:"personal_sign",params:[Ib(F),Be]})}try{const{data:Y,error:J}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:F,signature:q},!((N=i.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(P=i.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:ra});if(J)throw J;if(!Y||!Y.session||!Y.user){const ne=new Go;return this._returnResult({data:{user:null,session:null},error:ne})}return Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),this._returnResult({data:Object.assign({},Y),error:J})}catch(Y){if(rt(Y))return this._returnResult({data:{user:null,session:null},error:Y});throw Y}}async signInWithSolana(i){var a,c,v,m,w,C,T,E,R,N,P,F;let q,Y;if("message"in i)q=i.message,Y=i.signature;else{const{chain:J,wallet:ne,statement:se,options:re}=i;let Ce;if(Ir())if(typeof ne=="object")Ce=ne;else{const Be=window;if("solana"in Be&&typeof Be.solana=="object"&&("signIn"in Be.solana&&typeof Be.solana.signIn=="function"||"signMessage"in Be.solana&&typeof Be.solana.signMessage=="function"))Ce=Be.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ne!="object"||!re?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Ce=ne}const Ke=new URL((a=re?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in Ce&&Ce.signIn){const Be=await Ce.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},re?.signInWithSolana),{version:"1",domain:Ke.host,uri:Ke.href}),se?{statement:se}:null));let te;if(Array.isArray(Be)&&Be[0]&&typeof Be[0]=="object")te=Be[0];else if(Be&&typeof Be=="object"&&"signedMessage"in Be&&"signature"in Be)te=Be;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)q=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),Y=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Ce)||typeof Ce.signMessage!="function"||!("publicKey"in Ce)||typeof Ce!="object"||!Ce.publicKey||!("toBase58"in Ce.publicKey)||typeof Ce.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");q=[`${Ke.host} wants you to sign in with your Solana account:`,Ce.publicKey.toBase58(),...se?["",se,""]:[""],"Version: 1",`URI: ${Ke.href}`,`Issued At: ${(v=(c=re?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&v!==void 0?v:new Date().toISOString()}`,...!((m=re?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${re.signInWithSolana.notBefore}`]:[],...!((w=re?.signInWithSolana)===null||w===void 0)&&w.expirationTime?[`Expiration Time: ${re.signInWithSolana.expirationTime}`]:[],...!((C=re?.signInWithSolana)===null||C===void 0)&&C.chainId?[`Chain ID: ${re.signInWithSolana.chainId}`]:[],...!((T=re?.signInWithSolana)===null||T===void 0)&&T.nonce?[`Nonce: ${re.signInWithSolana.nonce}`]:[],...!((E=re?.signInWithSolana)===null||E===void 0)&&E.requestId?[`Request ID: ${re.signInWithSolana.requestId}`]:[],...!((N=(R=re?.signInWithSolana)===null||R===void 0?void 0:R.resources)===null||N===void 0)&&N.length?["Resources",...re.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const Be=await Ce.signMessage(new TextEncoder().encode(q),"utf8");if(!Be||!(Be instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");Y=Be}}try{const{data:J,error:ne}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:q,signature:po(Y)},!((P=i.options)===null||P===void 0)&&P.captchaToken?{gotrue_meta_security:{captcha_token:(F=i.options)===null||F===void 0?void 0:F.captchaToken}}:null),xform:ra});if(ne)throw ne;if(!J||!J.session||!J.user){const se=new Go;return this._returnResult({data:{user:null,session:null},error:se})}return J.session&&(await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",J.session)),this._returnResult({data:Object.assign({},J),error:ne})}catch(J){if(rt(J))return this._returnResult({data:{user:null,session:null},error:J});throw J}}async _exchangeCodeForSession(i){const a=await lo(this.storage,`${this.storageKey}-code-verifier`),[c,v]=(a??"").split("/");try{const{data:m,error:w}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:c},xform:ra});if(await Ds(this.storage,`${this.storageKey}-code-verifier`),w)throw w;if(!m||!m.session||!m.user){const C=new Go;return this._returnResult({data:{user:null,session:null,redirectType:null},error:C})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:v??null}),error:w})}catch(m){if(rt(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(i){try{const{options:a,provider:c,token:v,access_token:m,nonce:w}=i,C=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:v,access_token:m,nonce:w,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ra}),{data:T,error:E}=C;if(E)return this._returnResult({data:{user:null,session:null},error:E});if(!T||!T.session||!T.user){const R=new Go;return this._returnResult({data:{user:null,session:null},error:R})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:T,error:E})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(i){var a,c,v,m,w;try{if("email"in i){const{email:C,options:T}=i;let E=null,R=null;this.flowType==="pkce"&&([E,R]=await Yo(this.storage,this.storageKey));const{error:N}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:C,data:(a=T?.data)!==null&&a!==void 0?a:{},create_user:(c=T?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:E,code_challenge_method:R},redirectTo:T?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in i){const{phone:C,options:T}=i,{data:E,error:R}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:C,data:(v=T?.data)!==null&&v!==void 0?v:{},create_user:(m=T?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:T?.captchaToken},channel:(w=T?.channel)!==null&&w!==void 0?w:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:R})}throw new dc("You must provide either an email or phone number.")}catch(C){if(rt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async verifyOtp(i){var a,c;try{let v,m;"options"in i&&(v=(a=i.options)===null||a===void 0?void 0:a.redirectTo,m=(c=i.options)===null||c===void 0?void 0:c.captchaToken);const{data:w,error:C}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:m}}),redirectTo:v,xform:ra});if(C)throw C;if(!w)throw new Error("An error occurred on token verification.");const T=w.session,E=w.user;return T?.access_token&&(await this._saveSession(T),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",T)),this._returnResult({data:{user:E,session:T},error:null})}catch(v){if(rt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSSO(i){var a,c,v,m,w;try{let C=null,T=null;this.flowType==="pkce"&&([C,T]=await Yo(this.storage,this.storageKey));const E=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(c=(a=i.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((v=i?.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:C,code_challenge_method:T}),headers:this.headers,xform:_b});return!((m=E.data)===null||m===void 0)&&m.url&&Ir()&&!(!((w=i.options)===null||w===void 0)&&w.skipBrowserRedirect)&&window.location.assign(E.data.url),this._returnResult(E)}catch(C){if(rt(C))return this._returnResult({data:null,error:C});throw C}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:a},error:c}=i;if(c)throw c;if(!a)throw new Ti;const{error:v}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:v})})}catch(i){if(rt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const a=`${this.url}/resend`;if("email"in i){const{email:c,type:v,options:m}=i,{error:w}=await ct(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:v,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}else if("phone"in i){const{phone:c,type:v,options:m}=i,{data:w,error:C}=await ct(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:v,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:w?.message_id},error:C})}throw new dc("You must provide either an email or phone number and a type")}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(i,a){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),v=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await v}catch{}})()),v}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const v=[...this.pendingInLock];await Promise.all(v),this.pendingInLock.splice(0,v.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await i(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const a=await lo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?i=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const c=i.expires_at?i.expires_at*1e3-Date.now()<Lh:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",i.expires_at),!c){if(this.userStorage){const w=await lo(this.userStorage,this.storageKey+"-user");w?.user?i.user=w.user:i.user=Ph()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const w={value:this.suppressGetSessionWarning};i.user=xb(i.user,w),w.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:v,error:m}=await this._callRefreshToken(i.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:v},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:Bs}):await this._useSession(async a=>{var c,v,m;const{data:w,error:C}=a;if(C)throw C;return!(!((c=w.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ti}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&m!==void 0?m:void 0,xform:Bs})})}catch(a){if(rt(a))return Zw(a)&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(i,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,a))}async _updateUser(i,a={}){try{return await this._useSession(async c=>{const{data:v,error:m}=c;if(m)throw m;if(!v.session)throw new Ti;const w=v.session;let C=null,T=null;this.flowType==="pkce"&&i.email!=null&&([C,T]=await Yo(this.storage,this.storageKey));const{data:E,error:R}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:C,code_challenge_method:T}),jwt:w.access_token,xform:Bs});if(R)throw R;return w.user=E.user,await this._saveSession(w),await this._notifyAllSubscribers("USER_UPDATED",w),this._returnResult({data:{user:w.user},error:null})})}catch(c){if(rt(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new Ti;const a=Date.now()/1e3;let c=a,v=!0,m=null;const{payload:w}=jh(i.access_token);if(w.exp&&(c=w.exp,v=c<=a),v){const{data:C,error:T}=await this._callRefreshToken(i.refresh_token);if(T)return this._returnResult({data:{user:null,session:null},error:T});if(!C)return{data:{user:null,session:null},error:null};m=C}else{const{data:C,error:T}=await this._getUser(i.access_token);if(T)throw T;m={access_token:i.access_token,refresh_token:i.refresh_token,user:C.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(a){if(rt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async a=>{var c;if(!i){const{data:w,error:C}=a;if(C)throw C;i=(c=w.session)!==null&&c!==void 0?c:void 0}if(!i?.refresh_token)throw new Ti;const{data:v,error:m}=await this._callRefreshToken(i.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):v?this._returnResult({data:{user:v.user,session:v},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(rt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(i,a){try{if(!Ir())throw new gc("No browser detected.");if(i.error||i.error_description||i.error_code)throw new gc(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new gp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new gp("No code detected.");const{data:se,error:re}=await this._exchangeCodeForSession(i.code);if(re)throw re;const Ce=new URL(window.location.href);return Ce.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Ce.toString()),{data:{session:se.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:v,access_token:m,refresh_token:w,expires_in:C,expires_at:T,token_type:E}=i;if(!m||!C||!w||!E)throw new gc("No session defined in URL");const R=Math.round(Date.now()/1e3),N=parseInt(C);let P=R+N;T&&(P=parseInt(T));const F=P-R;F*1e3<=Zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${F}s, should have been closer to ${N}s`);const q=P-N;R-q>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",q,P,R):R-q<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",q,P,R);const{data:Y,error:J}=await this._getUser(m);if(J)throw J;const ne={provider_token:c,provider_refresh_token:v,access_token:m,expires_in:N,expires_at:P,refresh_token:w,token_type:E,user:Y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ne,redirectType:i.type},error:null})}catch(c){if(rt(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const a=await lo(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&a)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:v,error:m}=a;if(m)return this._returnResult({error:m});const w=(c=v.session)===null||c===void 0?void 0:c.access_token;if(w){const{error:C}=await this.admin.signOut(w,i);if(C&&!(Qw(C)&&(C.status===404||C.status===401||C.status===403)))return this._returnResult({error:C})}return i!=="others"&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const a=ab(),c={id:a,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(i){return await this._useSession(async a=>{var c,v;try{const{data:{session:m},error:w}=a;if(w)throw w;await((c=this.stateChangeEmitters.get(i))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",i,"session",m)}catch(m){await((v=this.stateChangeEmitters.get(i))===null||v===void 0?void 0:v.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",m),console.error(m)}})}async resetPasswordForEmail(i,a={}){let c=null,v=null;this.flowType==="pkce"&&([c,v]=await Yo(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:c,code_challenge_method:v,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(m){if(rt(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var i;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(i=a.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var a;try{const{data:c,error:v}=await this._useSession(async m=>{var w,C,T,E,R;const{data:N,error:P}=m;if(P)throw P;const F=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(w=i.options)===null||w===void 0?void 0:w.redirectTo,scopes:(C=i.options)===null||C===void 0?void 0:C.scopes,queryParams:(T=i.options)===null||T===void 0?void 0:T.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",F,{headers:this.headers,jwt:(R=(E=N.session)===null||E===void 0?void 0:E.access_token)!==null&&R!==void 0?R:void 0})});if(v)throw v;return Ir()&&!(!((a=i.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c?.url),this._returnResult({data:{provider:i.provider,url:c?.url},error:null})}catch(c){if(rt(c))return this._returnResult({data:{provider:i.provider,url:null},error:c});throw c}}async linkIdentityIdToken(i){return await this._useSession(async a=>{var c;try{const{error:v,data:{session:m}}=a;if(v)throw v;const{options:w,provider:C,token:T,access_token:E,nonce:R}=i,N=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=m?.access_token)!==null&&c!==void 0?c:void 0,body:{provider:C,id_token:T,access_token:E,nonce:R,link_identity:!0,gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:ra}),{data:P,error:F}=N;return F?this._returnResult({data:{user:null,session:null},error:F}):!P||!P.session||!P.user?this._returnResult({data:{user:null,session:null},error:new Go}):(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("USER_UPDATED",P.session)),this._returnResult({data:P,error:F}))}catch(v){if(rt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}})}async unlinkIdentity(i){try{return await this._useSession(async a=>{var c,v;const{data:m,error:w}=a;if(w)throw w;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(v=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&v!==void 0?v:void 0})})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(i){const a=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await ub(async v=>(v>0&&await lb(200*Math.pow(2,v-1)),this._debug(a,"refreshing attempt",v),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:ra})),(v,m)=>{const w=200*Math.pow(2,v);return m&&kh(m)&&Date.now()+w-c<Zo})}catch(c){if(this._debug(a,"error",c),rt(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(a,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",a,"url",c),Ir()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:i,url:c},error:null}}async _recoverAndRefresh(){var i,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const v=await lo(this.storage,this.storageKey);if(v&&this.userStorage){let w=await lo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!w&&(w={user:v.user},await Jo(this.userStorage,this.storageKey+"-user",w)),v.user=(i=w?.user)!==null&&i!==void 0?i:Ph()}else if(v&&!v.user&&!v.user){const w=await lo(this.storage,this.storageKey+"-user");w&&w?.user?(v.user=w.user,await Ds(this.storage,this.storageKey+"-user"),await Jo(this.storage,this.storageKey,v)):v.user=Ph()}if(this._debug(c,"session from storage",v),!this._isValidSession(v)){this._debug(c,"session is not valid"),v!==null&&await this._removeSession();return}const m=((a=v.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Lh;if(this._debug(c,`session has${m?"":" not"} expired with margin of ${Lh}s`),m){if(this.autoRefreshToken&&v.refresh_token){const{error:w}=await this._callRefreshToken(v.refresh_token);w&&(console.error(w),kh(w)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",w),await this._removeSession()))}}else if(v.user&&v.user.__isUserNotAvailableProxy===!0)try{const{data:w,error:C}=await this._getUser(v.access_token);!C&&w?.user?(v.user=w.user,await this._saveSession(v),await this._notifyAllSubscribers("SIGNED_IN",v)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(w){console.error("Error getting user data:",w),this._debug(c,"error getting user data, skipping SIGNED_IN notification",w)}else await this._notifyAllSubscribers("SIGNED_IN",v)}catch(v){this._debug(c,"error",v),console.error(v);return}finally{this._debug(c,"end")}}async _callRefreshToken(i){var a,c;if(!i)throw new Ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const v=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(v,"begin");try{this.refreshingDeferred=new Lc;const{data:m,error:w}=await this._refreshAccessToken(i);if(w)throw w;if(!m.session)throw new Ti;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const C={data:m.session,error:null};return this.refreshingDeferred.resolve(C),C}catch(m){if(this._debug(v,"error",m),rt(m)){const w={data:null,error:m};return kh(m)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(w),w}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(m),m}finally{this.refreshingDeferred=null,this._debug(v,"end")}}async _notifyAllSubscribers(i,a,c=!0){const v=`#_notifyAllSubscribers(${i})`;this._debug(v,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:i,session:a});const m=[],w=Array.from(this.stateChangeEmitters.values()).map(async C=>{try{await C.callback(i,a)}catch(T){m.push(T)}});if(await Promise.all(w),m.length>0){for(let C=0;C<m.length;C+=1)console.error(m[C]);throw m[0]}}finally{this._debug(v,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0;const a=Object.assign({},i),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await Jo(this.userStorage,this.storageKey+"-user",{user:a.user});const v=Object.assign({},a);delete v.user;const m=xp(v);await Jo(this.storage,this.storageKey,m)}else{const v=xp(a);await Jo(this.storage,this.storageKey,v)}}async _removeSession(){this._debug("#_removeSession()"),await Ds(this.storage,this.storageKey),await Ds(this.storage,this.storageKey+"-code-verifier"),await Ds(this.storage,this.storageKey+"-user"),this.userStorage&&await Ds(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&Ir()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),Zo);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const v=Math.floor((c.expires_at*1e3-i)/Zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${v} ticks, a tick lasts ${Zo}ms, refresh threshold is ${fd} ticks`),v<=fd&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof py)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ir()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const a=`#_onVisibilityChanged(${i})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,a,c){const v=[`provider=${encodeURIComponent(a)}`];if(c?.redirectTo&&v.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&v.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[m,w]=await Yo(this.storage,this.storageKey),C=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(w)}`});v.push(C.toString())}if(c?.queryParams){const m=new URLSearchParams(c.queryParams);v.push(m.toString())}return c?.skipBrowserRedirect&&v.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${i}?${v.join("&")}`}async _unenroll(i){try{return await this._useSession(async a=>{var c;const{data:v,error:m}=a;return m?this._returnResult({data:null,error:m}):await ct(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(c=v?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(i){try{return await this._useSession(async a=>{var c,v;const{data:m,error:w}=a;if(w)return this._returnResult({data:null,error:w});const C=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:T,error:E}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:C,headers:this.headers,jwt:(c=m?.session)===null||c===void 0?void 0:c.access_token});return E?this._returnResult({data:null,error:E}):(i.factorType==="totp"&&T.type==="totp"&&(!((v=T?.totp)===null||v===void 0)&&v.qr_code)&&(T.totp.qr_code=`data:image/svg+xml;utf-8,${T.totp.qr_code}`),this._returnResult({data:T,error:null}))})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:v,error:m}=a;if(m)return this._returnResult({data:null,error:m});const w=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?Ub(i.webauthn.credential_response):zb(i.webauthn.credential_response)})}:{code:i.code}),{data:C,error:T}=await ct(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:w,headers:this.headers,jwt:(c=v?.session)===null||c===void 0?void 0:c.access_token});return T?this._returnResult({data:null,error:T}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+C.expires_in},C)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",C),this._returnResult({data:C,error:T}))})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:v,error:m}=a;if(m)return this._returnResult({data:null,error:m});const w=await ct(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(c=v?.session)===null||c===void 0?void 0:c.access_token});if(w.error)return w;const{data:C}=w;if(C.type!=="webauthn")return{data:C,error:null};switch(C.webauthn.type){case"create":return{data:Object.assign(Object.assign({},C),{webauthn:Object.assign(Object.assign({},C.webauthn),{credential_options:Object.assign(Object.assign({},C.webauthn.credential_options),{publicKey:jb(C.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},C),{webauthn:Object.assign(Object.assign({},C.webauthn),{credential_options:Object.assign(Object.assign({},C.webauthn.credential_options),{publicKey:Pb(C.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(i){const{data:a,error:c}=await this._challenge({factorId:i.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:i.factorId,challengeId:a.id,code:i.code})}async _listFactors(){var i;const{data:{user:a},error:c}=await this.getUser();if(c)return{data:null,error:c};const v={all:[],phone:[],totp:[],webauthn:[]};for(const m of(i=a?.factors)!==null&&i!==void 0?i:[])v.all.push(m),m.status==="verified"&&v[m.factor_type].push(m);return{data:v,error:null}}async _getAuthenticatorAssuranceLevel(){var i,a;const{data:{session:c},error:v}=await this.getSession();if(v)return this._returnResult({data:null,error:v});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=jh(c.access_token);let w=null;m.aal&&(w=m.aal);let C=w;((a=(i=c.user.factors)===null||i===void 0?void 0:i.filter(R=>R.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(C="aal2");const E=m.amr||[];return{data:{currentLevel:w,nextLevel:C,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async a=>{const{data:{session:c},error:v}=a;return v?this._returnResult({data:null,error:v}):c?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:c.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new Ti})})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(i,a){try{return await this._useSession(async c=>{const{data:{session:v},error:m}=c;if(m)return this._returnResult({data:null,error:m});if(!v)return this._returnResult({data:null,error:new Ti});const w=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:v.access_token,body:{action:"approve"},xform:C=>({data:C,error:null})});return w.data&&w.data.redirect_url&&Ir()&&!a?.skipBrowserRedirect&&window.location.assign(w.data.redirect_url),w})}catch(c){if(rt(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(i,a){try{return await this._useSession(async c=>{const{data:{session:v},error:m}=c;if(m)return this._returnResult({data:null,error:m});if(!v)return this._returnResult({data:null,error:new Ti});const w=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:v.access_token,body:{action:"deny"},xform:C=>({data:C,error:null})});return w.data&&w.data.redirect_url&&Ir()&&!a?.skipBrowserRedirect&&window.location.assign(w.data.redirect_url),w})}catch(c){if(rt(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:a},error:c}=i;return c?this._returnResult({data:null,error:c}):a?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:v=>({data:v,error:null})}):this._returnResult({data:null,error:new Ti})})}catch(i){if(rt(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async a=>{const{data:{session:c},error:v}=a;return v?this._returnResult({data:null,error:v}):c?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ti})})}catch(a){if(rt(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(i,a={keys:[]}){let c=a.keys.find(C=>C.kid===i);if(c)return c;const v=Date.now();if(c=this.jwks.keys.find(C=>C.kid===i),c&&this.jwks_cached_at+Kw>v)return c;const{data:m,error:w}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(w)throw w;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=v,c=m.keys.find(C=>C.kid===i),!c)?null:c}async getClaims(i,a={}){try{let c=i;if(!c){const{data:F,error:q}=await this.getSession();if(q||!F.session)return this._returnResult({data:null,error:q});c=F.session.access_token}const{header:v,payload:m,signature:w,raw:{header:C,payload:T}}=jh(c);a?.allowExpired||mb(m.exp);const E=!v.alg||v.alg.startsWith("HS")||!v.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(v.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!E){const{error:F}=await this.getUser(c);if(F)throw F;return{data:{claims:m,header:v,signature:w},error:null}}const R=yb(v.alg),N=await crypto.subtle.importKey("jwk",E,R,!0,["verify"]);if(!await crypto.subtle.verify(R,N,w,rb(`${C}.${T}`)))throw new gd("Invalid JWT signature");return{data:{claims:m,header:v,signature:w},error:null}}catch(c){if(rt(c))return this._returnResult({data:null,error:c});throw c}}}eu.nextInstanceID={};const Wb=eu;class Qb extends Wb{constructor(i){super(i)}}class Zb{constructor(i,a,c){var v,m,w;this.supabaseUrl=i,this.supabaseKey=a;const C=Vw(i);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",C),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",C),this.storageUrl=new URL("storage/v1",C),this.functionsUrl=new URL("functions/v1",C);const T=`sb-${C.hostname.split(".")[0]}-auth-token`,E={db:Lw,realtime:jw,auth:Object.assign(Object.assign({},kw),{storageKey:T}),global:Bw},R=Hw(c??{},E);this.storageKey=(v=R.auth.storageKey)!==null&&v!==void 0?v:"",this.headers=(m=R.global.headers)!==null&&m!==void 0?m:{},R.accessToken?(this.accessToken=R.accessToken,this.auth=new Proxy({},{get:(N,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((w=R.auth)!==null&&w!==void 0?w:{},this.headers,R.global.fetch),this.fetch=zw(a,this._getAccessToken.bind(this),R.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},R.realtime)),this.accessToken&&this.accessToken().then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new jx(new URL("rest/v1",C).href,{headers:this.headers,schema:R.db.schema,fetch:this.fetch}),this.storage=new Iw(this.storageUrl.href,this.headers,this.fetch,c?.storage),R.accessToken||this._listenForAuthEvents()}get functions(){return new Mx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,a={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,a,c)}channel(i,a={config:{}}){return this.realtime.channel(i,a)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i,a;if(this.accessToken)return await this.accessToken();const{data:c}=await this.auth.getSession();return(a=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:a,detectSessionInUrl:c,storage:v,userStorage:m,storageKey:w,flowType:C,lock:T,debug:E,throwOnError:R},N,P){const F={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qb({url:this.authUrl.href,headers:Object.assign(Object.assign({},F),N),storageKey:w,autoRefreshToken:i,persistSession:a,detectSessionInUrl:c,storage:v,userStorage:m,flowType:C,lock:T,debug:E,throwOnError:R,fetch:P,hasCustomAuthorizationHeader:Object.keys(this.headers).some(q=>q.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new ew(this.realtimeUrl.href,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c?.access_token)})}_handleTokenChanged(i,a,c){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jb=(u,i,a)=>new Zb(u,i,a);function $b(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const i=u.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}$b()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eE="https://hvbgvqsuilpkehyhbjsc.supabase.co",tE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2Ymd2cXN1aWxwa2VoeWhianNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1ODUzNjksImV4cCI6MjA4MDE2MTM2OX0.TBvoHS52-baNKt5iWfEtvZnJPxj1j3cZsoSv6PZhnss",mr=Jb(eE,tE);var zh={exports:{}},Et={};var Cp;function nE(){if(Cp)return Et;Cp=1;var u=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.iterator;function F(L){return L===null||typeof L!="object"?null:(L=P&&L[P]||L["@@iterator"],typeof L=="function"?L:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,J={};function ne(L,Q,xe){this.props=L,this.context=Q,this.refs=J,this.updater=xe||q}ne.prototype.isReactComponent={},ne.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},ne.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function se(){}se.prototype=ne.prototype;function re(L,Q,xe){this.props=L,this.context=Q,this.refs=J,this.updater=xe||q}var Ce=re.prototype=new se;Ce.constructor=re,Y(Ce,ne.prototype),Ce.isPureReactComponent=!0;var Ke=Array.isArray;function Be(){}var te={H:null,A:null,T:null,S:null},Ge=Object.prototype.hasOwnProperty;function we(L,Q,xe){var Ee=xe.ref;return{$$typeof:u,type:L,key:Q,ref:Ee!==void 0?Ee:null,props:xe}}function pn(L,Q){return we(L.type,Q,L.props)}function Nt(L){return typeof L=="object"&&L!==null&&L.$$typeof===u}function Ve(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(xe){return Q[xe]})}var ot=/\/+/g;function Dt(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?Ve(""+L.key):Q.toString(36)}function pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Be,Be):(L.status="pending",L.then(function(Q){L.status==="pending"&&(L.status="fulfilled",L.value=Q)},function(Q){L.status==="pending"&&(L.status="rejected",L.reason=Q)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function he(L,Q,xe,Ee,Ue){var _e=typeof L;(_e==="undefined"||_e==="boolean")&&(L=null);var Je=!1;if(L===null)Je=!0;else switch(_e){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(L.$$typeof){case u:case i:Je=!0;break;case R:return Je=L._init,he(Je(L._payload),Q,xe,Ee,Ue)}}if(Je)return Ue=Ue(L),Je=Ee===""?"."+Dt(L,0):Ee,Ke(Ue)?(xe="",Je!=null&&(xe=Je.replace(ot,"$&/")+"/"),he(Ue,Q,xe,"",function(Dr){return Dr})):Ue!=null&&(Nt(Ue)&&(Ue=pn(Ue,xe+(Ue.key==null||L&&L.key===Ue.key?"":(""+Ue.key).replace(ot,"$&/")+"/")+Je)),Q.push(Ue)),1;Je=0;var mt=Ee===""?".":Ee+":";if(Ke(L))for(var Me=0;Me<L.length;Me++)Ee=L[Me],_e=mt+Dt(Ee,Me),Je+=he(Ee,Q,xe,_e,Ue);else if(Me=F(L),typeof Me=="function")for(L=Me.call(L),Me=0;!(Ee=L.next()).done;)Ee=Ee.value,_e=mt+Dt(Ee,Me++),Je+=he(Ee,Q,xe,_e,Ue);else if(_e==="object"){if(typeof L.then=="function")return he(pe(L),Q,xe,Ee,Ue);throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Je}function Ae(L,Q,xe){if(L==null)return L;var Ee=[],Ue=0;return he(L,Ee,"","",function(_e){return Q.call(xe,_e,Ue++)}),Ee}function Ze(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(xe){(L._status===0||L._status===-1)&&(L._status=1,L._result=xe)},function(xe){(L._status===0||L._status===-1)&&(L._status=2,L._result=xe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var pt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ht={map:Ae,forEach:function(L,Q,xe){Ae(L,function(){Q.apply(this,arguments)},xe)},count:function(L){var Q=0;return Ae(L,function(){Q++}),Q},toArray:function(L){return Ae(L,function(Q){return Q})||[]},only:function(L){if(!Nt(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Et.Activity=N,Et.Children=ht,Et.Component=ne,Et.Fragment=a,Et.Profiler=v,Et.PureComponent=re,Et.StrictMode=c,Et.Suspense=T,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return te.H.useMemoCache(L)}},Et.cache=function(L){return function(){return L.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(L,Q,xe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Ee=Y({},L.props),Ue=L.key;if(Q!=null)for(_e in Q.key!==void 0&&(Ue=""+Q.key),Q)!Ge.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(Ee[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)Ee.children=xe;else if(1<_e){for(var Je=Array(_e),mt=0;mt<_e;mt++)Je[mt]=arguments[mt+2];Ee.children=Je}return we(L.type,Ue,Ee)},Et.createContext=function(L){return L={$$typeof:w,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:m,_context:L},L},Et.createElement=function(L,Q,xe){var Ee,Ue={},_e=null;if(Q!=null)for(Ee in Q.key!==void 0&&(_e=""+Q.key),Q)Ge.call(Q,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ue[Ee]=Q[Ee]);var Je=arguments.length-2;if(Je===1)Ue.children=xe;else if(1<Je){for(var mt=Array(Je),Me=0;Me<Je;Me++)mt[Me]=arguments[Me+2];Ue.children=mt}if(L&&L.defaultProps)for(Ee in Je=L.defaultProps,Je)Ue[Ee]===void 0&&(Ue[Ee]=Je[Ee]);return we(L,_e,Ue)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(L){return{$$typeof:C,render:L}},Et.isValidElement=Nt,Et.lazy=function(L){return{$$typeof:R,_payload:{_status:-1,_result:L},_init:Ze}},Et.memo=function(L,Q){return{$$typeof:E,type:L,compare:Q===void 0?null:Q}},Et.startTransition=function(L){var Q=te.T,xe={};te.T=xe;try{var Ee=L(),Ue=te.S;Ue!==null&&Ue(xe,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Be,pt)}catch(_e){pt(_e)}finally{Q!==null&&xe.types!==null&&(Q.types=xe.types),te.T=Q}},Et.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Et.use=function(L){return te.H.use(L)},Et.useActionState=function(L,Q,xe){return te.H.useActionState(L,Q,xe)},Et.useCallback=function(L,Q){return te.H.useCallback(L,Q)},Et.useContext=function(L){return te.H.useContext(L)},Et.useDebugValue=function(){},Et.useDeferredValue=function(L,Q){return te.H.useDeferredValue(L,Q)},Et.useEffect=function(L,Q){return te.H.useEffect(L,Q)},Et.useEffectEvent=function(L){return te.H.useEffectEvent(L)},Et.useId=function(){return te.H.useId()},Et.useImperativeHandle=function(L,Q,xe){return te.H.useImperativeHandle(L,Q,xe)},Et.useInsertionEffect=function(L,Q){return te.H.useInsertionEffect(L,Q)},Et.useLayoutEffect=function(L,Q){return te.H.useLayoutEffect(L,Q)},Et.useMemo=function(L,Q){return te.H.useMemo(L,Q)},Et.useOptimistic=function(L,Q){return te.H.useOptimistic(L,Q)},Et.useReducer=function(L,Q,xe){return te.H.useReducer(L,Q,xe)},Et.useRef=function(L){return te.H.useRef(L)},Et.useState=function(L){return te.H.useState(L)},Et.useSyncExternalStore=function(L,Q,xe){return te.H.useSyncExternalStore(L,Q,xe)},Et.useTransition=function(){return te.H.useTransition()},Et.version="19.2.0",Et}var Tp;function rE(){return Tp||(Tp=1,zh.exports=nE()),zh.exports}var Wl=rE();const iE=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aE=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,a,c)=>c?c.toUpperCase():a.toLowerCase()),Op=u=>{const i=aE(u);return i.charAt(0).toUpperCase()+i.slice(1)},vy=(...u)=>u.filter((i,a,c)=>!!i&&i.trim()!==""&&c.indexOf(i)===a).join(" ").trim(),sE=u=>{for(const i in u)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var oE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lE=Wl.forwardRef(({color:u="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:v="",children:m,iconNode:w,...C},T)=>Wl.createElement("svg",{ref:T,...oE,width:i,height:i,stroke:u,strokeWidth:c?Number(a)*24/Number(i):a,className:vy("lucide",v),...!m&&!sE(C)&&{"aria-hidden":"true"},...C},[...w.map(([E,R])=>Wl.createElement(E,R)),...Array.isArray(m)?m:[m]]));const yr=(u,i)=>{const a=Wl.forwardRef(({className:c,...v},m)=>Wl.createElement(lE,{ref:m,iconNode:i,className:vy(`lucide-${iE(Op(u))}`,`lucide-${u}`,c),...v}));return a.displayName=Op(u),a};const uE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cE=yr("arrow-right",uE);const fE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hE=yr("circle-alert",fE);const dE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gE=yr("circle-check",dE);const pE=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],mE=yr("gift",pE);const yE=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],vE=yr("layout-dashboard",yE);const xE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wE=yr("lock",xE);const bE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],EE=yr("log-out",bE);const _E=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],AE=yr("mail",_E);const SE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],CE=yr("plus",SE);const TE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],tu=yr("qr-code",TE);const OE=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],NE=yr("scan",OE);const RE=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],IE=yr("ticket",RE);const DE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ME=yr("trash-2",DE);const BE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dd=yr("user",BE);const LE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]],kE=yr("wallet-cards",LE);const jE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],PE=yr("wifi-off",jE);const UE=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],zE=yr("wifi",UE);const FE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HE=yr("x",FE);function Np(){const[u,i]=me.useState(""),[a,c]=me.useState(""),[v,m]=me.useState(!1),[w,C]=me.useState(!1),[T,E]=me.useState(""),R=Ic(),N=async P=>{P.preventDefault(),m(!0),E("");try{if(w){const{error:F}=await mr.auth.signUp({email:u,password:a});if(F)throw F;E("")}else{const{error:F}=await mr.auth.signInWithPassword({email:u,password:a});if(F)throw F;R("/")}}catch(F){E(F.message)}finally{m(!1)}};return Z.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center p-6",children:Z.jsxs("div",{className:"max-w-md w-full mx-auto",children:[Z.jsxs("div",{className:"text-center mb-10",children:[Z.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-500 rounded-2xl mx-auto flex items-center justify-center text-white text-2xl font-bold shadow-lg mb-4",children:"ID"}),Z.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:w?"":""}),Z.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:w?"":""})]}),Z.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-8",children:Z.jsxs("form",{onSubmit:N,className:"space-y-5",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Email Address"}),Z.jsxs("div",{className:"relative",children:[Z.jsx(AE,{className:"absolute left-3 top-3 text-gray-400",size:20}),Z.jsx("input",{type:"email",value:u,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all",placeholder:"name@example.com",required:!0})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Password"}),Z.jsxs("div",{className:"relative",children:[Z.jsx(wE,{className:"absolute left-3 top-3 text-gray-400",size:20}),Z.jsx("input",{type:"password",value:a,onChange:P=>c(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all",placeholder:"",required:!0})]})]}),T&&Z.jsx("div",{className:"p-3 bg-red-50 text-red-500 text-sm rounded-lg text-center",children:T}),Z.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg shadow-gray-900/20 hover:bg-black hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[v?"Loading...":w?"Create Account":"Sign In",!v&&Z.jsx(cE,{size:20})]})]})}),Z.jsx("div",{className:"mt-8 text-center",children:Z.jsx("button",{onClick:()=>C(!w),className:"text-gray-500 text-sm hover:text-gray-900 font-medium",children:w?"":""})}),!w&&Z.jsx("div",{className:"mt-8 text-center border-t border-gray-200 pt-8",children:Z.jsxs("a",{href:"/admin/login",className:"text-xs text-gray-400 hover:text-gray-600 flex items-center justify-center gap-1",children:[Z.jsx(Dd,{size:12}),""]})})]})})}function VE(){const[u,i]=me.useState(""),[a,c]=me.useState(""),[v,m]=me.useState(!1),[w,C]=me.useState("");Ic();const T=async E=>{E.preventDefault(),m(!0),C("");try{const{data:R,error:N}=await mr.auth.signInWithPassword({email:u,password:a});if(N)throw N;const{data:P}=await mr.from("profiles").select("role").eq("id",R.user.id).single();if(P?.role!=="admin")throw await mr.auth.signOut(),new Error("");window.location.href="/"}catch(R){C(R.message)}finally{m(!1)}};return Z.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-900 p-4",children:Z.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-xl",children:[Z.jsxs("div",{className:"text-center mb-8",children:[Z.jsx("h1",{className:"text-xl font-bold text-gray-600",children:"STAFF ONLY"}),Z.jsx("h2",{className:"text-3xl font-bold mt-2",children:""})]}),Z.jsxs("form",{onSubmit:T,className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"ID (Email)"}),Z.jsx("input",{type:"email",value:u,onChange:E=>i(E.target.value),className:"w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-gray-500 outline-none",required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),Z.jsx("input",{type:"password",value:a,onChange:E=>c(E.target.value),className:"w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-gray-500 outline-none",required:!0})]}),w&&Z.jsx("p",{className:"text-red-500 text-sm font-bold",children:w}),Z.jsx("button",{type:"submit",disabled:v,className:"w-full bg-black text-white font-bold py-3 rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:v?"...":""})]}),Z.jsx("div",{className:"mt-6 text-center",children:Z.jsx("a",{href:"/",className:"text-sm text-gray-400 hover:text-gray-600",children:" "})})]})})}function kc({user:u,role:i,onLogout:a}){return u?Z.jsx("nav",{className:"bg-white border-b border-gray-100 fixed top-0 w-full z-50",children:Z.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold",children:"ID"}),Z.jsx("span",{className:"font-bold text-gray-800",children:"IdolPoint"})]}),Z.jsxs("div",{className:"flex items-center gap-4",children:[i==="admin"&&Z.jsx(Ea,{to:"/scan",className:"p-2 text-gray-600 hover:bg-gray-50 rounded-full",children:Z.jsx(tu,{size:20})}),Z.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:Z.jsx(EE,{size:20})})]})]})}):null}function jc({role:u}){return Z.jsx("div",{className:"fixed bottom-0 w-full bg-white border-t border-gray-100 pb-safe",children:Z.jsxs("div",{className:"flex justify-around max-w-4xl mx-auto",children:[Z.jsxs(Ea,{to:"/",className:"flex flex-col items-center py-3 px-4 text-gray-600 hover:text-purple-600",children:[Z.jsx(Dd,{size:24}),Z.jsx("span",{className:"text-[10px] mt-1 font-medium",children:""})]}),u==="admin"?Z.jsxs(Ea,{to:"/scan",className:"flex flex-col items-center py-3 px-4 text-gray-600 hover:text-purple-600",children:[Z.jsx("div",{className:"bg-purple-600 text-white p-3 rounded-full -mt-8 shadow-lg border-4 border-white",children:Z.jsx(tu,{size:24})}),Z.jsx("span",{className:"text-[10px] mt-1 font-medium",children:""})]}):Z.jsxs(Ea,{to:"/cards",className:"flex flex-col items-center py-3 px-4 text-gray-600 hover:text-purple-600",children:[Z.jsx(kE,{size:24}),Z.jsx("span",{className:"text-[10px] mt-1 font-medium",children:""})]}),Z.jsxs("div",{className:"flex flex-col items-center py-3 px-4 text-gray-300",children:[Z.jsx(vE,{size:24}),Z.jsx("span",{className:"text-[10px] mt-1 font-medium",children:""})]})]})})}function qE({user:u}){const[i,a]=me.useState([]),[c,v]=me.useState(0),[m,w]=me.useState(!0),[C,T]=me.useState(null);me.useEffect(()=>{E()},[u]);const E=async()=>{const{data:N}=await mr.from("point_transactions").select("points_change"),{data:P}=await mr.from("user_cards").select("current_points").eq("user_id",u.id),F=P?.reduce((Y,J)=>Y+J.current_points,0)||0;v(F);const{data:q}=await mr.from("rewards").select("*").order("points_required",{ascending:!0});a(q||[]),w(!1)},R=async N=>{if(!window.confirm(`${N.title}
: ${N.points_required}pt`))return;T(N.id);const{error:P}=await mr.from("point_transactions").insert({points_change:-N.points_required,description:`: ${N.title}`});P?alert(": "+P.message):(alert(""),E()),T(null)};return Z.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[Z.jsx(kc,{user:u,role:"user",onLogout:()=>{}})," ",Z.jsxs("div",{className:"max-w-md mx-auto p-6 pt-24",children:[Z.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6 flex justify-between items-center",children:[Z.jsxs("div",{children:[Z.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase",children:"Current Points"}),Z.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[c," ",Z.jsx("span",{className:"text-sm text-gray-400",children:"pt"})]})]}),Z.jsx(IE,{size:32,className:"text-purple-200"})]}),Z.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[Z.jsx(mE,{size:20}),""]}),Z.jsx("div",{className:"grid gap-4",children:m?Z.jsx("p",{children:"Loading..."}):i.length===0?Z.jsxs("div",{className:"p-8 text-center text-gray-400 bg-white rounded-xl border border-dashed border-gray-200",children:[Z.jsx(hE,{className:"mx-auto mb-2 opacity-50"}),Z.jsx("p",{children:""})]}):i.map(N=>Z.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center",children:[Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-bold text-gray-900",children:N.title}),Z.jsx("p",{className:"text-xs text-gray-500",children:N.description}),Z.jsxs("p",{className:"text-sm font-bold text-purple-600 mt-1",children:[N.points_required," pt"]})]}),Z.jsx("button",{onClick:()=>R(N),disabled:c<N.points_required||C===N.id,className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c>=N.points_required?"bg-gray-900 text-white hover:bg-black shadow-lg":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:C===N.id?"...":""})]},N.id))})]}),Z.jsx(jc,{role:"user"})]})}function GE({user:u}){const[i,a]=me.useState([]),[c,v]=me.useState(!0),[m,w]=me.useState(""),[C,T]=me.useState(10),[E,R]=me.useState("");me.useEffect(()=>{N()},[]);const N=async()=>{const{data:q}=await mr.from("rewards").select("*").order("points_required");a(q||[]),v(!1)},P=async q=>{q.preventDefault();const{error:Y}=await mr.from("rewards").insert({title:m,description:E,points_required:C});Y||(w(""),R(""),T(10),N())},F=async q=>{confirm("")&&(await mr.from("rewards").delete().eq("id",q),N())};return Z.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[Z.jsx(kc,{user:u,role:"admin",onLogout:()=>{}}),Z.jsxs("div",{className:"max-w-md mx-auto p-6 pt-24",children:[Z.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),Z.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-8",children:[Z.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[Z.jsx(CE,{size:18}),""]}),Z.jsxs("form",{onSubmit:P,className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:""}),Z.jsx("input",{className:"w-full border p-2 rounded-lg mt-1",value:m,onChange:q=>w(q.target.value),required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:""}),Z.jsx("input",{type:"number",className:"w-full border p-2 rounded-lg mt-1",value:C,onChange:q=>T(Number(q.target.value)),required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:""}),Z.jsx("input",{className:"w-full border p-2 rounded-lg mt-1",value:E,onChange:q=>R(q.target.value)})]}),Z.jsx("button",{className:"w-full bg-black text-white py-3 rounded-xl font-bold",children:""})]})]}),Z.jsx("div",{className:"space-y-4",children:i.map(q=>Z.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center",children:[Z.jsxs("div",{children:[Z.jsx("h4",{className:"font-bold",children:q.title}),Z.jsxs("p",{className:"text-sm text-purple-600 font-bold",children:[q.points_required," pt"]})]}),Z.jsx("button",{onClick:()=>F(q.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-full",children:Z.jsx(ME,{size:18})})]},q.id))})]}),Z.jsx(jc,{role:"admin"})]})}var vc={exports:{}},YE=vc.exports,Rp;function XE(){return Rp||(Rp=1,(function(u,i){(function(a,c){u.exports=c()})(YE,function(){var a=function(s,h){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(y[_]=x[_])})(s,h)},c=function(){return(c=Object.assign||function(s){for(var h,y=1,x=arguments.length;y<x;y++)for(var _ in h=arguments[y])Object.prototype.hasOwnProperty.call(h,_)&&(s[_]=h[_]);return s}).apply(this,arguments)};function v(s,h,y){for(var x,_=0,S=h.length;_<S;_++)!x&&_ in h||((x=x||Array.prototype.slice.call(h,0,_))[_]=h[_]);return s.concat(x||Array.prototype.slice.call(h))}var m=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ql,w=Object.keys,C=Array.isArray;function T(s,h){return typeof h!="object"||w(h).forEach(function(y){s[y]=h[y]}),s}typeof Promise>"u"||m.Promise||(m.Promise=Promise);var E=Object.getPrototypeOf,R={}.hasOwnProperty;function N(s,h){return R.call(s,h)}function P(s,h){typeof h=="function"&&(h=h(E(s))),(typeof Reflect>"u"?w:Reflect.ownKeys)(h).forEach(function(y){q(s,y,h[y])})}var F=Object.defineProperty;function q(s,h,y,x){F(s,h,T(y&&N(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},x))}function Y(s){return{from:function(h){return s.prototype=Object.create(h.prototype),q(s.prototype,"constructor",s),{extend:P.bind(null,s.prototype)}}}}var J=Object.getOwnPropertyDescriptor,ne=[].slice;function se(s,h,y){return ne.call(s,h,y)}function re(s,h){return h(s)}function Ce(s){if(!s)throw new Error("Assertion Failed")}function Ke(s){m.setImmediate?setImmediate(s):setTimeout(s,0)}function Be(s,h){if(typeof h=="string"&&N(s,h))return s[h];if(!h)return s;if(typeof h!="string"){for(var y=[],x=0,_=h.length;x<_;++x){var S=Be(s,h[x]);y.push(S)}return y}var O=h.indexOf(".");if(O!==-1){var D=s[h.substr(0,O)];return D==null?void 0:Be(D,h.substr(O+1))}}function te(s,h,y){if(s&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof h!="string"&&"length"in h){Ce(typeof y!="string"&&"length"in y);for(var x=0,_=h.length;x<_;++x)te(s,h[x],y[x])}else{var S,O,D=h.indexOf(".");D!==-1?(S=h.substr(0,D),(O=h.substr(D+1))===""?y===void 0?C(s)&&!isNaN(parseInt(S))?s.splice(S,1):delete s[S]:s[S]=y:te(D=!(D=s[S])||!N(s,S)?s[S]={}:D,O,y)):y===void 0?C(s)&&!isNaN(parseInt(h))?s.splice(h,1):delete s[h]:s[h]=y}}function Ge(s){var h,y={};for(h in s)N(s,h)&&(y[h]=s[h]);return y}var we=[].concat;function pn(s){return we.apply([],s)}var Pn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pn([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(h){return h+s+"Array"})}))).filter(function(s){return m[s]}),Nt=new Set(Pn.map(function(s){return m[s]})),Ve=null;function ot(s){return Ve=new WeakMap,s=(function h(y){if(!y||typeof y!="object")return y;var x=Ve.get(y);if(x)return x;if(C(y)){x=[],Ve.set(y,x);for(var _=0,S=y.length;_<S;++_)x.push(h(y[_]))}else if(Nt.has(y.constructor))x=y;else{var O,D=E(y);for(O in x=D===Object.prototype?{}:Object.create(D),Ve.set(y,x),y)N(y,O)&&(x[O]=h(y[O]))}return x})(s),Ve=null,s}var Dt={}.toString;function pe(s){return Dt.call(s).slice(8,-1)}var he=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ae=typeof he=="symbol"?function(s){var h;return s!=null&&(h=s[he])&&h.apply(s)}:function(){return null};function Ze(s,h){return h=s.indexOf(h),0<=h&&s.splice(h,1),0<=h}var pt={};function ht(s){var h,y,x,_;if(arguments.length===1){if(C(s))return s.slice();if(this===pt&&typeof s=="string")return[s];if(_=Ae(s)){for(y=[];!(x=_.next()).done;)y.push(x.value);return y}if(s==null)return[s];if(typeof(h=s.length)!="number")return[s];for(y=new Array(h);h--;)y[h]=s[h];return y}for(h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];return y}var L=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Gi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ft=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Gi),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(s,h){this.name=s,this.message=h}function Ee(s,h){return s+". Errors: "+Object.keys(h).map(function(y){return h[y].toString()}).filter(function(y,x,_){return _.indexOf(y)===x}).join(`
`)}function Ue(s,h,y,x){this.failures=h,this.failedKeys=x,this.successCount=y,this.message=Ee(s,h)}function _e(s,h){this.name="BulkError",this.failures=Object.keys(h).map(function(y){return h[y]}),this.failuresByPos=h,this.message=Ee(s,this.failures)}Y(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Y(Ue).from(xe),Y(_e).from(xe);var Je=ft.reduce(function(s,h){return s[h]=h+"Error",s},{}),mt=xe,Me=ft.reduce(function(s,h){var y=h+"Error";function x(_,S){this.name=y,_?typeof _=="string"?(this.message="".concat(_).concat(S?`
 `+S:""),this.inner=S||null):typeof _=="object"&&(this.message="".concat(_.name," ").concat(_.message),this.inner=_):(this.message=Q[h]||y,this.inner=null)}return Y(x).from(mt),s[h]=x,s},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var Dr=Gi.reduce(function(s,h){return s[h+"Error"]=Me[h],s},{}),Rn=ft.reduce(function(s,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(s[h+"Error"]=Me[h]),s},{});function Mt(){}function Ct(s){return s}function Mr(s,h){return s==null||s===Ct?h:function(y){return h(s(y))}}function jn(s,h){return function(){s.apply(this,arguments),h.apply(this,arguments)}}function qi(s,h){return s===Mt?h:function(){var y=s.apply(this,arguments);y!==void 0&&(arguments[0]=y);var x=this.onsuccess,_=this.onerror;this.onsuccess=null,this.onerror=null;var S=h.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?jn(x,this.onsuccess):x),_&&(this.onerror=this.onerror?jn(_,this.onerror):_),S!==void 0?S:y}}function Gn(s,h){return s===Mt?h:function(){s.apply(this,arguments);var y=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?jn(y,this.onsuccess):y),x&&(this.onerror=this.onerror?jn(x,this.onerror):x)}}function Jt(s,h){return s===Mt?h:function(y){var x=s.apply(this,arguments);T(y,x);var _=this.onsuccess,S=this.onerror;return this.onsuccess=null,this.onerror=null,y=h.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?jn(_,this.onsuccess):_),S&&(this.onerror=this.onerror?jn(S,this.onerror):S),x===void 0?y===void 0?void 0:y:T(x,y)}}function Rt(s,h){return s===Mt?h:function(){return h.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Mi(s,h){return s===Mt?h:function(){var y=s.apply(this,arguments);if(y&&typeof y.then=="function"){for(var x=this,_=arguments.length,S=new Array(_);_--;)S[_]=arguments[_];return y.then(function(){return h.apply(x,S)})}return h.apply(this,arguments)}}Rn.ModifyError=Ue,Rn.DexieError=xe,Rn.BulkError=_e;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Aa(s){Fe=s}var la={},wn=100,Pn=typeof Promise>"u"?[]:(function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,E(s),s];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,E(h),s]})(),Gi=Pn[0],ft=Pn[1],Pn=Pn[2],ft=ft&&ft.then,fi=Gi&&Gi.constructor,vr=!!Pn,Ln=function(s,h){nn.push([s,h]),Yi&&(queueMicrotask(Xn),Yi=!1)},Sa=!0,Yi=!0,Xi=[],$t=[],De=Ct,Bt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Mt,pgp:!1,env:{},finalize:Mt},Ie=Bt,nn=[],Vr=0,ua=[];function ze(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Ie;if(typeof s!="function"){if(s!==la)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Zr(this,this._value))}this._state=null,this._value=null,++h.ref,(function y(x,_){try{_(function(S){if(x._state===null){if(S===x)throw new TypeError("A promise cannot be resolved with itself.");var O=x._lib&&xr();S&&typeof S.then=="function"?y(x,function(D,B){S instanceof ze?S._then(D,B):S.then(D,B)}):(x._state=!0,x._value=S,ca(x)),O&&wr()}},Zr.bind(null,x))}catch(S){Zr(x,S)}})(this,s)}var Tt={get:function(){var s=Ie,h=He;function y(x,_){var S=this,O=!s.global&&(s!==Ie||h!==He),D=O&&!Un(),B=new ze(function(k,U){Yn(S,new qr(Er(x,s,O,D),Er(_,s,O,D),k,U,s))});return this._consoleTask&&(B._consoleTask=this._consoleTask),B}return y.prototype=la,y},set:function(s){q(this,"then",s&&s.prototype===la?Tt:{get:function(){return s},set:Tt.set})}};function qr(s,h,y,x,_){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof h=="function"?h:null,this.resolve=y,this.reject=x,this.psd=_}function Zr(s,h){var y,x;$t.push(h),s._state===null&&(y=s._lib&&xr(),h=De(h),s._state=!1,s._value=h,x=s,Xi.some(function(_){return _._value===x._value})||Xi.push(x),ca(s),y&&wr())}function ca(s){var h=s._listeners;s._listeners=[];for(var y=0,x=h.length;y<x;++y)Yn(s,h[y]);var _=s._PSD;--_.ref||_.finalize(),Vr===0&&(++Vr,Ln(function(){--Vr==0&&Br()},[]))}function Yn(s,h){if(s._state!==null){var y=s._state?h.onFulfilled:h.onRejected;if(y===null)return(s._state?h.resolve:h.reject)(s._value);++h.psd.ref,++Vr,Ln(Ps,[y,s,h])}else s._listeners.push(h)}function Ps(s,h,y){try{var x,_=h._value;!h._state&&$t.length&&($t=[]),x=Fe&&h._consoleTask?h._consoleTask.run(function(){return s(_)}):s(_),h._state||$t.indexOf(_)!==-1||(function(S){for(var O=Xi.length;O;)if(Xi[--O]._value===S._value)return Xi.splice(O,1)})(h),y.resolve(x)}catch(S){y.reject(S)}finally{--Vr==0&&Br(),--y.psd.ref||y.psd.finalize()}}function Xn(){Gr(Bt,function(){xr()&&wr()})}function xr(){var s=Sa;return Yi=Sa=!1,s}function wr(){var s,h,y;do for(;0<nn.length;)for(s=nn,nn=[],y=s.length,h=0;h<y;++h){var x=s[h];x[0].apply(null,x[1])}while(0<nn.length);Yi=Sa=!0}function Br(){var s=Xi;Xi=[],s.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var h=ua.slice(0),y=h.length;y;)h[--y]()}function Ca(s){return new ze(la,!1,s)}function Vt(s,h){var y=Ie;return function(){var x=xr(),_=Ie;try{return Kn(y,!0),s.apply(this,arguments)}catch(S){h&&h(S)}finally{Kn(_,!1),x&&wr()}}}P(ze.prototype,{then:Tt,_then:function(s,h){Yn(this,new qr(null,null,s,h,Ie))},catch:function(s){if(arguments.length===1)return this.then(null,s);var h=s,y=arguments[1];return typeof h=="function"?this.then(null,function(x){return(x instanceof h?y:Ca)(x)}):this.then(null,function(x){return(x&&x.name===h?y:Ca)(x)})},finally:function(s){return this.then(function(h){return ze.resolve(s()).then(function(){return h})},function(h){return ze.resolve(s()).then(function(){return Ca(h)})})},timeout:function(s,h){var y=this;return s<1/0?new ze(function(x,_){var S=setTimeout(function(){return _(new Me.Timeout(h))},s);y.then(x,_).finally(clearTimeout.bind(null,S))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&q(ze.prototype,Symbol.toStringTag,"Dexie.Promise"),Bt.env=Us(),P(ze,{all:function(){var s=ht.apply(null,arguments).map(hi);return new ze(function(h,y){s.length===0&&h([]);var x=s.length;s.forEach(function(_,S){return ze.resolve(_).then(function(O){s[S]=O,--x||h(s)},y)})})},resolve:function(s){return s instanceof ze?s:s&&typeof s.then=="function"?new ze(function(h,y){s.then(h,y)}):new ze(la,!0,s)},reject:Ca,race:function(){var s=ht.apply(null,arguments).map(hi);return new ze(function(h,y){s.map(function(x){return ze.resolve(x).then(h,y)})})},PSD:{get:function(){return Ie},set:function(s){return Ie=s}},totalEchoes:{get:function(){return He}},newPSD:rn,usePSD:Gr,scheduler:{get:function(){return Ln},set:function(s){Ln=s}},rejectionMapper:{get:function(){return De},set:function(s){De=s}},follow:function(s,h){return new ze(function(y,x){return rn(function(_,S){var O=Ie;O.unhandleds=[],O.onunhandled=S,O.finalize=jn(function(){var D,B=this;D=function(){B.unhandleds.length===0?_():S(B.unhandleds[0])},ua.push(function k(){D(),ua.splice(ua.indexOf(k),1)}),++Vr,Ln(function(){--Vr==0&&Br()},[])},O.finalize),s()},h,y,x)})}}),fi&&(fi.allSettled&&q(ze,"allSettled",function(){var s=ht.apply(null,arguments).map(hi);return new ze(function(h){s.length===0&&h([]);var y=s.length,x=new Array(y);s.forEach(function(_,S){return ze.resolve(_).then(function(O){return x[S]={status:"fulfilled",value:O}},function(O){return x[S]={status:"rejected",reason:O}}).then(function(){return--y||h(x)})})})}),fi.any&&typeof AggregateError<"u"&&q(ze,"any",function(){var s=ht.apply(null,arguments).map(hi);return new ze(function(h,y){s.length===0&&y(new AggregateError([]));var x=s.length,_=new Array(x);s.forEach(function(S,O){return ze.resolve(S).then(function(D){return h(D)},function(D){_[O]=D,--x||y(new AggregateError(_))})})})}),fi.withResolvers&&(ze.withResolvers=fi.withResolvers));var An={awaits:0,echoes:0,id:0},$n=0,Lr=[],er=0,He=0,br=0;function rn(s,h,y,x){var _=Ie,S=Object.create(_);return S.parent=_,S.ref=0,S.global=!1,S.id=++br,Bt.env,S.env=vr?{Promise:ze,PromiseProp:{value:ze,configurable:!0,writable:!0},all:ze.all,race:ze.race,allSettled:ze.allSettled,any:ze.any,resolve:ze.resolve,reject:ze.reject}:{},h&&T(S,h),++_.ref,S.finalize=function(){--this.parent.ref||this.parent.finalize()},x=Gr(S,s,y,x),S.ref===0&&S.finalize(),x}function Pt(){return An.id||(An.id=++$n),++An.awaits,An.echoes+=wn,An.id}function Un(){return!!An.awaits&&(--An.awaits==0&&(An.id=0),An.echoes=An.awaits*wn,!0)}function hi(s){return An.echoes&&s&&s.constructor===fi?(Pt(),s.then(function(h){return Un(),h},function(h){return Un(),st(h)})):s}function $a(){var s=Lr[Lr.length-1];Lr.pop(),Kn(s,!1)}function Kn(s,h){var y,x=Ie;(h?!An.echoes||er++&&s===Ie:!er||--er&&s===Ie)||queueMicrotask(h?(function(_){++He,An.echoes&&--An.echoes!=0||(An.echoes=An.awaits=An.id=0),Lr.push(Ie),Kn(_,!0)}).bind(null,s):$a),s!==Ie&&(Ie=s,x===Bt&&(Bt.env=Us()),vr&&(y=Bt.env.Promise,h=s.env,(x.global||s.global)&&(Object.defineProperty(m,"Promise",h.PromiseProp),y.all=h.all,y.race=h.race,y.resolve=h.resolve,y.reject=h.reject,h.allSettled&&(y.allSettled=h.allSettled),h.any&&(y.any=h.any))))}function Us(){var s=m.Promise;return vr?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(m,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Gr(s,h,y,x,_){var S=Ie;try{return Kn(s,!0),h(y,x,_)}finally{Kn(S,!1)}}function Er(s,h,y,x){return typeof s!="function"?s:function(){var _=Ie;y&&Pt(),Kn(h,!0);try{return s.apply(this,arguments)}finally{Kn(_,!1),x&&queueMicrotask(Un)}}}function bn(s){Promise===fi&&An.echoes===0?er===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+ft).indexOf("[native code]")===-1&&(Pt=Un=Mt);var st=ze.reject,kr="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Cn="String expected.",Te=[],Ta="__dbnames",Xt="readonly",_r="readwrite";function Ki(s,h){return s?h?function(){return s.apply(this,arguments)&&h.apply(this,arguments)}:s:h}var Ut={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function It(s){return typeof s!="string"||/\./.test(s)?function(h){return h}:function(h){return h[s]===void 0&&s in h&&delete(h=ot(h))[s],h}}function Ot(){throw Me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function xt(s,h){try{var y=Wi(s),x=Wi(h);if(y!==x)return y==="Array"?1:x==="Array"?-1:y==="binary"?1:x==="binary"?-1:y==="string"?1:x==="string"?-1:y==="Date"?1:x!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return h<s?1:s<h?-1:0;case"binary":return(function(_,S){for(var O=_.length,D=S.length,B=O<D?O:D,k=0;k<B;++k)if(_[k]!==S[k])return _[k]<S[k]?-1:1;return O===D?0:O<D?-1:1})(jr(s),jr(h));case"Array":return(function(_,S){for(var O=_.length,D=S.length,B=O<D?O:D,k=0;k<B;++k){var U=xt(_[k],S[k]);if(U!==0)return U}return O===D?0:O<D?-1:1})(s,h)}}catch{}return NaN}function Wi(s){var h=typeof s;return h!="object"?h:ArrayBuffer.isView(s)?"binary":(s=pe(s),s==="ArrayBuffer"?"binary":s)}function jr(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function Lt(s,h,y){var x=s.schema.yProps;return x?(h&&0<y.numFailures&&(h=h.filter(function(_,S){return!y.failures[S]})),Promise.all(x.map(function(_){return _=_.updatesTable,h?s.db.table(_).where("k").anyOf(h).delete():s.db.table(_).clear()})).then(function(){return y})):y}var Ar=(mo.prototype.execute=function(s){var h=this["@@propmod"];if(h.add!==void 0){var y=h.add;if(C(y))return v(v([],C(s)?s:[],!0),y).sort();if(typeof y=="number")return(Number(s)||0)+y;if(typeof y=="bigint")try{return BigInt(s)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(h.remove!==void 0){var x=h.remove;if(C(x))return C(s)?s.filter(function(_){return!x.includes(_)}).sort():[];if(typeof x=="number")return Number(s)-x;if(typeof x=="bigint")try{return BigInt(s)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return y=(y=h.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof s=="string"&&s.startsWith(y)?h.replacePrefix[1]+s.substring(y.length):s},mo);function mo(s){this["@@propmod"]=s}function cn(s,h){for(var y=w(h),x=y.length,_=!1,S=0;S<x;++S){var O=y[S],D=h[O],B=Be(s,O);D instanceof Ar?(te(s,O,D.execute(B)),_=!0):B!==D&&(te(s,O,D),_=!0)}return _}var Jr=(Kt.prototype._trans=function(s,h,y){var x=this._tx||Ie.trans,_=this.name,S=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function O(k,U,z){if(!z.schema[_])throw new Me.NotFound("Table "+_+" not part of transaction");return h(z.idbtrans,z)}var D=xr();try{var B=x&&x.db._novip===this.db._novip?x===Ie.trans?x._promise(s,O,y):rn(function(){return x._promise(s,O,y)},{trans:x,transless:Ie.transless||Ie}):(function k(U,z,G,H){if(U.idbdb&&(U._state.openComplete||Ie.letThrough||U._vip)){var K=U._createTransaction(z,G,U._dbSchema);try{K.create(),U._state.PR1398_maxLoop=3}catch(X){return X.name===Je.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return k(U,z,G,H)})):st(X)}return K._promise(z,function(X,ee){return rn(function(){return Ie.trans=K,H(X,ee,K)})}).then(function(X){if(z==="readwrite")try{K.idbtrans.commit()}catch{}return z==="readonly"?X:K._completion.then(function(){return X})})}if(U._state.openComplete)return st(new Me.DatabaseClosed(U._state.dbOpenError));if(!U._state.isBeingOpened){if(!U._state.autoOpen)return st(new Me.DatabaseClosed);U.open().catch(Mt)}return U._state.dbReadyPromise.then(function(){return k(U,z,G,H)})})(this.db,s,[this.name],O);return S&&(B._consoleTask=S,B=B.catch(function(k){return console.trace(k),st(k)})),B}finally{D&&wr()}},Kt.prototype.get=function(s,h){var y=this;return s&&s.constructor===Object?this.where(s).first(h):s==null?st(new Me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return y.core.get({trans:x,key:s}).then(function(_){return y.hook.reading.fire(_)})}).then(h)},Kt.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(C(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var h=w(s);if(h.length===1)return this.where(h[0]).equals(s[h[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&h.every(function(k){return 0<=D.keyPath.indexOf(k)})){for(var B=0;B<h.length;++B)if(h.indexOf(D.keyPath[B])===-1)return!1;return!0}return!1}).sort(function(D,B){return D.keyPath.length-B.keyPath.length})[0];if(y&&this.db._maxKey!==kr){var S=y.keyPath.slice(0,h.length);return this.where(S).equals(S.map(function(B){return s[B]}))}!y&&Fe&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var x=this.schema.idxByName;function _(D,B){return xt(D,B)===0}var O=h.reduce(function(z,B){var k=z[0],U=z[1],z=x[B],G=s[B];return[k||z,k||!z?Ki(U,z&&z.multi?function(H){return H=Be(H,B),C(H)&&H.some(function(K){return _(G,K)})}:function(H){return _(G,Be(H,B))}):U]},[null,null]),S=O[0],O=O[1];return S?this.where(S.name).equals(s[S.keyPath]).filter(O):y?this.filter(O):this.where(h).equals("")},Kt.prototype.filter=function(s){return this.toCollection().and(s)},Kt.prototype.count=function(s){return this.toCollection().count(s)},Kt.prototype.offset=function(s){return this.toCollection().offset(s)},Kt.prototype.limit=function(s){return this.toCollection().limit(s)},Kt.prototype.each=function(s){return this.toCollection().each(s)},Kt.prototype.toArray=function(s){return this.toCollection().toArray(s)},Kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Kt.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,C(s)?"[".concat(s.join("+"),"]"):s))},Kt.prototype.reverse=function(){return this.toCollection().reverse()},Kt.prototype.mapToClass=function(s){var h,y=this.db,x=this.name;function _(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof Ot&&((function(B,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function U(){this.constructor=B}a(B,k),B.prototype=k===null?Object.create(k):(U.prototype=k.prototype,new U)})(_,h=s),Object.defineProperty(_.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),_.prototype.table=function(){return x},s=_);for(var S=new Set,O=s.prototype;O;O=E(O))Object.getOwnPropertyNames(O).forEach(function(B){return S.add(B)});function D(B){if(!B)return B;var k,U=Object.create(s.prototype);for(k in B)if(!S.has(k))try{U[k]=B[k]}catch{}return U}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),s},Kt.prototype.defineClass=function(){return this.mapToClass(function(s){T(this,s)})},Kt.prototype.add=function(s,h){var y=this,x=this.schema.primKey,_=x.auto,S=x.keyPath,O=s;return S&&_&&(O=It(S)(s)),this._trans("readwrite",function(D){return y.core.mutate({trans:D,type:"add",keys:h!=null?[h]:null,values:[O]})}).then(function(D){return D.numFailures?ze.reject(D.failures[0]):D.lastResult}).then(function(D){if(S)try{te(s,S,D)}catch{}return D})},Kt.prototype.upsert=function(s,h){var y=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(_){return y.core.get({trans:_,key:s}).then(function(S){var O=S??{};return cn(O,h),x&&te(O,x,s),y.core.mutate({trans:_,type:"put",values:[O],keys:[s],upsert:!0,updates:{keys:[s],changeSpecs:[h]}}).then(function(D){return D.numFailures?ze.reject(D.failures[0]):!!S})})})},Kt.prototype.update=function(s,h){return typeof s!="object"||C(s)?this.where(":id").equals(s).modify(h):(s=Be(s,this.schema.primKey.keyPath),s===void 0?st(new Me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(h))},Kt.prototype.put=function(s,h){var y=this,x=this.schema.primKey,_=x.auto,S=x.keyPath,O=s;return S&&_&&(O=It(S)(s)),this._trans("readwrite",function(D){return y.core.mutate({trans:D,type:"put",values:[O],keys:h!=null?[h]:null})}).then(function(D){return D.numFailures?ze.reject(D.failures[0]):D.lastResult}).then(function(D){if(S)try{te(s,S,D)}catch{}return D})},Kt.prototype.delete=function(s){var h=this;return this._trans("readwrite",function(y){return h.core.mutate({trans:y,type:"delete",keys:[s]}).then(function(x){return Lt(h,[s],x)}).then(function(x){return x.numFailures?ze.reject(x.failures[0]):void 0})})},Kt.prototype.clear=function(){var s=this;return this._trans("readwrite",function(h){return s.core.mutate({trans:h,type:"deleteRange",range:Ut}).then(function(y){return Lt(s,null,y)})}).then(function(h){return h.numFailures?ze.reject(h.failures[0]):void 0})},Kt.prototype.bulkGet=function(s){var h=this;return this._trans("readonly",function(y){return h.core.getMany({keys:s,trans:y}).then(function(x){return x.map(function(_){return h.hook.reading.fire(_)})})})},Kt.prototype.bulkAdd=function(s,h,y){var x=this,_=Array.isArray(h)?h:void 0,S=(y=y||(_?void 0:h))?y.allKeys:void 0;return this._trans("readwrite",function(O){var k=x.schema.primKey,D=k.auto,k=k.keyPath;if(k&&_)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(_&&_.length!==s.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var B=s.length,k=k&&D?s.map(It(k)):s;return x.core.mutate({trans:O,type:"add",keys:_,values:k,wantResults:S}).then(function(K){var z=K.numFailures,G=K.results,H=K.lastResult,K=K.failures;if(z===0)return S?G:H;throw new _e("".concat(x.name,".bulkAdd(): ").concat(z," of ").concat(B," operations failed"),K)})})},Kt.prototype.bulkPut=function(s,h,y){var x=this,_=Array.isArray(h)?h:void 0,S=(y=y||(_?void 0:h))?y.allKeys:void 0;return this._trans("readwrite",function(O){var k=x.schema.primKey,D=k.auto,k=k.keyPath;if(k&&_)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(_&&_.length!==s.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");var B=s.length,k=k&&D?s.map(It(k)):s;return x.core.mutate({trans:O,type:"put",keys:_,values:k,wantResults:S}).then(function(K){var z=K.numFailures,G=K.results,H=K.lastResult,K=K.failures;if(z===0)return S?G:H;throw new _e("".concat(x.name,".bulkPut(): ").concat(z," of ").concat(B," operations failed"),K)})})},Kt.prototype.bulkUpdate=function(s){var h=this,y=this.core,x=s.map(function(O){return O.key}),_=s.map(function(O){return O.changes}),S=[];return this._trans("readwrite",function(O){return y.getMany({trans:O,keys:x,cache:"clone"}).then(function(D){var B=[],k=[];s.forEach(function(z,G){var H=z.key,K=z.changes,X=D[G];if(X){for(var ee=0,ae=Object.keys(K);ee<ae.length;ee++){var oe=ae[ee],ce=K[oe];if(oe===h.schema.primKey.keyPath){if(xt(ce,H)!==0)throw new Me.Constraint("Cannot update primary key in bulkUpdate()")}else te(X,oe,ce)}S.push(G),B.push(H),k.push(X)}});var U=B.length;return y.mutate({trans:O,type:"put",keys:B,values:k,updates:{keys:x,changeSpecs:_}}).then(function(z){var G=z.numFailures,H=z.failures;if(G===0)return U;for(var K=0,X=Object.keys(H);K<X.length;K++){var ee,ae=X[K],oe=S[Number(ae)];oe!=null&&(ee=H[ae],delete H[ae],H[oe]=ee)}throw new _e("".concat(h.name,".bulkUpdate(): ").concat(G," of ").concat(U," operations failed"),H)})})})},Kt.prototype.bulkDelete=function(s){var h=this,y=s.length;return this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"delete",keys:s}).then(function(_){return Lt(h,s,_)})}).then(function(O){var _=O.numFailures,S=O.lastResult,O=O.failures;if(_===0)return S;throw new _e("".concat(h.name,".bulkDelete(): ").concat(_," of ").concat(y," operations failed"),O)})},Kt);function Kt(){}function $r(s){function h(O,D){if(D){for(var B=arguments.length,k=new Array(B-1);--B;)k[B-1]=arguments[B];return y[O].subscribe.apply(null,k),s}if(typeof O=="string")return y[O]}var y={};h.addEventType=S;for(var x=1,_=arguments.length;x<_;++x)S(arguments[x]);return h;function S(O,D,B){if(typeof O!="object"){var k;D=D||Rt;var U={subscribers:[],fire:B=B||Mt,subscribe:function(z){U.subscribers.indexOf(z)===-1&&(U.subscribers.push(z),U.fire=D(U.fire,z))},unsubscribe:function(z){U.subscribers=U.subscribers.filter(function(G){return G!==z}),U.fire=U.subscribers.reduce(D,B)}};return y[O]=h[O]=U}w(k=O).forEach(function(z){var G=k[z];if(C(G))S(z,k[z][0],k[z][1]);else{if(G!=="asap")throw new Me.InvalidArgument("Invalid event config");var H=S(z,Ct,function(){for(var K=arguments.length,X=new Array(K);K--;)X[K]=arguments[K];H.subscribers.forEach(function(ee){Ke(function(){ee.apply(null,X)})})})}})}}function vt(s,h){return Y(h).from({prototype:s}),h}function mn(s,h){return!(s.filter||s.algorithm||s.or)&&(h?s.justLimit:!s.replayFilter)}function le(s,h){s.filter=Ki(s.filter,h)}function V(s,h,y){var x=s.replayFilter;s.replayFilter=x?function(){return Ki(x(),h())}:h,s.justLimit=y&&!x}function Ye(s,h){if(s.isPrimKey)return h.primaryKey;var y=h.getIndexByKeyPath(s.index);if(!y)throw new Me.Schema("KeyPath "+s.index+" on object store "+h.name+" is not indexed");return y}function In(s,h,y){var x=Ye(s,h.schema);return h.openCursor({trans:y,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:x,range:s.range}})}function tr(s,h,y,x){var _=s.replayFilter?Ki(s.filter,s.replayFilter()):s.filter;if(s.or){var S={},O=function(D,B,k){var U,z;_&&!_(B,k,function(G){return B.stop(G)},function(G){return B.fail(G)})||((z=""+(U=B.primaryKey))=="[object ArrayBuffer]"&&(z=""+new Uint8Array(U)),N(S,z)||(S[z]=!0,h(D,B,k)))};return Promise.all([s.or._iterate(O,y),Qi(In(s,x,y),s.algorithm,O,!s.keysOnly&&s.valueMapper)])}return Qi(In(s,x,y),Ki(s.algorithm,_),h,!s.keysOnly&&s.valueMapper)}function Qi(s,h,y,x){var _=Vt(x?function(S,O,D){return y(x(S),O,D)}:y);return s.then(function(S){if(S)return S.start(function(){var O=function(){return S.continue()};h&&!h(S,function(D){return O=D},function(D){S.stop(D),O=Mt},function(D){S.fail(D),O=Mt})||_(S.value,S,function(D){return O=D}),O()})})}var zs=(dt.prototype._read=function(s,h){var y=this._ctx;return y.error?y.table._trans(null,st.bind(null,y.error)):y.table._trans("readonly",s).then(h)},dt.prototype._write=function(s){var h=this._ctx;return h.error?h.table._trans(null,st.bind(null,h.error)):h.table._trans("readwrite",s,"locked")},dt.prototype._addAlgorithm=function(s){var h=this._ctx;h.algorithm=Ki(h.algorithm,s)},dt.prototype._iterate=function(s,h){return tr(this._ctx,s,h,this._ctx.table.core)},dt.prototype.clone=function(s){var h=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return s&&T(y,s),h._ctx=y,h},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(s){var h=this._ctx;return this._read(function(y){return tr(h,s,y,h.table.core)})},dt.prototype.count=function(s){var h=this;return this._read(function(y){var x=h._ctx,_=x.table.core;if(mn(x,!0))return _.count({trans:y,query:{index:Ye(x,_.schema),range:x.range}}).then(function(O){return Math.min(O,x.limit)});var S=0;return tr(x,function(){return++S,!1},y,_).then(function(){return S})}).then(s)},dt.prototype.sortBy=function(s,h){var y=s.split(".").reverse(),x=y[0],_=y.length-1;function S(B,k){return k?S(B[y[k]],k-1):B[x]}var O=this._ctx.dir==="next"?1:-1;function D(B,k){return xt(S(B,_),S(k,_))*O}return this.toArray(function(B){return B.sort(D)}).then(h)},dt.prototype.toArray=function(s){var h=this;return this._read(function(y){var x=h._ctx;if(x.dir==="next"&&mn(x,!0)&&0<x.limit){var _=x.valueMapper,S=Ye(x,x.table.core.schema);return x.table.core.query({trans:y,limit:x.limit,values:!0,query:{index:S,range:x.range}}).then(function(D){return D=D.result,_?D.map(_):D})}var O=[];return tr(x,function(D){return O.push(D)},y,x.table.core).then(function(){return O})},s)},dt.prototype.offset=function(s){var h=this._ctx;return s<=0||(h.offset+=s,mn(h)?V(h,function(){var y=s;return function(x,_){return y===0||(y===1?--y:_(function(){x.advance(y),y=0}),!1)}}):V(h,function(){var y=s;return function(){return--y<0}})),this},dt.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),V(this._ctx,function(){var h=s;return function(y,x,_){return--h<=0&&x(_),0<=h}},!0),this},dt.prototype.until=function(s,h){return le(this._ctx,function(y,x,_){return!s(y.value)||(x(_),h)}),this},dt.prototype.first=function(s){return this.limit(1).toArray(function(h){return h[0]}).then(s)},dt.prototype.last=function(s){return this.reverse().first(s)},dt.prototype.filter=function(s){var h;return le(this._ctx,function(y){return s(y.value)}),(h=this._ctx).isMatch=Ki(h.isMatch,s),this},dt.prototype.and=function(s){return this.filter(s)},dt.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(s){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(y,x){s(x.key,x)})},dt.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},dt.prototype.eachPrimaryKey=function(s){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(y,x){s(x.primaryKey,x)})},dt.prototype.keys=function(s){var h=this._ctx;h.keysOnly=!h.isMatch;var y=[];return this.each(function(x,_){y.push(_.key)}).then(function(){return y}).then(s)},dt.prototype.primaryKeys=function(s){var h=this._ctx;if(h.dir==="next"&&mn(h,!0)&&0<h.limit)return this._read(function(x){var _=Ye(h,h.table.core.schema);return h.table.core.query({trans:x,values:!1,limit:h.limit,query:{index:_,range:h.range}})}).then(function(x){return x.result}).then(s);h.keysOnly=!h.isMatch;var y=[];return this.each(function(x,_){y.push(_.primaryKey)}).then(function(){return y}).then(s)},dt.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},dt.prototype.firstKey=function(s){return this.limit(1).keys(function(h){return h[0]}).then(s)},dt.prototype.lastKey=function(s){return this.reverse().firstKey(s)},dt.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var h={};return le(this._ctx,function(_){var x=_.primaryKey.toString(),_=N(h,x);return h[x]=!0,!_}),this},dt.prototype.modify=function(s){var h=this,y=this._ctx;return this._write(function(x){var _=typeof s=="function"?s:function(X){return cn(X,s)},S=y.table.core,k=S.schema.primaryKey,O=k.outbound,D=k.extractKey,B=200,k=h.db._options.modifyChunkSize;k&&(B=typeof k=="object"?k[S.name]||k["*"]||200:k);function U(X,oe){var ae=oe.failures,oe=oe.numFailures;G+=X-oe;for(var ce=0,ve=w(ae);ce<ve.length;ce++){var Ne=ve[ce];z.push(ae[Ne])}}var z=[],G=0,H=[],K=s===et;return h.clone().primaryKeys().then(function(X){function ee(oe){var ce=Math.min(B,X.length-oe),ve=X.slice(oe,oe+ce);return(K?Promise.resolve([]):S.getMany({trans:x,keys:ve,cache:"immutable"})).then(function(Ne){var je=[],Re=[],ke=O?[]:null,Pe=K?ve:[];if(!K)for(var Le=0;Le<ce;++Le){var qe=Ne[Le],it={value:ot(qe),primKey:X[oe+Le]};_.call(it,it.value,it)!==!1&&(it.value==null?Pe.push(X[oe+Le]):O||xt(D(qe),D(it.value))===0?(Re.push(it.value),O&&ke.push(X[oe+Le])):(Pe.push(X[oe+Le]),je.push(it.value)))}return Promise.resolve(0<je.length&&S.mutate({trans:x,type:"add",values:je}).then(function(yt){for(var _t in yt.failures)Pe.splice(parseInt(_t),1);U(je.length,yt)})).then(function(){return(0<Re.length||ae&&typeof s=="object")&&S.mutate({trans:x,type:"put",keys:ke,values:Re,criteria:ae,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<oe}).then(function(yt){return U(Re.length,yt)})}).then(function(){return(0<Pe.length||ae&&K)&&S.mutate({trans:x,type:"delete",keys:Pe,criteria:ae,isAdditionalChunk:0<oe}).then(function(yt){return Lt(y.table,Pe,yt)}).then(function(yt){return U(Pe.length,yt)})}).then(function(){return X.length>oe+ce&&ee(oe+B)})})}var ae=mn(y)&&y.limit===1/0&&(typeof s!="function"||K)&&{index:y.index,range:y.range};return ee(0).then(function(){if(0<z.length)throw new Ue("Error modifying one or more objects",z,G,H);return X.length})})})},dt.prototype.delete=function(){var s=this._ctx,h=s.range;return!mn(s)||s.table.schema.yProps||!s.isPrimKey&&h.type!==3?this.modify(et):this._write(function(y){var x=s.table.core.schema.primaryKey,_=h;return s.table.core.count({trans:y,query:{index:x,range:_}}).then(function(S){return s.table.core.mutate({trans:y,type:"deleteRange",range:_}).then(function(B){var D=B.failures,B=B.numFailures;if(B)throw new Ue("Could not delete some values",Object.keys(D).map(function(k){return D[k]}),S-B);return S-B})})})},dt);function dt(){}var et=function(s,h){return h.value=null};function an(s,h){return s<h?-1:s===h?0:1}function yo(s,h){return h<s?-1:s===h?0:1}function Sr(s,h,y){return s=s instanceof fn?new s.Collection(s):s,s._ctx.error=new(y||TypeError)(h),s}function Yr(s){return new s.Collection(s,function(){return es("")}).limit(0)}function cr(s,h,y,x){var _,S,O,D,B,k,U,z=y.length;if(!y.every(function(K){return typeof K=="string"}))return Sr(s,Cn);function G(K){_=K==="next"?function(ee){return ee.toUpperCase()}:function(ee){return ee.toLowerCase()},S=K==="next"?function(ee){return ee.toLowerCase()}:function(ee){return ee.toUpperCase()},O=K==="next"?an:yo;var X=y.map(function(ee){return{lower:S(ee),upper:_(ee)}}).sort(function(ee,ae){return O(ee.lower,ae.lower)});D=X.map(function(ee){return ee.upper}),B=X.map(function(ee){return ee.lower}),U=(k=K)==="next"?"":x}G("next"),s=new s.Collection(s,function(){return Pr(D[0],B[z-1]+x)}),s._ondirectionchange=function(K){G(K)};var H=0;return s._addAlgorithm(function(K,X,ee){var ae=K.key;if(typeof ae!="string")return!1;var oe=S(ae);if(h(oe,B,H))return!0;for(var ce=null,ve=H;ve<z;++ve){var Ne=(function(je,Re,ke,Pe,Le,qe){for(var it=Math.min(je.length,Pe.length),yt=-1,_t=0;_t<it;++_t){var gr=Re[_t];if(gr!==Pe[_t])return Le(je[_t],ke[_t])<0?je.substr(0,_t)+ke[_t]+ke.substr(_t+1):Le(je[_t],Pe[_t])<0?je.substr(0,_t)+Pe[_t]+ke.substr(_t+1):0<=yt?je.substr(0,yt)+Re[yt]+ke.substr(yt+1):null;Le(je[_t],gr)<0&&(yt=_t)}return it<Pe.length&&qe==="next"?je+ke.substr(je.length):it<je.length&&qe==="prev"?je.substr(0,ke.length):yt<0?null:je.substr(0,yt)+Pe[yt]+ke.substr(yt+1)})(ae,oe,D[ve],B[ve],O,k);Ne===null&&ce===null?H=ve+1:(ce===null||0<O(ce,Ne))&&(ce=Ne)}return X(ce!==null?function(){K.continue(ce+U)}:ee),!1}),s}function Pr(s,h,y,x){return{type:2,lower:s,upper:h,lowerOpen:y,upperOpen:x}}function es(s){return{type:1,lower:s,upper:s}}var fn=(Object.defineProperty(en.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),en.prototype.between=function(s,h,y,x){y=y!==!1,x=x===!0;try{return 0<this._cmp(s,h)||this._cmp(s,h)===0&&(y||x)&&(!y||!x)?Yr(this):new this.Collection(this,function(){return Pr(s,h,!y,!x)})}catch{return Sr(this,Sn)}},en.prototype.equals=function(s){return s==null?Sr(this,Sn):new this.Collection(this,function(){return es(s)})},en.prototype.above=function(s){return s==null?Sr(this,Sn):new this.Collection(this,function(){return Pr(s,void 0,!0)})},en.prototype.aboveOrEqual=function(s){return s==null?Sr(this,Sn):new this.Collection(this,function(){return Pr(s,void 0,!1)})},en.prototype.below=function(s){return s==null?Sr(this,Sn):new this.Collection(this,function(){return Pr(void 0,s,!1,!0)})},en.prototype.belowOrEqual=function(s){return s==null?Sr(this,Sn):new this.Collection(this,function(){return Pr(void 0,s)})},en.prototype.startsWith=function(s){return typeof s!="string"?Sr(this,Cn):this.between(s,s+kr,!0,!0)},en.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):cr(this,function(h,y){return h.indexOf(y[0])===0},[s],kr)},en.prototype.equalsIgnoreCase=function(s){return cr(this,function(h,y){return h===y[0]},[s],"")},en.prototype.anyOfIgnoreCase=function(){var s=ht.apply(pt,arguments);return s.length===0?Yr(this):cr(this,function(h,y){return y.indexOf(h)!==-1},s,"")},en.prototype.startsWithAnyOfIgnoreCase=function(){var s=ht.apply(pt,arguments);return s.length===0?Yr(this):cr(this,function(h,y){return y.some(function(x){return h.indexOf(x)===0})},s,kr)},en.prototype.anyOf=function(){var s=this,h=ht.apply(pt,arguments),y=this._cmp;try{h.sort(y)}catch{return Sr(this,Sn)}if(h.length===0)return Yr(this);var x=new this.Collection(this,function(){return Pr(h[0],h[h.length-1])});x._ondirectionchange=function(S){y=S==="next"?s._ascending:s._descending,h.sort(y)};var _=0;return x._addAlgorithm(function(S,O,D){for(var B=S.key;0<y(B,h[_]);)if(++_===h.length)return O(D),!1;return y(B,h[_])===0||(O(function(){S.continue(h[_])}),!1)}),x},en.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},en.prototype.noneOf=function(){var s=ht.apply(pt,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Sr(this,Sn)}var h=s.reduce(function(y,x){return y?y.concat([[y[y.length-1][1],x]]):[[-1/0,x]]},null);return h.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},en.prototype.inAnyRange=function(ae,h){var y=this,x=this._cmp,_=this._ascending,S=this._descending,O=this._min,D=this._max;if(ae.length===0)return Yr(this);if(!ae.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&_(oe[0],oe[1])<=0}))return Sr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var B=!h||h.includeLowers!==!1,k=h&&h.includeUppers===!0,U,z=_;function G(oe,ce){return z(oe[0],ce[0])}try{(U=ae.reduce(function(oe,ce){for(var ve=0,Ne=oe.length;ve<Ne;++ve){var je=oe[ve];if(x(ce[0],je[1])<0&&0<x(ce[1],je[0])){je[0]=O(je[0],ce[0]),je[1]=D(je[1],ce[1]);break}}return ve===Ne&&oe.push(ce),oe},[])).sort(G)}catch{return Sr(this,Sn)}var H=0,K=k?function(oe){return 0<_(oe,U[H][1])}:function(oe){return 0<=_(oe,U[H][1])},X=B?function(oe){return 0<S(oe,U[H][0])}:function(oe){return 0<=S(oe,U[H][0])},ee=K,ae=new this.Collection(this,function(){return Pr(U[0][0],U[U.length-1][1],!B,!k)});return ae._ondirectionchange=function(oe){z=oe==="next"?(ee=K,_):(ee=X,S),U.sort(G)},ae._addAlgorithm(function(oe,ce,ve){for(var Ne,je=oe.key;ee(je);)if(++H===U.length)return ce(ve),!1;return!K(Ne=je)&&!X(Ne)||(y._cmp(je,U[H][1])===0||y._cmp(je,U[H][0])===0||ce(function(){z===_?oe.continue(U[H][0]):oe.continue(U[H][1])}),!1)}),ae},en.prototype.startsWithAnyOf=function(){var s=ht.apply(pt,arguments);return s.every(function(h){return typeof h=="string"})?s.length===0?Yr(this):this.inAnyRange(s.map(function(h){return[h,h+kr]})):Sr(this,"startsWithAnyOf() only works with strings")},en);function en(){}function zn(s){return Vt(function(h){return tt(h),s(h.target.error),!1})}function tt(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var fa="storagemutated",ut="x-storagemutated-1",zt=$r(null,fa),Fs=(nr.prototype._lock=function(){return Ce(!Ie.global),++this._reculock,this._reculock!==1||Ie.global||(Ie.lockOwnerFor=this),this},nr.prototype._unlock=function(){if(Ce(!Ie.global),--this._reculock==0)for(Ie.global||(Ie.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Gr(s[1],s[0])}catch{}}return this},nr.prototype._locked=function(){return this._reculock&&Ie.lockOwnerFor!==this},nr.prototype.create=function(s){var h=this;if(!this.mode)return this;var y=this.db.idbdb,x=this.db._state.dbOpenError;if(Ce(!this.idbtrans),!s&&!y)switch(x&&x.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(x);case"MissingAPIError":throw new Me.MissingAPI(x.message,x);default:throw new Me.OpenFailed(x)}if(!this.active)throw new Me.TransactionInactive;return Ce(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Vt(function(_){tt(_),h._reject(s.error)}),s.onabort=Vt(function(_){tt(_),h.active&&h._reject(new Me.Abort(s.error)),h.active=!1,h.on("abort").fire(_)}),s.oncomplete=Vt(function(){h.active=!1,h._resolve(),"mutatedParts"in s&&zt.storagemutated.fire(s.mutatedParts)}),this},nr.prototype._promise=function(s,h,y){var x=this;if(s==="readwrite"&&this.mode!=="readwrite")return st(new Me.ReadOnly("Transaction is readonly"));if(!this.active)return st(new Me.TransactionInactive);if(this._locked())return new ze(function(S,O){x._blockedFuncs.push([function(){x._promise(s,h,y).then(S,O)},Ie])});if(y)return rn(function(){var S=new ze(function(O,D){x._lock();var B=h(O,D,x);B&&B.then&&B.then(O,D)});return S.finally(function(){return x._unlock()}),S._lib=!0,S});var _=new ze(function(S,O){var D=h(S,O,x);D&&D.then&&D.then(S,O)});return _._lib=!0,_},nr.prototype._root=function(){return this.parent?this.parent._root():this},nr.prototype.waitFor=function(s){var h,y=this._root(),x=ze.resolve(s);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return x}):(y._waitingFor=x,y._waitingQueue=[],h=y.idbtrans.objectStore(y.storeNames[0]),(function S(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(h.get(-1/0).onsuccess=S)})());var _=y._waitingFor;return new ze(function(S,O){x.then(function(D){return y._waitingQueue.push(Vt(S.bind(null,D)))},function(D){return y._waitingQueue.push(Vt(O.bind(null,D)))}).finally(function(){y._waitingFor===_&&(y._waitingFor=null)})})},nr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Me.Abort))},nr.prototype.table=function(s){var h=this._memoizedTables||(this._memoizedTables={});if(N(h,s))return h[s];var y=this.schema[s];if(!y)throw new Me.NotFound("Table "+s+" not part of transaction");return y=new this.db.Table(s,y,this),y.core=this.db.core.table(s),h[s]=y},nr);function nr(){}function Xr(s,h,y,x,_,S,O,D){return{name:s,keyPath:h,unique:y,multi:x,auto:_,compound:S,src:(y&&!O?"&":"")+(x?"*":"")+(_?"++":"")+ei(h),type:D}}function ei(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function ha(s,h,y){return{name:s,primKey:h,indexes:y,mappedClass:null,idxByName:(x=function(_){return[_.name,_]},y.reduce(function(_,S,O){return O=x(S,O),O&&(_[O[0]]=O[1]),_},{}))};var x}var ti=function(s){try{return s.only([[]]),ti=function(){return[[]]},[[]]}catch{return ti=function(){return kr},kr}};function ni(s){return s==null?function(){}:typeof s=="string"?(h=s).split(".").length===1?function(y){return y[h]}:function(y){return Be(y,h)}:function(y){return Be(y,s)};var h}function di(s){return[].slice.call(s)}var Hs=0;function En(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Kr(s,h,B){function x(ee){if(ee.type===3)return null;if(ee.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var H=ee.lower,K=ee.upper,X=ee.lowerOpen,ee=ee.upperOpen;return H===void 0?K===void 0?null:h.upperBound(K,!!ee):K===void 0?h.lowerBound(H,!!X):h.bound(H,K,!!X,!!ee)}function _(G){var H,K=G.name;return{name:K,schema:G,mutate:function(X){var ee=X.trans,ae=X.type,oe=X.keys,ce=X.values,ve=X.range;return new Promise(function(Ne,je){Ne=Vt(Ne);var Re=ee.objectStore(K),ke=Re.keyPath==null,Pe=ae==="put"||ae==="add";if(!Pe&&ae!=="delete"&&ae!=="deleteRange")throw new Error("Invalid operation type: "+ae);var Le,qe=(oe||ce||{length:1}).length;if(oe&&ce&&oe.length!==ce.length)throw new Error("Given keys array must have same length as given values array.");if(qe===0)return Ne({numFailures:0,failures:{},results:[],lastResult:void 0});function it(ir){++gr,tt(ir)}var yt=[],_t=[],gr=0;if(ae==="deleteRange"){if(ve.type===4)return Ne({numFailures:gr,failures:_t,results:[],lastResult:void 0});ve.type===3?yt.push(Le=Re.clear()):yt.push(Le=Re.delete(x(ve)))}else{var ke=Pe?ke?[ce,oe]:[ce,null]:[oe,null],gt=ke[0],rr=ke[1];if(Pe)for(var Dn=0;Dn<qe;++Dn)yt.push(Le=rr&&rr[Dn]!==void 0?Re[ae](gt[Dn],rr[Dn]):Re[ae](gt[Dn])),Le.onerror=it;else for(Dn=0;Dn<qe;++Dn)yt.push(Le=Re[ae](gt[Dn])),Le.onerror=it}function Ks(ir){ir=ir.target.result,yt.forEach(function(ai,ll){return ai.error!=null&&(_t[ll]=ai.error)}),Ne({numFailures:gr,failures:_t,results:ae==="delete"?oe:yt.map(function(ai){return ai.result}),lastResult:ir})}Le.onerror=function(ir){it(ir),Ks(ir)},Le.onsuccess=Ks})},getMany:function(X){var ee=X.trans,ae=X.keys;return new Promise(function(oe,ce){oe=Vt(oe);for(var ve,Ne=ee.objectStore(K),je=ae.length,Re=new Array(je),ke=0,Pe=0,Le=function(yt){yt=yt.target,Re[yt._pos]=yt.result,++Pe===ke&&oe(Re)},qe=zn(ce),it=0;it<je;++it)ae[it]!=null&&((ve=Ne.get(ae[it]))._pos=it,ve.onsuccess=Le,ve.onerror=qe,++ke);ke===0&&oe(Re)})},get:function(X){var ee=X.trans,ae=X.key;return new Promise(function(oe,ce){oe=Vt(oe);var ve=ee.objectStore(K).get(ae);ve.onsuccess=function(Ne){return oe(Ne.target.result)},ve.onerror=zn(ce)})},query:(H=k,function(X){return new Promise(function(ee,ae){ee=Vt(ee);var oe,ce,ve,ke=X.trans,Ne=X.values,je=X.limit,Le=X.query,Re=je===1/0?void 0:je,Pe=Le.index,Le=Le.range,ke=ke.objectStore(K),Pe=Pe.isPrimaryKey?ke:ke.index(Pe.name),Le=x(Le);if(je===0)return ee({result:[]});H?((Re=Ne?Pe.getAll(Le,Re):Pe.getAllKeys(Le,Re)).onsuccess=function(qe){return ee({result:qe.target.result})},Re.onerror=zn(ae)):(oe=0,ce=!Ne&&"openKeyCursor"in Pe?Pe.openKeyCursor(Le):Pe.openCursor(Le),ve=[],ce.onsuccess=function(qe){var it=ce.result;return it?(ve.push(Ne?it.value:it.primaryKey),++oe===je?ee({result:ve}):void it.continue()):ee({result:ve})},ce.onerror=zn(ae))})}),openCursor:function(X){var ee=X.trans,ae=X.values,oe=X.query,ce=X.reverse,ve=X.unique;return new Promise(function(Ne,je){Ne=Vt(Ne);var Pe=oe.index,Re=oe.range,ke=ee.objectStore(K),ke=Pe.isPrimaryKey?ke:ke.index(Pe.name),Pe=ce?ve?"prevunique":"prev":ve?"nextunique":"next",Le=!ae&&"openKeyCursor"in ke?ke.openKeyCursor(x(Re),Pe):ke.openCursor(x(Re),Pe);Le.onerror=zn(je),Le.onsuccess=Vt(function(qe){var it,yt,_t,gr,gt=Le.result;gt?(gt.___id=++Hs,gt.done=!1,it=gt.continue.bind(gt),yt=(yt=gt.continuePrimaryKey)&&yt.bind(gt),_t=gt.advance.bind(gt),gr=function(){throw new Error("Cursor not stopped")},gt.trans=ee,gt.stop=gt.continue=gt.continuePrimaryKey=gt.advance=function(){throw new Error("Cursor not started")},gt.fail=Vt(je),gt.next=function(){var rr=this,Dn=1;return this.start(function(){return Dn--?rr.continue():rr.stop()}).then(function(){return rr})},gt.start=function(rr){function Dn(){if(Le.result)try{rr()}catch(ir){gt.fail(ir)}else gt.done=!0,gt.start=function(){throw new Error("Cursor behind last entry")},gt.stop()}var Ks=new Promise(function(ir,ai){ir=Vt(ir),Le.onerror=zn(ai),gt.fail=ai,gt.stop=function(ll){gt.stop=gt.continue=gt.continuePrimaryKey=gt.advance=gr,ir(ll)}});return Le.onsuccess=Vt(function(ir){Le.onsuccess=Dn,Dn()}),gt.continue=it,gt.continuePrimaryKey=yt,gt.advance=_t,Dn(),Ks},Ne(gt)):Ne(null)},je)})},count:function(X){var ee=X.query,ae=X.trans,oe=ee.index,ce=ee.range;return new Promise(function(ve,Ne){var je=ae.objectStore(K),Re=oe.isPrimaryKey?je:je.index(oe.name),je=x(ce),Re=je?Re.count(je):Re.count();Re.onsuccess=Vt(function(ke){return ve(ke.target.result)}),Re.onerror=zn(Ne)})}}}var S,O,D,U=(O=B,D=di((S=s).objectStoreNames),{schema:{name:S.name,tables:D.map(function(G){return O.objectStore(G)}).map(function(G){var H=G.keyPath,ee=G.autoIncrement,K=C(H),X={},ee={name:G.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:H==null,compound:K,keyPath:H,autoIncrement:ee,unique:!0,extractKey:ni(H)},indexes:di(G.indexNames).map(function(ae){return G.index(ae)}).map(function(ve){var oe=ve.name,ce=ve.unique,Ne=ve.multiEntry,ve=ve.keyPath,Ne={name:oe,compound:C(ve),keyPath:ve,unique:ce,multiEntry:Ne,extractKey:ni(ve)};return X[En(ve)]=Ne}),getIndexByKeyPath:function(ae){return X[En(ae)]}};return X[":id"]=ee.primaryKey,H!=null&&(X[En(H)]=ee.primaryKey),ee})},hasGetAll:0<D.length&&"getAll"in O.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),B=U.schema,k=U.hasGetAll,U=B.tables.map(_),z={};return U.forEach(function(G){return z[G.name]=G}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(G){if(!z[G])throw new Error("Table '".concat(G,"' not found"));return z[G]},MIN_KEY:-1/0,MAX_KEY:ti(h),schema:B}}function Wn(s,h,y,x){var _=y.IDBKeyRange;return y.indexedDB,{dbcore:(x=Kr(h,_,x),s.dbcore.reduce(function(S,O){return O=O.create,c(c({},S),O(S))},x))}}function gi(s,x){var y=x.db,x=Wn(s._middlewares,y,s._deps,x);s.core=x.dbcore,s.tables.forEach(function(_){var S=_.name;s.core.schema.tables.some(function(O){return O.name===S})&&(_.core=s.core.table(S),s[S]instanceof s.Table&&(s[S].core=_.core))})}function Oa(s,h,y,x){y.forEach(function(_){var S=x[_];h.forEach(function(O){var D=(function B(k,U){return J(k,U)||(k=E(k))&&B(k,U)})(O,_);(!D||"value"in D&&D.value===void 0)&&(O===s.Transaction.prototype||O instanceof s.Transaction?q(O,_,{get:function(){return this.table(_)},set:function(B){F(this,_,{value:B,writable:!0,configurable:!0,enumerable:!0})}}):O[_]=new s.Table(_,S))})})}function da(s,h){h.forEach(function(y){for(var x in y)y[x]instanceof s.Table&&delete y[x]})}function Vs(s,h){return s._cfg.version-h._cfg.version}function Na(s,h,y,x){var _=s._dbSchema;y.objectStoreNames.contains("$meta")&&!_.$meta&&(_.$meta=ha("$meta",wt("")[0],[]),s._storeNames.push("$meta"));var S=s._createTransaction("readwrite",s._storeNames,_);S.create(y),S._completion.catch(x);var O=S._reject.bind(S),D=Ie.transless||Ie;rn(function(){return Ie.trans=S,Ie.transless=D,h!==0?(gi(s,y),k=h,((B=S).storeNames.includes("$meta")?B.table("$meta").get("version").then(function(U){return U??k}):ze.resolve(k)).then(function(U){return G=U,H=S,K=y,X=[],U=(z=s)._versions,ee=z._dbSchema=ga(0,z.idbdb,K),(U=U.filter(function(ae){return ae._cfg.version>=G})).length!==0?(U.forEach(function(ae){X.push(function(){var oe=ee,ce=ae._cfg.dbschema;ge(z,oe,K),ge(z,ce,K),ee=z._dbSchema=ce;var ve=qt(oe,ce);ve.add.forEach(function(Pe){ns(K,Pe[0],Pe[1].primKey,Pe[1].indexes)}),ve.change.forEach(function(Pe){if(Pe.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var Le=K.objectStore(Pe.name);Pe.add.forEach(function(qe){return Wr(Le,qe)}),Pe.change.forEach(function(qe){Le.deleteIndex(qe.name),Wr(Le,qe)}),Pe.del.forEach(function(qe){return Le.deleteIndex(qe)})});var Ne=ae._cfg.contentUpgrade;if(Ne&&ae._cfg.version>G){gi(z,K),H._memoizedTables={};var je=Ge(ce);ve.del.forEach(function(Pe){je[Pe]=oe[Pe]}),da(z,[z.Transaction.prototype]),Oa(z,[z.Transaction.prototype],w(je),je),H.schema=je;var Re,ke=L(Ne);return ke&&Pt(),ve=ze.follow(function(){var Pe;(Re=Ne(H))&&ke&&(Pe=Un.bind(null,null),Re.then(Pe,Pe))}),Re&&typeof Re.then=="function"?ze.resolve(Re):ve.then(function(){return Re})}}),X.push(function(oe){var ce,ve,Ne=ae._cfg.dbschema;ce=Ne,ve=oe,[].slice.call(ve.db.objectStoreNames).forEach(function(je){return ce[je]==null&&ve.db.deleteObjectStore(je)}),da(z,[z.Transaction.prototype]),Oa(z,[z.Transaction.prototype],z._storeNames,z._dbSchema),H.schema=z._dbSchema}),X.push(function(oe){z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(z.idbdb.version/10)===ae._cfg.version?(z.idbdb.deleteObjectStore("$meta"),delete z._dbSchema.$meta,z._storeNames=z._storeNames.filter(function(ce){return ce!=="$meta"})):oe.objectStore("$meta").put(ae._cfg.version,"version"))})}),(function ae(){return X.length?ze.resolve(X.shift()(H.idbtrans)).then(ae):ze.resolve()})().then(function(){Ra(ee,K)})):ze.resolve();var z,G,H,K,X,ee}).catch(O)):(w(_).forEach(function(U){ns(y,U,_[U].primKey,_[U].indexes)}),gi(s,y),void ze.follow(function(){return s.on.populate.fire(S)}).catch(O));var B,k})}function ts(s,h){Ra(s._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var y=ga(0,s.idbdb,h);ge(s,s._dbSchema,h);for(var x=0,_=qt(y,s._dbSchema).change;x<_.length;x++){var S=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=h.objectStore(O.name);O.add.forEach(function(B){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(B.src)),Wr(D,B)})})(_[x]);if(typeof S=="object")return S.value}}function qt(s,h){var y,x={del:[],add:[],change:[]};for(y in s)h[y]||x.del.push(y);for(y in h){var _=s[y],S=h[y];if(_){var O={name:y,def:S,recreate:!1,del:[],add:[],change:[]};if(""+(_.primKey.keyPath||"")!=""+(S.primKey.keyPath||"")||_.primKey.auto!==S.primKey.auto)O.recreate=!0,x.change.push(O);else{var D=_.idxByName,B=S.idxByName,k=void 0;for(k in D)B[k]||O.del.push(k);for(k in B){var U=D[k],z=B[k];U?U.src!==z.src&&O.change.push(z):O.add.push(z)}(0<O.del.length||0<O.add.length||0<O.change.length)&&x.change.push(O)}}else x.add.push([y,S])}return x}function ns(s,h,y,x){var _=s.db.createObjectStore(h,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return x.forEach(function(S){return Wr(_,S)}),_}function Ra(s,h){w(s).forEach(function(y){h.db.objectStoreNames.contains(y)||(Fe&&console.debug("Dexie: Creating missing table",y),ns(h,y,s[y].primKey,s[y].indexes))})}function Wr(s,h){s.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function ga(s,h,y){var x={};return se(h.objectStoreNames,0).forEach(function(_){for(var S=y.objectStore(_),O=Xr(ei(k=S.keyPath),k||"",!0,!1,!!S.autoIncrement,k&&typeof k!="string",!0),D=[],B=0;B<S.indexNames.length;++B){var U=S.index(S.indexNames[B]),k=U.keyPath,U=Xr(U.name,k,!!U.unique,!!U.multiEntry,!1,k&&typeof k!="string",!1);D.push(U)}x[_]=ha(_,O,D)}),x}function ge(s,h,y){for(var x=y.db.objectStoreNames,_=0;_<x.length;++_){var S=x[_],O=y.objectStore(S);s._hasGetAll="getAll"in O;for(var D=0;D<O.indexNames.length;++D){var B=O.indexNames[D],k=O.index(B).keyPath,U=typeof k=="string"?k:"["+se(k).join("+")+"]";!h[S]||(k=h[S].idxByName[U])&&(k.name=B,delete h[S].idxByName[U],h[S].idxByName[B]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&m.WorkerGlobalScope&&m instanceof m.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function wt(s){return s.split(",").map(function(h,y){var S=h.split(":"),x=(_=S[1])===null||_===void 0?void 0:_.trim(),_=(h=S[0].trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return Xr(_,S||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),C(S),y===0,x)})}var Qn=(pi.prototype._createTableSchema=ha,pi.prototype._parseIndexSyntax=wt,pi.prototype._parseStoresSpec=function(s,h){var y=this;w(s).forEach(function(x){if(s[x]!==null){var _=y._parseIndexSyntax(s[x]),S=_.shift();if(!S)throw new Me.Schema("Invalid schema for table "+x+": "+s[x]);if(S.unique=!0,S.multi)throw new Me.Schema("Primary key cannot be multiEntry*");_.forEach(function(O){if(O.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string")}),_=y._createTableSchema(x,S,_),h[x]=_}})},pi.prototype.stores=function(y){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?T(this._cfg.storesSource,y):y;var y=h._versions,x={},_={};return y.forEach(function(S){T(x,S._cfg.storesSource),_=S._cfg.dbschema={},S._parseStoresSpec(x,_)}),h._dbSchema=_,da(h,[h._allTables,h,h.Transaction.prototype]),Oa(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],w(_),_),h._storeNames=w(_),this},pi.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Mi(this._cfg.contentUpgrade||Mt,s),this},pi);function pi(){}function rs(s,h){var y=s._dbNamesDB;return y||(y=s._dbNamesDB=new ri(Ta,{addons:[],indexedDB:s,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function is(s){return s&&typeof s.databases=="function"}function qs(s){return rn(function(){return Ie.letThrough=!0,s()})}function Gs(s){return!("from"in s)}var Fn=function(s,h){if(!this){var y=new Fn;return s&&"d"in s&&T(y,s),y}T(this,arguments.length?{d:1,from:s,to:1<arguments.length?h:s}:{d:0})};function yn(s,h,y){var x=xt(h,y);if(!isNaN(x)){if(0<x)throw RangeError();if(Gs(s))return T(s,{from:h,to:y,d:1});var _=s.l,x=s.r;if(xt(y,s.from)<0)return _?yn(_,h,y):s.l={from:h,to:y,d:1,l:null,r:null},Bi(s);if(0<xt(h,s.to))return x?yn(x,h,y):s.r={from:h,to:y,d:1,l:null,r:null},Bi(s);xt(h,s.from)<0&&(s.from=h,s.l=null,s.d=x?x.d+1:1),0<xt(y,s.to)&&(s.to=y,s.r=null,s.d=s.l?s.l.d+1:1),y=!s.r,_&&!s.l&&mi(s,_),x&&y&&mi(s,x)}}function mi(s,h){Gs(h)||(function y(x,B){var S=B.from,O=B.to,D=B.l,B=B.r;yn(x,S,O),D&&y(x,D),B&&y(x,B)})(s,h)}function vn(s,h){var y=Zi(h),x=y.next();if(x.done)return!1;for(var _=x.value,S=Zi(s),O=S.next(_.from),D=O.value;!x.done&&!O.done;){if(xt(D.from,_.to)<=0&&0<=xt(D.to,_.from))return!0;xt(_.from,D.from)<0?_=(x=y.next(D.from)).value:D=(O=S.next(_.from)).value}return!1}function Zi(s){var h=Gs(s)?null:{s:0,n:s};return{next:function(y){for(var x=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,x)for(;h.n.l&&xt(y,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!x||xt(y,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Bi(s){var h,y,x=(((h=s.r)===null||h===void 0?void 0:h.d)||0)-(((y=s.l)===null||y===void 0?void 0:y.d)||0),_=1<x?"r":x<-1?"l":"";_&&(h=_=="r"?"l":"r",y=c({},s),x=s[_],s.from=x.from,s.to=x.to,s[_]=x[_],y[_]=x[h],(s[h]=y).d=Wt(y)),s.d=Wt(s)}function Wt(y){var h=y.r,y=y.l;return(h?y?Math.max(h.d,y.d):h.d:y?y.d:0)+1}function nt(s,h){return w(h).forEach(function(y){s[y]?mi(s[y],h[y]):s[y]=(function x(_){var S,O,D={};for(S in _)N(_,S)&&(O=_[S],D[S]=!O||typeof O!="object"||Nt.has(O.constructor)?O:x(O));return D})(h[y])}),s}function Ys(s,h){return s.all||h.all||Object.keys(s).some(function(y){return h[y]&&vn(h[y],s[y])})}P(Fn.prototype,((ft={add:function(s){return mi(this,s),this},addKey:function(s){return yn(this,s,s),this},addKeys:function(s){var h=this;return s.forEach(function(y){return yn(h,y,y)}),this},hasKey:function(s){var h=Zi(this).next(s).value;return h&&xt(h.from,s)<=0&&0<=xt(h.to,s)}})[he]=function(){return Zi(this)},ft));var Gt={},yi={},Li=!1;function as(s){nt(yi,s),Li||(Li=!0,setTimeout(function(){Li=!1,Ur(yi,!(yi={}))},0))}function Ur(s,h){h===void 0&&(h=!1);var y=new Set;if(s.all)for(var x=0,_=Object.values(Gt);x<_.length;x++)ss(O=_[x],s,y,h);else for(var S in s){var O,D=/^idb\:\/\/(.*)\/(.*)\//.exec(S);D&&(S=D[1],D=D[2],(O=Gt["idb://".concat(S,"/").concat(D)])&&ss(O,s,y,h))}y.forEach(function(B){return B()})}function ss(s,h,y,x){for(var _=[],S=0,O=Object.entries(s.queries.query);S<O.length;S++){for(var D=O[S],B=D[0],k=[],U=0,z=D[1];U<z.length;U++){var G=z[U];Ys(h,G.obsSet)?G.subscribers.forEach(function(ee){return y.add(ee)}):x&&k.push(G)}x&&_.push([B,k])}if(x)for(var H=0,K=_;H<K.length;H++){var X=K[H],B=X[0],k=X[1];s.queries.query[B]=k}}function vo(s){var h=s._state,y=s._deps.indexedDB;if(h.isBeingOpened||s.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?st(h.dbOpenError):s});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var x=h.openCanceller,_=Math.round(10*s.verno),S=!1;function O(){if(h.openCanceller!==x)throw new Me.DatabaseClosed("db.open() was cancelled")}function D(){return new ze(function(G,H){if(O(),!y)throw new Me.MissingAPI;var K=s.name,X=h.autoSchema||!_?y.open(K):y.open(K,_);if(!X)throw new Me.MissingAPI;X.onerror=zn(H),X.onblocked=Vt(s._fireOnBlocked),X.onupgradeneeded=Vt(function(ee){var ae;U=X.transaction,h.autoSchema&&!s._options.allowEmptyDB?(X.onerror=tt,U.abort(),X.result.close(),(ae=y.deleteDatabase(K)).onsuccess=ae.onerror=Vt(function(){H(new Me.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(U.onerror=zn(H),ee=ee.oldVersion>Math.pow(2,62)?0:ee.oldVersion,z=ee<1,s.idbdb=X.result,S&&ts(s,U),Na(s,ee/10,U,H))},H),X.onsuccess=Vt(function(){U=null;var ee,ae,oe,ce,ve,Ne=s.idbdb=X.result,je=se(Ne.objectStoreNames);if(0<je.length)try{var Re=Ne.transaction((ce=je).length===1?ce[0]:ce,"readonly");if(h.autoSchema)ae=Ne,oe=Re,(ee=s).verno=ae.version/10,oe=ee._dbSchema=ga(0,ae,oe),ee._storeNames=se(ae.objectStoreNames,0),Oa(ee,[ee._allTables],w(oe),oe);else if(ge(s,s._dbSchema,Re),((ve=qt(ga(0,(ve=s).idbdb,Re),ve._dbSchema)).add.length||ve.change.some(function(ke){return ke.add.length||ke.change.length}))&&!S)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ne.close(),_=Ne.version+1,S=!0,G(D());gi(s,Re)}catch{}Te.push(s),Ne.onversionchange=Vt(function(ke){h.vcFired=!0,s.on("versionchange").fire(ke)}),Ne.onclose=Vt(function(){s.close({disableAutoOpen:!1})}),z&&(ve=s._deps,Re=K,Ne=ve.indexedDB,ve=ve.IDBKeyRange,is(Ne)||Re===Ta||rs(Ne,ve).put({name:Re}).catch(Mt)),G()},H)}).catch(function(G){switch(G?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<_)return _=0,D()}return ze.reject(G)})}var B,k=h.dbReadyResolve,U=null,z=!1;return ze.race([x,(typeof navigator>"u"?ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(G){function H(){return indexedDB.databases().finally(G)}B=setInterval(H,100),H()}).finally(function(){return clearInterval(B)}):Promise.resolve()).then(D)]).then(function(){return O(),h.onReadyBeingFired=[],ze.resolve(qs(function(){return s.on.ready.fire(s.vip)})).then(function G(){if(0<h.onReadyBeingFired.length){var H=h.onReadyBeingFired.reduce(Mi,Mt);return h.onReadyBeingFired=[],ze.resolve(qs(function(){return H(s.vip)})).then(G)}})}).finally(function(){h.openCanceller===x&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(G){h.dbOpenError=G;try{U&&U.abort()}catch{}return x===h.openCanceller&&s._close(),st(G)}).finally(function(){h.openComplete=!0,k()}).then(function(){var G;return z&&(G={},s.tables.forEach(function(H){H.schema.indexes.forEach(function(K){K.name&&(G["idb://".concat(s.name,"/").concat(H.name,"/").concat(K.name)]=new Fn(-1/0,[[[]]]))}),G["idb://".concat(s.name,"/").concat(H.name,"/")]=G["idb://".concat(s.name,"/").concat(H.name,"/:dels")]=new Fn(-1/0,[[[]]])}),zt(fa).fire(G),Ur(G,!0)),s})}function Ji(s){function h(S){return s.next(S)}var y=_(h),x=_(function(S){return s.throw(S)});function _(S){return function(B){var D=S(B),B=D.value;return D.done?B:B&&typeof B.then=="function"?B.then(y,x):C(B)?Promise.all(B).then(y,x):y(B)}}return _(h)()}function vi(s,h,y){for(var x=C(s)?s.slice():[s],_=0;_<y;++_)x.push(h);return x}var xo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return c(c({},s),{table:function(h){var y=s.table(h),x=y.schema,_={},S=[];function O(z,G,H){var K=En(z),X=_[K]=_[K]||[],ee=z==null?0:typeof z=="string"?1:z.length,ae=0<G,ae=c(c({},H),{name:ae?"".concat(K,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:ae,keyTail:G,keyLength:ee,extractKey:ni(z),unique:!ae&&H.unique});return X.push(ae),ae.isPrimaryKey||S.push(ae),1<ee&&O(ee===2?z[0]:z.slice(0,ee-1),G+1,H),X.sort(function(oe,ce){return oe.keyTail-ce.keyTail}),ae}h=O(x.primaryKey.keyPath,0,x.primaryKey),_[":id"]=[h];for(var D=0,B=x.indexes;D<B.length;D++){var k=B[D];O(k.keyPath,0,k)}function U(z){var G,H=z.query.index;return H.isVirtual?c(c({},z),{query:{index:H.lowLevelIndex,range:(G=z.query.range,H=H.keyTail,{type:G.type===1?2:G.type,lower:vi(G.lower,G.lowerOpen?s.MAX_KEY:s.MIN_KEY,H),lowerOpen:!0,upper:vi(G.upper,G.upperOpen?s.MIN_KEY:s.MAX_KEY,H),upperOpen:!0})}}):z}return c(c({},y),{schema:c(c({},x),{primaryKey:h,indexes:S,getIndexByKeyPath:function(z){return(z=_[En(z)])&&z[0]}}),count:function(z){return y.count(U(z))},query:function(z){return y.query(U(z))},openCursor:function(z){var G=z.query.index,H=G.keyTail,K=G.isVirtual,X=G.keyLength;return K?y.openCursor(U(z)).then(function(ae){return ae&&ee(ae)}):y.openCursor(z);function ee(ae){return Object.create(ae,{continue:{value:function(oe){oe!=null?ae.continue(vi(oe,z.reverse?s.MAX_KEY:s.MIN_KEY,H)):z.unique?ae.continue(ae.key.slice(0,X).concat(z.reverse?s.MIN_KEY:s.MAX_KEY,H)):ae.continue()}},continuePrimaryKey:{value:function(oe,ce){ae.continuePrimaryKey(vi(oe,s.MAX_KEY,H),ce)}},primaryKey:{get:function(){return ae.primaryKey}},key:{get:function(){var oe=ae.key;return X===1?oe[0]:oe.slice(0,X)}},value:{get:function(){return ae.value}}})}}})}})}};function os(s,h,y,x){return y=y||{},x=x||"",w(s).forEach(function(_){var S,O,D;N(h,_)?(S=s[_],O=h[_],typeof S=="object"&&typeof O=="object"&&S&&O?(D=pe(S))!==pe(O)?y[x+_]=h[_]:D==="Object"?os(S,O,y,x+_+"."):S!==O&&(y[x+_]=h[_]):S!==O&&(y[x+_]=h[_])):y[x+_]=void 0}),w(h).forEach(function(_){N(s,_)||(y[x+_]=h[_])}),y}function xi(s,h){return h.type==="delete"?h.keys:h.keys||h.values.map(s.extractKey)}var ls={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return c(c({},s),{table:function(h){var y=s.table(h),x=y.schema.primaryKey;return c(c({},y),{mutate:function(_){var S=Ie.trans,O=S.table(h).hook,D=O.deleting,B=O.creating,k=O.updating;switch(_.type){case"add":if(B.fire===Mt)break;return S._promise("readwrite",function(){return U(_)},!0);case"put":if(B.fire===Mt&&k.fire===Mt)break;return S._promise("readwrite",function(){return U(_)},!0);case"delete":if(D.fire===Mt)break;return S._promise("readwrite",function(){return U(_)},!0);case"deleteRange":if(D.fire===Mt)break;return S._promise("readwrite",function(){return(function z(G,H,K){return y.query({trans:G,values:!1,query:{index:x,range:H},limit:K}).then(function(X){var ee=X.result;return U({type:"delete",keys:ee,trans:G}).then(function(ae){return 0<ae.numFailures?Promise.reject(ae.failures[0]):ee.length<K?{failures:[],numFailures:0,lastResult:void 0}:z(G,c(c({},H),{lower:ee[ee.length-1],lowerOpen:!0}),K)})})})(_.trans,_.range,1e4)},!0)}return y.mutate(_);function U(z){var G,H,K,X=Ie.trans,ee=z.keys||xi(x,z);if(!ee)throw new Error("Keys missing");return(z=z.type==="add"||z.type==="put"?c(c({},z),{keys:ee}):c({},z)).type!=="delete"&&(z.values=v([],z.values)),z.keys&&(z.keys=v([],z.keys)),G=y,K=ee,((H=z).type==="add"?Promise.resolve([]):G.getMany({trans:H.trans,keys:K,cache:"immutable"})).then(function(ae){var oe=ee.map(function(ce,ve){var Ne,je,Re,ke=ae[ve],Pe={onerror:null,onsuccess:null};return z.type==="delete"?D.fire.call(Pe,ce,ke,X):z.type==="add"||ke===void 0?(Ne=B.fire.call(Pe,ce,z.values[ve],X),ce==null&&Ne!=null&&(z.keys[ve]=ce=Ne,x.outbound||te(z.values[ve],x.keyPath,ce))):(Ne=os(ke,z.values[ve]),(je=k.fire.call(Pe,Ne,ce,ke,X))&&(Re=z.values[ve],Object.keys(je).forEach(function(Le){N(Re,Le)?Re[Le]=je[Le]:te(Re,Le,je[Le])}))),Pe});return y.mutate(z).then(function(ce){for(var ve=ce.failures,Ne=ce.results,je=ce.numFailures,ce=ce.lastResult,Re=0;Re<ee.length;++Re){var ke=(Ne||ee)[Re],Pe=oe[Re];ke==null?Pe.onerror&&Pe.onerror(ve[Re]):Pe.onsuccess&&Pe.onsuccess(z.type==="put"&&ae[Re]?z.values[Re]:ke)}return{failures:ve,results:Ne,numFailures:je,lastResult:ce}}).catch(function(ce){return oe.forEach(function(ve){return ve.onerror&&ve.onerror(ce)}),Promise.reject(ce)})})}}})}})}};function Xs(s,h,y){try{if(!h||h.keys.length<s.length)return null;for(var x=[],_=0,S=0;_<h.keys.length&&S<s.length;++_)xt(h.keys[_],s[S])===0&&(x.push(y?ot(h.values[_]):h.values[_]),++S);return x.length===s.length?x:null}catch{return null}}var pa={stack:"dbcore",level:-1,create:function(s){return{table:function(h){var y=s.table(h);return c(c({},y),{getMany:function(x){if(!x.cache)return y.getMany(x);var _=Xs(x.keys,x.trans._cache,x.cache==="clone");return _?ze.resolve(_):y.getMany(x).then(function(S){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?ot(S):S},S})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),y.mutate(x)}})}}}};function $i(s,h){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function wi(s,h){switch(s){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var us={stack:"dbcore",level:0,name:"Observability",create:function(s){var h=s.schema.name,y=new Fn(s.MIN_KEY,s.MAX_KEY);return c(c({},s),{transaction:function(x,_,S){if(Ie.subscr&&_!=="readonly")throw new Me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ie.querier));return s.transaction(x,_,S)},table:function(x){var _=s.table(x),S=_.schema,O=S.primaryKey,z=S.indexes,D=O.extractKey,B=O.outbound,k=O.autoIncrement&&z.filter(function(H){return H.compound&&H.keyPath.includes(O.keyPath)}),U=c(c({},_),{mutate:function(H){function K(Le){return Le="idb://".concat(h,"/").concat(x,"/").concat(Le),ce[Le]||(ce[Le]=new Fn)}var X,ee,ae,oe=H.trans,ce=H.mutatedParts||(H.mutatedParts={}),ve=K(""),Ne=K(":dels"),je=H.type,Pe=H.type==="deleteRange"?[H.range]:H.type==="delete"?[H.keys]:H.values.length<50?[xi(O,H).filter(function(Le){return Le}),H.values]:[],Re=Pe[0],ke=Pe[1],Pe=H.trans._cache;return C(Re)?(ve.addKeys(Re),(Pe=je==="delete"||Re.length===ke.length?Xs(Re,Pe):null)||Ne.addKeys(Re),(Pe||ke)&&(X=K,ee=Pe,ae=ke,S.indexes.forEach(function(Le){var qe=X(Le.name||"");function it(_t){return _t!=null?Le.extractKey(_t):null}function yt(_t){return Le.multiEntry&&C(_t)?_t.forEach(function(gr){return qe.addKey(gr)}):qe.addKey(_t)}(ee||ae).forEach(function(_t,rr){var gt=ee&&it(ee[rr]),rr=ae&&it(ae[rr]);xt(gt,rr)!==0&&(gt!=null&&yt(gt),rr!=null&&yt(rr))})}))):Re?(ke={from:(ke=Re.lower)!==null&&ke!==void 0?ke:s.MIN_KEY,to:(ke=Re.upper)!==null&&ke!==void 0?ke:s.MAX_KEY},Ne.add(ke),ve.add(ke)):(ve.add(y),Ne.add(y),S.indexes.forEach(function(Le){return K(Le.name).add(y)})),_.mutate(H).then(function(Le){return!Re||H.type!=="add"&&H.type!=="put"||(ve.addKeys(Le.results),k&&k.forEach(function(qe){for(var it=H.values.map(function(gt){return qe.extractKey(gt)}),yt=qe.keyPath.findIndex(function(gt){return gt===O.keyPath}),_t=0,gr=Le.results.length;_t<gr;++_t)it[_t][yt]=Le.results[_t];K(qe.name).addKeys(it)})),oe.mutatedParts=nt(oe.mutatedParts||{},ce),Le})}}),z=function(K){var X=K.query,K=X.index,X=X.range;return[K,new Fn((K=X.lower)!==null&&K!==void 0?K:s.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:s.MAX_KEY)]},G={get:function(H){return[O,new Fn(H.key)]},getMany:function(H){return[O,new Fn().addKeys(H.keys)]},count:z,query:z,openCursor:z};return w(G).forEach(function(H){U[H]=function(K){var X=Ie.subscr,ee=!!X,ae=$i(Ie,_)&&wi(H,K)?K.obsSet={}:X;if(ee){var oe=function(ke){return ke="idb://".concat(h,"/").concat(x,"/").concat(ke),ae[ke]||(ae[ke]=new Fn)},ce=oe(""),ve=oe(":dels"),X=G[H](K),ee=X[0],X=X[1];if((H==="query"&&ee.isPrimaryKey&&!K.values?ve:oe(ee.name||"")).add(X),!ee.isPrimaryKey){if(H!=="count"){var Ne=H==="query"&&B&&K.values&&_.query(c(c({},K),{values:!1}));return _[H].apply(this,arguments).then(function(ke){if(H==="query"){if(B&&K.values)return Ne.then(function(it){return it=it.result,ce.addKeys(it),ke});var Pe=K.values?ke.result.map(D):ke.result;(K.values?ce:ve).addKeys(Pe)}else if(H==="openCursor"){var Le=ke,qe=K.values;return Le&&Object.create(Le,{key:{get:function(){return ve.addKey(Le.primaryKey),Le.key}},primaryKey:{get:function(){var it=Le.primaryKey;return ve.addKey(it),it}},value:{get:function(){return qe&&ce.addKey(Le.primaryKey),Le.value}}})}return ke})}ve.add(y)}}return _[H].apply(this,arguments)}}),U}})}};function Cr(s,h,y){if(y.numFailures===0)return h;if(h.type==="deleteRange")return null;var x=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return y.numFailures===x?null:(h=c({},h),C(h.keys)&&(h.keys=h.keys.filter(function(_,S){return!(S in y.failures)})),"values"in h&&C(h.values)&&(h.values=h.values.filter(function(_,S){return!(S in y.failures)})),h)}function Ia(s,h){return y=s,((x=h).lower===void 0||(x.lowerOpen?0<xt(y,x.lower):0<=xt(y,x.lower)))&&(s=s,(h=h).upper===void 0||(h.upperOpen?xt(s,h.upper)<0:xt(s,h.upper)<=0));var y,x}function zr(s,h,G,x,_,S){if(!G||G.length===0)return s;var O=h.query.index,D=O.multiEntry,B=h.query.range,k=x.schema.primaryKey.extractKey,U=O.extractKey,z=(O.lowLevelIndex||O).extractKey,G=G.reduce(function(H,K){var X=H,ee=[];if(K.type==="add"||K.type==="put")for(var ae=new Fn,oe=K.values.length-1;0<=oe;--oe){var ce,ve=K.values[oe],Ne=k(ve);ae.hasKey(Ne)||(ce=U(ve),(D&&C(ce)?ce.some(function(Le){return Ia(Le,B)}):Ia(ce,B))&&(ae.addKey(Ne),ee.push(ve)))}switch(K.type){case"add":var je=new Fn().addKeys(h.values?H.map(function(qe){return k(qe)}):H),X=H.concat(h.values?ee.filter(function(qe){return qe=k(qe),!je.hasKey(qe)&&(je.addKey(qe),!0)}):ee.map(function(qe){return k(qe)}).filter(function(qe){return!je.hasKey(qe)&&(je.addKey(qe),!0)}));break;case"put":var Re=new Fn().addKeys(K.values.map(function(qe){return k(qe)}));X=H.filter(function(qe){return!Re.hasKey(h.values?k(qe):qe)}).concat(h.values?ee:ee.map(function(qe){return k(qe)}));break;case"delete":var ke=new Fn().addKeys(K.keys);X=H.filter(function(qe){return!ke.hasKey(h.values?k(qe):qe)});break;case"deleteRange":var Pe=K.range;X=H.filter(function(qe){return!Ia(k(qe),Pe)})}return X},s);return G===s?s:(G.sort(function(H,K){return xt(z(H),z(K))||xt(k(H),k(K))}),h.limit&&h.limit<1/0&&(G.length>h.limit?G.length=h.limit:s.length===h.limit&&G.length<h.limit&&(_.dirty=!0)),S?Object.freeze(G):G)}function ma(s,h){return xt(s.lower,h.lower)===0&&xt(s.upper,h.upper)===0&&!!s.lowerOpen==!!h.lowerOpen&&!!s.upperOpen==!!h.upperOpen}function ea(s,h){return(function(y,x,_,S){if(y===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=xt(y,x))===0){if(_&&S)return 0;if(_)return 1;if(S)return-1}return x})(s.lower,h.lower,s.lowerOpen,h.lowerOpen)<=0&&0<=(function(y,x,_,S){if(y===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=xt(y,x))===0){if(_&&S)return 0;if(_)return-1;if(S)return 1}return x})(s.upper,h.upper,s.upperOpen,h.upperOpen)}function ol(s,h,y,x){s.subscribers.add(y),x.addEventListener("abort",function(){var _,S;s.subscribers.delete(y),s.subscribers.size===0&&(_=s,S=h,setTimeout(function(){_.subscribers.size===0&&Ze(S,_)},3e3))})}var Da={stack:"dbcore",level:0,name:"Cache",create:function(s){var h=s.schema.name;return c(c({},s),{transaction:function(y,x,_){var S,O,D=s.transaction(y,x,_);return x==="readwrite"&&(O=(S=new AbortController).signal,_=function(B){return function(){if(S.abort(),x==="readwrite"){for(var k=new Set,U=0,z=y;U<z.length;U++){var G=z[U],H=Gt["idb://".concat(h,"/").concat(G)];if(H){var K=s.table(G),X=H.optimisticOps.filter(function(qe){return qe.trans===D});if(D._explicit&&B&&D.mutatedParts)for(var ee=0,ae=Object.values(H.queries.query);ee<ae.length;ee++)for(var oe=0,ce=(je=ae[ee]).slice();oe<ce.length;oe++)Ys((Re=ce[oe]).obsSet,D.mutatedParts)&&(Ze(je,Re),Re.subscribers.forEach(function(qe){return k.add(qe)}));else if(0<X.length){H.optimisticOps=H.optimisticOps.filter(function(qe){return qe.trans!==D});for(var ve=0,Ne=Object.values(H.queries.query);ve<Ne.length;ve++)for(var je,Re,ke,Pe=0,Le=(je=Ne[ve]).slice();Pe<Le.length;Pe++)(Re=Le[Pe]).res!=null&&D.mutatedParts&&(B&&!Re.dirty?(ke=Object.isFrozen(Re.res),ke=zr(Re.res,Re.req,X,K,Re,ke),Re.dirty?(Ze(je,Re),Re.subscribers.forEach(function(qe){return k.add(qe)})):ke!==Re.res&&(Re.res=ke,Re.promise=ze.resolve({result:ke}))):(Re.dirty&&Ze(je,Re),Re.subscribers.forEach(function(qe){return k.add(qe)})))}}}k.forEach(function(qe){return qe()})}}},D.addEventListener("abort",_(!1),{signal:O}),D.addEventListener("error",_(!1),{signal:O}),D.addEventListener("complete",_(!0),{signal:O})),D},table:function(y){var x=s.table(y),_=x.schema.primaryKey;return c(c({},x),{mutate:function(S){var O=Ie.trans;if(_.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return x.mutate(S);var D=Gt["idb://".concat(h,"/").concat(y)];return D?(O=x.mutate(S),S.type!=="add"&&S.type!=="put"||!(50<=S.values.length||xi(_,S).some(function(B){return B==null}))?(D.optimisticOps.push(S),S.mutatedParts&&as(S.mutatedParts),O.then(function(B){0<B.numFailures&&(Ze(D.optimisticOps,S),(B=Cr(0,S,B))&&D.optimisticOps.push(B),S.mutatedParts&&as(S.mutatedParts))}),O.catch(function(){Ze(D.optimisticOps,S),S.mutatedParts&&as(S.mutatedParts)})):O.then(function(B){var k=Cr(0,c(c({},S),{values:S.values.map(function(U,z){var G;return B.failures[z]?U:(U=(G=_.keyPath)!==null&&G!==void 0&&G.includes(".")?ot(U):c({},U),te(U,_.keyPath,B.results[z]),U)})}),B);D.optimisticOps.push(k),queueMicrotask(function(){return S.mutatedParts&&as(S.mutatedParts)})}),O):x.mutate(S)},query:function(S){if(!$i(Ie,x)||!wi("query",S))return x.query(S);var O=((k=Ie.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",z=Ie,D=z.requery,B=z.signal,k=(function(K,X,ee,ae){var oe=Gt["idb://".concat(K,"/").concat(X)];if(!oe)return[];if(!(X=oe.queries[ee]))return[null,!1,oe,null];var ce=X[(ae.query?ae.query.index.name:null)||""];if(!ce)return[null,!1,oe,null];switch(ee){case"query":var ve=ce.find(function(Ne){return Ne.req.limit===ae.limit&&Ne.req.values===ae.values&&ma(Ne.req.query.range,ae.query.range)});return ve?[ve,!0,oe,ce]:[ce.find(function(Ne){return("limit"in Ne.req?Ne.req.limit:1/0)>=ae.limit&&(!ae.values||Ne.req.values)&&ea(Ne.req.query.range,ae.query.range)}),!1,oe,ce];case"count":return ve=ce.find(function(Ne){return ma(Ne.req.query.range,ae.query.range)}),[ve,!!ve,oe,ce]}})(h,y,"query",S),U=k[0],z=k[1],G=k[2],H=k[3];return U&&z?U.obsSet=S.obsSet:(z=x.query(S).then(function(K){var X=K.result;if(U&&(U.res=X),O){for(var ee=0,ae=X.length;ee<ae;++ee)Object.freeze(X[ee]);Object.freeze(X)}else K.result=ot(X);return K}).catch(function(K){return H&&U&&Ze(H,U),Promise.reject(K)}),U={obsSet:S.obsSet,promise:z,subscribers:new Set,type:"query",req:S,dirty:!1},H?H.push(U):(H=[U],(G=G||(Gt["idb://".concat(h,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[S.query.index.name||""]=H)),ol(U,H,D,B),U.promise.then(function(K){return{result:zr(K.result,S,G?.optimisticOps,x,U,O)}})}})}})}};function dr(s,h){return new Proxy(s,{get:function(y,x,_){return x==="db"?h:Reflect.get(y,x,_)}})}var ri=(sn.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Me.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var h=this._versions,y=h.filter(function(x){return x._cfg.version===s})[0];return y||(y=new this.Version(s),h.push(y),h.sort(Vs),y.stores({}),this._state.autoSchema=!1,y)},sn.prototype._whenReady=function(s){var h=this;return this.idbdb&&(this._state.openComplete||Ie.letThrough||this._vip)?s():new ze(function(y,x){if(h._state.openComplete)return x(new Me.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void x(new Me.DatabaseClosed);h.open().catch(Mt)}h._state.dbReadyPromise.then(y,x)}).then(s)},sn.prototype.use=function(s){var h=s.stack,y=s.create,x=s.level,_=s.name;return _&&this.unuse({stack:h,name:_}),s=this._middlewares[h]||(this._middlewares[h]=[]),s.push({stack:h,create:y,level:x??10,name:_}),s.sort(function(S,O){return S.level-O.level}),this},sn.prototype.unuse=function(s){var h=s.stack,y=s.name,x=s.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(_){return x?_.create!==x:!!y&&_.name!==y})),this},sn.prototype.open=function(){var s=this;return Gr(Bt,function(){return vo(s)})},sn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,h=Te.indexOf(this);if(0<=h&&Te.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ze(function(y){s.dbReadyResolve=y}),s.openCanceller=new ze(function(y,x){s.cancelOpen=x}))},sn.prototype.close=function(y){var h=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;h?(y.isBeingOpened&&y.cancelOpen(new Me.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Me.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},sn.prototype.delete=function(s){var h=this;s===void 0&&(s={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new ze(function(_,S){function O(){h.close(s);var D=h._deps.indexedDB.deleteDatabase(h.name);D.onsuccess=Vt(function(){var B,k,U;B=h._deps,k=h.name,U=B.indexedDB,B=B.IDBKeyRange,is(U)||k===Ta||rs(U,B).delete(k).catch(Mt),_()}),D.onerror=zn(S),D.onblocked=h._fireOnBlocked}if(y)throw new Me.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(O):O()})},sn.prototype.backendDB=function(){return this.idbdb},sn.prototype.isOpen=function(){return this.idbdb!==null},sn.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},sn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},sn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(sn.prototype,"tables",{get:function(){var s=this;return w(this._allTables).map(function(h){return s._allTables[h]})},enumerable:!1,configurable:!0}),sn.prototype.transaction=function(){var s=(function(h,y,x){var _=arguments.length;if(_<2)throw new Me.InvalidArgument("Too few arguments");for(var S=new Array(_-1);--_;)S[_-1]=arguments[_];return x=S.pop(),[h,pn(S),x]}).apply(this,arguments);return this._transaction.apply(this,s)},sn.prototype._transaction=function(s,h,y){var x=this,_=Ie.trans;_&&_.db===this&&s.indexOf("!")===-1||(_=null);var S,O,D=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(O=h.map(function(k){if(k=k instanceof x.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),s=="r"||s===Xt)S=Xt;else{if(s!="rw"&&s!=_r)throw new Me.InvalidArgument("Invalid transaction mode: "+s);S=_r}if(_){if(_.mode===Xt&&S===_r){if(!D)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");_=null}_&&O.forEach(function(k){if(_&&_.storeNames.indexOf(k)===-1){if(!D)throw new Me.SubTransaction("Table "+k+" not included in parent transaction.");_=null}}),D&&_&&!_.active&&(_=null)}}catch(k){return _?_._promise(null,function(U,z){z(k)}):st(k)}var B=(function k(U,z,G,H,K){return ze.resolve().then(function(){var X=Ie.transless||Ie,ee=U._createTransaction(z,G,U._dbSchema,H);if(ee.explicit=!0,X={trans:ee,transless:X},H)ee.idbtrans=H.idbtrans;else try{ee.create(),ee.idbtrans._explicit=!0,U._state.PR1398_maxLoop=3}catch(ce){return ce.name===Je.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return k(U,z,G,null,K)})):st(ce)}var ae,oe=L(K);return oe&&Pt(),X=ze.follow(function(){var ce;(ae=K.call(ee,ee))&&(oe?(ce=Un.bind(null,null),ae.then(ce,ce)):typeof ae.next=="function"&&typeof ae.throw=="function"&&(ae=Ji(ae)))},X),(ae&&typeof ae.then=="function"?ze.resolve(ae).then(function(ce){return ee.active?ce:st(new Me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return ae})).then(function(ce){return H&&ee._resolve(),ee._completion.then(function(){return ce})}).catch(function(ce){return ee._reject(ce),st(ce)})})}).bind(null,this,S,O,_,y);return _?_._promise(S,B,"lock"):Ie.trans?Gr(Ie.transless,function(){return x._whenReady(B)}):this._whenReady(B)},sn.prototype.table=function(s){if(!N(this._allTables,s))throw new Me.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},sn);function sn(s,h){var y=this;this._middlewares={},this.verno=0;var x=sn.dependencies;this._options=h=c({addons:sn.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},x=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var _,S,O,D,B,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Mt,dbReadyPromise:null,cancelOpen:Mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};k.dbReadyPromise=new ze(function(z){k.dbReadyResolve=z}),k.openCanceller=new ze(function(z,G){k.cancelOpen=G}),this._state=k,this.name=s,this.on=$r(this,"populate","blocked","versionchange","close",{ready:[Mi,Mt]}),this.once=function(z,G){var H=function(){for(var K=[],X=0;X<arguments.length;X++)K[X]=arguments[X];y.on(z).unsubscribe(H),G.apply(y,K)};return y.on(z,H)},this.on.ready.subscribe=re(this.on.ready.subscribe,function(z){return function(G,H){sn.vip(function(){var K,X=y._state;X.openComplete?(X.dbOpenError||ze.resolve().then(G),H&&z(G)):X.onReadyBeingFired?(X.onReadyBeingFired.push(G),H&&z(G)):(z(G),K=y,H||z(function ee(){K.on.ready.unsubscribe(G),K.on.ready.unsubscribe(ee)}))})}}),this.Collection=(_=this,vt(zs.prototype,function(ae,ee){this.db=_;var H=Ut,K=null;if(ee)try{H=ee()}catch(oe){K=oe}var X=ae._ctx,ee=X.table,ae=ee.hook.reading.fire;this._ctx={table:ee,index:X.index,isPrimKey:!X.index||ee.schema.primKey.keyPath&&X.index===ee.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:X.or,valueMapper:ae!==Ct?ae:null}})),this.Table=(S=this,vt(Jr.prototype,function(z,G,H){this.db=S,this._tx=H,this.name=z,this.schema=G,this.hook=S._allTables[z]?S._allTables[z].hook:$r(null,{creating:[qi,Mt],reading:[Mr,Ct],updating:[Jt,Mt],deleting:[Gn,Mt]})})),this.Transaction=(O=this,vt(Fs.prototype,function(z,G,H,K,X){var ee=this;z!=="readonly"&&G.forEach(function(ae){ae=(ae=H[ae])===null||ae===void 0?void 0:ae.yProps,ae&&(G=G.concat(ae.map(function(oe){return oe.updatesTable})))}),this.db=O,this.mode=z,this.storeNames=G,this.schema=H,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=$r(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ze(function(ae,oe){ee._resolve=ae,ee._reject=oe}),this._completion.then(function(){ee.active=!1,ee.on.complete.fire()},function(ae){var oe=ee.active;return ee.active=!1,ee.on.error.fire(ae),ee.parent?ee.parent._reject(ae):oe&&ee.idbtrans&&ee.idbtrans.abort(),st(ae)})})),this.Version=(D=this,vt(Qn.prototype,function(z){this.db=D,this._cfg={version:z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(B=this,vt(fn.prototype,function(z,G,H){if(this.db=B,this._ctx={table:z,index:G===":id"?null:G,or:H},this._cmp=this._ascending=xt,this._descending=function(K,X){return xt(X,K)},this._max=function(K,X){return 0<xt(K,X)?K:X},this._min=function(K,X){return xt(K,X)<0?K:X},this._IDBKeyRange=B._deps.IDBKeyRange,!this._IDBKeyRange)throw new Me.MissingAPI})),this.on("versionchange",function(z){0<z.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(z){!z.newVersion||z.newVersion<z.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(z.oldVersion/10))}),this._maxKey=ti(h.IDBKeyRange),this._createTransaction=function(z,G,H,K){return new y.Transaction(z,G,H,y._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(z){y.on("blocked").fire(z),Te.filter(function(G){return G.name===y.name&&G!==y&&!G._state.vcFired}).map(function(G){return G.on("versionchange").fire(z)})},this.use(pa),this.use(Da),this.use(us),this.use(xo),this.use(ls);var U=new Proxy(this,{get:function(z,G,H){if(G==="_vip")return!0;if(G==="table")return function(X){return dr(y.table(X),U)};var K=Reflect.get(z,G,H);return K instanceof Jr?dr(K,U):G==="tables"?K.map(function(X){return dr(X,U)}):G==="_createTransaction"?function(){return dr(K.apply(this,arguments),U)}:K}});this.vip=U,x.forEach(function(z){return z(y)})}var ii,ft=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ma=(M.prototype.subscribe=function(s,h,y){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:h,complete:y})},M.prototype[ft]=function(){return this},M);function M(s){this._subscribe=s}try{ii={indexedDB:m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.msIndexedDB,IDBKeyRange:m.IDBKeyRange||m.webkitIDBKeyRange}}catch{ii={indexedDB:null,IDBKeyRange:null}}function t(s){var h,y=!1,x=new Ma(function(_){var S=L(s),O,D=!1,B={},k={},U={get closed(){return D},unsubscribe:function(){D||(D=!0,O&&O.abort(),z&&zt.storagemutated.unsubscribe(H))}};_.start&&_.start(U);var z=!1,G=function(){return bn(K)},H=function(X){nt(B,X),Ys(k,B)&&G()},K=function(){var X,ee,ae;!D&&ii.indexedDB&&(B={},X={},O&&O.abort(),O=new AbortController,ae=(function(oe){var ce=xr();try{S&&Pt();var ve=rn(s,oe);return ve=S?ve.finally(Un):ve}finally{ce&&wr()}})(ee={subscr:X,signal:O.signal,requery:G,querier:s,trans:null}),Promise.resolve(ae).then(function(oe){y=!0,h=oe,D||ee.signal.aborted||(B={},(function(ce){for(var ve in ce)if(N(ce,ve))return;return 1})(k=X)||z||(zt(fa,H),z=!0),bn(function(){return!D&&_.next&&_.next(oe)}))},function(oe){y=!1,["DatabaseClosedError","AbortError"].includes(oe?.name)||D||bn(function(){D||_.error&&_.error(oe)})}))};return setTimeout(G,0),U});return x.hasValue=function(){return y},x.getValue=function(){return h},x}var r=ri;function o(s){var h=d;try{d=!0,zt.storagemutated.fire(s),Ur(s,!0)}finally{d=h}}P(r,c(c({},Rn),{delete:function(s){return new r(s,{addons:[]}).delete()},exists:function(s){return new r(s,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return h=r.dependencies,y=h.indexedDB,h=h.IDBKeyRange,(is(y)?Promise.resolve(y.databases()).then(function(x){return x.map(function(_){return _.name}).filter(function(_){return _!==Ta})}):rs(y,h).toCollection().primaryKeys()).then(s)}catch{return st(new Me.MissingAPI)}var h,y},defineClass:function(){return function(s){T(this,s)}},ignoreTransaction:function(s){return Ie.trans?Gr(Ie.transless,s):s()},vip:qs,async:function(s){return function(){try{var h=Ji(s.apply(this,arguments));return h&&typeof h.then=="function"?h:ze.resolve(h)}catch(y){return st(y)}}},spawn:function(s,h,y){try{var x=Ji(s.apply(y,h||[]));return x&&typeof x.then=="function"?x:ze.resolve(x)}catch(_){return st(_)}},currentTransaction:{get:function(){return Ie.trans||null}},waitFor:function(s,h){return h=ze.resolve(typeof s=="function"?r.ignoreTransaction(s):s).timeout(h||6e4),Ie.trans?Ie.trans.waitFor(h):h},Promise:ze,debug:{get:function(){return Fe},set:function(s){Aa(s)}},derive:Y,extend:T,props:P,override:re,Events:$r,on:zt,liveQuery:t,extendObservabilitySet:nt,getByKeyPath:Be,setByKeyPath:te,delByKeyPath:function(s,h){typeof h=="string"?te(s,h,void 0):"length"in h&&[].map.call(h,function(y){te(s,y,void 0)})},shallowClone:Ge,deepClone:ot,getObjectDiff:os,cmp:xt,asap:Ke,minKey:-1/0,addons:[],connections:Te,errnames:Je,dependencies:ii,cache:Gt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(s){return parseInt(s)}).reduce(function(s,h,y){return s+h/Math.pow(10,2*y)})})),r.maxKey=ti(r.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zt(fa,function(s){d||(s=new CustomEvent(ut,{detail:s}),d=!0,dispatchEvent(s),d=!1)}),addEventListener(ut,function(s){s=s.detail,d||o(s)}));var f,d=!1,p=function(){};return typeof BroadcastChannel<"u"&&((p=function(){(f=new BroadcastChannel(ut)).onmessage=function(s){return s.data&&o(s.data)}})(),typeof f.unref=="function"&&f.unref(),zt(fa,function(s){d||f.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!ri.disableBfCache&&s.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),f?.close();for(var h=0,y=Te;h<y.length;h++)y[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!ri.disableBfCache&&s.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),p(),o({all:new Fn(-1/0,[[]])}))})),ze.rejectionMapper=function(s,h){return!s||s instanceof xe||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Dr[s.name]?s:(h=new Dr[s.name](h||s.message,s),"stack"in s&&q(h,"stack",{get:function(){return this.inner.stack}}),h)},Aa(Fe),c(ri,Object.freeze({__proto__:null,Dexie:ri,liveQuery:t,Entity:Ot,cmp:xt,PropModification:Ar,replacePrefix:function(s,h){return new Ar({replacePrefix:[s,h]})},add:function(s){return new Ar({add:s})},remove:function(s){return new Ar({remove:s})},default:ri,RangeSet:Fn,mergeRanges:mi,rangesOverlap:vn}),{default:ri}),ri})})(vc)),vc.exports}var KE=XE();const pd=Nc(KE),Ip=Symbol.for("Dexie"),Cc=globalThis[Ip]||(globalThis[Ip]=pd);if(pd.semVer!==Cc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pd.semVer} and ${Cc.semVer}`);const{liveQuery:rA,mergeRanges:iA,rangesOverlap:aA,RangeSet:sA,cmp:oA,Entity:lA,PropModification:uA,replacePrefix:cA,add:fA,remove:hA,DexieYProvider:dA}=Cc,xc=new Cc("OfflinePointDB");xc.version(1).stores({transactions:"++id, userId, points, timestamp, synced"});const Fh={async addTransaction(u,i){return await xc.transactions.add({userId:u,points:i,timestamp:new Date().toISOString(),synced:0})},async getUnsyncedTransactions(){return await xc.transactions.where("synced").equals(0).toArray()},async markAsSynced(u){return await xc.transactions.update(u,{synced:1})}};var Qo={},Hh={exports:{}},Vh,Dp;function WE(){if(Dp)return Vh;Dp=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Vh=u,Vh}var qh,Mp;function QE(){if(Mp)return qh;Mp=1;var u=WE();function i(){}function a(){}return a.resetWarningCache=i,qh=function(){function c(w,C,T,E,R,N){if(N!==u){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}c.isRequired=c;function v(){return c}var m={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:v,element:c,elementType:c,instanceOf:v,node:c,objectOf:v,oneOf:v,oneOfType:v,shape:v,exact:v,checkPropTypes:a,resetWarningCache:i};return m.PropTypes=m,m},qh}var Bp;function xy(){return Bp||(Bp=1,Hh.exports=QE()()),Hh.exports}var Gh,Lp;function wy(){return Lp||(Lp=1,Gh={L:1,M:0,Q:3,H:2}),Gh}var Yh,kp;function by(){return kp||(kp=1,Yh={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Yh}var Xh,jp;function ZE(){if(jp)return Xh;jp=1;var u=by();function i(a){this.mode=u.MODE_8BIT_BYTE,this.data=a}return i.prototype={getLength:function(a){return this.data.length},write:function(a){for(var c=0;c<this.data.length;c++)a.put(this.data.charCodeAt(c),8)}},Xh=i,Xh}var Kh,Pp;function JE(){if(Pp)return Kh;Pp=1;var u=wy();function i(a,c){this.totalCount=a,this.dataCount=c}return i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(a,c){var v=i.getRsBlockTable(a,c);if(v==null)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var m=v.length/3,w=new Array,C=0;C<m;C++)for(var T=v[C*3+0],E=v[C*3+1],R=v[C*3+2],N=0;N<T;N++)w.push(new i(E,R));return w},i.getRsBlockTable=function(a,c){switch(c){case u.L:return i.RS_BLOCK_TABLE[(a-1)*4+0];case u.M:return i.RS_BLOCK_TABLE[(a-1)*4+1];case u.Q:return i.RS_BLOCK_TABLE[(a-1)*4+2];case u.H:return i.RS_BLOCK_TABLE[(a-1)*4+3];default:return}},Kh=i,Kh}var Wh,Up;function $E(){if(Up)return Wh;Up=1;function u(){this.buffer=new Array,this.length=0}return u.prototype={get:function(i){var a=Math.floor(i/8);return(this.buffer[a]>>>7-i%8&1)==1},put:function(i,a){for(var c=0;c<a;c++)this.putBit((i>>>a-c-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(i){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),i&&(this.buffer[a]|=128>>>this.length%8),this.length++}},Wh=u,Wh}var Qh,zp;function Ey(){if(zp)return Qh;zp=1;for(var u={glog:function(a){if(a<1)throw new Error("glog("+a+")");return u.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return u.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)u.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)u.EXP_TABLE[i]=u.EXP_TABLE[i-4]^u.EXP_TABLE[i-5]^u.EXP_TABLE[i-6]^u.EXP_TABLE[i-8];for(var i=0;i<255;i++)u.LOG_TABLE[u.EXP_TABLE[i]]=i;return Qh=u,Qh}var Zh,Fp;function _y(){if(Fp)return Zh;Fp=1;var u=Ey();function i(a,c){if(a.length==null)throw new Error(a.length+"/"+c);for(var v=0;v<a.length&&a[v]==0;)v++;this.num=new Array(a.length-v+c);for(var m=0;m<a.length-v;m++)this.num[m]=a[m+v]}return i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var c=new Array(this.getLength()+a.getLength()-1),v=0;v<this.getLength();v++)for(var m=0;m<a.getLength();m++)c[v+m]^=u.gexp(u.glog(this.get(v))+u.glog(a.get(m)));return new i(c,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var c=u.glog(this.get(0))-u.glog(a.get(0)),v=new Array(this.getLength()),m=0;m<this.getLength();m++)v[m]=this.get(m);for(var m=0;m<a.getLength();m++)v[m]^=u.gexp(u.glog(a.get(m))+c);return new i(v,0).mod(a)}},Zh=i,Zh}var Jh,Hp;function e_(){if(Hp)return Jh;Hp=1;var u=by(),i=_y(),a=Ey(),c={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},v={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(m){for(var w=m<<10;v.getBCHDigit(w)-v.getBCHDigit(v.G15)>=0;)w^=v.G15<<v.getBCHDigit(w)-v.getBCHDigit(v.G15);return(m<<10|w)^v.G15_MASK},getBCHTypeNumber:function(m){for(var w=m<<12;v.getBCHDigit(w)-v.getBCHDigit(v.G18)>=0;)w^=v.G18<<v.getBCHDigit(w)-v.getBCHDigit(v.G18);return m<<12|w},getBCHDigit:function(m){for(var w=0;m!=0;)w++,m>>>=1;return w},getPatternPosition:function(m){return v.PATTERN_POSITION_TABLE[m-1]},getMask:function(m,w,C){switch(m){case c.PATTERN000:return(w+C)%2==0;case c.PATTERN001:return w%2==0;case c.PATTERN010:return C%3==0;case c.PATTERN011:return(w+C)%3==0;case c.PATTERN100:return(Math.floor(w/2)+Math.floor(C/3))%2==0;case c.PATTERN101:return w*C%2+w*C%3==0;case c.PATTERN110:return(w*C%2+w*C%3)%2==0;case c.PATTERN111:return(w*C%3+(w+C)%2)%2==0;default:throw new Error("bad maskPattern:"+m)}},getErrorCorrectPolynomial:function(m){for(var w=new i([1],0),C=0;C<m;C++)w=w.multiply(new i([1,a.gexp(C)],0));return w},getLengthInBits:function(m,w){if(1<=w&&w<10)switch(m){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+m)}else if(w<27)switch(m){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+m)}else if(w<41)switch(m){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+m)}else throw new Error("type:"+w)},getLostPoint:function(m){for(var w=m.getModuleCount(),C=0,T=0;T<w;T++)for(var E=0;E<w;E++){for(var R=0,N=m.isDark(T,E),P=-1;P<=1;P++)if(!(T+P<0||w<=T+P))for(var F=-1;F<=1;F++)E+F<0||w<=E+F||P==0&&F==0||N==m.isDark(T+P,E+F)&&R++;R>5&&(C+=3+R-5)}for(var T=0;T<w-1;T++)for(var E=0;E<w-1;E++){var q=0;m.isDark(T,E)&&q++,m.isDark(T+1,E)&&q++,m.isDark(T,E+1)&&q++,m.isDark(T+1,E+1)&&q++,(q==0||q==4)&&(C+=3)}for(var T=0;T<w;T++)for(var E=0;E<w-6;E++)m.isDark(T,E)&&!m.isDark(T,E+1)&&m.isDark(T,E+2)&&m.isDark(T,E+3)&&m.isDark(T,E+4)&&!m.isDark(T,E+5)&&m.isDark(T,E+6)&&(C+=40);for(var E=0;E<w;E++)for(var T=0;T<w-6;T++)m.isDark(T,E)&&!m.isDark(T+1,E)&&m.isDark(T+2,E)&&m.isDark(T+3,E)&&m.isDark(T+4,E)&&!m.isDark(T+5,E)&&m.isDark(T+6,E)&&(C+=40);for(var Y=0,E=0;E<w;E++)for(var T=0;T<w;T++)m.isDark(T,E)&&Y++;var J=Math.abs(100*Y/w/w-50)/5;return C+=J*10,C}};return Jh=v,Jh}var $h,Vp;function t_(){if(Vp)return $h;Vp=1;var u=ZE(),i=JE(),a=$E(),c=e_(),v=_y();function m(C,T){this.typeNumber=C,this.errorCorrectLevel=T,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var w=m.prototype;return w.addData=function(C){var T=new u(C);this.dataList.push(T),this.dataCache=null},w.isDark=function(C,T){if(C<0||this.moduleCount<=C||T<0||this.moduleCount<=T)throw new Error(C+","+T);return this.modules[C][T]},w.getModuleCount=function(){return this.moduleCount},w.make=function(){if(this.typeNumber<1){var C=1;for(C=1;C<40;C++){for(var T=i.getRSBlocks(C,this.errorCorrectLevel),E=new a,R=0,N=0;N<T.length;N++)R+=T[N].dataCount;for(var N=0;N<this.dataList.length;N++){var P=this.dataList[N];E.put(P.mode,4),E.put(P.getLength(),c.getLengthInBits(P.mode,C)),P.write(E)}if(E.getLengthInBits()<=R*8)break}this.typeNumber=C}this.makeImpl(!1,this.getBestMaskPattern())},w.makeImpl=function(C,T){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var E=0;E<this.moduleCount;E++){this.modules[E]=new Array(this.moduleCount);for(var R=0;R<this.moduleCount;R++)this.modules[E][R]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(C,T),this.typeNumber>=7&&this.setupTypeNumber(C),this.dataCache==null&&(this.dataCache=m.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,T)},w.setupPositionProbePattern=function(C,T){for(var E=-1;E<=7;E++)if(!(C+E<=-1||this.moduleCount<=C+E))for(var R=-1;R<=7;R++)T+R<=-1||this.moduleCount<=T+R||(0<=E&&E<=6&&(R==0||R==6)||0<=R&&R<=6&&(E==0||E==6)||2<=E&&E<=4&&2<=R&&R<=4?this.modules[C+E][T+R]=!0:this.modules[C+E][T+R]=!1)},w.getBestMaskPattern=function(){for(var C=0,T=0,E=0;E<8;E++){this.makeImpl(!0,E);var R=c.getLostPoint(this);(E==0||C>R)&&(C=R,T=E)}return T},w.createMovieClip=function(C,T,E){var R=C.createEmptyMovieClip(T,E),N=1;this.make();for(var P=0;P<this.modules.length;P++)for(var F=P*N,q=0;q<this.modules[P].length;q++){var Y=q*N,J=this.modules[P][q];J&&(R.beginFill(0,100),R.moveTo(Y,F),R.lineTo(Y+N,F),R.lineTo(Y+N,F+N),R.lineTo(Y,F+N),R.endFill())}return R},w.setupTimingPattern=function(){for(var C=8;C<this.moduleCount-8;C++)this.modules[C][6]==null&&(this.modules[C][6]=C%2==0);for(var T=8;T<this.moduleCount-8;T++)this.modules[6][T]==null&&(this.modules[6][T]=T%2==0)},w.setupPositionAdjustPattern=function(){for(var C=c.getPatternPosition(this.typeNumber),T=0;T<C.length;T++)for(var E=0;E<C.length;E++){var R=C[T],N=C[E];if(this.modules[R][N]==null)for(var P=-2;P<=2;P++)for(var F=-2;F<=2;F++)P==-2||P==2||F==-2||F==2||P==0&&F==0?this.modules[R+P][N+F]=!0:this.modules[R+P][N+F]=!1}},w.setupTypeNumber=function(C){for(var T=c.getBCHTypeNumber(this.typeNumber),E=0;E<18;E++){var R=!C&&(T>>E&1)==1;this.modules[Math.floor(E/3)][E%3+this.moduleCount-8-3]=R}for(var E=0;E<18;E++){var R=!C&&(T>>E&1)==1;this.modules[E%3+this.moduleCount-8-3][Math.floor(E/3)]=R}},w.setupTypeInfo=function(C,T){for(var E=this.errorCorrectLevel<<3|T,R=c.getBCHTypeInfo(E),N=0;N<15;N++){var P=!C&&(R>>N&1)==1;N<6?this.modules[N][8]=P:N<8?this.modules[N+1][8]=P:this.modules[this.moduleCount-15+N][8]=P}for(var N=0;N<15;N++){var P=!C&&(R>>N&1)==1;N<8?this.modules[8][this.moduleCount-N-1]=P:N<9?this.modules[8][15-N-1+1]=P:this.modules[8][15-N-1]=P}this.modules[this.moduleCount-8][8]=!C},w.mapData=function(C,T){for(var E=-1,R=this.moduleCount-1,N=7,P=0,F=this.moduleCount-1;F>0;F-=2)for(F==6&&F--;;){for(var q=0;q<2;q++)if(this.modules[R][F-q]==null){var Y=!1;P<C.length&&(Y=(C[P]>>>N&1)==1);var J=c.getMask(T,R,F-q);J&&(Y=!Y),this.modules[R][F-q]=Y,N--,N==-1&&(P++,N=7)}if(R+=E,R<0||this.moduleCount<=R){R-=E,E=-E;break}}},m.PAD0=236,m.PAD1=17,m.createData=function(C,T,E){for(var R=i.getRSBlocks(C,T),N=new a,P=0;P<E.length;P++){var F=E[P];N.put(F.mode,4),N.put(F.getLength(),c.getLengthInBits(F.mode,C)),F.write(N)}for(var q=0,P=0;P<R.length;P++)q+=R[P].dataCount;if(N.getLengthInBits()>q*8)throw new Error("code length overflow. ("+N.getLengthInBits()+">"+q*8+")");for(N.getLengthInBits()+4<=q*8&&N.put(0,4);N.getLengthInBits()%8!=0;)N.putBit(!1);for(;!(N.getLengthInBits()>=q*8||(N.put(m.PAD0,8),N.getLengthInBits()>=q*8));)N.put(m.PAD1,8);return m.createBytes(N,R)},m.createBytes=function(C,T){for(var E=0,R=0,N=0,P=new Array(T.length),F=new Array(T.length),q=0;q<T.length;q++){var Y=T[q].dataCount,J=T[q].totalCount-Y;R=Math.max(R,Y),N=Math.max(N,J),P[q]=new Array(Y);for(var ne=0;ne<P[q].length;ne++)P[q][ne]=255&C.buffer[ne+E];E+=Y;var se=c.getErrorCorrectPolynomial(J),re=new v(P[q],se.getLength()-1),Ce=re.mod(se);F[q]=new Array(se.getLength()-1);for(var ne=0;ne<F[q].length;ne++){var Ke=ne+Ce.getLength()-F[q].length;F[q][ne]=Ke>=0?Ce.get(Ke):0}}for(var Be=0,ne=0;ne<T.length;ne++)Be+=T[ne].totalCount;for(var te=new Array(Be),Ge=0,ne=0;ne<R;ne++)for(var q=0;q<T.length;q++)ne<P[q].length&&(te[Ge++]=P[q][ne]);for(var ne=0;ne<N;ne++)for(var q=0;q<T.length;q++)ne<F[q].length&&(te[Ge++]=F[q][ne]);return te},$h=m,$h}var pc={},qp;function n_(){if(qp)return pc;qp=1,Object.defineProperty(pc,"__esModule",{value:!0});var u=Object.assign||function(E){for(var R=1;R<arguments.length;R++){var N=arguments[R];for(var P in N)Object.prototype.hasOwnProperty.call(N,P)&&(E[P]=N[P])}return E},i=xy(),a=m(i),c=nu(),v=m(c);function m(E){return E&&E.__esModule?E:{default:E}}function w(E,R){var N={};for(var P in E)R.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(E,P)&&(N[P]=E[P]);return N}var C={bgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,bgD:a.default.string.isRequired,fgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,fgD:a.default.string.isRequired,size:a.default.number.isRequired,title:a.default.string,viewBoxSize:a.default.number.isRequired,xmlns:a.default.string},T=(0,c.forwardRef)(function(E,R){var N=E.bgColor,P=E.bgD,F=E.fgD,q=E.fgColor,Y=E.size,J=E.title,ne=E.viewBoxSize,se=E.xmlns,re=se===void 0?"http://www.w3.org/2000/svg":se,Ce=w(E,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return v.default.createElement("svg",u({},Ce,{height:Y,ref:R,viewBox:"0 0 "+ne+" "+ne,width:Y,xmlns:re}),J?v.default.createElement("title",null,J):null,v.default.createElement("path",{d:P,fill:N}),v.default.createElement("path",{d:F,fill:q}))});return T.displayName="QRCodeSvg",T.propTypes=C,pc.default=T,pc}var Gp;function r_(){if(Gp)return Qo;Gp=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.QRCode=void 0;var u=Object.assign||function(Y){for(var J=1;J<arguments.length;J++){var ne=arguments[J];for(var se in ne)Object.prototype.hasOwnProperty.call(ne,se)&&(Y[se]=ne[se])}return Y},i=xy(),a=N(i),c=wy(),v=N(c),m=t_(),w=N(m),C=nu(),T=N(C),E=n_(),R=N(E);function N(Y){return Y&&Y.__esModule?Y:{default:Y}}function P(Y,J){var ne={};for(var se in Y)J.indexOf(se)>=0||Object.prototype.hasOwnProperty.call(Y,se)&&(ne[se]=Y[se]);return ne}var F={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},q=(0,C.forwardRef)(function(Y,J){var ne=Y.bgColor,se=ne===void 0?"#FFFFFF":ne,re=Y.fgColor,Ce=re===void 0?"#000000":re,Ke=Y.level,Be=Ke===void 0?"L":Ke,te=Y.size,Ge=te===void 0?256:te,we=Y.value,pn=P(Y,["bgColor","fgColor","level","size","value"]),Nt=new w.default(-1,v.default[Be]);Nt.addData(we),Nt.make();var Ve=Nt.modules;return T.default.createElement(R.default,u({},pn,{bgColor:se,bgD:Ve.map(function(ot,Dt){return ot.map(function(pe,he){return pe?"":"M "+he+" "+Dt+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Ce,fgD:Ve.map(function(ot,Dt){return ot.map(function(pe,he){return pe?"M "+he+" "+Dt+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:J,size:Ge,viewBoxSize:Ve.length}))});return Qo.QRCode=q,q.displayName="QRCode",q.propTypes=F,Qo.default=q,Qo}var i_=r_();const a_=Nc(i_);var Xe;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var Yp=new Map([[Xe.QR_CODE,"QR_CODE"],[Xe.AZTEC,"AZTEC"],[Xe.CODABAR,"CODABAR"],[Xe.CODE_39,"CODE_39"],[Xe.CODE_93,"CODE_93"],[Xe.CODE_128,"CODE_128"],[Xe.DATA_MATRIX,"DATA_MATRIX"],[Xe.MAXICODE,"MAXICODE"],[Xe.ITF,"ITF"],[Xe.EAN_13,"EAN_13"],[Xe.EAN_8,"EAN_8"],[Xe.PDF_417,"PDF_417"],[Xe.RSS_14,"RSS_14"],[Xe.RSS_EXPANDED,"RSS_EXPANDED"],[Xe.UPC_A,"UPC_A"],[Xe.UPC_E,"UPC_E"],[Xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Xp;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(Xp||(Xp={}));function s_(u){return Object.values(Xe).includes(u)}var Ls;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ls||(Ls={}));var sa=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Ls.SCAN_TYPE_CAMERA,Ls.SCAN_TYPE_FILE],u})(),Ay=(function(){function u(i,a){this.format=i,this.formatName=a}return u.prototype.toString=function(){return this.formatName},u.create=function(i){if(!Yp.has(i))throw"".concat(i," not in html5QrcodeSupportedFormatsTextMap");return new u(i,Yp.get(i))},u})(),Kp=(function(){function u(){}return u.createFromText=function(i){var a={text:i};return{decodedText:i,result:a}},u.createFromQrcodeResult=function(i){return{decodedText:i.text,result:i}},u})(),md;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(md||(md={}));var Sy=(function(){function u(){}return u.createFrom=function(i){return{errorMessage:i,type:md.UNKWOWN_ERROR}},u})(),Cy=(function(){function u(i){this.verbose=i}return u.prototype.log=function(i){this.verbose&&console.log(i)},u.prototype.warn=function(i){this.verbose&&console.warn(i)},u.prototype.logError=function(i,a){(this.verbose||a===!0)&&console.error(i)},u.prototype.logErrors=function(i){if(i.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(i)},u})();function ba(u){return typeof u>"u"||u===null}function o_(u,i,a){return u>a?a:u<i?i:u}var $o=(function(){function u(){}return u.codeParseError=function(i){return"QR code parse error, error = ".concat(i)},u.errorGettingUserMedia=function(i){return"Error getting userMedia, error = ".concat(i)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),un=(function(){function u(){}return u.scanningStatus=function(){return"Scanning"},u.idleStatus=function(){return"Idle"},u.errorStatus=function(){return"Error"},u.permissionStatus=function(){return"Permission"},u.noCameraFoundErrorStatus=function(){return"No Cameras"},u.lastMatch=function(i){return"Last Match: ".concat(i)},u.codeScannerTitle=function(){return"Code Scanner"},u.cameraPermissionTitle=function(){return"Request Camera Permissions"},u.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},u.noCameraFound=function(){return"No camera found"},u.scanButtonStopScanningText=function(){return"Stop Scanning"},u.scanButtonStartScanningText=function(){return"Start Scanning"},u.torchOnButton=function(){return"Switch On Torch"},u.torchOffButton=function(){return"Switch Off Torch"},u.torchOnFailedMessage=function(){return"Failed to turn on torch"},u.torchOffFailedMessage=function(){return"Failed to turn off torch"},u.scanButtonScanningStarting=function(){return"Launching Camera..."},u.textIfCameraScanSelected=function(){return"Scan an Image File"},u.textIfFileScanSelected=function(){return"Scan using camera directly"},u.selectCamera=function(){return"Select Camera"},u.fileSelectionChooseImage=function(){return"Choose Image"},u.fileSelectionChooseAnother=function(){return"Choose Another"},u.fileSelectionNoImageSelected=function(){return"No image choosen"},u.anonymousCameraPrefix=function(){return"Anonymous Camera"},u.dragAndDropMessage=function(){return"Or drop an image to scan"},u.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},u.zoom=function(){return"zoom"},u.loadingImage=function(){return"Loading image..."},u.cameraScanAltText=function(){return"Camera based scan"},u.fileScanAltText=function(){return"Fule based scan"},u})(),Wp=(function(){function u(){}return u.poweredBy=function(){return"Powered by "},u.reportIssues=function(){return"Report issues"},u})(),Ty=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(i,a){if(typeof i!="object"){var c=typeof i;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var v=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(v),w=Object.keys(i),C=0,T=w;C<T.length;C++){var E=T[C];if(m.has(E))return a.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},u})(),Yl={exports:{}},l_=Yl.exports,Qp;function u_(){return Qp||(Qp=1,(function(u,i){(function(a,c){c(i)})(l_,(function(a){function c(M){return M==null}var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,t){M.__proto__=t}||function(M,t){for(var r in t)t.hasOwnProperty(r)&&(M[r]=t[r])};function m(M,t){v(M,t);function r(){this.constructor=M}M.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function w(M,t){var r=Object.setPrototypeOf;r?r(M,t):M.__proto__=t}function C(M,t){t===void 0&&(t=M.constructor);var r=Error.captureStackTrace;r&&r(M,t)}var T=(function(M){m(t,M);function t(r){var o=this.constructor,f=M.call(this,r)||this;return Object.defineProperty(f,"name",{value:o.name,enumerable:!1}),w(f,o.prototype),C(f),f}return t})(Error);class E extends T{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}E.kind="Exception";class R extends E{}R.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class P{constructor(t){if(this.binarizer=t,t===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,o,f){const d=this.binarizer.getLuminanceSource().crop(t,r,o,f);return new P(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class F extends E{static getChecksumInstance(){return new F}}F.kind="ChecksumException";class q{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Y{static arraycopy(t,r,o,f,d){for(;d--;)o[f++]=t[r++]}static currentTimeMillis(){return Date.now()}}class J extends E{}J.kind="IndexOutOfBoundsException";class ne extends J{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}ne.kind="ArrayIndexOutOfBoundsException";class se{static fill(t,r){for(let o=0,f=t.length;o<f;o++)t[o]=r}static fillWithin(t,r,o,f){se.rangeCheck(t.length,r,o);for(let d=r;d<o;d++)t[d]=f}static rangeCheck(t,r,o){if(r>o)throw new N("fromIndex("+r+") > toIndex("+o+")");if(r<0)throw new ne(r);if(o>t)throw new ne(o)}static asList(...t){return t}static create(t,r,o){return Array.from({length:t}).map(d=>Array.from({length:r}).fill(o))}static createInt32Array(t,r,o){return Array.from({length:t}).map(d=>Int32Array.from({length:r}).fill(o))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let o=0,f=t.length;o<f;o++)if(t[o]!==r[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const o of t)r=31*r+o;return r}static fillUint8Array(t,r){for(let o=0;o!==t.length;o++)t[o]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const o=new Uint8Array(r);return o.set(t),o}return t.slice(0,r)}static copyOfRange(t,r,o){const f=o-r,d=new Int32Array(f);return Y.arraycopy(t,r,d,0,f),d}static binarySearch(t,r,o){o===void 0&&(o=se.numberComparator);let f=0,d=t.length-1;for(;f<=d;){const p=d+f>>1,s=o(r,t[p]);if(s>0)f=p+1;else if(s<0)d=p-1;else return p}return-f-1}static numberComparator(t,r){return t-r}}class re{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let o=31;return r=t<<16,r!==0&&(o-=16,t=r),r=t<<8,r!==0&&(o-=8,t=r),r=t<<4,r!==0&&(o-=4,t=r),r=t<<2,r!==0&&(o-=2,t=r),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}re.MIN_VALUE_32_BITS=-2147483648,re.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=Ce.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=Ce.makeArray(t);Y.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const o=this.bits;let f=Math.floor(t/32),d=o[f];d&=~((1<<(t&31))-1);const p=o.length;for(;d===0;){if(++f===p)return r;d=o[f]}const s=f*32+re.numberOfTrailingZeros(d);return s>r?r:s}getNextUnset(t){const r=this.size;if(t>=r)return r;const o=this.bits;let f=Math.floor(t/32),d=~o[f];d&=~((1<<(t&31))-1);const p=o.length;for(;d===0;){if(++f===p)return r;d=~o[f]}const s=f*32+re.numberOfTrailingZeros(d);return s>r?r:s}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new N;if(r===t)return;r--;const o=Math.floor(t/32),f=Math.floor(r/32),d=this.bits;for(let p=o;p<=f;p++){const s=p>o?0:t&31,y=(2<<(p<f?31:r&31))-(1<<s);d[p]|=y}}clear(){const t=this.bits.length,r=this.bits;for(let o=0;o<t;o++)r[o]=0}isRange(t,r,o){if(r<t||t<0||r>this.size)throw new N;if(r===t)return!0;r--;const f=Math.floor(t/32),d=Math.floor(r/32),p=this.bits;for(let s=f;s<=d;s++){const h=s>f?0:t&31,x=(2<<(s<d?31:r&31))-(1<<h)&4294967295;if((p[s]&x)!==(o?x:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let o=r;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let o=0;o<r;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new N("Sizes don't match");const r=this.bits;for(let o=0,f=r.length;o<f;o++)r[o]^=t.bits[o]}toBytes(t,r,o,f){for(let d=0;d<f;d++){let p=0;for(let s=0;s<8;s++)this.get(t)&&(p|=1<<7-s),t++;r[o+d]=p}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),o=r+1,f=this.bits;for(let d=0;d<o;d++){let p=f[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,t[r-d]=p}if(this.size!==o*32){const d=o*32-this.size;let p=t[0]>>>d;for(let s=1;s<o;s++){const h=t[s];p|=h<<32-d,t[s-1]=p,p=h>>>d}t[o-1]=p}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Ce))return!1;const r=t;return this.size===r.size&&se.equals(this.bits,r.bits)}hashCode(){return 31*this.size+se.hashCode(this.bits)}toString(){let t="";for(let r=0,o=this.size;r<o;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new Ce(this.size,this.bits.slice())}}var Ke;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ke||(Ke={}));var Be=Ke;class te extends E{static getFormatInstance(){return new te}}te.kind="FormatException";var Ge;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(Ge||(Ge={}));class we{constructor(t,r,o,...f){this.valueIdentifier=t,this.name=o,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=f,we.VALUE_IDENTIFIER_TO_ECI.set(t,this),we.NAME_TO_ECI.set(o,this);const d=this.values;for(let p=0,s=d.length;p!==s;p++){const h=d[p];we.VALUES_TO_ECI.set(h,this)}for(const p of f)we.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new te("incorect value");const r=we.VALUES_TO_ECI.get(t);if(r===void 0)throw new te("incorect value");return r}static getCharacterSetECIByName(t){const r=we.NAME_TO_ECI.get(t);if(r===void 0)throw new te("incorect value");return r}equals(t){if(!(t instanceof we))return!1;const r=t;return this.getName()===r.getName()}}we.VALUE_IDENTIFIER_TO_ECI=new Map,we.VALUES_TO_ECI=new Map,we.NAME_TO_ECI=new Map,we.Cp437=new we(Ge.Cp437,Int32Array.from([0,2]),"Cp437"),we.ISO8859_1=new we(Ge.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),we.ISO8859_2=new we(Ge.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),we.ISO8859_3=new we(Ge.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),we.ISO8859_4=new we(Ge.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),we.ISO8859_5=new we(Ge.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),we.ISO8859_6=new we(Ge.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),we.ISO8859_7=new we(Ge.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),we.ISO8859_8=new we(Ge.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),we.ISO8859_9=new we(Ge.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),we.ISO8859_10=new we(Ge.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),we.ISO8859_11=new we(Ge.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),we.ISO8859_13=new we(Ge.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),we.ISO8859_14=new we(Ge.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),we.ISO8859_15=new we(Ge.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),we.ISO8859_16=new we(Ge.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),we.SJIS=new we(Ge.SJIS,20,"SJIS","Shift_JIS"),we.Cp1250=new we(Ge.Cp1250,21,"Cp1250","windows-1250"),we.Cp1251=new we(Ge.Cp1251,22,"Cp1251","windows-1251"),we.Cp1252=new we(Ge.Cp1252,23,"Cp1252","windows-1252"),we.Cp1256=new we(Ge.Cp1256,24,"Cp1256","windows-1256"),we.UnicodeBigUnmarked=new we(Ge.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),we.UTF8=new we(Ge.UTF8,26,"UTF8","UTF-8"),we.ASCII=new we(Ge.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),we.Big5=new we(Ge.Big5,28,"Big5"),we.GB18030=new we(Ge.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),we.EUC_KR=new we(Ge.EUC_KR,30,"EUC_KR","EUC-KR");class pn extends E{}pn.kind="UnsupportedOperationException";class Nt{static decode(t,r){const o=this.encodingName(r);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!Nt.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const o=this.encodingName(r);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof we?t:we.getCharacterSetECIByName(t)}static decodeFallback(t,r){const o=this.encodingCharacterSet(r);if(Nt.isDecodeFallbackSupported(o)){let f="";for(let d=0,p=t.length;d<p;d++){let s=t[d].toString(16);s.length<2&&(s="0"+s),f+="%"+s}return decodeURIComponent(f)}if(o.equals(we.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new pn(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(we.UTF8)||t.equals(we.ISO8859_1)||t.equals(we.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),f=[];for(let d=0;d<o.length;d++)f.push(o[d].charCodeAt(0));return new Uint8Array(f)}}class Ve{static castAsNonUtf8Char(t,r=null){const o=r?r.getName():this.ISO88591;return Nt.decode(new Uint8Array([t]),o)}static guessEncoding(t,r){if(r!=null&&r.get(Be.CHARACTER_SET)!==void 0)return r.get(Be.CHARACTER_SET).toString();const o=t.length;let f=!0,d=!0,p=!0,s=0,h=0,y=0,x=0,_=0,S=0,O=0,D=0,B=0,k=0,U=0;const z=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let G=0;G<o&&(f||d||p);G++){const H=t[G]&255;p&&(s>0?(H&128)===0?p=!1:s--:(H&128)!==0&&((H&64)===0?p=!1:(s++,(H&32)===0?h++:(s++,(H&16)===0?y++:(s++,(H&8)===0?x++:p=!1))))),f&&(H>127&&H<160?f=!1:H>159&&(H<192||H===215||H===247)&&U++),d&&(_>0?H<64||H===127||H>252?d=!1:_--:H===128||H===160||H>239?d=!1:H>160&&H<224?(S++,D=0,O++,O>B&&(B=O)):H>127?(_++,O=0,D++,D>k&&(k=D)):(O=0,D=0))}return p&&s>0&&(p=!1),d&&_>0&&(d=!1),p&&(z||h+y+x>0)?Ve.UTF8:d&&(Ve.ASSUME_SHIFT_JIS||B>=3||k>=3)?Ve.SHIFT_JIS:f&&d?B===2&&S===2||U*10>=o?Ve.SHIFT_JIS:Ve.ISO88591:f?Ve.ISO88591:d?Ve.SHIFT_JIS:p?Ve.UTF8:Ve.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let o=-1;function f(p,s,h,y,x,_){if(p==="%%")return"%";if(r[++o]===void 0)return;p=y?parseInt(y.substr(1)):void 0;let S=x?parseInt(x.substr(1)):void 0,O;switch(_){case"s":O=r[o];break;case"c":O=r[o][0];break;case"f":O=parseFloat(r[o]).toFixed(p);break;case"p":O=parseFloat(r[o]).toPrecision(p);break;case"e":O=parseFloat(r[o]).toExponential(p);break;case"x":O=parseInt(r[o]).toString(S||16);break;case"d":O=parseFloat(parseInt(r[o],S||10).toPrecision(p)).toFixed(0);break}O=typeof O=="object"?JSON.stringify(O):(+O).toString(S);let D=parseInt(h),B=h&&h[0]+""=="0"?"0":" ";for(;O.length<D;)O=s!==void 0?O+B:B+O;return O}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(d,f)}static getBytes(t,r){return Nt.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}Ve.SHIFT_JIS=we.SJIS.getName(),Ve.GB2312="GB2312",Ve.ISO88591=we.ISO8859_1.getName(),Ve.EUC_JP="EUC_JP",Ve.UTF8=we.UTF8.getName(),Ve.PLATFORM_DEFAULT_ENCODING=Ve.UTF8,Ve.ASSUME_SHIFT_JIS=!1;class ot{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Ve.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,o){for(let f=r;r<r+o;f++)this.append(t[f]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Dt{constructor(t,r,o,f){if(this.width=t,this.height=r,this.rowSize=o,this.bits=f,r==null&&(r=t),this.height=r,t<1||r<1)throw new N("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,o=t[0].length,f=new Dt(o,r);for(let d=0;d<r;d++){const p=t[d];for(let s=0;s<o;s++)p[s]&&f.set(s,d)}return f}static parseFromString(t,r,o){if(t===null)throw new N("stringRepresentation cannot be null");const f=new Array(t.length);let d=0,p=0,s=-1,h=0,y=0;for(;y<t.length;)if(t.charAt(y)===`
`||t.charAt(y)==="\r"){if(d>p){if(s===-1)s=d-p;else if(d-p!==s)throw new N("row lengths do not match");p=d,h++}y++}else if(t.substring(y,y+r.length)===r)y+=r.length,f[d]=!0,d++;else if(t.substring(y,y+o.length)===o)y+=o.length,f[d]=!1,d++;else throw new N("illegal character encountered: "+t.substring(y));if(d>p){if(s===-1)s=d-p;else if(d-p!==s)throw new N("row lengths do not match");h++}const x=new Dt(s,h);for(let _=0;_<d;_++)f[_]&&x.set(Math.floor(_%s),Math.floor(_/s));return x}get(t,r){const o=r*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new N("input matrix dimensions do not match");const r=new Ce(Math.floor(this.width/32)+1),o=this.rowSize,f=this.bits;for(let d=0,p=this.height;d<p;d++){const s=d*o,h=t.getRow(d,r).getBitArray();for(let y=0;y<o;y++)f[s+y]^=h[y]}}clear(){const t=this.bits,r=t.length;for(let o=0;o<r;o++)t[o]=0}setRegion(t,r,o,f){if(r<0||t<0)throw new N("Left and top must be nonnegative");if(f<1||o<1)throw new N("Height and width must be at least 1");const d=t+o,p=r+f;if(p>this.height||d>this.width)throw new N("The region must fit inside the matrix");const s=this.rowSize,h=this.bits;for(let y=r;y<p;y++){const x=y*s;for(let _=t;_<d;_++)h[x+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new Ce(this.width):r.clear();const o=this.rowSize,f=this.bits,d=t*o;for(let p=0;p<o;p++)r.setBulk(p*32,f[d+p]);return r}setRow(t,r){Y.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let o=new Ce(t),f=new Ce(t);for(let d=0,p=Math.floor((r+1)/2);d<p;d++)o=this.getRow(d,o),f=this.getRow(r-1-d,f),o.reverse(),f.reverse(),this.setRow(d,f),this.setRow(r-1-d,o)}getEnclosingRectangle(){const t=this.width,r=this.height,o=this.rowSize,f=this.bits;let d=t,p=r,s=-1,h=-1;for(let y=0;y<r;y++)for(let x=0;x<o;x++){const _=f[y*o+x];if(_!==0){if(y<p&&(p=y),y>h&&(h=y),x*32<d){let S=0;for(;(_<<31-S&4294967295)===0;)S++;x*32+S<d&&(d=x*32+S)}if(x*32+31>s){let S=31;for(;!(_>>>S);)S--;x*32+S>s&&(s=x*32+S)}}}return s<d||h<p?null:Int32Array.from([d,p,s-d+1,h-p+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let o=0;for(;o<r.length&&r[o]===0;)o++;if(o===r.length)return null;const f=o/t;let d=o%t*32;const p=r[o];let s=0;for(;(p<<31-s&4294967295)===0;)s++;return d+=s,Int32Array.from([d,f])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let o=r.length-1;for(;o>=0&&r[o]===0;)o--;if(o<0)return null;const f=Math.floor(o/t);let d=Math.floor(o%t)*32;const p=r[o];let s=31;for(;!(p>>>s);)s--;return d+=s,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Dt))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&se.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+se.hashCode(this.bits),t}toString(t="X ",r="  ",o=`
`){return this.buildToString(t,r,o)}buildToString(t,r,o){let f=new ot;for(let d=0,p=this.height;d<p;d++){for(let s=0,h=this.width;s<h;s++)f.append(this.get(s,d)?t:r);f.append(o)}return f.toString()}clone(){return new Dt(this.width,this.height,this.rowSize,this.bits.slice())}}class pe extends E{static getNotFoundInstance(){return new pe}}pe.kind="NotFoundException";class he extends q{constructor(t){super(t),this.luminances=he.EMPTY,this.buckets=new Int32Array(he.LUMINANCE_BUCKETS)}getBlackRow(t,r){const o=this.getLuminanceSource(),f=o.getWidth();r==null||r.getSize()<f?r=new Ce(f):r.clear(),this.initArrays(f);const d=o.getRow(t,this.luminances),p=this.buckets;for(let h=0;h<f;h++)p[(d[h]&255)>>he.LUMINANCE_SHIFT]++;const s=he.estimateBlackPoint(p);if(f<3)for(let h=0;h<f;h++)(d[h]&255)<s&&r.set(h);else{let h=d[0]&255,y=d[1]&255;for(let x=1;x<f-1;x++){const _=d[x+1]&255;(y*4-h-_)/2<s&&r.set(x),h=y,y=_}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight(),f=new Dt(r,o);this.initArrays(r);const d=this.buckets;for(let h=1;h<5;h++){const y=Math.floor(o*h/5),x=t.getRow(y,this.luminances),_=Math.floor(r*4/5);for(let S=Math.floor(r/5);S<_;S++){const O=x[S]&255;d[O>>he.LUMINANCE_SHIFT]++}}const p=he.estimateBlackPoint(d),s=t.getMatrix();for(let h=0;h<o;h++){const y=h*r;for(let x=0;x<r;x++)(s[y+x]&255)<p&&f.set(x,h)}return f}createBinarizer(t){return new he(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let o=0;o<he.LUMINANCE_BUCKETS;o++)r[o]=0}static estimateBlackPoint(t){const r=t.length;let o=0,f=0,d=0;for(let x=0;x<r;x++)t[x]>d&&(f=x,d=t[x]),t[x]>o&&(o=t[x]);let p=0,s=0;for(let x=0;x<r;x++){const _=x-f,S=t[x]*_*_;S>s&&(p=x,s=S)}if(f>p){const x=f;f=p,p=x}if(p-f<=r/16)throw new pe;let h=p-1,y=-1;for(let x=p-1;x>f;x--){const _=x-f,S=_*_*(p-x)*(o-t[x]);S>y&&(h=x,y=S)}return h<<he.LUMINANCE_SHIFT}}he.LUMINANCE_BITS=5,he.LUMINANCE_SHIFT=8-he.LUMINANCE_BITS,he.LUMINANCE_BUCKETS=1<<he.LUMINANCE_BITS,he.EMPTY=Uint8ClampedArray.from([0]);class Ae extends he{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight();if(r>=Ae.MINIMUM_DIMENSION&&o>=Ae.MINIMUM_DIMENSION){const f=t.getMatrix();let d=r>>Ae.BLOCK_SIZE_POWER;(r&Ae.BLOCK_SIZE_MASK)!==0&&d++;let p=o>>Ae.BLOCK_SIZE_POWER;(o&Ae.BLOCK_SIZE_MASK)!==0&&p++;const s=Ae.calculateBlackPoints(f,d,p,r,o),h=new Dt(r,o);Ae.calculateThresholdForBlock(f,d,p,r,o,s,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new Ae(t)}static calculateThresholdForBlock(t,r,o,f,d,p,s){const h=d-Ae.BLOCK_SIZE,y=f-Ae.BLOCK_SIZE;for(let x=0;x<o;x++){let _=x<<Ae.BLOCK_SIZE_POWER;_>h&&(_=h);const S=Ae.cap(x,2,o-3);for(let O=0;O<r;O++){let D=O<<Ae.BLOCK_SIZE_POWER;D>y&&(D=y);const B=Ae.cap(O,2,r-3);let k=0;for(let z=-2;z<=2;z++){const G=p[S+z];k+=G[B-2]+G[B-1]+G[B]+G[B+1]+G[B+2]}const U=k/25;Ae.thresholdBlock(t,D,_,U,f,s)}}}static cap(t,r,o){return t<r?r:t>o?o:t}static thresholdBlock(t,r,o,f,d,p){for(let s=0,h=o*d+r;s<Ae.BLOCK_SIZE;s++,h+=d)for(let y=0;y<Ae.BLOCK_SIZE;y++)(t[h+y]&255)<=f&&p.set(r+y,o+s)}static calculateBlackPoints(t,r,o,f,d){const p=d-Ae.BLOCK_SIZE,s=f-Ae.BLOCK_SIZE,h=new Array(o);for(let y=0;y<o;y++){h[y]=new Int32Array(r);let x=y<<Ae.BLOCK_SIZE_POWER;x>p&&(x=p);for(let _=0;_<r;_++){let S=_<<Ae.BLOCK_SIZE_POWER;S>s&&(S=s);let O=0,D=255,B=0;for(let U=0,z=x*f+S;U<Ae.BLOCK_SIZE;U++,z+=f){for(let G=0;G<Ae.BLOCK_SIZE;G++){const H=t[z+G]&255;O+=H,H<D&&(D=H),H>B&&(B=H)}if(B-D>Ae.MIN_DYNAMIC_RANGE)for(U++,z+=f;U<Ae.BLOCK_SIZE;U++,z+=f)for(let G=0;G<Ae.BLOCK_SIZE;G++)O+=t[z+G]&255}let k=O>>Ae.BLOCK_SIZE_POWER*2;if(B-D<=Ae.MIN_DYNAMIC_RANGE&&(k=D/2,y>0&&_>0)){const U=(h[y-1][_]+2*h[y][_-1]+h[y-1][_-1])/4;D<U&&(k=U)}h[y][_]=k}}return h}}Ae.BLOCK_SIZE_POWER=3,Ae.BLOCK_SIZE=1<<Ae.BLOCK_SIZE_POWER,Ae.BLOCK_SIZE_MASK=Ae.BLOCK_SIZE-1,Ae.MINIMUM_DIMENSION=Ae.BLOCK_SIZE*5,Ae.MIN_DYNAMIC_RANGE=24;class Ze{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,o,f){throw new pn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new pn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new pn("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new ot;for(let o=0;o<this.height;o++){const f=this.getRow(o,t);for(let d=0;d<this.width;d++){const p=f[d]&255;let s;p<64?s="#":p<128?s="+":p<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()}}class pt extends Ze{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const o=this.delegate.getRow(t,r),f=this.getWidth();for(let d=0;d<f;d++)o[d]=255-(o[d]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r);for(let f=0;f<r;f++)o[f]=255-(t[f]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,o,f){return new pt(this.delegate.crop(t,r,o,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pt(this.delegate.rotateCounterClockwise45())}}class ht extends Ze{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ht.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ht.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,o){const f=new Uint8ClampedArray(r*o);for(let d=0,p=0,s=t.length;d<s;d+=4,p++){let h;if(t[d+3]===0)h=255;else{const x=t[d],_=t[d+1],S=t[d+2];h=306*x+601*_+117*S+512>>10}f[p]=h}return f}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const o=this.getWidth(),f=t*o;return r===null?r=this.buffer.slice(f,f+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(f,f+o))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,o,f){return super.crop(t,r,o,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),o=r.getContext("2d"),f=t*ht.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*p),h=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*p);return r.width=s,r.height=h,o.translate(s/2,h/2),o.rotate(f),o.drawImage(this.canvas,d/-2,p/-2),this.buffer=ht.makeBufferFromCanvasImageData(r),this}invert(){return new pt(this)}}ht.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(t,r,o){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Q=(globalThis||ql||self||window||void 0)&&(globalThis||ql||self||window||void 0).__awaiter||function(M,t,r,o){function f(d){return d instanceof r?d:new r(function(p){p(d)})}return new(r||(r=Promise))(function(d,p){function s(x){try{y(o.next(x))}catch(_){p(_)}}function h(x){try{y(o.throw(x))}catch(_){p(_)}}function y(x){x.done?d(x.value):f(x.value).then(s,h)}y((o=o.apply(M,t||[])).next())})};class xe{constructor(t,r=500,o){this.reader=t,this.timeBetweenScansMillis=r,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const o of t){const f=o.kind==="video"?"videoinput":o.kind;if(f!=="videoinput")continue;const d=o.deviceId||o.id,p=o.label||`Video device ${r.length+1}`,s=o.groupId,h={deviceId:d,label:p,kind:f,groupId:s};r.push(h)}return r})}getVideoInputDevices(){return Q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new L(r.deviceId,r.label))})}findDeviceById(t){return Q(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Q(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const f={video:o};return yield this.decodeOnceFromConstraints(f,r)})}decodeOnceFromConstraints(t,r){return Q(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,r)})}decodeOnceFromStream(t,r){return Q(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,r,o){return Q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,o)})}decodeFromVideoDevice(t,r,o){return Q(this,void 0,void 0,function*(){let f;t?f={deviceId:{exact:t}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,r,o)})}decodeFromConstraints(t,r,o){return Q(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(f,r,o)})}decodeFromStream(t,r,o){return Q(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(f,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Q(this,void 0,void 0,function*(){const o=this.prepareVideoElement(r);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((r,o)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Q(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const o=document.getElementById(t);if(!o)throw new R(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==r.toLowerCase())throw new R(`element with id '${t}' must be an ${r} element`);return o}decodeFromImage(t,r){if(!t&&!r)throw new R("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new R("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,o){if(t===void 0&&r===void 0)throw new R("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new R("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let o;return this.isImageLoaded(r)?o=this.decodeOnce(r,!1,!0):o=this._decodeOnLoadImage(r),o}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,r)}_decodeFromVideoElementSetup(t){if(!t)throw new R("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const o=this._decodeOnLoadImage(r);return r.src=t,o}decodeFromVideoUrl(t){if(!t)throw new R("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),o=this.decodeFromVideoElement(r);return r.src=t,o}decodeFromVideoUrlContinuously(t,r){if(!t)throw new R("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(o,r);return o.src=t,f}_decodeOnLoadImage(t){return new Promise((r,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,o=!0){this._stopAsyncDecode=!1;const f=(d,p)=>{if(this._stopAsyncDecode){p(new pe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const s=this.decode(t);d(s)}catch(s){const h=r&&s instanceof pe,x=(s instanceof F||s instanceof te)&&o;if(h||x)return setTimeout(f,this._timeBetweenDecodingAttempts,d,p);p(s)}};return new Promise((d,p)=>f(d,p))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(t);r(f,null),setTimeout(o,this.timeBetweenScansMillis)}catch(f){r(null,f);const d=f instanceof F||f instanceof te,p=f instanceof pe;(d||p)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,o){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,o=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),o=new ht(r),f=new Ae(o);return new P(f)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let o,f;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,f=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,f=t.naturalHeight||t.height)),r.style.width=o+"px",r.style.height=f+"px",r.width=o,r.height=f,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ee{constructor(t,r,o=r==null?0:8*r.length,f,d,p=Y.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=o,this.resultPoints=f,this.format=d,this.timestamp=p,this.text=t,this.rawBytes=r,o==null?this.numBits=r==null?0:8*r.length:this.numBits=o,this.resultPoints=f,this.format=d,this.resultMetadata=null,p==null?this.timestamp=Y.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(r.length+t.length);Y.arraycopy(r,0,o,0,r.length),Y.arraycopy(t,0,o,r.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ue;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ue||(Ue={}));var _e=Ue,Je;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Je||(Je={}));var mt=Je;class Me{constructor(t,r,o,f,d=-1,p=-1){this.rawBytes=t,this.text=r,this.byteSegments=o,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Dr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Rn{constructor(t,r){if(r.length===0)throw new N;this.field=t;const o=r.length;if(o>1&&r[0]===0){let f=1;for(;f<o&&r[f]===0;)f++;f===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-f),Y.arraycopy(r,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let o;if(t===1){o=0;for(let p=0,s=r.length;p!==s;p++){const h=r[p];o=Dr.addOrSubtract(o,h)}return o}o=r[0];const f=r.length,d=this.field;for(let p=1;p<f;p++)o=Dr.addOrSubtract(d.multiply(t,o),r[p]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){const p=r;r=o,o=p}let f=new Int32Array(o.length);const d=o.length-r.length;Y.arraycopy(o,0,f,0,d);for(let p=d;p<o.length;p++)f[p]=Dr.addOrSubtract(r[p-d],o[p]);return new Rn(this.field,f)}multiply(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,o=r.length,f=t.coefficients,d=f.length,p=new Int32Array(o+d-1),s=this.field;for(let h=0;h<o;h++){const y=r[h];for(let x=0;x<d;x++)p[h+x]=Dr.addOrSubtract(p[h+x],s.multiply(y,f[x]))}return new Rn(s,p)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,o=this.field,f=new Int32Array(r),d=this.coefficients;for(let p=0;p<r;p++)f[p]=o.multiply(d[p],t);return new Rn(o,f)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return this.field.getZero();const o=this.coefficients,f=o.length,d=new Int32Array(f+t),p=this.field;for(let s=0;s<f;s++)d[s]=p.multiply(o[s],r);return new Rn(p,d)}divide(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new N("Divide by 0");const r=this.field;let o=r.getZero(),f=this;const d=t.getCoefficient(t.getDegree()),p=r.inverse(d);for(;f.getDegree()>=t.getDegree()&&!f.isZero();){const s=f.getDegree()-t.getDegree(),h=r.multiply(f.getCoefficient(f.getDegree()),p),y=t.multiplyByMonomial(s,h),x=r.buildMonomial(s,h);o=o.addOrSubtract(x),f=f.addOrSubtract(y)}return[o,f]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),r===0||o!==1){const f=this.field.log(o);f===0?t+="1":f===1?t+="a":(t+="a^",t+=f)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class Mt extends E{}Mt.kind="ArithmeticException";class Ct extends Dr{constructor(t,r,o){super(),this.primitive=t,this.size=r,this.generatorBase=o;const f=new Int32Array(r);let d=1;for(let s=0;s<r;s++)f[s]=d,d*=2,d>=r&&(d^=t,d&=r-1);this.expTable=f;const p=new Int32Array(r);for(let s=0;s<r-1;s++)p[f[s]]=s;this.logTable=p,this.zero=new Rn(this,Int32Array.from([0])),this.one=new Rn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;const o=new Int32Array(t+1);return o[0]=r,new Rn(this,o)}inverse(t){if(t===0)throw new Mt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+re.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Ct.AZTEC_DATA_12=new Ct(4201,4096,1),Ct.AZTEC_DATA_10=new Ct(1033,1024,1),Ct.AZTEC_DATA_6=new Ct(67,64,1),Ct.AZTEC_PARAM=new Ct(19,16,1),Ct.QR_CODE_FIELD_256=new Ct(285,256,0),Ct.DATA_MATRIX_FIELD_256=new Ct(301,256,1),Ct.AZTEC_DATA_8=Ct.DATA_MATRIX_FIELD_256,Ct.MAXICODE_FIELD_64=Ct.AZTEC_DATA_6;class Mr extends E{}Mr.kind="ReedSolomonException";class jn extends E{}jn.kind="IllegalStateException";class qi{constructor(t){this.field=t}decode(t,r){const o=this.field,f=new Rn(o,t),d=new Int32Array(r);let p=!0;for(let O=0;O<r;O++){const D=f.evaluateAt(o.exp(O+o.getGeneratorBase()));d[d.length-1-O]=D,D!==0&&(p=!1)}if(p)return;const s=new Rn(o,d),h=this.runEuclideanAlgorithm(o.buildMonomial(r,1),s,r),y=h[0],x=h[1],_=this.findErrorLocations(y),S=this.findErrorMagnitudes(x,_);for(let O=0;O<_.length;O++){const D=t.length-1-o.log(_[O]);if(D<0)throw new Mr("Bad error location");t[D]=Ct.addOrSubtract(t[D],S[O])}}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){const O=t;t=r,r=O}const f=this.field;let d=t,p=r,s=f.getZero(),h=f.getOne();for(;p.getDegree()>=(o/2|0);){let O=d,D=s;if(d=p,s=h,d.isZero())throw new Mr("r_{i-1} was zero");p=O;let B=f.getZero();const k=d.getCoefficient(d.getDegree()),U=f.inverse(k);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const z=p.getDegree()-d.getDegree(),G=f.multiply(p.getCoefficient(p.getDegree()),U);B=B.addOrSubtract(f.buildMonomial(z,G)),p=p.addOrSubtract(d.multiplyByMonomial(z,G))}if(h=B.multiply(s).addOrSubtract(D),p.getDegree()>=d.getDegree())throw new jn("Division algorithm failed to reduce polynomial?")}const y=h.getCoefficient(0);if(y===0)throw new Mr("sigmaTilde(0) was zero");const x=f.inverse(y),_=h.multiplyScalar(x),S=p.multiplyScalar(x);return[_,S]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(r);let f=0;const d=this.field;for(let p=1;p<d.getSize()&&f<r;p++)t.evaluateAt(p)===0&&(o[f]=d.inverse(p),f++);if(f!==r)throw new Mr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,r){const o=r.length,f=new Int32Array(o),d=this.field;for(let p=0;p<o;p++){const s=d.inverse(r[p]);let h=1;for(let y=0;y<o;y++)if(p!==y){const x=d.multiply(r[y],s),_=(x&1)===0?x|1:x&-2;h=d.multiply(h,_)}f[p]=d.multiply(t.evaluateAt(s),d.inverse(h)),d.getGeneratorBase()!==0&&(f[p]=d.multiply(f[p],s))}return f}}var Gn;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(Gn||(Gn={}));class Jt{decode(t){this.ddata=t;let r=t.getBits(),o=this.extractBits(r),f=this.correctBits(o),d=Jt.convertBoolArrayToByteArray(f),p=Jt.getEncodedData(f),s=new Me(d,p,null,null);return s.setNumBits(f.length),s}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,o=Gn.UPPER,f=Gn.UPPER,d="",p=0;for(;p<r;)if(f===Gn.BINARY){if(r-p<5)break;let s=Jt.readCode(t,p,5);if(p+=5,s===0){if(r-p<11)break;s=Jt.readCode(t,p,11)+31,p+=11}for(let h=0;h<s;h++){if(r-p<8){p=r;break}const y=Jt.readCode(t,p,8);d+=Ve.castAsNonUtf8Char(y),p+=8}f=o}else{let s=f===Gn.DIGIT?4:5;if(r-p<s)break;let h=Jt.readCode(t,p,s);p+=s;let y=Jt.getCharacter(f,h);y.startsWith("CTRL_")?(o=f,f=Jt.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=f)):(d+=y,f=o)}return d}static getTable(t){switch(t){case"L":return Gn.LOWER;case"P":return Gn.PUNCT;case"M":return Gn.MIXED;case"D":return Gn.DIGIT;case"B":return Gn.BINARY;case"U":default:return Gn.UPPER}}static getCharacter(t,r){switch(t){case Gn.UPPER:return Jt.UPPER_TABLE[r];case Gn.LOWER:return Jt.LOWER_TABLE[r];case Gn.MIXED:return Jt.MIXED_TABLE[r];case Gn.PUNCT:return Jt.PUNCT_TABLE[r];case Gn.DIGIT:return Jt.DIGIT_TABLE[r];default:throw new jn("Bad table")}}correctBits(t){let r,o;this.ddata.getNbLayers()<=2?(o=6,r=Ct.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,r=Ct.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,r=Ct.AZTEC_DATA_10):(o=12,r=Ct.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=t.length/o;if(d<f)throw new te;let p=t.length%o,s=new Int32Array(d);for(let S=0;S<d;S++,p+=o)s[S]=Jt.readCode(t,p,o);try{new qi(r).decode(s,d-f)}catch(S){throw new te(S)}let h=(1<<o)-1,y=0;for(let S=0;S<f;S++){let O=s[S];if(O===0||O===h)throw new te;(O===1||O===h-1)&&y++}let x=new Array(f*o-y),_=0;for(let S=0;S<f;S++){let O=s[S];if(O===1||O===h-1)x.fill(O>1,_,_+o-1),_+=o-1;else for(let D=o-1;D>=0;--D)x[_++]=(O&1<<D)!==0}return x}extractBits(t){let r=this.ddata.isCompact(),o=this.ddata.getNbLayers(),f=(r?11:14)+o*4,d=new Int32Array(f),p=new Array(this.totalBitsInLayer(o,r));if(r)for(let s=0;s<d.length;s++)d[s]=s;else{let s=f+1+2*re.truncDivision(re.truncDivision(f,2)-1,15),h=f/2,y=re.truncDivision(s,2);for(let x=0;x<h;x++){let _=x+re.truncDivision(x,15);d[h-x-1]=y-_-1,d[h+x]=y+_+1}}for(let s=0,h=0;s<o;s++){let y=(o-s)*4+(r?9:12),x=s*2,_=f-1-x;for(let S=0;S<y;S++){let O=S*2;for(let D=0;D<2;D++)p[h+O+D]=t.get(d[x+D],d[x+S]),p[h+2*y+O+D]=t.get(d[x+S],d[_-D]),p[h+4*y+O+D]=t.get(d[_-D],d[_-S]),p[h+6*y+O+D]=t.get(d[_-S],d[x+D])}h+=y*8}return p}static readCode(t,r,o){let f=0;for(let d=r;d<r+o;d++)f<<=1,t[d]&&(f|=1);return f}static readByte(t,r){let o=t.length-r;return o>=8?Jt.readCode(t,r,8):Jt.readCode(t,r,o)<<8-o}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let o=0;o<r.length;o++)r[o]=Jt.readByte(t,8*o);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Jt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Jt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Jt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Jt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Jt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Rt{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,o,f){const d=t-o,p=r-f;return Math.sqrt(d*d+p*p)}static sum(t){let r=0;for(let o=0,f=t.length;o!==f;o++){const d=t[o];r+=d}return r}}class Mi{static floatToIntBits(t){return t}}Mi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Fe){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Mi.floatToIntBits(this.x)+Mi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),f=this.distance(t[0],t[2]);let d,p,s;if(o>=r&&o>=f?(p=t[0],d=t[1],s=t[2]):f>=o&&f>=r?(p=t[1],d=t[0],s=t[2]):(p=t[2],d=t[0],s=t[1]),this.crossProductZ(d,p,s)<0){const h=d;d=s,s=h}t[0]=d,t[1]=p,t[2]=s}static distance(t,r){return Rt.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,o){const f=r.x,d=r.y;return(o.x-f)*(t.y-d)-(o.y-d)*(t.x-f)}}class Aa{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class la extends Aa{constructor(t,r,o,f,d){super(t,r),this.compact=o,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class wn{constructor(t,r,o,f){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=wn.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),f==null&&(f=t.getHeight()/2|0);const d=r/2|0;if(this.leftInit=o-d,this.rightInit=o+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new pe}detect(){let t=this.leftInit,r=this.rightInit,o=this.upInit,f=this.downInit,d=!1,p=!0,s=!1,h=!1,y=!1,x=!1,_=!1;const S=this.width,O=this.height;for(;p;){p=!1;let D=!0;for(;(D||!h)&&r<S;)D=this.containsBlackPoint(o,f,r,!1),D?(r++,p=!0,h=!0):h||r++;if(r>=S){d=!0;break}let B=!0;for(;(B||!y)&&f<O;)B=this.containsBlackPoint(t,r,f,!0),B?(f++,p=!0,y=!0):y||f++;if(f>=O){d=!0;break}let k=!0;for(;(k||!x)&&t>=0;)k=this.containsBlackPoint(o,f,t,!1),k?(t--,p=!0,x=!0):x||t--;if(t<0){d=!0;break}let U=!0;for(;(U||!_)&&o>=0;)U=this.containsBlackPoint(t,r,o,!0),U?(o--,p=!0,_=!0):_||o--;if(o<0){d=!0;break}p&&(s=!0)}if(!d&&s){const D=r-t;let B=null;for(let G=1;B===null&&G<D;G++)B=this.getBlackPointOnSegment(t,f-G,t+G,f);if(B==null)throw new pe;let k=null;for(let G=1;k===null&&G<D;G++)k=this.getBlackPointOnSegment(t,o+G,t+G,o);if(k==null)throw new pe;let U=null;for(let G=1;U===null&&G<D;G++)U=this.getBlackPointOnSegment(r,o+G,r-G,o);if(U==null)throw new pe;let z=null;for(let G=1;z===null&&G<D;G++)z=this.getBlackPointOnSegment(r,f-G,r-G,f);if(z==null)throw new pe;return this.centerEdges(z,B,U,k)}else throw new pe}getBlackPointOnSegment(t,r,o,f){const d=Rt.round(Rt.distance(t,r,o,f)),p=(o-t)/d,s=(f-r)/d,h=this.image;for(let y=0;y<d;y++){const x=Rt.round(t+y*p),_=Rt.round(r+y*s);if(h.get(x,_))return new Fe(x,_)}return null}centerEdges(t,r,o,f){const d=t.getX(),p=t.getY(),s=r.getX(),h=r.getY(),y=o.getX(),x=o.getY(),_=f.getX(),S=f.getY(),O=wn.CORR;return d<this.width/2?[new Fe(_-O,S+O),new Fe(s+O,h+O),new Fe(y-O,x-O),new Fe(d+O,p-O)]:[new Fe(_+O,S+O),new Fe(s+O,h-O),new Fe(y-O,x+O),new Fe(d-O,p-O)]}containsBlackPoint(t,r,o,f){const d=this.image;if(f){for(let p=t;p<=r;p++)if(d.get(p,o))return!0}else for(let p=t;p<=r;p++)if(d.get(o,p))return!0;return!1}}wn.INIT_SIZE=10,wn.CORR=1;class Gi{static checkAndNudgePoints(t,r){const o=t.getWidth(),f=t.getHeight();let d=!0;for(let p=0;p<r.length&&d;p+=2){const s=Math.floor(r[p]),h=Math.floor(r[p+1]);if(s<-1||s>o||h<-1||h>f)throw new pe;d=!1,s===-1?(r[p]=0,d=!0):s===o&&(r[p]=o-1,d=!0),h===-1?(r[p+1]=0,d=!0):h===f&&(r[p+1]=f-1,d=!0)}d=!0;for(let p=r.length-2;p>=0&&d;p-=2){const s=Math.floor(r[p]),h=Math.floor(r[p+1]);if(s<-1||s>o||h<-1||h>f)throw new pe;d=!1,s===-1?(r[p]=0,d=!0):s===o&&(r[p]=o-1,d=!0),h===-1?(r[p+1]=0,d=!0):h===f&&(r[p+1]=f-1,d=!0)}}}class Pn{constructor(t,r,o,f,d,p,s,h,y){this.a11=t,this.a21=r,this.a31=o,this.a12=f,this.a22=d,this.a32=p,this.a13=s,this.a23=h,this.a33=y}static quadrilateralToQuadrilateral(t,r,o,f,d,p,s,h,y,x,_,S,O,D,B,k){const U=Pn.quadrilateralToSquare(t,r,o,f,d,p,s,h);return Pn.squareToQuadrilateral(y,x,_,S,O,D,B,k).times(U)}transformPoints(t){const r=t.length,o=this.a11,f=this.a12,d=this.a13,p=this.a21,s=this.a22,h=this.a23,y=this.a31,x=this.a32,_=this.a33;for(let S=0;S<r;S+=2){const O=t[S],D=t[S+1],B=d*O+h*D+_;t[S]=(o*O+p*D+y)/B,t[S+1]=(f*O+s*D+x)/B}}transformPointsWithValues(t,r){const o=this.a11,f=this.a12,d=this.a13,p=this.a21,s=this.a22,h=this.a23,y=this.a31,x=this.a32,_=this.a33,S=t.length;for(let O=0;O<S;O++){const D=t[O],B=r[O],k=d*D+h*B+_;t[O]=(o*D+p*B+y)/k,r[O]=(f*D+s*B+x)/k}}static squareToQuadrilateral(t,r,o,f,d,p,s,h){const y=t-o+d-s,x=r-f+p-h;if(y===0&&x===0)return new Pn(o-t,d-o,t,f-r,p-f,r,0,0,1);{const _=o-d,S=s-d,O=f-p,D=h-p,B=_*D-S*O,k=(y*D-S*x)/B,U=(_*x-y*O)/B;return new Pn(o-t+k*o,s-t+U*s,t,f-r+k*f,h-r+U*h,r,k,U,1)}}static quadrilateralToSquare(t,r,o,f,d,p,s,h){return Pn.squareToQuadrilateral(t,r,o,f,d,p,s,h).buildAdjoint()}buildAdjoint(){return new Pn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Pn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class fi extends Gi{sampleGrid(t,r,o,f,d,p,s,h,y,x,_,S,O,D,B,k,U,z,G){const H=Pn.quadrilateralToQuadrilateral(f,d,p,s,h,y,x,_,S,O,D,B,k,U,z,G);return this.sampleGridWithTransform(t,r,o,H)}sampleGridWithTransform(t,r,o,f){if(r<=0||o<=0)throw new pe;const d=new Dt(r,o),p=new Float32Array(2*r);for(let s=0;s<o;s++){const h=p.length,y=s+.5;for(let x=0;x<h;x+=2)p[x]=x/2+.5,p[x+1]=y;f.transformPoints(p),Gi.checkAndNudgePoints(t,p);try{for(let x=0;x<h;x+=2)t.get(Math.floor(p[x]),Math.floor(p[x+1]))&&d.set(x/2,s)}catch{throw new pe}}return d}}class vr{static setGridSampler(t){vr.gridSampler=t}static getInstance(){return vr.gridSampler}}vr.gridSampler=new fi;class Ln{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Sa{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),o=this.getBullsEyeCorners(r);if(t){let p=o[0];o[0]=o[2],o[2]=p}this.extractParameters(o);let f=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),d=this.getMatrixCornerPoints(o);return new la(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new pe;let r=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(o,r);let f=0;for(let p=0;p<4;p++){let s=o[(this.shift+p)%4];this.compact?(f<<=7,f+=s>>1&127):(f<<=10,f+=(s>>2&992)+(s>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(t,r){let o=0;t.forEach((f,d,p)=>{let s=(f>>r-2<<1)+(f&1);o=(o<<3)+s}),o=((o&1)<<11)+(o>>1);for(let f=0;f<4;f++)if(re.bitCount(o^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new pe}getCorrectedParameterData(t,r){let o,f;r?(o=7,f=2):(o=10,f=4);let d=o-f,p=new Int32Array(o);for(let h=o-1;h>=0;--h)p[h]=t&15,t>>=4;try{new qi(Ct.AZTEC_PARAM).decode(p,d)}catch{throw new pe}let s=0;for(let h=0;h<f;h++)s=(s<<4)+p[h];return s}getBullsEyeCorners(t){let r=t,o=t,f=t,d=t,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(r,p,1,-1),S=this.getFirstDifferent(o,p,1,1),O=this.getFirstDifferent(f,p,-1,1),D=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let B=this.distancePoint(D,_)*this.nbCenterLayers/(this.distancePoint(d,r)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(_,S,O,D))break}r=_,o=S,f=O,d=D,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new pe;this.compact=this.nbCenterLayers===5;let s=new Fe(r.getX()+.5,r.getY()-.5),h=new Fe(o.getX()+.5,o.getY()+.5),y=new Fe(f.getX()-.5,f.getY()+.5),x=new Fe(d.getX()-.5,d.getY()-.5);return this.expandSquare([s,h,y,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,o,f;try{let s=new wn(this.image).detect();t=s[0],r=s[1],o=s[2],f=s[3]}catch{let h=this.image.getWidth()/2,y=this.image.getHeight()/2;t=this.getFirstDifferent(new Ln(h+7,y-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ln(h+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ln(h-7,y+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ln(h-7,y-7),!1,-1,-1).toResultPoint()}let d=Rt.round((t.getX()+f.getX()+r.getX()+o.getX())/4),p=Rt.round((t.getY()+f.getY()+r.getY()+o.getY())/4);try{let s=new wn(this.image,15,d,p).detect();t=s[0],r=s[1],o=s[2],f=s[3]}catch{t=this.getFirstDifferent(new Ln(d+7,p-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ln(d+7,p+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ln(d-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ln(d-7,p-7),!1,-1,-1).toResultPoint()}return d=Rt.round((t.getX()+f.getX()+r.getX()+o.getX())/4),p=Rt.round((t.getY()+f.getY()+r.getY()+o.getY())/4),new Ln(d,p)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,o,f,d){let p=vr.getInstance(),s=this.getDimension(),h=s/2-this.nbCenterLayers,y=s/2+this.nbCenterLayers;return p.sampleGrid(t,s,s,h,h,y,h,y,y,h,y,r.getX(),r.getY(),o.getX(),o.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(t,r,o){let f=0,d=this.distanceResultPoint(t,r),p=d/o,s=t.getX(),h=t.getY(),y=p*(r.getX()-t.getX())/d,x=p*(r.getY()-t.getY())/d;for(let _=0;_<o;_++)this.image.get(Rt.round(s+_*y),Rt.round(h+_*x))&&(f|=1<<o-_-1);return f}isWhiteOrBlackRectangle(t,r,o,f){let d=3;t=new Ln(t.getX()-d,t.getY()+d),r=new Ln(r.getX()-d,r.getY()-d),o=new Ln(o.getX()+d,o.getY()-d),f=new Ln(f.getX()+d,f.getY()+d);let p=this.getColor(f,t);if(p===0)return!1;let s=this.getColor(t,r);return s!==p||(s=this.getColor(r,o),s!==p)?!1:(s=this.getColor(o,f),s===p)}getColor(t,r){let o=this.distancePoint(t,r),f=(r.getX()-t.getX())/o,d=(r.getY()-t.getY())/o,p=0,s=t.getX(),h=t.getY(),y=this.image.get(t.getX(),t.getY()),x=Math.ceil(o);for(let S=0;S<x;S++)s+=f,h+=d,this.image.get(Rt.round(s),Rt.round(h))!==y&&p++;let _=p/o;return _>.1&&_<.9?0:_<=.1===y?1:-1}getFirstDifferent(t,r,o,f){let d=t.getX()+o,p=t.getY()+f;for(;this.isValid(d,p)&&this.image.get(d,p)===r;)d+=o,p+=f;for(d-=o,p-=f;this.isValid(d,p)&&this.image.get(d,p)===r;)d+=o;for(d-=o;this.isValid(d,p)&&this.image.get(d,p)===r;)p+=f;return p-=f,new Ln(d,p)}expandSquare(t,r,o){let f=o/(2*r),d=t[0].getX()-t[2].getX(),p=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,h=(t[0].getY()+t[2].getY())/2,y=new Fe(s+f*d,h+f*p),x=new Fe(s-f*d,h-f*p);d=t[1].getX()-t[3].getX(),p=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,h=(t[1].getY()+t[3].getY())/2;let _=new Fe(s+f*d,h+f*p),S=new Fe(s-f*d,h-f*p);return[y,_,x,S]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Rt.round(t.getX()),o=Rt.round(t.getY());return this.isValid(r,o)}distancePoint(t,r){return Rt.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Rt.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(re.truncDivision(this.nbLayers-4,8)+1)+15}}class Yi{decode(t,r=null){let o=null,f=new Sa(t.getBlackMatrix()),d=null,p=null;try{let x=f.detectMirror(!1);d=x.getPoints(),this.reportFoundResultPoints(r,d),p=new Jt().decode(x)}catch(x){o=x}if(p==null)try{let x=f.detectMirror(!0);d=x.getPoints(),this.reportFoundResultPoints(r,d),p=new Jt().decode(x)}catch(x){throw o??x}let s=new Ee(p.getText(),p.getRawBytes(),p.getNumBits(),d,_e.AZTEC,Y.currentTimeMillis()),h=p.getByteSegments();h!=null&&s.putMetadata(mt.BYTE_SEGMENTS,h);let y=p.getECLevel();return y!=null&&s.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),s}reportFoundResultPoints(t,r){if(t!=null){let o=t.get(Be.NEED_RESULT_POINT_CALLBACK);o!=null&&r.forEach((f,d,p)=>{o.foundPossibleResultPoint(f)})}}reset(){}}class Xi extends xe{constructor(t=500){super(new Yi,t)}}class $t{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(Be.TRY_HARDER)===!0&&t.isRotateSupported()){const d=t.rotateCounterClockwise(),p=this.doDecode(d,r),s=p.getResultMetadata();let h=270;s!==null&&s.get(mt.ORIENTATION)===!0&&(h=h+s.get(mt.ORIENTATION)%360),p.putMetadata(mt.ORIENTATION,h);const y=p.getResultPoints();if(y!==null){const x=d.getHeight();for(let _=0;_<y.length;_++)y[_]=new Fe(x-y[_].getY()-1,y[_].getX())}return p}else throw new pe}}reset(){}doDecode(t,r){const o=t.getWidth(),f=t.getHeight();let d=new Ce(o);const p=r&&r.get(Be.TRY_HARDER)===!0,s=Math.max(1,f>>(p?8:5));let h;p?h=f:h=15;const y=Math.trunc(f/2);for(let x=0;x<h;x++){const _=Math.trunc((x+1)/2),S=(x&1)===0,O=y+s*(S?_:-_);if(O<0||O>=f)break;try{d=t.getBlackRow(O,d)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(d.reverse(),r&&r.get(Be.NEED_RESULT_POINT_CALLBACK)===!0)){const B=new Map;r.forEach((k,U)=>B.set(U,k)),B.delete(Be.NEED_RESULT_POINT_CALLBACK),r=B}try{const B=this.decodeRow(O,d,r);if(D===1){B.putMetadata(mt.ORIENTATION,180);const k=B.getResultPoints();k!==null&&(k[0]=new Fe(o-k[0].getX()-1,k[0].getY()),k[1]=new Fe(o-k[1].getX()-1,k[1].getY()))}return B}catch{}}}throw new pe}static recordPattern(t,r,o){const f=o.length;for(let y=0;y<f;y++)o[y]=0;const d=t.getSize();if(r>=d)throw new pe;let p=!t.get(r),s=0,h=r;for(;h<d;){if(t.get(h)!==p)o[s]++;else{if(++s===f)break;o[s]=1,p=!p}h++}if(!(s===f||s===f-1&&h===d))throw new pe}static recordPatternInReverse(t,r,o){let f=o.length,d=t.get(r);for(;r>0&&f>=0;)t.get(--r)!==d&&(f--,d=!d);if(f>=0)throw new pe;$t.recordPattern(t,r+1,o)}static patternMatchVariance(t,r,o){const f=t.length;let d=0,p=0;for(let y=0;y<f;y++)d+=t[y],p+=r[y];if(d<p)return Number.POSITIVE_INFINITY;const s=d/p;o*=s;let h=0;for(let y=0;y<f;y++){const x=t[y],_=r[y]*s,S=x>_?x-_:_-x;if(S>o)return Number.POSITIVE_INFINITY;h+=S}return h/d}}class De extends $t{static findStartPattern(t){const r=t.getSize(),o=t.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),p=o,s=!1;const h=6;for(let y=o;y<r;y++)if(t.get(y)!==s)d[f]++;else{if(f===h-1){let x=De.MAX_AVG_VARIANCE,_=-1;for(let S=De.CODE_START_A;S<=De.CODE_START_C;S++){const O=$t.patternMatchVariance(d,De.CODE_PATTERNS[S],De.MAX_INDIVIDUAL_VARIANCE);O<x&&(x=O,_=S)}if(_>=0&&t.isRange(Math.max(0,p-(y-p)/2),p,!1))return Int32Array.from([p,y,_]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,s=!s}throw new pe}static decodeCode(t,r,o){$t.recordPattern(t,o,r);let f=De.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<De.CODE_PATTERNS.length;p++){const s=De.CODE_PATTERNS[p],h=this.patternMatchVariance(r,s,De.MAX_INDIVIDUAL_VARIANCE);h<f&&(f=h,d=p)}if(d>=0)return d;throw new pe}decodeRow(t,r,o){const f=o&&o.get(Be.ASSUME_GS1)===!0,d=De.findStartPattern(r),p=d[2];let s=0;const h=new Uint8Array(20);h[s++]=p;let y;switch(p){case De.CODE_START_A:y=De.CODE_CODE_A;break;case De.CODE_START_B:y=De.CODE_CODE_B;break;case De.CODE_START_C:y=De.CODE_CODE_C;break;default:throw new te}let x=!1,_=!1,S="",O=d[0],D=d[1];const B=Int32Array.from([0,0,0,0,0,0]);let k=0,U=0,z=p,G=0,H=!0,K=!1,X=!1;for(;!x;){const Re=_;switch(_=!1,k=U,U=De.decodeCode(r,B,D),h[s++]=U,U!==De.CODE_STOP&&(H=!0),U!==De.CODE_STOP&&(G++,z+=G*U),O=D,D+=B.reduce((ke,Pe)=>ke+Pe,0),U){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new te}switch(y){case De.CODE_CODE_A:if(U<64)X===K?S+=String.fromCharCode(32+U):S+=String.fromCharCode(32+U+128),X=!1;else if(U<96)X===K?S+=String.fromCharCode(U-64):S+=String.fromCharCode(U+64),X=!1;else switch(U!==De.CODE_STOP&&(H=!1),U){case De.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!K&&X?(K=!0,X=!1):K&&X?(K=!1,X=!1):X=!0;break;case De.CODE_SHIFT:_=!0,y=De.CODE_CODE_B;break;case De.CODE_CODE_B:y=De.CODE_CODE_B;break;case De.CODE_CODE_C:y=De.CODE_CODE_C;break;case De.CODE_STOP:x=!0;break}break;case De.CODE_CODE_B:if(U<96)X===K?S+=String.fromCharCode(32+U):S+=String.fromCharCode(32+U+128),X=!1;else switch(U!==De.CODE_STOP&&(H=!1),U){case De.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!K&&X?(K=!0,X=!1):K&&X?(K=!1,X=!1):X=!0;break;case De.CODE_SHIFT:_=!0,y=De.CODE_CODE_A;break;case De.CODE_CODE_A:y=De.CODE_CODE_A;break;case De.CODE_CODE_C:y=De.CODE_CODE_C;break;case De.CODE_STOP:x=!0;break}break;case De.CODE_CODE_C:if(U<100)U<10&&(S+="0"),S+=U;else switch(U!==De.CODE_STOP&&(H=!1),U){case De.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case De.CODE_CODE_A:y=De.CODE_CODE_A;break;case De.CODE_CODE_B:y=De.CODE_CODE_B;break;case De.CODE_STOP:x=!0;break}break}Re&&(y=y===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const ee=D-O;if(D=r.getNextUnset(D),!r.isRange(D,Math.min(r.getSize(),D+(D-O)/2),!1))throw new pe;if(z-=G*k,z%103!==k)throw new F;const ae=S.length;if(ae===0)throw new pe;ae>0&&H&&(y===De.CODE_CODE_C?S=S.substring(0,ae-2):S=S.substring(0,ae-1));const oe=(d[1]+d[0])/2,ce=O+ee/2,ve=h.length,Ne=new Uint8Array(ve);for(let Re=0;Re<ve;Re++)Ne[Re]=h[Re];const je=[new Fe(oe,t),new Fe(ce,t)];return new Ee(S,Ne,0,je,_e.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class Bt extends $t{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,o){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Bt.findAsteriskPattern(r,f),p=r.getNextSet(d[1]),s=r.getSize(),h,y;do{Bt.recordPattern(r,p,f);let B=Bt.toNarrowWidePattern(f);if(B<0)throw new pe;h=Bt.patternToChar(B),this.decodeRowResult+=h,y=p;for(let k of f)p+=k;p=r.getNextSet(p)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let B of f)x+=B;let _=p-y-x;if(p!==s&&_*2<x)throw new pe;if(this.usingCheckDigit){let B=this.decodeRowResult.length-1,k=0;for(let U=0;U<B;U++)k+=Bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(B)!==Bt.ALPHABET_STRING.charAt(k%43))throw new F;this.decodeRowResult=this.decodeRowResult.substring(0,B)}if(this.decodeRowResult.length===0)throw new pe;let S;this.extendedMode?S=Bt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let O=(d[1]+d[0])/2,D=y+x/2;return new Ee(S,null,0,[new Fe(O,t),new Fe(D,t)],_e.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let o=t.getSize(),f=t.getNextSet(0),d=0,p=f,s=!1,h=r.length;for(let y=f;y<o;y++)if(t.get(y)!==s)r[d]++;else{if(d===h-1){if(this.toNarrowWidePattern(r)===Bt.ASTERISK_ENCODING&&t.isRange(Math.max(0,p-Math.floor((y-p)/2)),p,!1))return[p,y];p+=r[0]+r[1],r.copyWithin(0,2,2+d-1),r[d-1]=0,r[d]=0,d--}else d++;r[d]=1,s=!s}throw new pe}static toNarrowWidePattern(t){let r=t.length,o=0,f;do{let d=2147483647;for(let h of t)h<d&&h>o&&(d=h);o=d,f=0;let p=0,s=0;for(let h=0;h<r;h++){let y=t[h];y>o&&(s|=1<<r-1-h,f++,p+=y)}if(f===3){for(let h=0;h<r&&f>0;h++){let y=t[h];if(y>o&&(f--,y*2>=p))return-1}return s}}while(f>3);return-1}static patternToChar(t){for(let r=0;r<Bt.CHARACTER_ENCODINGS.length;r++)if(Bt.CHARACTER_ENCODINGS[r]===t)return Bt.ALPHABET_STRING.charAt(r);if(t===Bt.ASTERISK_ENCODING)return"*";throw new pe}static decodeExtended(t){let r=t.length,o="";for(let f=0;f<r;f++){let d=t.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=t.charAt(f+1),s="\0";switch(d){case"+":if(p>="A"&&p<="Z")s=String.fromCharCode(p.charCodeAt(0)+32);else throw new te;break;case"$":if(p>="A"&&p<="Z")s=String.fromCharCode(p.charCodeAt(0)-64);else throw new te;break;case"%":if(p>="A"&&p<="E")s=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")s=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")s=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")s=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")s="\0";else if(p==="V")s="@";else if(p==="W")s="`";else if(p==="X"||p==="Y"||p==="Z")s="";else throw new te;break;case"/":if(p>="A"&&p<="O")s=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")s=":";else throw new te;break}o+=s,f++}else o+=d}return o}}Bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Bt.ASTERISK_ENCODING=148;class Ie extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,o){let f=this.decodeStart(r),d=this.decodeEnd(r),p=new ot;Ie.decodeMiddle(r,f[1],d[0],p);let s=p.toString(),h=null;o!=null&&(h=o.get(Be.ALLOWED_LENGTHS)),h==null&&(h=Ie.DEFAULT_ALLOWED_LENGTHS);let y=s.length,x=!1,_=0;for(let D of h){if(y===D){x=!0;break}D>_&&(_=D)}if(!x&&y>_&&(x=!0),!x)throw new te;const S=[new Fe(f[1],t),new Fe(d[0],t)];return new Ee(s,null,0,S,_e.ITF,new Date().getTime())}static decodeMiddle(t,r,o,f){let d=new Int32Array(10),p=new Int32Array(5),s=new Int32Array(5);for(d.fill(0),p.fill(0),s.fill(0);r<o;){$t.recordPattern(t,r,d);for(let y=0;y<5;y++){let x=2*y;p[y]=d[x],s[y]=d[x+1]}let h=Ie.decodeDigit(p);f.append(h.toString()),h=this.decodeDigit(s),f.append(h.toString()),d.forEach(function(y){r+=y})}}decodeStart(t){let r=Ie.skipWhiteSpace(t),o=Ie.findGuardPattern(t,r,Ie.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,r){let o=this.narrowLineWidth*10;o=o<r?o:r;for(let f=r-1;o>0&&f>=0&&!t.get(f);f--)o--;if(o!==0)throw new pe}static skipWhiteSpace(t){const r=t.getSize(),o=t.getNextSet(0);if(o===r)throw new pe;return o}decodeEnd(t){t.reverse();try{let r=Ie.skipWhiteSpace(t),o;try{o=Ie.findGuardPattern(t,r,Ie.END_PATTERN_REVERSED[0])}catch(d){d instanceof pe&&(o=Ie.findGuardPattern(t,r,Ie.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let f=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-f,o}finally{t.reverse()}}static findGuardPattern(t,r,o){let f=o.length,d=new Int32Array(f),p=t.getSize(),s=!1,h=0,y=r;d.fill(0);for(let x=r;x<p;x++)if(t.get(x)!==s)d[h]++;else{if(h===f-1){if($t.patternMatchVariance(d,o,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return[y,x];y+=d[0]+d[1],Y.arraycopy(d,2,d,0,h-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,s=!s}throw new pe}static decodeDigit(t){let r=Ie.MAX_AVG_VARIANCE,o=-1,f=Ie.PATTERNS.length;for(let d=0;d<f;d++){let p=Ie.PATTERNS[d],s=$t.patternMatchVariance(t,p,Ie.MAX_INDIVIDUAL_VARIANCE);s<r?(r=s,o=d):s===r&&(o=-1)}if(o>=0)return o%10;throw new pe}}Ie.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ie.MAX_AVG_VARIANCE=.38,Ie.MAX_INDIVIDUAL_VARIANCE=.5,Ie.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ie.START_PATTERN=Int32Array.from([1,1,1,1]),Ie.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nn extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,o,f=0,d=Int32Array.from([0,0,0]);for(;!r;){d=Int32Array.from([0,0,0]),o=nn.findGuardPattern(t,f,!1,this.START_END_PATTERN,d);let p=o[0];f=o[1];let s=p-(f-p);s>=0&&(r=t.isRange(s,p,!1))}return o}static checkChecksum(t){return nn.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return nn.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let f=r-1;f>=0;f-=2){let d=t.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new te;o+=d}o*=3;for(let f=r-2;f>=0;f-=2){let d=t.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new te;o+=d}return(1e3-o)%10}static decodeEnd(t,r){return nn.findGuardPattern(t,r,!1,nn.START_END_PATTERN,new Int32Array(nn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,o,f){return this.findGuardPattern(t,r,o,f,new Int32Array(f.length))}static findGuardPattern(t,r,o,f,d){let p=t.getSize();r=o?t.getNextUnset(r):t.getNextSet(r);let s=0,h=r,y=f.length,x=o;for(let _=r;_<p;_++)if(t.get(_)!==x)d[s]++;else{if(s===y-1){if($t.patternMatchVariance(d,f,nn.MAX_INDIVIDUAL_VARIANCE)<nn.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=d[0]+d[1];let S=d.slice(2,d.length-1);for(let O=0;O<s-1;O++)d[O]=S[O];d[s-1]=0,d[s]=0,s--}else s++;d[s]=1,x=!x}throw new pe}static decodeDigit(t,r,o,f){this.recordPattern(t,o,r);let d=this.MAX_AVG_VARIANCE,p=-1,s=f.length;for(let h=0;h<s;h++){let y=f[h],x=$t.patternMatchVariance(r,y,nn.MAX_INDIVIDUAL_VARIANCE);x<d&&(d=x,p=h)}if(p>=0)return p;throw new pe}}nn.MAX_AVG_VARIANCE=.48,nn.MAX_INDIVIDUAL_VARIANCE=.7,nn.START_END_PATTERN=Int32Array.from([1,1,1]),nn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Vr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(r,o,f),p=f.toString(),s=Vr.parseExtensionString(p),h=[new Fe((o[0]+o[1])/2,t),new Fe(d,t)],y=new Ee(p,null,0,h,_e.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&y.putAllMetadata(s),y}decodeMiddle(t,r,o){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=t.getSize(),p=r[1],s=0;for(let y=0;y<5&&p<d;y++){let x=nn.decodeDigit(t,f,p,nn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let _ of f)p+=_;x>=10&&(s|=1<<4-y),y!==4&&(p=t.getNextSet(p),p=t.getNextUnset(p))}if(o.length!==5)throw new pe;let h=this.determineCheckDigit(s);if(Vr.extensionChecksum(o.toString())!==h)throw new pe;return p}static extensionChecksum(t){let r=t.length,o=0;for(let f=r-2;f>=0;f-=2)o+=t.charAt(f).charCodeAt(0)-48;o*=3;for(let f=r-1;f>=0;f-=2)o+=t.charAt(f).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new pe}static parseExtensionString(t){if(t.length!==5)return null;let r=Vr.parseExtension5String(t);return r==null?null:new Map([[mt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let o=parseInt(t.substring(1)),f=(o/100).toString(),d=o%100,p=d<10?"0"+d:d.toString();return r+f+"."+p}}class ua{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(r,o,f),p=f.toString(),s=ua.parseExtensionString(p),h=[new Fe((o[0]+o[1])/2,t),new Fe(d,t)],y=new Ee(p,null,0,h,_e.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&y.putAllMetadata(s),y}decodeMiddle(t,r,o){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=t.getSize(),p=r[1],s=0;for(let h=0;h<2&&p<d;h++){let y=nn.decodeDigit(t,f,p,nn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let x of f)p+=x;y>=10&&(s|=1<<1-h),h!==1&&(p=t.getNextSet(p),p=t.getNextUnset(p))}if(o.length!==2)throw new pe;if(parseInt(o.toString())%4!==s)throw new pe;return p}static parseExtensionString(t){return t.length!==2?null:new Map([[mt.ISSUE_NUMBER,parseInt(t)]])}}class ze{static decodeRow(t,r,o){let f=nn.findGuardPattern(r,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Vr().decodeRow(t,r,f)}catch{return new ua().decodeRow(t,r,f)}}}ze.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends nn{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Tt.L_PATTERNS[t-10],o=new Int32Array(r.length);for(let f=0;f<r.length;f++)o[f]=r[r.length-f-1];Tt.L_AND_G_PATTERNS[t]=o}}decodeRow(t,r,o){let f=Tt.findStartGuardPattern(r),d=o==null?null:o.get(Be.NEED_RESULT_POINT_CALLBACK);if(d!=null){const H=new Fe((f[0]+f[1])/2,t);d.foundPossibleResultPoint(H)}let p=this.decodeMiddle(r,f,this.decodeRowStringBuffer),s=p.rowOffset,h=p.resultString;if(d!=null){const H=new Fe(s,t);d.foundPossibleResultPoint(H)}let y=this.decodeEnd(r,s);if(d!=null){const H=new Fe((y[0]+y[1])/2,t);d.foundPossibleResultPoint(H)}let x=y[1],_=x+(x-y[0]);if(_>=r.getSize()||!r.isRange(x,_,!1))throw new pe;let S=h.toString();if(S.length<8)throw new te;if(!Tt.checkChecksum(S))throw new F;let O=(f[1]+f[0])/2,D=(y[1]+y[0])/2,B=this.getBarcodeFormat(),k=[new Fe(O,t),new Fe(D,t)],U=new Ee(S,null,0,k,B,new Date().getTime()),z=0;try{let H=ze.decodeRow(t,r,y[1]);U.putMetadata(mt.UPC_EAN_EXTENSION,H.getText()),U.putAllMetadata(H.getResultMetadata()),U.addResultPoints(H.getResultPoints()),z=H.getText().length}catch{}let G=o==null?null:o.get(Be.ALLOWED_EAN_EXTENSIONS);if(G!=null){let H=!1;for(let K in G)if(z.toString()===K){H=!0;break}if(!H)throw new pe}return U}decodeEnd(t,r){return Tt.findGuardPattern(t,r,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return Tt.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let f=r-1;f>=0;f-=2){let d=t.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new te;o+=d}o*=3;for(let f=r-2;f>=0;f-=2){let d=t.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new te;o+=d}return(1e3-o)%10}}class qr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=t.getSize(),p=r[1],s=0;for(let y=0;y<6&&p<d;y++){let x=Tt.decodeDigit(t,f,p,Tt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let _ of f)p+=_;x>=10&&(s|=1<<5-y)}o=qr.determineFirstDigit(o,s),p=Tt.findGuardPattern(t,p,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&p<d;y++){let x=Tt.decodeDigit(t,f,p,Tt.L_PATTERNS);o+=String.fromCharCode(48+x);for(let _ of f)p+=_}return{rowOffset:p,resultString:o}}getBarcodeFormat(){return _e.EAN_13}static determineFirstDigit(t,r){for(let o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new pe}}qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=t.getSize(),p=r[1];for(let h=0;h<4&&p<d;h++){let y=Tt.decodeDigit(t,f,p,Tt.L_PATTERNS);o+=String.fromCharCode(48+y);for(let x of f)p+=x}p=Tt.findGuardPattern(t,p,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&p<d;h++){let y=Tt.decodeDigit(t,f,p,Tt.L_PATTERNS);o+=String.fromCharCode(48+y);for(let x of f)p+=x}return{rowOffset:p,resultString:o}}getBarcodeFormat(){return _e.EAN_8}}class ca extends Tt{constructor(){super(...arguments),this.ean13Reader=new qr}getBarcodeFormat(){return _e.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,o))}decodeMiddle(t,r,o){return this.ean13Reader.decodeMiddle(t,r,o)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let o=new Ee(r.substring(1),null,null,t.getResultPoints(),_e.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new pe}reset(){this.ean13Reader.reset()}}class Yn extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,o){const f=this.decodeMiddleCounters.map(y=>y);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=t.getSize();let p=r[1],s=0;for(let y=0;y<6&&p<d;y++){const x=Yn.decodeDigit(t,f,p,Yn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let _ of f)p+=_;x>=10&&(s|=1<<5-y)}let h=Yn.determineNumSysAndCheckDigit(o,s);return{rowOffset:p,resultString:h}}decodeEnd(t,r){return Yn.findGuardPatternWithoutCounters(t,r,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(t){return Tt.checkChecksum(Yn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let o=0;o<=1;o++)for(let f=0;f<10;f++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][f]){let d=String.fromCharCode(48+o),p=String.fromCharCode(48+f);return d+t+p}throw pe.getNotFoundInstance()}getBarcodeFormat(){return _e.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(d=>d.charCodeAt(0)),o=new ot;o.append(t.charAt(0));let f=r[5];switch(f){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(f),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(f);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ps extends $t{constructor(t){super();let r=t==null?null:t.get(Be.POSSIBLE_FORMATS),o=[];c(r)?(o.push(new qr),o.push(new ca),o.push(new Zr),o.push(new Yn)):(r.indexOf(_e.EAN_13)>-1&&o.push(new qr),r.indexOf(_e.UPC_A)>-1&&o.push(new ca),r.indexOf(_e.EAN_8)>-1&&o.push(new Zr),r.indexOf(_e.UPC_E)>-1&&o.push(new Yn)),this.readers=o}decodeRow(t,r,o){for(let f of this.readers)try{const d=f.decodeRow(t,r,o),p=d.getBarcodeFormat()===_e.EAN_13&&d.getText().charAt(0)==="0",s=o==null?null:o.get(Be.POSSIBLE_FORMATS),h=s==null||s.includes(_e.UPC_A);if(p&&h){const y=d.getRawBytes(),x=new Ee(d.getText().substring(1),y,y?y.length:null,d.getResultPoints(),_e.UPC_A);return x.putAllMetadata(d.getResultMetadata()),x}return d}catch{}throw new pe}reset(){for(let t of this.readers)t.reset()}}class Xn extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let o=0;o<r.length;o++)if($t.patternMatchVariance(t,r[o],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return o;throw new pe}static count(t){return Rt.sum(new Int32Array(t))}static increment(t,r){let o=0,f=r[0];for(let d=1;d<t.length;d++)r[d]>f&&(f=r[d],o=d);t[o]++}static decrement(t,r){let o=0,f=r[0];for(let d=1;d<t.length;d++)r[d]<f&&(f=r[d],o=d);t[o]--}static isFinderPattern(t){let r=t[0]+t[1],o=r+t[2]+t[3],f=r/o;if(f>=Xn.MIN_FINDER_PATTERN_RATIO&&f<=Xn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let s of t)s>p&&(p=s),s<d&&(d=s);return p<10*d}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class xr{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof xr))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class wr{constructor(t,r,o,f,d){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Fe(o,d)),this.resultPoints.push(new Fe(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof wr))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Br{constructor(){}static getRSSvalue(t,r,o){let f=0;for(let h of t)f+=h;let d=0,p=0,s=t.length;for(let h=0;h<s-1;h++){let y;for(y=1,p|=1<<h;y<t[h];y++,p&=~(1<<h)){let x=Br.combins(f-y-1,s-h-2);if(o&&p===0&&f-y-(s-h-1)>=s-h-1&&(x-=Br.combins(f-y-(s-h),s-h-2)),s-h-1>1){let _=0;for(let S=f-y-(s-h-2);S>r;S--)_+=Br.combins(f-y-S-1,s-h-3);x-=_*(s-1-h)}else f-y>r&&x--;d+=x}f-=y}return d}static combins(t,r){let o,f;t-r>r?(f=r,o=t-r):(f=t-r,o=r);let d=1,p=1;for(let s=t;s>o;s--)d*=s,p<=f&&(d/=p,p++);for(;p<=f;)d/=p,p++;return d}}class Ca{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let o=12*r,f=new Ce(o),d=0,s=t[0].getRightChar().getValue();for(let h=11;h>=0;--h)(s&1<<h)!=0&&f.set(d),d++;for(let h=1;h<t.length;++h){let y=t[h],x=y.getLeftChar().getValue();for(let _=11;_>=0;--_)(x&1<<_)!=0&&f.set(d),d++;if(y.getRightChar()!=null){let _=y.getRightChar().getValue();for(let S=11;S>=0;--S)(_&1<<S)!=0&&f.set(d),d++}}return f}}class Vt{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class An{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class $n extends An{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===$n.FNC1}}$n.FNC1="$";class Lr extends An{constructor(t,r,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class er extends An{constructor(t,r,o){if(super(t),r<0||r>10||o<0||o>10)throw new te;this.firstDigit=r,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===er.FNC1}isSecondDigitFNC1(){return this.secondDigit===er.FNC1}isAnyFNC1(){return this.firstDigit===er.FNC1||this.secondDigit===er.FNC1}}er.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new pe;let r=t.substring(0,2);for(let d of He.TWO_DIGIT_DATA_LENGTH)if(d[0]===r)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,d[2],t):He.processFixedAI(2,d[1],t);if(t.length<3)throw new pe;let o=t.substring(0,3);for(let d of He.THREE_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,d[2],t):He.processFixedAI(3,d[1],t);for(let d of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],t):He.processFixedAI(4,d[1],t);if(t.length<4)throw new pe;let f=t.substring(0,4);for(let d of He.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],t):He.processFixedAI(4,d[1],t);throw new pe}static processFixedAI(t,r,o){if(o.length<t)throw new pe;let f=o.substring(0,t);if(o.length<t+r)throw new pe;let d=o.substring(t,t+r),p=o.substring(t+r),s="("+f+")"+d,h=He.parseFieldsInGeneralPurpose(p);return h==null?s:s+h}static processVariableAI(t,r,o){let f=o.substring(0,t),d;o.length<t+r?d=o.length:d=t+r;let p=o.substring(t,d),s=o.substring(d),h="("+f+")"+p,y=He.parseFieldsInGeneralPurpose(s);return y==null?h:h+y}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class br{constructor(t){this.buffer=new ot,this.information=t}decodeAllCodes(t,r){let o=r,f=null;do{let d=this.decodeGeneralPurposeField(o,f),p=He.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&t.append(p),d.isRemaining()?f=""+d.getRemainingValue():f=null,o===d.getNewPosition())break;o=d.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(t,4);return d===0?new er(this.information.getSize(),er.FNC1,er.FNC1):new er(this.information.getSize(),d-1,er.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),o=(r-8)/11,f=(r-8)%11;return new er(t+7,o,f)}extractNumericValueFromBitArray(t,r){return br.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,o){let f=0;for(let d=0;d<o;++d)t.get(r+d)&&(f|=1<<o-d-1);return f}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Lr(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Lr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let o=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Lr(this.current.getPosition(),this.buffer.toString()):r=new Lr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Vt(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Vt(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Vt(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Vt(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vt(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(t,8);return f>=232&&f<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new $n(t+5,$n.FNC1);if(r>=5&&r<15)return new $n(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new $n(t+7,""+(o+1));if(o>=90&&o<116)return new $n(t+7,""+(o+7));let f=this.extractNumericValueFromBitArray(t,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new te}return new $n(t+8,d)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new $n(t+5,$n.FNC1);if(r>=5&&r<15)return new $n(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new $n(t+6,""+(o+33));let f;switch(o){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new jn("Decoding invalid alphanumeric value: "+o)}return new $n(t+6,f)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class rn{constructor(t){this.information=t,this.generalDecoder=new br(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Pt extends rn{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,o)}encodeCompressedGtinWithoutAI(t,r,o){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*f,10);d/100===0&&t.append("0"),d/10===0&&t.append("0"),t.append(d)}Pt.appendCheckDigit(t,o)}static appendCheckDigit(t,r){let o=0;for(let f=0;f<13;f++){let d=t.charAt(f+r).charCodeAt(0)-48;o+=(f&1)===0?3*d:d}o=10-o%10,o===10&&(o=0),t.append(o)}}Pt.GTIN_SIZE=40;class Un extends Pt{constructor(t){super(t)}parseInformation(){let t=new ot;t.append("(01)");let r=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Un.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,Un.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Un.HEADER_SIZE+44)}}Un.HEADER_SIZE=4;class hi extends rn{constructor(t){super(t)}parseInformation(){let t=new ot;return this.getGeneralDecoder().decodeAllCodes(t,hi.HEADER_SIZE)}}hi.HEADER_SIZE=5;class $a extends Pt{constructor(t){super(t)}encodeCompressedWeight(t,r,o){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(t,f);let d=this.checkWeight(f),p=1e5;for(let s=0;s<5;++s)d/p===0&&t.append("0"),p/=10;t.append(d)}}class Kn extends $a{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Kn.HEADER_SIZE+$a.GTIN_SIZE+Kn.WEIGHT_SIZE)throw new pe;let t=new ot;return this.encodeCompressedGtin(t,Kn.HEADER_SIZE),this.encodeCompressedWeight(t,Kn.HEADER_SIZE+$a.GTIN_SIZE,Kn.WEIGHT_SIZE),t.toString()}}Kn.HEADER_SIZE=5,Kn.WEIGHT_SIZE=15;class Us extends Kn{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Gr extends Kn{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Er extends Pt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Er.HEADER_SIZE+Pt.GTIN_SIZE)throw new pe;let t=new ot;this.encodeCompressedGtin(t,Er.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Er.HEADER_SIZE+Pt.GTIN_SIZE,Er.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Er.HEADER_SIZE+Pt.GTIN_SIZE+Er.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}Er.HEADER_SIZE=8,Er.LAST_DIGIT_SIZE=2;class bn extends Pt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<bn.HEADER_SIZE+Pt.GTIN_SIZE)throw new pe;let t=new ot;this.encodeCompressedGtin(t,bn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+Pt.GTIN_SIZE,bn.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+Pt.GTIN_SIZE+bn.LAST_DIGIT_SIZE,bn.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let f=this.getGeneralDecoder().decodeGeneralPurposeField(bn.HEADER_SIZE+Pt.GTIN_SIZE+bn.LAST_DIGIT_SIZE+bn.FIRST_THREE_DIGITS_SIZE,null);return t.append(f.getNewString()),t.toString()}}bn.HEADER_SIZE=8,bn.LAST_DIGIT_SIZE=2,bn.FIRST_THREE_DIGITS_SIZE=10;class st extends $a{constructor(t,r,o){super(t),this.dateCode=o,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=st.HEADER_SIZE+st.GTIN_SIZE+st.WEIGHT_SIZE+st.DATE_SIZE)throw new pe;let t=new ot;return this.encodeCompressedGtin(t,st.HEADER_SIZE),this.encodeCompressedWeight(t,st.HEADER_SIZE+st.GTIN_SIZE,st.WEIGHT_SIZE),this.encodeCompressedDate(t,st.HEADER_SIZE+st.GTIN_SIZE+st.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,st.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let f=o%32;o/=32;let d=o%12+1;o/=12;let p=o;p/10==0&&t.append("0"),t.append(p),d/10==0&&t.append("0"),t.append(d),f/10==0&&t.append("0"),t.append(f)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}st.HEADER_SIZE=8,st.WEIGHT_SIZE=20,st.DATE_SIZE=16;function kr(M){try{if(M.get(1))return new Un(M);if(!M.get(2))return new hi(M);switch(br.extractNumericValueFromBitArray(M,1,4)){case 4:return new Us(M);case 5:return new Gr(M)}switch(br.extractNumericValueFromBitArray(M,1,5)){case 12:return new Er(M);case 13:return new bn(M)}switch(br.extractNumericValueFromBitArray(M,1,7)){case 56:return new st(M,"310","11");case 57:return new st(M,"320","11");case 58:return new st(M,"310","13");case 59:return new st(M,"320","13");case 60:return new st(M,"310","15");case 61:return new st(M,"320","15");case 62:return new st(M,"310","17");case 63:return new st(M,"320","17")}}catch(t){throw console.log(t),new jn("unknown decoder: "+M)}}class Sn{constructor(t,r,o,f){this.leftchar=t,this.rightchar=r,this.finderpattern=o,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Sn?Sn.equalsOrNull(t.leftchar,r.leftchar)&&Sn.equalsOrNull(t.rightchar,r.rightchar)&&Sn.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Sn.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Cn{constructor(t,r,o){this.pairs=t,this.rowNumber=r,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof Cn?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let o;return t.forEach((f,d)=>{r.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(o=!0)})}),o}}class Te extends Xn{constructor(t){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,o){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(t,r))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(d){if(d instanceof pe){if(!this.pairs.length)throw new pe;o=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(t,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new pe}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let o=r;o<this.rows.length;o++){let f=this.rows[o];this.pairs.length=0;for(let p of t)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(t);d.push(f);try{return this.checkRows(d,o+1)}catch(p){this.verbose&&console.log(p)}}throw new pe}static isValidSequence(t){for(let r of Te.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let o=!0;for(let f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!=r[f]){o=!1;break}if(o)return!0}return!1}storeRow(t,r){let o=0,f=!1,d=!1;for(;o<this.rows.length;){let p=this.rows[o];if(p.getRowNumber()>t){d=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),o++}d||f||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Cn(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let o of r)if(o.getPairs().length!==t.length){for(let f of o.getPairs())for(let d of t)if(Sn.equals(f,d))break}}static isPartialRow(t,r){for(let o of r){let f=!0;for(let d of t){let p=!1;for(let s of o.getPairs())if(d.equals(s)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Ca.buildBitArray(t),f=kr(r).parseInformation(),d=t[0].getFinderPattern().getResultPoints(),p=t[t.length-1].getFinderPattern().getResultPoints(),s=[d[0],d[1],p[0],p[1]];return new Ee(f,null,null,s,_e.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let f=o.getChecksumPortion(),d=2;for(let s=1;s<this.pairs.size();++s){let h=this.pairs.get(s);f+=h.getLeftChar().getChecksumPortion(),d++;let y=h.getRightChar();y!=null&&(f+=y.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==r.getValue()}static getNextSecondBar(t,r){let o;return t.get(r)?(o=t.getNextUnset(r),o=t.getNextSet(o)):(o=t.getNextSet(r),o=t.getNextUnset(o)),o}retrieveNextPair(t,r,o){let f=r.length%2==0;this.startFromEven&&(f=!f);let d,p=!0,s=-1;do this.findNextPair(t,r,s),d=this.parseFoundFinderPattern(t,o,f),d==null?s=Te.getNextSecondBar(t,this.startEnd[0]):p=!1;while(p);let h=this.decodeDataCharacter(t,d,f,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new pe;let y;try{y=this.decodeDataCharacter(t,d,f,!1)}catch(x){y=null,this.verbose&&console.log(x)}return new Sn(h,y,d,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,o){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=t.getSize(),p;o>=0?p=o:this.isEmptyPair(r)?p=0:p=r[r.length-1].getFinderPattern().getStartEnd()[1];let s=r.length%2!=0;this.startFromEven&&(s=!s);let h=!1;for(;p<d&&(h=!t.get(p),!!h);)p++;let y=0,x=p;for(let _=p;_<d;_++)if(t.get(_)!=h)f[y]++;else{if(y==3){if(s&&Te.reverseCounters(f),Te.isFinderPattern(f)){this.startEnd[0]=x,this.startEnd[1]=_;return}s&&Te.reverseCounters(f),x+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,y--}else y++;f[y]=1,h=!h}throw new pe}static reverseCounters(t){let r=t.length;for(let o=0;o<r/2;++o){let f=t[o];t[o]=t[r-o-1],t[r-o-1]=f}}parseFoundFinderPattern(t,r,o){let f,d,p;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!t.get(y);)y--;y++,f=this.startEnd[0]-y,d=y,p=this.startEnd[1]}else d=this.startEnd[0],p=t.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let s=this.getDecodeFinderCounters();Y.arraycopy(s,0,s,1,s.length-1),s[0]=f;let h;try{h=this.parseFinderValue(s,Te.FINDER_PATTERNS)}catch{return null}return new wr(h,[d,p],d,p,r)}decodeDataCharacter(t,r,o,f){let d=this.getDataCharacterCounters();for(let ce=0;ce<d.length;ce++)d[ce]=0;if(f)Te.recordPatternInReverse(t,r.getStartEnd()[0],d);else{Te.recordPattern(t,r.getStartEnd()[1],d);for(let ce=0,ve=d.length-1;ce<ve;ce++,ve--){let Ne=d[ce];d[ce]=d[ve],d[ve]=Ne}}let p=17,s=Rt.sum(new Int32Array(d))/p,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(s-h)/h>.3)throw new pe;let y=this.getOddCounts(),x=this.getEvenCounts(),_=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let ce=0;ce<d.length;ce++){let ve=1*d[ce]/s,Ne=ve+.5;if(Ne<1){if(ve<.3)throw new pe;Ne=1}else if(Ne>8){if(ve>8.7)throw new pe;Ne=8}let je=ce/2;(ce&1)==0?(y[je]=Ne,_[je]=ve-Ne):(x[je]=Ne,S[je]=ve-Ne)}this.adjustOddEvenCounts(p);let O=4*r.getValue()+(o?0:2)+(f?0:1)-1,D=0,B=0;for(let ce=y.length-1;ce>=0;ce--){if(Te.isNotA1left(r,o,f)){let ve=Te.WEIGHTS[O][2*ce];B+=y[ce]*ve}D+=y[ce]}let k=0;for(let ce=x.length-1;ce>=0;ce--)if(Te.isNotA1left(r,o,f)){let ve=Te.WEIGHTS[O][2*ce+1];k+=x[ce]*ve}let U=B+k;if((D&1)!=0||D>13||D<4)throw new pe;let z=(13-D)/2,G=Te.SYMBOL_WIDEST[z],H=9-G,K=Br.getRSSvalue(y,G,!0),X=Br.getRSSvalue(x,H,!1),ee=Te.EVEN_TOTAL_SUBSET[z],ae=Te.GSUM[z],oe=K*ee+X+ae;return new xr(oe,U)}static isNotA1left(t,r,o){return!(t.getValue()==0&&r&&o)}adjustOddEvenCounts(t){let r=Rt.sum(new Int32Array(this.getOddCounts())),o=Rt.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;r>13?d=!0:r<4&&(f=!0);let p=!1,s=!1;o>13?s=!0:o<4&&(p=!0);let h=r+o-t,y=(r&1)==1,x=(o&1)==0;if(h==1)if(y){if(x)throw new pe;d=!0}else{if(!x)throw new pe;s=!0}else if(h==-1)if(y){if(x)throw new pe;f=!0}else{if(!x)throw new pe;p=!0}else if(h==0){if(y){if(!x)throw new pe;r<o?(f=!0,s=!0):(d=!0,p=!0)}else if(x)throw new pe}else throw new pe;if(f){if(d)throw new pe;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(s)throw new pe;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class Ta extends xr{constructor(t,r,o){super(t,r),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Xt extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,o){const f=this.decodePair(r,!1,t,o);Xt.addOrTally(this.possibleLeftPairs,f),r.reverse();let d=this.decodePair(r,!0,t,o);Xt.addOrTally(this.possibleRightPairs,d),r.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let s of this.possibleRightPairs)if(s.getCount()>1&&Xt.checkChecksum(p,s))return Xt.constructResult(p,s)}throw new pe}static addOrTally(t,r){if(r==null)return;let o=!1;for(let f of t)if(f.getValue()===r.getValue()){f.incrementCount(),o=!0;break}o||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let o=4537077*t.getValue()+r.getValue(),f=new String(o).toString(),d=new ot;for(let y=13-f.length;y>0;y--)d.append("0");d.append(f);let p=0;for(let y=0;y<13;y++){let x=d.charAt(y).charCodeAt(0)-48;p+=(y&1)===0?3*x:x}p=10-p%10,p===10&&(p=0),d.append(p.toString());let s=t.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new Ee(d.toString(),null,0,[s[0],s[1],h[0],h[1]],_e.RSS_14,new Date().getTime())}static checkChecksum(t,r){let o=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,f=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,o===f}decodePair(t,r,o,f){try{let d=this.findFinderPattern(t,r),p=this.parseFoundFinderPattern(t,o,r,d),s=f==null?null:f.get(Be.NEED_RESULT_POINT_CALLBACK);if(s!=null){let x=(d[0]+d[1])/2;r&&(x=t.getSize()-1-x),s.foundPossibleResultPoint(new Fe(x,o))}let h=this.decodeDataCharacter(t,p,!0),y=this.decodeDataCharacter(t,p,!1);return new Ta(1597*h.getValue()+y.getValue(),h.getChecksumPortion()+4*y.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(t,r,o){let f=this.getDataCharacterCounters();for(let k=0;k<f.length;k++)f[k]=0;if(o)$t.recordPatternInReverse(t,r.getStartEnd()[0],f);else{$t.recordPattern(t,r.getStartEnd()[1]+1,f);for(let k=0,U=f.length-1;k<U;k++,U--){let z=f[k];f[k]=f[U],f[U]=z}}let d=o?16:15,p=Rt.sum(new Int32Array(f))/d,s=this.getOddCounts(),h=this.getEvenCounts(),y=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let k=0;k<f.length;k++){let U=f[k]/p,z=Math.floor(U+.5);z<1?z=1:z>8&&(z=8);let G=Math.floor(k/2);(k&1)===0?(s[G]=z,y[G]=U-z):(h[G]=z,x[G]=U-z)}this.adjustOddEvenCounts(o,d);let _=0,S=0;for(let k=s.length-1;k>=0;k--)S*=9,S+=s[k],_+=s[k];let O=0,D=0;for(let k=h.length-1;k>=0;k--)O*=9,O+=h[k],D+=h[k];let B=S+3*O;if(o){if((_&1)!==0||_>12||_<4)throw new pe;let k=(12-_)/2,U=Xt.OUTSIDE_ODD_WIDEST[k],z=9-U,G=Br.getRSSvalue(s,U,!1),H=Br.getRSSvalue(h,z,!0),K=Xt.OUTSIDE_EVEN_TOTAL_SUBSET[k],X=Xt.OUTSIDE_GSUM[k];return new xr(G*K+H+X,B)}else{if((D&1)!==0||D>10||D<4)throw new pe;let k=(10-D)/2,U=Xt.INSIDE_ODD_WIDEST[k],z=9-U,G=Br.getRSSvalue(s,U,!0),H=Br.getRSSvalue(h,z,!1),K=Xt.INSIDE_ODD_TOTAL_SUBSET[k],X=Xt.INSIDE_GSUM[k];return new xr(H*K+G+X,B)}}findFinderPattern(t,r){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let f=t.getSize(),d=!1,p=0;for(;p<f&&(d=!t.get(p),r!==d);)p++;let s=0,h=p;for(let y=p;y<f;y++)if(t.get(y)!==d)o[s]++;else{if(s===3){if(Xn.isFinderPattern(o))return[h,y];h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,s--}else s++;o[s]=1,d=!d}throw new pe}parseFoundFinderPattern(t,r,o,f){let d=t.get(f[0]),p=f[0]-1;for(;p>=0&&d!==t.get(p);)p--;p++;const s=f[0]-p,h=this.getDecodeFinderCounters(),y=new Int32Array(h.length);Y.arraycopy(h,0,y,1,h.length-1),y[0]=s;const x=this.parseFinderValue(y,Xt.FINDER_PATTERNS);let _=p,S=f[1];return o&&(_=t.getSize()-1-_,S=t.getSize()-1-S),new wr(x,[p,f[1]],_,S,r)}adjustOddEvenCounts(t,r){let o=Rt.sum(new Int32Array(this.getOddCounts())),f=Rt.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,s=!1,h=!1;t?(o>12?p=!0:o<4&&(d=!0),f>12?h=!0:f<4&&(s=!0)):(o>11?p=!0:o<5&&(d=!0),f>10?h=!0:f<4&&(s=!0));let y=o+f-r,x=(o&1)===(t?1:0),_=(f&1)===1;if(y===1)if(x){if(_)throw new pe;p=!0}else{if(!_)throw new pe;h=!0}else if(y===-1)if(x){if(_)throw new pe;d=!0}else{if(!_)throw new pe;s=!0}else if(y===0){if(x){if(!_)throw new pe;o<f?(d=!0,h=!0):(p=!0,s=!0)}else if(_)throw new pe}else throw new pe;if(d){if(p)throw new pe;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(h)throw new pe;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Xt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Xt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Xt.OUTSIDE_GSUM=[0,161,961,2015,2715],Xt.INSIDE_GSUM=[0,336,1036,1516],Xt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Xt.INSIDE_ODD_WIDEST=[2,4,6,8],Xt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class _r extends $t{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const o=t?t.get(Be.POSSIBLE_FORMATS):null,f=t&&t.get(Be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(_e.EAN_13)||o.includes(_e.UPC_A)||o.includes(_e.EAN_8)||o.includes(_e.UPC_E))&&this.readers.push(new Ps(t)),o.includes(_e.CODE_39)&&this.readers.push(new Bt(f)),o.includes(_e.CODE_128)&&this.readers.push(new De),o.includes(_e.ITF)&&this.readers.push(new Ie),o.includes(_e.RSS_14)&&this.readers.push(new Xt),o.includes(_e.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new Ps(t)),this.readers.push(new Bt),this.readers.push(new Ps(t)),this.readers.push(new De),this.readers.push(new Ie),this.readers.push(new Xt),this.readers.push(new Te(this.verbose)))}decodeRow(t,r,o){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(t,r,o)}catch{}throw new pe}reset(){this.readers.forEach(t=>t.reset())}}class Ki extends xe{constructor(t=500,r){super(new _r(r),t,r)}}class Ut{constructor(t,r,o){this.ecCodewords=t,this.ecBlocks=[r],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class It{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(t,r,o,f,d,p){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=o,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=p;let s=0;const h=p.getECCodewords(),y=p.getECBlocks();for(let x of y)s+=x.getCount()*(x.getDataCodewords()+h);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new te;for(let o of Ot.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===r)return o;throw new te}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new Ut(5,new It(1,3))),new Ot(2,12,12,10,10,new Ut(7,new It(1,5))),new Ot(3,14,14,12,12,new Ut(10,new It(1,8))),new Ot(4,16,16,14,14,new Ut(12,new It(1,12))),new Ot(5,18,18,16,16,new Ut(14,new It(1,18))),new Ot(6,20,20,18,18,new Ut(18,new It(1,22))),new Ot(7,22,22,20,20,new Ut(20,new It(1,30))),new Ot(8,24,24,22,22,new Ut(24,new It(1,36))),new Ot(9,26,26,24,24,new Ut(28,new It(1,44))),new Ot(10,32,32,14,14,new Ut(36,new It(1,62))),new Ot(11,36,36,16,16,new Ut(42,new It(1,86))),new Ot(12,40,40,18,18,new Ut(48,new It(1,114))),new Ot(13,44,44,20,20,new Ut(56,new It(1,144))),new Ot(14,48,48,22,22,new Ut(68,new It(1,174))),new Ot(15,52,52,24,24,new Ut(42,new It(2,102))),new Ot(16,64,64,14,14,new Ut(56,new It(2,140))),new Ot(17,72,72,16,16,new Ut(36,new It(4,92))),new Ot(18,80,80,18,18,new Ut(48,new It(4,114))),new Ot(19,88,88,20,20,new Ut(56,new It(4,144))),new Ot(20,96,96,22,22,new Ut(68,new It(4,174))),new Ot(21,104,104,24,24,new Ut(56,new It(6,136))),new Ot(22,120,120,18,18,new Ut(68,new It(6,175))),new Ot(23,132,132,20,20,new Ut(62,new It(8,163))),new Ot(24,144,144,22,22,new Ut(62,new It(8,156),new It(2,155))),new Ot(25,8,18,6,16,new Ut(7,new It(1,5))),new Ot(26,8,32,6,14,new Ut(11,new It(1,10))),new Ot(27,12,26,10,24,new Ut(14,new It(1,16))),new Ot(28,12,36,10,16,new Ut(18,new It(1,22))),new Ot(29,16,36,14,16,new Ut(24,new It(1,32))),new Ot(30,16,48,14,22,new Ut(28,new It(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class xt{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new te;this.version=xt.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Dt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),o=t.getWidth();return Ot.getVersionForDimensions(r,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,o=4,f=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let s=!1,h=!1,y=!1,x=!1;do if(o===d&&f===0&&!s)t[r++]=this.readCorner1(d,p)&255,o-=2,f+=2,s=!0;else if(o===d-2&&f===0&&(p&3)!==0&&!h)t[r++]=this.readCorner2(d,p)&255,o-=2,f+=2,h=!0;else if(o===d+4&&f===2&&(p&7)===0&&!y)t[r++]=this.readCorner3(d,p)&255,o-=2,f+=2,y=!0;else if(o===d-2&&f===0&&(p&7)===4&&!x)t[r++]=this.readCorner4(d,p)&255,o-=2,f+=2,x=!0;else{do o<d&&f>=0&&!this.readMappingMatrix.get(f,o)&&(t[r++]=this.readUtah(o,f,d,p)&255),o-=2,f+=2;while(o>=0&&f<p);o+=1,f+=3;do o>=0&&f<p&&!this.readMappingMatrix.get(f,o)&&(t[r++]=this.readUtah(o,f,d,p)&255),o+=2,f-=2;while(o<d&&f>=0);o+=3,f+=1}while(o<d||f<p);if(r!==this.version.getTotalCodewords())throw new te;return t}readModule(t,r,o,f){return t<0&&(t+=o,r+=4-(o+4&7)),r<0&&(r+=f,t+=4-(f+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,o,f){let d=0;return this.readModule(t-2,r-2,o,f)&&(d|=1),d<<=1,this.readModule(t-2,r-1,o,f)&&(d|=1),d<<=1,this.readModule(t-1,r-2,o,f)&&(d|=1),d<<=1,this.readModule(t-1,r-1,o,f)&&(d|=1),d<<=1,this.readModule(t-1,r,o,f)&&(d|=1),d<<=1,this.readModule(t,r-2,o,f)&&(d|=1),d<<=1,this.readModule(t,r-1,o,f)&&(d|=1),d<<=1,this.readModule(t,r,o,f)&&(d|=1),d}readCorner1(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,1,t,r)&&(o|=1),o<<=1,this.readModule(t-1,2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}readCorner2(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-4,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner3(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-3,t,r)&&(o|=1),o<<=1,this.readModule(1,r-2,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner4(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new N("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=r/f|0,s=o/d|0,h=p*f,y=s*d,x=new Dt(y,h);for(let _=0;_<p;++_){const S=_*f;for(let O=0;O<s;++O){const D=O*d;for(let B=0;B<f;++B){const k=_*(f+2)+1+B,U=S+B;for(let z=0;z<d;++z){const G=O*(d+2)+1+z;if(t.get(G,k)){const H=D+z;x.set(H,U)}}}}}return x}}class Wi{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const o=r.getECBlocks();let f=0;const d=o.getECBlocks();for(let B of d)f+=B.getCount();const p=new Array(f);let s=0;for(let B of d)for(let k=0;k<B.getCount();k++){const U=B.getDataCodewords(),z=o.getECCodewords()+U;p[s++]=new Wi(U,new Uint8Array(z))}const y=p[0].codewords.length-o.getECCodewords(),x=y-1;let _=0;for(let B=0;B<x;B++)for(let k=0;k<s;k++)p[k].codewords[B]=t[_++];const S=r.getVersionNumber()===24,O=S?8:s;for(let B=0;B<O;B++)p[B].codewords[y-1]=t[_++];const D=p[0].codewords.length;for(let B=y;B<D;B++)for(let k=0;k<s;k++){const U=S?(k+8)%s:k,z=S&&U>7?B-1:B;p[U].codewords[z]=t[_++]}if(_!==t.length)throw new N;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class jr{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new N(""+t);let r=0,o=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(o>0){const p=8-o,s=t<p?t:p,h=p-s,y=255>>8-s<<h;r=(d[f]&y)>>h,t-=s,o+=s,o===8&&(o=0,f++)}if(t>0){for(;t>=8;)r=r<<8|d[f]&255,f++,t-=8;if(t>0){const p=8-t,s=255>>p<<p;r=r<<t|(d[f]&s)>>p,o+=t}}return this.bitOffset=o,this.byteOffset=f,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lt;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lt||(Lt={}));class Ar{static decode(t){const r=new jr(t),o=new ot,f=new ot,d=new Array;let p=Lt.ASCII_ENCODE;do if(p===Lt.ASCII_ENCODE)p=this.decodeAsciiSegment(r,o,f);else{switch(p){case Lt.C40_ENCODE:this.decodeC40Segment(r,o);break;case Lt.TEXT_ENCODE:this.decodeTextSegment(r,o);break;case Lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,o);break;case Lt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,o);break;case Lt.BASE256_ENCODE:this.decodeBase256Segment(r,o,d);break;default:throw new te}p=Lt.ASCII_ENCODE}while(p!==Lt.PAD_ENCODE&&r.available()>0);return f.length()>0&&o.append(f.toString()),new Me(t,o.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(t,r,o){let f=!1;do{let d=t.readBits(8);if(d===0)throw new te;if(d<=128)return f&&(d+=128),r.append(String.fromCharCode(d-1)),Lt.ASCII_ENCODE;if(d===129)return Lt.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&r.append("0"),r.append(""+p)}else switch(d){case 230:return Lt.C40_ENCODE;case 231:return Lt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:r.append("[)>05"),o.insert(0,"");break;case 237:r.append("[)>06"),o.insert(0,"");break;case 238:return Lt.ANSIX12_ENCODE;case 239:return Lt.TEXT_ENCODE;case 240:return Lt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||t.available()!==0)throw new te;break}}while(t.available()>0);return Lt.ASCII_ENCODE}static decodeC40Segment(t,r){let o=!1;const f=[];let d=0;do{if(t.available()===8)return;const p=t.readBits(8);if(p===254)return;this.parseTwoBytes(p,t.readBits(8),f);for(let s=0;s<3;s++){const h=f[s];switch(d){case 0:if(h<3)d=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[h];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new te;break;case 1:o?(r.append(String.fromCharCode(h+128)),o=!1):r.append(String.fromCharCode(h)),d=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[h];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(h){case 27:r.append("");break;case 30:o=!0;break;default:throw new te}d=0;break;case 3:o?(r.append(String.fromCharCode(h+224)),o=!1):r.append(String.fromCharCode(h+96)),d=0;break;default:throw new te}}}while(t.available()>0)}static decodeTextSegment(t,r){let o=!1,f=[],d=0;do{if(t.available()===8)return;const p=t.readBits(8);if(p===254)return;this.parseTwoBytes(p,t.readBits(8),f);for(let s=0;s<3;s++){const h=f[s];switch(d){case 0:if(h<3)d=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[h];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new te;break;case 1:o?(r.append(String.fromCharCode(h+128)),o=!1):r.append(String.fromCharCode(h)),d=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[h];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(h){case 27:r.append("");break;case 30:o=!0;break;default:throw new te}d=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[h];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y),d=0}else throw new te;break;default:throw new te}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const o=[];do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let d=0;d<3;d++){const p=o[d];switch(p){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(p<14)r.append(String.fromCharCode(p+44));else if(p<40)r.append(String.fromCharCode(p+51));else throw new te;break}}}while(t.available()>0)}static parseTwoBytes(t,r,o){let f=(t<<8)+r-1,d=Math.floor(f/1600);o[0]=d,f-=d*1600,d=Math.floor(f/40),o[1]=d,o[2]=f-d*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let f=t.readBits(6);if(f===31){const d=8-t.getBitOffset();d!==8&&t.readBits(d);return}(f&32)===0&&(f|=64),r.append(String.fromCharCode(f))}}while(t.available()>0)}static decodeBase256Segment(t,r,o){let f=1+t.getByteOffset();const d=this.unrandomize255State(t.readBits(8),f++);let p;if(d===0?p=t.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(t.readBits(8),f++),p<0)throw new te;const s=new Uint8Array(p);for(let h=0;h<p;h++){if(t.available()<8)throw new te;s[h]=this.unrandomize255State(t.readBits(8),f++)}o.push(s);try{r.append(Nt.decode(s,Ve.ISO88591))}catch(h){throw new jn("Platform does not support required encoding: "+h.message)}}static unrandomize255State(t,r){const o=149*r%255+1,f=t-o;return f>=0?f:f+256}}Ar.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ar.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ar.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ar.TEXT_SHIFT2_SET_CHARS=Ar.C40_SHIFT2_SET_CHARS,Ar.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class mo{constructor(){this.rsDecoder=new qi(Ct.DATA_MATRIX_FIELD_256)}decode(t){const r=new xt(t),o=r.getVersion(),f=r.readCodewords(),d=Wi.getDataBlocks(f,o);let p=0;for(let y of d)p+=y.getNumDataCodewords();const s=new Uint8Array(p),h=d.length;for(let y=0;y<h;y++){const x=d[y],_=x.getCodewords(),S=x.getNumDataCodewords();this.correctErrors(_,S);for(let O=0;O<S;O++)s[O*h+y]=_[O]}return Ar.decode(s)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new F}for(let f=0;f<r;f++)t[f]=o[f]}}class cn{constructor(t){this.image=t,this.rectangleDetector=new wn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new pe;r=this.shiftToModuleCenter(r);const o=r[0],f=r[1],d=r[2],p=r[3];let s=this.transitionsBetween(o,p)+1,h=this.transitionsBetween(d,p)+1;(s&1)===1&&(s+=1),(h&1)===1&&(h+=1),4*s<7*h&&4*h<7*s&&(s=h=Math.max(s,h));let y=cn.sampleGrid(this.image,o,f,d,p,s,h);return new Aa(y,[o,f,d,p])}static shiftPoint(t,r,o){let f=(r.getX()-t.getX())/(o+1),d=(r.getY()-t.getY())/(o+1);return new Fe(t.getX()+f,t.getY()+d)}static moveAway(t,r,o){let f=t.getX(),d=t.getY();return f<r?f-=1:f+=1,d<o?d-=1:d+=1,new Fe(f,d)}detectSolid1(t){let r=t[0],o=t[1],f=t[3],d=t[2],p=this.transitionsBetween(r,o),s=this.transitionsBetween(o,f),h=this.transitionsBetween(f,d),y=this.transitionsBetween(d,r),x=p,_=[d,r,o,f];return x>s&&(x=s,_[0]=r,_[1]=o,_[2]=f,_[3]=d),x>h&&(x=h,_[0]=o,_[1]=f,_[2]=d,_[3]=r),x>y&&(_[0]=f,_[1]=d,_[2]=r,_[3]=o),_}detectSolid2(t){let r=t[0],o=t[1],f=t[2],d=t[3],p=this.transitionsBetween(r,d),s=cn.shiftPoint(o,f,(p+1)*4),h=cn.shiftPoint(f,o,(p+1)*4),y=this.transitionsBetween(s,r),x=this.transitionsBetween(h,d);return y<x?(t[0]=r,t[1]=o,t[2]=f,t[3]=d):(t[0]=o,t[1]=f,t[2]=d,t[3]=r),t}correctTopRight(t){let r=t[0],o=t[1],f=t[2],d=t[3],p=this.transitionsBetween(r,d),s=this.transitionsBetween(o,d),h=cn.shiftPoint(r,o,(s+1)*4),y=cn.shiftPoint(f,o,(p+1)*4);p=this.transitionsBetween(h,d),s=this.transitionsBetween(y,d);let x=new Fe(d.getX()+(f.getX()-o.getX())/(p+1),d.getY()+(f.getY()-o.getY())/(p+1)),_=new Fe(d.getX()+(r.getX()-o.getX())/(s+1),d.getY()+(r.getY()-o.getY())/(s+1));if(!this.isValid(x))return this.isValid(_)?_:null;if(!this.isValid(_))return x;let S=this.transitionsBetween(h,x)+this.transitionsBetween(y,x),O=this.transitionsBetween(h,_)+this.transitionsBetween(y,_);return S>O?x:_}shiftToModuleCenter(t){let r=t[0],o=t[1],f=t[2],d=t[3],p=this.transitionsBetween(r,d)+1,s=this.transitionsBetween(f,d)+1,h=cn.shiftPoint(r,o,s*4),y=cn.shiftPoint(f,o,p*4);p=this.transitionsBetween(h,d)+1,s=this.transitionsBetween(y,d)+1,(p&1)===1&&(p+=1),(s&1)===1&&(s+=1);let x=(r.getX()+o.getX()+f.getX()+d.getX())/4,_=(r.getY()+o.getY()+f.getY()+d.getY())/4;r=cn.moveAway(r,x,_),o=cn.moveAway(o,x,_),f=cn.moveAway(f,x,_),d=cn.moveAway(d,x,_);let S,O;return h=cn.shiftPoint(r,o,s*4),h=cn.shiftPoint(h,d,p*4),S=cn.shiftPoint(o,r,s*4),S=cn.shiftPoint(S,f,p*4),y=cn.shiftPoint(f,d,s*4),y=cn.shiftPoint(y,o,p*4),O=cn.shiftPoint(d,f,s*4),O=cn.shiftPoint(O,r,p*4),[h,S,y,O]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,o,f,d,p,s){return vr.getInstance().sampleGrid(t,p,s,.5,.5,p-.5,.5,p-.5,s-.5,.5,s-.5,r.getX(),r.getY(),d.getX(),d.getY(),f.getX(),f.getY(),o.getX(),o.getY())}transitionsBetween(t,r){let o=Math.trunc(t.getX()),f=Math.trunc(t.getY()),d=Math.trunc(r.getX()),p=Math.trunc(r.getY()),s=Math.abs(p-f)>Math.abs(d-o);if(s){let B=o;o=f,f=B,B=d,d=p,p=B}let h=Math.abs(d-o),y=Math.abs(p-f),x=-h/2,_=f<p?1:-1,S=o<d?1:-1,O=0,D=this.image.get(s?f:o,s?o:f);for(let B=o,k=f;B!==d;B+=S){let U=this.image.get(s?k:B,s?B:k);if(U!==D&&(O++,D=U),x+=y,x>0){if(k===p)break;k+=_,x-=h}}return O}}class Jr{constructor(){this.decoder=new mo}decode(t,r=null){let o,f;if(r!=null&&r.has(Be.PURE_BARCODE)){const y=Jr.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(y),f=Jr.NO_POINTS}else{const y=new cn(t.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),f=y.getPoints()}const d=o.getRawBytes(),p=new Ee(o.getText(),d,8*d.length,f,_e.DATA_MATRIX,Y.currentTimeMillis()),s=o.getByteSegments();s!=null&&p.putMetadata(mt.BYTE_SEGMENTS,s);const h=o.getECLevel();return h!=null&&p.putMetadata(mt.ERROR_CORRECTION_LEVEL,h),p}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r==null||o==null)throw new pe;const f=this.moduleSize(r,t);let d=r[1];const p=o[1];let s=r[0];const y=(o[0]-s+1)/f,x=(p-d+1)/f;if(y<=0||x<=0)throw new pe;const _=f/2;d+=_,s+=_;const S=new Dt(y,x);for(let O=0;O<x;O++){const D=d+O*f;for(let B=0;B<y;B++)t.get(s+B*f,D)&&S.set(B,O)}return S}static moduleSize(t,r){const o=r.getWidth();let f=t[0];const d=t[1];for(;f<o&&r.get(f,d);)f++;if(f===o)throw new pe;const p=f-t[0];if(p===0)throw new pe;return p}}Jr.NO_POINTS=[];class Kt extends xe{constructor(t=500){super(new Jr,t)}}var $r;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})($r||($r={}));class vt{constructor(t,r,o){this.value=t,this.stringValue=r,this.bits=o,vt.FOR_BITS.set(o,this),vt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new R(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof vt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=vt.FOR_BITS.size)throw new N;return vt.FOR_BITS.get(t)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt($r.L,"L",1),vt.M=new vt($r.M,"M",0),vt.Q=new vt($r.Q,"Q",3),vt.H=new vt($r.H,"H",2);class mn{constructor(t){this.errorCorrectionLevel=vt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return re.bitCount(t^r)}static decodeFormatInformation(t,r){const o=mn.doDecodeFormatInformation(t,r);return o!==null?o:mn.doDecodeFormatInformation(t^mn.FORMAT_INFO_MASK_QR,r^mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let o=Number.MAX_SAFE_INTEGER,f=0;for(const d of mn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===t||p===r)return new mn(d[1]);let s=mn.numBitsDiffering(t,p);s<o&&(f=d[1],o=s),t!==r&&(s=mn.numBitsDiffering(r,p),s<o&&(f=d[1],o=s))}return o<=3?new mn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof mn))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}mn.FORMAT_INFO_MASK_QR=21522,mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const o of r)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(t,r,...o){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=o;let f=0;const d=o[0].getECCodewordsPerBlock(),p=o[0].getECBlocks();for(const s of p)f+=s.getCount()*(s.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new te;try{return this.getVersionForNumber((t-17)/4)}catch{throw new te}}static getVersionForNumber(t){if(t<1||t>40)throw new N;return Ye.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,o=0;for(let f=0;f<Ye.VERSION_DECODE_INFO.length;f++){const d=Ye.VERSION_DECODE_INFO[f];if(d===t)return Ye.getVersionForNumber(f+7);const p=mn.numBitsDiffering(t,d);p<r&&(o=f+7,r=p)}return r<=3?Ye.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Dt(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let f=0;f<o;f++){const d=this.alignmentPatternCenters[f]-2;for(let p=0;p<o;p++)f===0&&(p===0||p===o-1)||f===o-1&&p===0||r.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new le(7,new V(1,19)),new le(10,new V(1,16)),new le(13,new V(1,13)),new le(17,new V(1,9))),new Ye(2,Int32Array.from([6,18]),new le(10,new V(1,34)),new le(16,new V(1,28)),new le(22,new V(1,22)),new le(28,new V(1,16))),new Ye(3,Int32Array.from([6,22]),new le(15,new V(1,55)),new le(26,new V(1,44)),new le(18,new V(2,17)),new le(22,new V(2,13))),new Ye(4,Int32Array.from([6,26]),new le(20,new V(1,80)),new le(18,new V(2,32)),new le(26,new V(2,24)),new le(16,new V(4,9))),new Ye(5,Int32Array.from([6,30]),new le(26,new V(1,108)),new le(24,new V(2,43)),new le(18,new V(2,15),new V(2,16)),new le(22,new V(2,11),new V(2,12))),new Ye(6,Int32Array.from([6,34]),new le(18,new V(2,68)),new le(16,new V(4,27)),new le(24,new V(4,19)),new le(28,new V(4,15))),new Ye(7,Int32Array.from([6,22,38]),new le(20,new V(2,78)),new le(18,new V(4,31)),new le(18,new V(2,14),new V(4,15)),new le(26,new V(4,13),new V(1,14))),new Ye(8,Int32Array.from([6,24,42]),new le(24,new V(2,97)),new le(22,new V(2,38),new V(2,39)),new le(22,new V(4,18),new V(2,19)),new le(26,new V(4,14),new V(2,15))),new Ye(9,Int32Array.from([6,26,46]),new le(30,new V(2,116)),new le(22,new V(3,36),new V(2,37)),new le(20,new V(4,16),new V(4,17)),new le(24,new V(4,12),new V(4,13))),new Ye(10,Int32Array.from([6,28,50]),new le(18,new V(2,68),new V(2,69)),new le(26,new V(4,43),new V(1,44)),new le(24,new V(6,19),new V(2,20)),new le(28,new V(6,15),new V(2,16))),new Ye(11,Int32Array.from([6,30,54]),new le(20,new V(4,81)),new le(30,new V(1,50),new V(4,51)),new le(28,new V(4,22),new V(4,23)),new le(24,new V(3,12),new V(8,13))),new Ye(12,Int32Array.from([6,32,58]),new le(24,new V(2,92),new V(2,93)),new le(22,new V(6,36),new V(2,37)),new le(26,new V(4,20),new V(6,21)),new le(28,new V(7,14),new V(4,15))),new Ye(13,Int32Array.from([6,34,62]),new le(26,new V(4,107)),new le(22,new V(8,37),new V(1,38)),new le(24,new V(8,20),new V(4,21)),new le(22,new V(12,11),new V(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new le(30,new V(3,115),new V(1,116)),new le(24,new V(4,40),new V(5,41)),new le(20,new V(11,16),new V(5,17)),new le(24,new V(11,12),new V(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new le(22,new V(5,87),new V(1,88)),new le(24,new V(5,41),new V(5,42)),new le(30,new V(5,24),new V(7,25)),new le(24,new V(11,12),new V(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new le(24,new V(5,98),new V(1,99)),new le(28,new V(7,45),new V(3,46)),new le(24,new V(15,19),new V(2,20)),new le(30,new V(3,15),new V(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new le(28,new V(1,107),new V(5,108)),new le(28,new V(10,46),new V(1,47)),new le(28,new V(1,22),new V(15,23)),new le(28,new V(2,14),new V(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new le(30,new V(5,120),new V(1,121)),new le(26,new V(9,43),new V(4,44)),new le(28,new V(17,22),new V(1,23)),new le(28,new V(2,14),new V(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new le(28,new V(3,113),new V(4,114)),new le(26,new V(3,44),new V(11,45)),new le(26,new V(17,21),new V(4,22)),new le(26,new V(9,13),new V(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new le(28,new V(3,107),new V(5,108)),new le(26,new V(3,41),new V(13,42)),new le(30,new V(15,24),new V(5,25)),new le(28,new V(15,15),new V(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new le(28,new V(4,116),new V(4,117)),new le(26,new V(17,42)),new le(28,new V(17,22),new V(6,23)),new le(30,new V(19,16),new V(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new le(28,new V(2,111),new V(7,112)),new le(28,new V(17,46)),new le(30,new V(7,24),new V(16,25)),new le(24,new V(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new le(30,new V(4,121),new V(5,122)),new le(28,new V(4,47),new V(14,48)),new le(30,new V(11,24),new V(14,25)),new le(30,new V(16,15),new V(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new le(30,new V(6,117),new V(4,118)),new le(28,new V(6,45),new V(14,46)),new le(30,new V(11,24),new V(16,25)),new le(30,new V(30,16),new V(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new le(26,new V(8,106),new V(4,107)),new le(28,new V(8,47),new V(13,48)),new le(30,new V(7,24),new V(22,25)),new le(30,new V(22,15),new V(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new le(28,new V(10,114),new V(2,115)),new le(28,new V(19,46),new V(4,47)),new le(28,new V(28,22),new V(6,23)),new le(30,new V(33,16),new V(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new le(30,new V(8,122),new V(4,123)),new le(28,new V(22,45),new V(3,46)),new le(30,new V(8,23),new V(26,24)),new le(30,new V(12,15),new V(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new V(3,117),new V(10,118)),new le(28,new V(3,45),new V(23,46)),new le(30,new V(4,24),new V(31,25)),new le(30,new V(11,15),new V(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new V(7,116),new V(7,117)),new le(28,new V(21,45),new V(7,46)),new le(30,new V(1,23),new V(37,24)),new le(30,new V(19,15),new V(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new V(5,115),new V(10,116)),new le(28,new V(19,47),new V(10,48)),new le(30,new V(15,24),new V(25,25)),new le(30,new V(23,15),new V(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new V(13,115),new V(3,116)),new le(28,new V(2,46),new V(29,47)),new le(30,new V(42,24),new V(1,25)),new le(30,new V(23,15),new V(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new V(17,115)),new le(28,new V(10,46),new V(23,47)),new le(30,new V(10,24),new V(35,25)),new le(30,new V(19,15),new V(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new V(17,115),new V(1,116)),new le(28,new V(14,46),new V(21,47)),new le(30,new V(29,24),new V(19,25)),new le(30,new V(11,15),new V(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new V(13,115),new V(6,116)),new le(28,new V(14,46),new V(23,47)),new le(30,new V(44,24),new V(7,25)),new le(30,new V(59,16),new V(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new V(12,121),new V(7,122)),new le(28,new V(12,47),new V(26,48)),new le(30,new V(39,24),new V(14,25)),new le(30,new V(22,15),new V(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new V(6,121),new V(14,122)),new le(28,new V(6,47),new V(34,48)),new le(30,new V(46,24),new V(10,25)),new le(30,new V(2,15),new V(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new V(17,122),new V(4,123)),new le(28,new V(29,46),new V(14,47)),new le(30,new V(49,24),new V(10,25)),new le(30,new V(24,15),new V(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new V(4,122),new V(18,123)),new le(28,new V(13,46),new V(32,47)),new le(30,new V(48,24),new V(14,25)),new le(30,new V(42,15),new V(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new V(20,117),new V(4,118)),new le(28,new V(40,47),new V(7,48)),new le(30,new V(43,24),new V(22,25)),new le(30,new V(10,15),new V(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new V(19,118),new V(6,119)),new le(28,new V(18,47),new V(31,48)),new le(30,new V(34,24),new V(34,25)),new le(30,new V(20,15),new V(61,16)))];var In;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(In||(In={}));class tr{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let o=0;o<r;o++)for(let f=0;f<r;f++)this.isMasked(o,f)&&t.flip(f,o)}}tr.values=new Map([[In.DATA_MASK_000,new tr(In.DATA_MASK_000,(M,t)=>(M+t&1)===0)],[In.DATA_MASK_001,new tr(In.DATA_MASK_001,(M,t)=>(M&1)===0)],[In.DATA_MASK_010,new tr(In.DATA_MASK_010,(M,t)=>t%3===0)],[In.DATA_MASK_011,new tr(In.DATA_MASK_011,(M,t)=>(M+t)%3===0)],[In.DATA_MASK_100,new tr(In.DATA_MASK_100,(M,t)=>(Math.floor(M/2)+Math.floor(t/3)&1)===0)],[In.DATA_MASK_101,new tr(In.DATA_MASK_101,(M,t)=>M*t%6===0)],[In.DATA_MASK_110,new tr(In.DATA_MASK_110,(M,t)=>M*t%6<3)],[In.DATA_MASK_111,new tr(In.DATA_MASK_111,(M,t)=>(M+t+M*t%3&1)===0)]]);class Qi{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new te;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let d=0;d<6;d++)t=this.copyBit(d,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let d=5;d>=0;d--)t=this.copyBit(8,d,t);const r=this.bitMatrix.getHeight();let o=0;const f=r-7;for(let d=r-1;d>=f;d--)o=this.copyBit(8,d,o);for(let d=r-8;d<r;d++)o=this.copyBit(d,8,o);if(this.parsedFormatInfo=mn.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new te}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Ye.getVersionForNumber(r);let o=0;const f=t-11;for(let p=5;p>=0;p--)for(let s=t-9;s>=f;s--)o=this.copyBit(s,p,o);let d=Ye.decodeVersionInformation(o);if(d!==null&&d.getDimensionForVersion()===t)return this.parsedVersion=d,d;o=0;for(let p=5;p>=0;p--)for(let s=t-9;s>=f;s--)o=this.copyBit(p,s,o);if(d=Ye.decodeVersionInformation(o),d!==null&&d.getDimensionForVersion()===t)return this.parsedVersion=d,d;throw new te}copyBit(t,r,o){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),o=tr.values.get(t.getDataMask()),f=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,f);const d=r.buildFunctionPattern();let p=!0;const s=new Uint8Array(r.getTotalCodewords());let h=0,y=0,x=0;for(let _=f-1;_>0;_-=2){_===6&&_--;for(let S=0;S<f;S++){const O=p?f-1-S:S;for(let D=0;D<2;D++)d.get(_-D,O)||(x++,y<<=1,this.bitMatrix.get(_-D,O)&&(y|=1),x===8&&(s[h++]=y,x=0,y=0))}p=!p}if(h!==r.getTotalCodewords())throw new te;return s}remask(){if(this.parsedFormatInfo===null)return;const t=tr.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,o=t.getWidth();r<o;r++)for(let f=r+1,d=t.getHeight();f<d;f++)t.get(r,f)!==t.get(f,r)&&(t.flip(f,r),t.flip(r,f))}}class zs{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,o){if(t.length!==r.getTotalCodewords())throw new N;const f=r.getECBlocksForLevel(o);let d=0;const p=f.getECBlocks();for(const D of p)d+=D.getCount();const s=new Array(d);let h=0;for(const D of p)for(let B=0;B<D.getCount();B++){const k=D.getDataCodewords(),U=f.getECCodewordsPerBlock()+k;s[h++]=new zs(k,new Uint8Array(U))}const y=s[0].codewords.length;let x=s.length-1;for(;x>=0&&s[x].codewords.length!==y;)x--;x++;const _=y-f.getECCodewordsPerBlock();let S=0;for(let D=0;D<_;D++)for(let B=0;B<h;B++)s[B].codewords[D]=t[S++];for(let D=x;D<h;D++)s[D].codewords[_]=t[S++];const O=s[0].codewords.length;for(let D=_;D<O;D++)for(let B=0;B<h;B++){const k=B<x?D:D+1;s[B].codewords[k]=t[S++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var dt;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(dt||(dt={}));class et{constructor(t,r,o,f){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=o,this.bits=f,et.FOR_BITS.set(f,this),et.FOR_VALUE.set(t,this)}static forBits(t){const r=et.FOR_BITS.get(t);if(r===void 0)throw new N;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let o;return r<=9?o=0:r<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof et))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}et.FOR_BITS=new Map,et.FOR_VALUE=new Map,et.TERMINATOR=new et(dt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),et.NUMERIC=new et(dt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),et.ALPHANUMERIC=new et(dt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),et.STRUCTURED_APPEND=new et(dt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),et.BYTE=new et(dt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),et.ECI=new et(dt.ECI,"ECI",Int32Array.from([0,0,0]),7),et.KANJI=new et(dt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),et.FNC1_FIRST_POSITION=new et(dt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),et.FNC1_SECOND_POSITION=new et(dt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),et.HANZI=new et(dt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class an{static decode(t,r,o,f){const d=new jr(t);let p=new ot;const s=new Array;let h=-1,y=-1;try{let x=null,_=!1,S;do{if(d.available()<4)S=et.TERMINATOR;else{const O=d.readBits(4);S=et.forBits(O)}switch(S){case et.TERMINATOR:break;case et.FNC1_FIRST_POSITION:case et.FNC1_SECOND_POSITION:_=!0;break;case et.STRUCTURED_APPEND:if(d.available()<16)throw new te;h=d.readBits(8),y=d.readBits(8);break;case et.ECI:const O=an.parseECIValue(d);if(x=we.getCharacterSetECIByValue(O),x===null)throw new te;break;case et.HANZI:const D=d.readBits(4),B=d.readBits(S.getCharacterCountBits(r));D===an.GB2312_SUBSET&&an.decodeHanziSegment(d,p,B);break;default:const k=d.readBits(S.getCharacterCountBits(r));switch(S){case et.NUMERIC:an.decodeNumericSegment(d,p,k);break;case et.ALPHANUMERIC:an.decodeAlphanumericSegment(d,p,k,_);break;case et.BYTE:an.decodeByteSegment(d,p,k,x,s,f);break;case et.KANJI:an.decodeKanjiSegment(d,p,k);break;default:throw new te}break}}while(S!==et.TERMINATOR)}catch{throw new te}return new Me(t,p.toString(),s.length===0?null:s,o===null?null:o.toString(),h,y)}static decodeHanziSegment(t,r,o){if(o*13>t.available())throw new te;const f=new Uint8Array(2*o);let d=0;for(;o>0;){const p=t.readBits(13);let s=p/96<<8&4294967295|p%96;s<959?s+=41377:s+=42657,f[d]=s>>8&255,f[d+1]=s&255,d+=2,o--}try{r.append(Nt.decode(f,Ve.GB2312))}catch(p){throw new te(p)}}static decodeKanjiSegment(t,r,o){if(o*13>t.available())throw new te;const f=new Uint8Array(2*o);let d=0;for(;o>0;){const p=t.readBits(13);let s=p/192<<8&4294967295|p%192;s<7936?s+=33088:s+=49472,f[d]=s>>8,f[d+1]=s,d+=2,o--}try{r.append(Nt.decode(f,Ve.SHIFT_JIS))}catch(p){throw new te(p)}}static decodeByteSegment(t,r,o,f,d,p){if(8*o>t.available())throw new te;const s=new Uint8Array(o);for(let y=0;y<o;y++)s[y]=t.readBits(8);let h;f===null?h=Ve.guessEncoding(s,p):h=f.getName();try{r.append(Nt.decode(s,h))}catch(y){throw new te(y)}d.push(s)}static toAlphaNumericChar(t){if(t>=an.ALPHANUMERIC_CHARS.length)throw new te;return an.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,o,f){const d=r.length();for(;o>1;){if(t.available()<11)throw new te;const p=t.readBits(11);r.append(an.toAlphaNumericChar(Math.floor(p/45))),r.append(an.toAlphaNumericChar(p%45)),o-=2}if(o===1){if(t.available()<6)throw new te;r.append(an.toAlphaNumericChar(t.readBits(6)))}if(f)for(let p=d;p<r.length();p++)r.charAt(p)==="%"&&(p<r.length()-1&&r.charAt(p+1)==="%"?r.deleteCharAt(p+1):r.setCharAt(p,""))}static decodeNumericSegment(t,r,o){for(;o>=3;){if(t.available()<10)throw new te;const f=t.readBits(10);if(f>=1e3)throw new te;r.append(an.toAlphaNumericChar(Math.floor(f/100))),r.append(an.toAlphaNumericChar(Math.floor(f/10)%10)),r.append(an.toAlphaNumericChar(f%10)),o-=3}if(o===2){if(t.available()<7)throw new te;const f=t.readBits(7);if(f>=100)throw new te;r.append(an.toAlphaNumericChar(Math.floor(f/10))),r.append(an.toAlphaNumericChar(f%10))}else if(o===1){if(t.available()<4)throw new te;const f=t.readBits(4);if(f>=10)throw new te;r.append(an.toAlphaNumericChar(f))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const o=t.readBits(8);return(r&63)<<8&4294967295|o}if((r&224)===192){const o=t.readBits(16);return(r&31)<<16&4294967295|o}throw new te}}an.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",an.GB2312_SUBSET=1;class yo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class Sr{constructor(){this.rsDecoder=new qi(Ct.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Dt.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const o=new Qi(t);let f=null;try{return this.decodeBitMatrixParser(o,r)}catch(d){f=d}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const d=this.decodeBitMatrixParser(o,r);return d.setOther(new yo(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(t,r){const o=t.readVersion(),f=t.readFormatInformation().getErrorCorrectionLevel(),d=t.readCodewords(),p=zs.getDataBlocks(d,o,f);let s=0;for(const x of p)s+=x.getNumDataCodewords();const h=new Uint8Array(s);let y=0;for(const x of p){const _=x.getCodewords(),S=x.getNumDataCodewords();this.correctErrors(_,S);for(let O=0;O<S;O++)h[y++]=_[O]}return an.decode(h,o,f,r)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new F}for(let f=0;f<r;f++)t[f]=o[f]}}class Yr extends Fe{constructor(t,r,o){super(t,r),this.estimatedModuleSize=o}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const f=Math.abs(t-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const f=(this.getX()+r)/2,d=(this.getY()+t)/2,p=(this.estimatedModuleSize+o)/2;return new Yr(f,d,p)}}class cr{constructor(t,r,o,f,d,p,s){this.image=t,this.startX=r,this.startY=o,this.width=f,this.height=d,this.moduleSize=p,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,o=this.width,f=t+o,d=this.startY+r/2,p=new Int32Array(3),s=this.image;for(let h=0;h<r;h++){const y=d+((h&1)===0?Math.floor((h+1)/2):-Math.floor((h+1)/2));p[0]=0,p[1]=0,p[2]=0;let x=t;for(;x<f&&!s.get(x,y);)x++;let _=0;for(;x<f;){if(s.get(x,y))if(_===1)p[1]++;else if(_===2){if(this.foundPatternCross(p)){const S=this.handlePossibleCenter(p,y,x);if(S!==null)return S}p[0]=p[2],p[1]=1,p[2]=0,_=1}else p[++_]++;else _===1&&_++,p[_]++;x++}if(this.foundPatternCross(p)){const S=this.handlePossibleCenter(p,y,f);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new pe}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,o=r/2;for(let f=0;f<3;f++)if(Math.abs(r-t[f])>=o)return!1;return!0}crossCheckVertical(t,r,o,f){const d=this.image,p=d.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let h=t;for(;h>=0&&d.get(r,h)&&s[1]<=o;)s[1]++,h--;if(h<0||s[1]>o)return NaN;for(;h>=0&&!d.get(r,h)&&s[0]<=o;)s[0]++,h--;if(s[0]>o)return NaN;for(h=t+1;h<p&&d.get(r,h)&&s[1]<=o;)s[1]++,h++;if(h===p||s[1]>o)return NaN;for(;h<p&&!d.get(r,h)&&s[2]<=o;)s[2]++,h++;if(s[2]>o)return NaN;const y=s[0]+s[1]+s[2];return 5*Math.abs(y-f)>=2*f?NaN:this.foundPatternCross(s)?cr.centerFromEnd(s,h):NaN}handlePossibleCenter(t,r,o){const f=t[0]+t[1]+t[2],d=cr.centerFromEnd(t,o),p=this.crossCheckVertical(r,d,2*t[1],f);if(!isNaN(p)){const s=(t[0]+t[1]+t[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(s,p,d))return y.combineEstimate(p,d,s);const h=new Yr(d,p,s);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class Pr extends Fe{constructor(t,r,o,f){super(t,r),this.estimatedModuleSize=o,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const f=Math.abs(t-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const f=this.count+1,d=(this.count*this.getX()+r)/f,p=(this.count*this.getY()+t)/f,s=(this.count*this.estimatedModuleSize+o)/f;return new Pr(d,p,s,f)}}class es{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class fn{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(Be.TRY_HARDER)!==void 0,o=t!=null&&t.get(Be.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),p=f.getWidth();let s=Math.floor(3*d/(4*fn.MAX_MODULES));(s<fn.MIN_SKIP||r)&&(s=fn.MIN_SKIP);let h=!1;const y=new Int32Array(5);for(let _=s-1;_<d&&!h;_+=s){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let S=0;for(let O=0;O<p;O++)if(f.get(O,_))(S&1)===1&&S++,y[S]++;else if((S&1)===0)if(S===4)if(fn.foundPatternCross(y)){if(this.handlePossibleCenter(y,_,O,o)===!0)if(s=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const B=this.findRowSkip();B>y[2]&&(_+=B-y[2]-s,O=p-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,S=3;continue}S=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,S=3;else y[++S]++;else y[S]++;fn.foundPatternCross(y)&&this.handlePossibleCenter(y,_,p,o)===!0&&(s=y[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return Fe.orderBestPatterns(x),new es(x)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let d=0;d<5;d++){const p=t[d];if(p===0)return!1;r+=p}if(r<7)return!1;const o=r/7,f=o/2;return Math.abs(o-t[0])<f&&Math.abs(o-t[1])<f&&Math.abs(3*o-t[2])<3*f&&Math.abs(o-t[3])<f&&Math.abs(o-t[4])<f}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,o,f){const d=this.getCrossCheckStateCount();let p=0;const s=this.image;for(;t>=p&&r>=p&&s.get(r-p,t-p);)d[2]++,p++;if(t<p||r<p)return!1;for(;t>=p&&r>=p&&!s.get(r-p,t-p)&&d[1]<=o;)d[1]++,p++;if(t<p||r<p||d[1]>o)return!1;for(;t>=p&&r>=p&&s.get(r-p,t-p)&&d[0]<=o;)d[0]++,p++;if(d[0]>o)return!1;const h=s.getHeight(),y=s.getWidth();for(p=1;t+p<h&&r+p<y&&s.get(r+p,t+p);)d[2]++,p++;if(t+p>=h||r+p>=y)return!1;for(;t+p<h&&r+p<y&&!s.get(r+p,t+p)&&d[3]<o;)d[3]++,p++;if(t+p>=h||r+p>=y||d[3]>=o)return!1;for(;t+p<h&&r+p<y&&s.get(r+p,t+p)&&d[4]<o;)d[4]++,p++;if(d[4]>=o)return!1;const x=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(x-f)<2*f&&fn.foundPatternCross(d)}crossCheckVertical(t,r,o,f){const d=this.image,p=d.getHeight(),s=this.getCrossCheckStateCount();let h=t;for(;h>=0&&d.get(r,h);)s[2]++,h--;if(h<0)return NaN;for(;h>=0&&!d.get(r,h)&&s[1]<=o;)s[1]++,h--;if(h<0||s[1]>o)return NaN;for(;h>=0&&d.get(r,h)&&s[0]<=o;)s[0]++,h--;if(s[0]>o)return NaN;for(h=t+1;h<p&&d.get(r,h);)s[2]++,h++;if(h===p)return NaN;for(;h<p&&!d.get(r,h)&&s[3]<o;)s[3]++,h++;if(h===p||s[3]>=o)return NaN;for(;h<p&&d.get(r,h)&&s[4]<o;)s[4]++,h++;if(s[4]>=o)return NaN;const y=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(y-f)>=2*f?NaN:fn.foundPatternCross(s)?fn.centerFromEnd(s,h):NaN}crossCheckHorizontal(t,r,o,f){const d=this.image,p=d.getWidth(),s=this.getCrossCheckStateCount();let h=t;for(;h>=0&&d.get(h,r);)s[2]++,h--;if(h<0)return NaN;for(;h>=0&&!d.get(h,r)&&s[1]<=o;)s[1]++,h--;if(h<0||s[1]>o)return NaN;for(;h>=0&&d.get(h,r)&&s[0]<=o;)s[0]++,h--;if(s[0]>o)return NaN;for(h=t+1;h<p&&d.get(h,r);)s[2]++,h++;if(h===p)return NaN;for(;h<p&&!d.get(h,r)&&s[3]<o;)s[3]++,h++;if(h===p||s[3]>=o)return NaN;for(;h<p&&d.get(h,r)&&s[4]<o;)s[4]++,h++;if(s[4]>=o)return NaN;const y=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(y-f)>=f?NaN:fn.foundPatternCross(s)?fn.centerFromEnd(s,h):NaN}handlePossibleCenter(t,r,o,f){const d=t[0]+t[1]+t[2]+t[3]+t[4];let p=fn.centerFromEnd(t,o),s=this.crossCheckVertical(r,Math.floor(p),t[2],d);if(!isNaN(s)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(s),t[2],d),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(s),Math.floor(p),t[2],d)))){const h=d/7;let y=!1;const x=this.possibleCenters;for(let _=0,S=x.length;_<S;_++){const O=x[_];if(O.aboutEquals(h,s,p)){x[_]=O.combineEstimate(s,p,h),y=!0;break}}if(!y){const _=new Pr(p,s,h);x.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const o of this.possibleCenters)if(o.getCount()>=fn.CENTER_QUORUM)if(r==null)r=o;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-o.getX())-Math.abs(r.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const o=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=fn.CENTER_QUORUM&&(t++,r+=p.getEstimatedModuleSize());if(t<3)return!1;const f=r/o;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-f);return d<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new pe;const r=this.possibleCenters;let o;if(t>3){let f=0,d=0;for(const h of this.possibleCenters){const y=h.getEstimatedModuleSize();f+=y,d+=y*y}o=f/t;let p=Math.sqrt(d/t-o*o);r.sort((h,y)=>{const x=Math.abs(y.getEstimatedModuleSize()-o),_=Math.abs(h.getEstimatedModuleSize()-o);return x<_?-1:x>_?1:0});const s=Math.max(.2*o,p);for(let h=0;h<r.length&&r.length>3;h++){const y=r[h];Math.abs(y.getEstimatedModuleSize()-o)>s&&(r.splice(h,1),h--)}}if(r.length>3){let f=0;for(const d of r)f+=d.getEstimatedModuleSize();o=f/r.length,r.sort((d,p)=>{if(p.getCount()===d.getCount()){const s=Math.abs(p.getEstimatedModuleSize()-o),h=Math.abs(d.getEstimatedModuleSize()-o);return s<h?1:s>h?-1:0}else return p.getCount()-d.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}fn.CENTER_QUORUM=2,fn.MIN_SKIP=3,fn.MAX_MODULES=57;class en{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Be.NEED_RESULT_POINT_CALLBACK);const o=new fn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const r=t.getTopLeft(),o=t.getTopRight(),f=t.getBottomLeft(),d=this.calculateModuleSize(r,o,f);if(d<1)throw new pe("No pattern found in proccess finder.");const p=en.computeDimension(r,o,f,d),s=Ye.getProvisionalVersionForDimension(p),h=s.getDimensionForVersion()-7;let y=null;if(s.getAlignmentPatternCenters().length>0){const O=o.getX()-r.getX()+f.getX(),D=o.getY()-r.getY()+f.getY(),B=1-3/h,k=Math.floor(r.getX()+B*(O-r.getX())),U=Math.floor(r.getY()+B*(D-r.getY()));for(let z=4;z<=16;z<<=1)try{y=this.findAlignmentInRegion(d,k,U,z);break}catch(G){if(!(G instanceof pe))throw G}}const x=en.createTransform(r,o,f,y,p),_=en.sampleGrid(this.image,x,p);let S;return y===null?S=[f,r,o]:S=[f,r,o,y],new Aa(_,S)}static createTransform(t,r,o,f,d){const p=d-3.5;let s,h,y,x;return f!==null?(s=f.getX(),h=f.getY(),y=p-3,x=y):(s=r.getX()-t.getX()+o.getX(),h=r.getY()-t.getY()+o.getY(),y=p,x=p),Pn.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,y,x,3.5,p,t.getX(),t.getY(),r.getX(),r.getY(),s,h,o.getX(),o.getY())}static sampleGrid(t,r,o){return vr.getInstance().sampleGridWithTransform(t,o,o,r)}static computeDimension(t,r,o,f){const d=Rt.round(Fe.distance(t,r)/f),p=Rt.round(Fe.distance(t,o)/f);let s=Math.floor((d+p)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new pe("Dimensions could be not found.")}return s}calculateModuleSize(t,r,o){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,r){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?f/7:isNaN(f)?o/7:(o+f)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,o,f){let d=this.sizeOfBlackWhiteBlackRun(t,r,o,f),p=1,s=t-(o-t);s<0?(p=t/(t-s),s=0):s>=this.image.getWidth()&&(p=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);let h=Math.floor(r-(f-r)*p);return p=1,h<0?(p=r/(r-h),h=0):h>=this.image.getHeight()&&(p=(this.image.getHeight()-1-r)/(h-r),h=this.image.getHeight()-1),s=Math.floor(t+(s-t)*p),d+=this.sizeOfBlackWhiteBlackRun(t,r,s,h),d-1}sizeOfBlackWhiteBlackRun(t,r,o,f){const d=Math.abs(f-r)>Math.abs(o-t);if(d){let O=t;t=r,r=O,O=o,o=f,f=O}const p=Math.abs(o-t),s=Math.abs(f-r);let h=-p/2;const y=t<o?1:-1,x=r<f?1:-1;let _=0;const S=o+y;for(let O=t,D=r;O!==S;O+=y){const B=d?D:O,k=d?O:D;if(_===1===this.image.get(B,k)){if(_===2)return Rt.distance(O,D,t,r);_++}if(h+=s,h>0){if(D===f)break;D+=x,h-=p}}return _===2?Rt.distance(o+y,f,t,r):NaN}findAlignmentInRegion(t,r,o,f){const d=Math.floor(f*t),p=Math.max(0,r-d),s=Math.min(this.image.getWidth()-1,r+d);if(s-p<t*3)throw new pe("Alignment top exceeds estimated module size.");const h=Math.max(0,o-d),y=Math.min(this.image.getHeight()-1,o+d);if(y-h<t*3)throw new pe("Alignment bottom exceeds estimated module size.");return new cr(this.image,p,h,s-p,y-h,t,this.resultPointCallback).find()}}class zn{constructor(){this.decoder=new Sr}getDecoder(){return this.decoder}decode(t,r){let o,f;if(r!=null&&r.get(Be.PURE_BARCODE)!==void 0){const h=zn.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(h,r),f=zn.NO_POINTS}else{const h=new en(t.getBlackMatrix()).detect(r);o=this.decoder.decodeBitMatrix(h.getBits(),r),f=h.getPoints()}o.getOther()instanceof yo&&o.getOther().applyMirroredCorrection(f);const d=new Ee(o.getText(),o.getRawBytes(),void 0,f,_e.QR_CODE,void 0),p=o.getByteSegments();p!==null&&d.putMetadata(mt.BYTE_SEGMENTS,p);const s=o.getECLevel();return s!==null&&d.putMetadata(mt.ERROR_CORRECTION_LEVEL,s),o.hasStructuredAppend()&&(d.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),d.putMetadata(mt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),d}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r===null||o===null)throw new pe;const f=this.moduleSize(r,t);let d=r[1],p=o[1],s=r[0],h=o[0];if(s>=h||d>=p)throw new pe;if(p-d!==h-s&&(h=s+(p-d),h>=t.getWidth()))throw new pe;const y=Math.round((h-s+1)/f),x=Math.round((p-d+1)/f);if(y<=0||x<=0)throw new pe;if(x!==y)throw new pe;const _=Math.floor(f/2);d+=_,s+=_;const S=s+Math.floor((y-1)*f)-h;if(S>0){if(S>_)throw new pe;s-=S}const O=d+Math.floor((x-1)*f)-p;if(O>0){if(O>_)throw new pe;d-=O}const D=new Dt(y,x);for(let B=0;B<x;B++){const k=d+Math.floor(B*f);for(let U=0;U<y;U++)t.get(s+Math.floor(U*f),k)&&D.set(U,B)}return D}static moduleSize(t,r){const o=r.getHeight(),f=r.getWidth();let d=t[0],p=t[1],s=!0,h=0;for(;d<f&&p<o;){if(s!==r.get(d,p)){if(++h===5)break;s=!s}d++,p++}if(d===f||p===o)throw new pe;return(d-t[0])/7}}zn.NO_POINTS=new Array;class tt{PDF417Common(){}static getBitCountSum(t){return Rt.sum(t)}static toIntArray(t){if(t==null||!t.length)return tt.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let o=0;for(const f of t)r[o++]=f;return r}static getCodeword(t){const r=se.binarySearch(tt.SYMBOL_TABLE,t&262143);return r<0?-1:(tt.CODEWORD_TABLE[r]-1)%tt.NUMBER_OF_CODEWORDS}}tt.NUMBER_OF_CODEWORDS=929,tt.MAX_CODEWORDS_IN_BARCODE=tt.NUMBER_OF_CODEWORDS-1,tt.MIN_ROWS_IN_BARCODE=3,tt.MAX_ROWS_IN_BARCODE=90,tt.MODULES_IN_CODEWORD=17,tt.MODULES_IN_STOP_PATTERN=18,tt.BARS_IN_MODULE=8,tt.EMPTY_INT_ARRAY=new Int32Array([]),tt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class fa{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ut{static detectMultiple(t,r,o){let f=t.getBlackMatrix(),d=ut.detect(o,f);return d.length||(f=f.clone(),f.rotate180(),d=ut.detect(o,f)),new fa(f,d)}static detect(t,r){const o=new Array;let f=0,d=0,p=!1;for(;f<r.getHeight();){const s=ut.findVertices(r,f,d);if(s[0]==null&&s[3]==null){if(!p)break;p=!1,d=0;for(const h of o)h[1]!=null&&(f=Math.trunc(Math.max(f,h[1].getY()))),h[3]!=null&&(f=Math.max(f,Math.trunc(h[3].getY())));f+=ut.ROW_STEP;continue}if(p=!0,o.push(s),!t)break;s[2]!=null?(d=Math.trunc(s[2].getX()),f=Math.trunc(s[2].getY())):(d=Math.trunc(s[4].getX()),f=Math.trunc(s[4].getY()))}return o}static findVertices(t,r,o){const f=t.getHeight(),d=t.getWidth(),p=new Array(8);return ut.copyToResult(p,ut.findRowsWithPattern(t,f,d,r,o,ut.START_PATTERN),ut.INDEXES_START_PATTERN),p[4]!=null&&(o=Math.trunc(p[4].getX()),r=Math.trunc(p[4].getY())),ut.copyToResult(p,ut.findRowsWithPattern(t,f,d,r,o,ut.STOP_PATTERN),ut.INDEXES_STOP_PATTERN),p}static copyToResult(t,r,o){for(let f=0;f<o.length;f++)t[o[f]]=r[f]}static findRowsWithPattern(t,r,o,f,d,p){const s=new Array(4);let h=!1;const y=new Int32Array(p.length);for(;f<r;f+=ut.ROW_STEP){let _=ut.findGuardPattern(t,d,f,o,!1,p,y);if(_!=null){for(;f>0;){const S=ut.findGuardPattern(t,d,--f,o,!1,p,y);if(S!=null)_=S;else{f++;break}}s[0]=new Fe(_[0],f),s[1]=new Fe(_[1],f),h=!0;break}}let x=f+1;if(h){let _=0,S=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;x<r;x++){const O=ut.findGuardPattern(t,S[0],x,o,!1,p,y);if(O!=null&&Math.abs(S[0]-O[0])<ut.MAX_PATTERN_DRIFT&&Math.abs(S[1]-O[1])<ut.MAX_PATTERN_DRIFT)S=O,_=0;else{if(_>ut.SKIPPED_ROW_COUNT_MAX)break;_++}}x-=_+1,s[2]=new Fe(S[0],x),s[3]=new Fe(S[1],x)}return x-f<ut.BARCODE_MIN_HEIGHT&&se.fill(s,null),s}static findGuardPattern(t,r,o,f,d,p,s){se.fillWithin(s,0,s.length,0);let h=r,y=0;for(;t.get(h,o)&&h>0&&y++<ut.MAX_PIXEL_DRIFT;)h--;let x=h,_=0,S=p.length;for(let O=d;x<f;x++)if(t.get(x,o)!==O)s[_]++;else{if(_===S-1){if(ut.patternMatchVariance(s,p,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return new Int32Array([h,x]);h+=s[0]+s[1],Y.arraycopy(s,2,s,0,_-1),s[_-1]=0,s[_]=0,_--}else _++;s[_]=1,O=!O}return _===S-1&&ut.patternMatchVariance(s,p,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE?new Int32Array([h,x-1]):null}static patternMatchVariance(t,r,o){let f=t.length,d=0,p=0;for(let y=0;y<f;y++)d+=t[y],p+=r[y];if(d<p)return 1/0;let s=d/p;o*=s;let h=0;for(let y=0;y<f;y++){let x=t[y],_=r[y]*s,S=x>_?x-_:_-x;if(S>o)return 1/0;h+=S}return h/d}}ut.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ut.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ut.MAX_AVG_VARIANCE=.42,ut.MAX_INDIVIDUAL_VARIANCE=.8,ut.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ut.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ut.MAX_PIXEL_DRIFT=3,ut.MAX_PATTERN_DRIFT=5,ut.SKIPPED_ROW_COUNT_MAX=25,ut.ROW_STEP=5,ut.BARCODE_MIN_HEIGHT=10;class zt{constructor(t,r){if(r.length===0)throw new N;this.field=t;let o=r.length;if(o>1&&r[0]===0){let f=1;for(;f<o&&r[f]===0;)f++;f===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-f),Y.arraycopy(r,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let r=this.coefficients[0],o=this.coefficients.length;for(let f=1;f<o;f++)r=this.field.add(this.field.multiply(t,r),this.coefficients[f]);return r}add(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){let p=r;r=o,o=p}let f=new Int32Array(o.length),d=o.length-r.length;Y.arraycopy(o,0,f,0,d);for(let p=d;p<o.length;p++)f[p]=this.field.add(r[p-d],o[p]);return new zt(this.field,f)}subtract(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof zt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new zt(this.field,new Int32Array([0]));let r=this.coefficients,o=r.length,f=t.coefficients,d=f.length,p=new Int32Array(o+d-1);for(let s=0;s<o;s++){let h=r[s];for(let y=0;y<d;y++)p[s+y]=this.field.add(p[s+y],this.field.multiply(h,f[y]))}return new zt(this.field,p)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let o=0;o<t;o++)r[o]=this.field.subtract(0,this.coefficients[o]);return new zt(this.field,r)}multiplyScalar(t){if(t===0)return new zt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,o=new Int32Array(r);for(let f=0;f<r;f++)o[f]=this.field.multiply(this.coefficients[f],t);return new zt(this.field,o)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return new zt(this.field,new Int32Array([0]));let o=this.coefficients.length,f=new Int32Array(o+t);for(let d=0;d<o;d++)f[d]=this.field.multiply(this.coefficients[d],r);return new zt(this.field,f)}toString(){let t=new ot;for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(r===0||o!==1)&&t.append(o),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Fs{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}inverse(t){if(t===0)throw new Mt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class nr extends Fs{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let f=0;f<t;f++)this.expTable[f]=o,o=o*r%t;for(let f=0;f<t-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new zt(this,new Int32Array([0])),this.one=new zt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;let o=new Int32Array(t+1);return o[0]=r,new zt(this,o)}}nr.PDF417_GF=new nr(tt.NUMBER_OF_CODEWORDS,3);class Xr{constructor(){this.field=nr.PDF417_GF}decode(t,r,o){let f=new zt(this.field,t),d=new Int32Array(r),p=!1;for(let D=r;D>0;D--){let B=f.evaluateAt(this.field.exp(D));d[r-D]=B,B!==0&&(p=!0)}if(!p)return 0;let s=this.field.getOne();if(o!=null)for(const D of o){let B=this.field.exp(t.length-1-D),k=new zt(this.field,new Int32Array([this.field.subtract(0,B),1]));s=s.multiply(k)}let h=new zt(this.field,d),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),h,r),x=y[0],_=y[1],S=this.findErrorLocations(x),O=this.findErrorMagnitudes(_,x,S);for(let D=0;D<S.length;D++){let B=t.length-1-this.field.log(S[D]);if(B<0)throw F.getChecksumInstance();t[B]=this.field.subtract(t[B],O[D])}return S.length}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){let S=t;t=r,r=S}let f=t,d=r,p=this.field.getZero(),s=this.field.getOne();for(;d.getDegree()>=Math.round(o/2);){let S=f,O=p;if(f=d,p=s,f.isZero())throw F.getChecksumInstance();d=S;let D=this.field.getZero(),B=f.getCoefficient(f.getDegree()),k=this.field.inverse(B);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let U=d.getDegree()-f.getDegree(),z=this.field.multiply(d.getCoefficient(d.getDegree()),k);D=D.add(this.field.buildMonomial(U,z)),d=d.subtract(f.multiplyByMonomial(U,z))}s=D.multiply(p).subtract(O).negative()}let h=s.getCoefficient(0);if(h===0)throw F.getChecksumInstance();let y=this.field.inverse(h),x=s.multiply(y),_=d.multiply(y);return[x,_]}findErrorLocations(t){let r=t.getDegree(),o=new Int32Array(r),f=0;for(let d=1;d<this.field.getSize()&&f<r;d++)t.evaluateAt(d)===0&&(o[f]=this.field.inverse(d),f++);if(f!==r)throw F.getChecksumInstance();return o}findErrorMagnitudes(t,r,o){let f=r.getDegree(),d=new Int32Array(f);for(let y=1;y<=f;y++)d[f-y]=this.field.multiply(y,r.getCoefficient(y));let p=new zt(this.field,d),s=o.length,h=new Int32Array(s);for(let y=0;y<s;y++){let x=this.field.inverse(o[y]),_=this.field.subtract(0,t.evaluateAt(x)),S=this.field.inverse(p.evaluateAt(x));h[y]=this.field.multiply(_,S)}return h}}class ei{constructor(t,r,o,f,d){t instanceof ei?this.constructor_2(t):this.constructor_1(t,r,o,f,d)}constructor_1(t,r,o,f,d){const p=r==null||o==null,s=f==null||d==null;if(p&&s)throw new pe;p?(r=new Fe(0,f.getY()),o=new Fe(0,d.getY())):s&&(f=new Fe(t.getWidth()-1,r.getY()),d=new Fe(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=r,this.bottomLeft=o,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(r.getX(),o.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(r.getY(),f.getY())),this.maxY=Math.trunc(Math.max(o.getY(),d.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new ei(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,o){let f=this.topLeft,d=this.bottomLeft,p=this.topRight,s=this.bottomRight;if(t>0){let h=o?this.topLeft:this.topRight,y=Math.trunc(h.getY()-t);y<0&&(y=0);let x=new Fe(h.getX(),y);o?f=x:p=x}if(r>0){let h=o?this.bottomLeft:this.bottomRight,y=Math.trunc(h.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let x=new Fe(h.getX(),y);o?d=x:s=x}return new ei(this.image,f,d,p,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ha{constructor(t,r,o,f){this.columnCount=t,this.errorCorrectionLevel=f,this.rowCountUpperPart=r,this.rowCountLowerPart=o,this.rowCount=r+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ti{constructor(){this.buffer=""}static form(t,r){let o=-1;function f(p,s,h,y,x,_){if(p==="%%")return"%";if(r[++o]===void 0)return;p=y?parseInt(y.substr(1)):void 0;let S=x?parseInt(x.substr(1)):void 0,O;switch(_){case"s":O=r[o];break;case"c":O=r[o][0];break;case"f":O=parseFloat(r[o]).toFixed(p);break;case"p":O=parseFloat(r[o]).toPrecision(p);break;case"e":O=parseFloat(r[o]).toExponential(p);break;case"x":O=parseInt(r[o]).toString(S||16);break;case"d":O=parseFloat(parseInt(r[o],S||10).toPrecision(p)).toFixed(0);break}O=typeof O=="object"?JSON.stringify(O):(+O).toString(S);let D=parseInt(h),B=h&&h[0]+""=="0"?"0":" ";for(;O.length<D;)O=s!==void 0?O+B:B+O;return O}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(d,f)}format(t,...r){this.buffer+=ti.form(t,r)}toString(){return this.buffer}}class ni{constructor(t){this.boundingBox=new ei(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let o=1;o<ni.MAX_NEARBY_DISTANCE;o++){let f=this.imageRowToCodewordIndex(t)-o;if(f>=0&&(r=this.codewords[f],r!=null)||(f=this.imageRowToCodewordIndex(t)+o,f<this.codewords.length&&(r=this.codewords[f],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new ti;let r=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,o.getRowNumber(),o.getValue())}return t.toString()}}ni.MAX_NEARBY_DISTANCE=5;class di{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[o,f]of this.values.entries()){const d={getKey:()=>o,getValue:()=>f};d.getValue()>t?(t=d.getValue(),r=[],r.push(d.getKey())):d.getValue()===t&&r.push(d.getKey())}return tt.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Hs extends ni{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let o=this.getBoundingBox(),f=this._isLeft?o.getTopLeft():o.getTopRight(),d=this._isLeft?o.getBottomLeft():o.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),s=this.imageRowToCodewordIndex(Math.trunc(d.getY())),h=-1,y=1,x=0;for(let _=p;_<s;_++){if(r[_]==null)continue;let S=r[_],O=S.getRowNumber()-h;if(O===0)x++;else if(O===1)y=Math.max(y,x),x=1,h=S.getRowNumber();else if(O<0||S.getRowNumber()>=t.getRowCount()||O>_)r[_]=null;else{let D;y>2?D=(y-2)*O:D=O;let B=D>=_;for(let k=1;k<=D&&!B;k++)B=r[_-k]!=null;B?r[_]=null:(h=S.getRowNumber(),x=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let f=o.getRowNumber();if(f>=r.length)continue;r[f]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),f=this._isLeft?r.getBottomLeft():r.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(o.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),s=this.getCodewords(),h=-1;for(let y=d;y<p;y++){if(s[y]==null)continue;let x=s[y];x.setRowNumberAsRowIndicatorColumn();let _=x.getRowNumber()-h;_===0||(_===1?h=x.getRowNumber():x.getRowNumber()>=t.getRowCount()?s[y]=null:h=x.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new di,o=new di,f=new di,d=new di;for(let s of t){if(s==null)continue;s.setRowNumberAsRowIndicatorColumn();let h=s.getValue()%30,y=s.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(h*3+1);break;case 1:d.setValue(h/3),f.setValue(h%3);break;case 2:r.setValue(h+1);break}}if(r.getValue().length===0||o.getValue().length===0||f.getValue().length===0||d.getValue().length===0||r.getValue()[0]<1||o.getValue()[0]+f.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+f.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;let p=new ha(r.getValue()[0],o.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(t,p),p}removeIncorrectCodewords(t,r){for(let o=0;o<t.length;o++){let f=t[o];if(t[o]==null)continue;let d=f.getValue()%30,p=f.getRowNumber();if(p>r.getRowCount()){t[o]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==r.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(d/3)!==r.getErrorCorrectionLevel()||d%3!==r.getRowCountLowerPart())&&(t[o]=null);break;case 2:d+1!==r.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class En{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=tt.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let o=this.detectionResultColumns[r].getCodewords();for(let f=0;f<o.length;f++)o[f]!=null&&(o[f].hasValidRowNumber()||this.adjustRowNumbers(r,f,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&r[o]!=null&&t[o].getRowNumber()===r[o].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[o];d!=null&&(d.setRowNumber(t[o].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let f=r[o].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let s=this.detectionResultColumns[p].getCodewords()[o];s!=null&&(d=En.adjustRowNumberIfValid(f,d,s),s.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let f=r[o].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let s=this.detectionResultColumns[p].getCodewords()[o];s!=null&&(d=En.adjustRowNumberIfValid(f,d,s),s.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,o){if(!this.detectionResultColumns[t-1])return;let f=o[r],d=this.detectionResultColumns[t-1].getCodewords(),p=d;this.detectionResultColumns[t+1]!=null&&(p=this.detectionResultColumns[t+1].getCodewords());let s=new Array(14);s[2]=d[r],s[3]=p[r],r>0&&(s[0]=o[r-1],s[4]=d[r-1],s[5]=p[r-1]),r>1&&(s[8]=o[r-2],s[10]=d[r-2],s[11]=p[r-2]),r<o.length-1&&(s[1]=o[r+1],s[6]=d[r+1],s[7]=p[r+1]),r<o.length-2&&(s[9]=o[r+2],s[12]=d[r+2],s[13]=p[r+2]);for(let h of s)if(En.adjustRowNumber(f,h))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new ti;for(let o=0;o<t.getCodewords().length;o++){r.format("CW %3d:",o);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){r.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[o];if(d==null){r.format("    |   ");continue}r.format(" %3d|%3d",d.getRowNumber(),d.getValue())}r.format("%n")}return r.toString()}}class Kr{constructor(t,r,o,f){this.rowNumber=Kr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(o),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Kr.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Kr.BARCODE_ROW_UNKNOWN=-1;class Wn{static initialize(){for(let t=0;t<tt.SYMBOL_TABLE.length;t++){let r=tt.SYMBOL_TABLE[t],o=r&1;for(let f=0;f<tt.BARS_IN_MODULE;f++){let d=0;for(;(r&1)===o;)d+=1,r>>=1;o=r&1,Wn.RATIOS_TABLE[t]||(Wn.RATIOS_TABLE[t]=new Array(tt.BARS_IN_MODULE)),Wn.RATIOS_TABLE[t][tt.BARS_IN_MODULE-f-1]=Math.fround(d/tt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Wn.getDecodedCodewordValue(Wn.sampleBitCounts(t));return r!==-1?r:Wn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Rt.sum(t),o=new Int32Array(tt.BARS_IN_MODULE),f=0,d=0;for(let p=0;p<tt.MODULES_IN_CODEWORD;p++){let s=r/(2*tt.MODULES_IN_CODEWORD)+p*r/tt.MODULES_IN_CODEWORD;d+t[f]<=s&&(d+=t[f],f++),o[f]++}return o}static getDecodedCodewordValue(t){let r=Wn.getBitValue(t);return tt.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let o=0;o<t.length;o++)for(let f=0;f<t[o];f++)r=r<<1|(o%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Rt.sum(t),o=new Array(tt.BARS_IN_MODULE);if(r>1)for(let p=0;p<o.length;p++)o[p]=Math.fround(t[p]/r);let f=Mi.MAX_VALUE,d=-1;this.bSymbolTableReady||Wn.initialize();for(let p=0;p<Wn.RATIOS_TABLE.length;p++){let s=0,h=Wn.RATIOS_TABLE[p];for(let y=0;y<tt.BARS_IN_MODULE;y++){let x=Math.fround(h[y]-o[y]);if(s+=Math.fround(x*x),s>=f)break}s<f&&(f=s,d=tt.SYMBOL_TABLE[p])}return d}}Wn.bSymbolTableReady=!1,Wn.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(M=>new Array(tt.BARS_IN_MODULE));class gi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Oa{static parseLong(t,r=void 0){return parseInt(t,r)}}class da extends E{}da.kind="NullPointerException";class Vs{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,o){if(t==null)throw new da;if(r<0||r>t.length||o<0||r+o>t.length||r+o<0)throw new J;if(o===0)return;for(let f=0;f<o;f++)this.write(t[r+f])}flush(){}close(){}}class Na extends E{}class ts extends Vs{constructor(t=32){if(super(),this.count=0,t<0)throw new N("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new Na;o=re.MAX_VALUE}this.buf=se.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,o){if(r<0||r>t.length||o<0||r+o-t.length>0)throw new J;this.ensureCapacity(this.count+o),Y.arraycopy(t,r,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return se.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var qt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(qt||(qt={}));function ns(){if(typeof window<"u")return window.BigInt||null;if(typeof ql<"u")return ql.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ra;function Wr(M){if(typeof Ra>"u"&&(Ra=ns()),Ra===null)throw new Error("BigInt is not supported!");return Ra(M)}function ga(){let M=[];M[0]=Wr(1);let t=Wr(900);M[1]=t;for(let r=2;r<16;r++)M[r]=M[r-1]*t;return M}class ge{static decode(t,r){let o=new ot(""),f=we.ISO8859_1;o.enableDecoding(f);let d=1,p=t[d++],s=new gi;for(;d<t[0];){switch(p){case ge.TEXT_COMPACTION_MODE_LATCH:d=ge.textCompaction(t,d,o);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:d=ge.byteCompaction(p,t,f,d,o);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[d++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:d=ge.numericCompaction(t,d,o);break;case ge.ECI_CHARSET:we.getCharacterSetECIByValue(t[d++]);break;case ge.ECI_GENERAL_PURPOSE:d+=2;break;case ge.ECI_USER_DEFINED:d++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=ge.decodeMacroBlock(t,d,s);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new te;default:d--,d=ge.textCompaction(t,d,o);break}if(d<t.length)p=t[d++];else throw te.getFormatInstance()}if(o.length()===0)throw te.getFormatInstance();let h=new Me(null,o.toString(),null,r);return h.setOther(s),h}static decodeMacroBlock(t,r,o){if(r+ge.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw te.getFormatInstance();let f=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<ge.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)f[s]=t[r];o.setSegmentIndex(re.parseInt(ge.decodeBase900toBase10(f,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new ot;r=ge.textCompaction(t,r,d),o.setFileId(d.toString());let p=-1;for(t[r]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=r+1);r<t[0];)switch(t[r]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let s=new ot;r=ge.textCompaction(t,r+1,s),o.setFileName(s.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new ot;r=ge.textCompaction(t,r+1,h),o.setSender(h.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new ot;r=ge.textCompaction(t,r+1,y),o.setAddressee(y.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new ot;r=ge.numericCompaction(t,r+1,x),o.setSegmentCount(re.parseInt(x.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new ot;r=ge.numericCompaction(t,r+1,_),o.setTimestamp(Oa.parseLong(_.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new ot;r=ge.numericCompaction(t,r+1,S),o.setChecksum(re.parseInt(S.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let O=new ot;r=ge.numericCompaction(t,r+1,O),o.setFileSize(Oa.parseLong(O.toString()));break;default:throw te.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:r++,o.setLastSegment(!0);break;default:throw te.getFormatInstance()}if(p!==-1){let s=r-p;o.isLastSegment()&&s--,o.setOptionalData(se.copyOfRange(t,p,p+s))}return r}static textCompaction(t,r,o){let f=new Int32Array((t[0]-r)*2),d=new Int32Array((t[0]-r)*2),p=0,s=!1;for(;r<t[0]&&!s;){let h=t[r++];if(h<ge.TEXT_COMPACTION_MODE_LATCH)f[p]=h/30,f[p+1]=h%30,p+=2;else switch(h){case ge.TEXT_COMPACTION_MODE_LATCH:f[p++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=t[r++],d[p]=h,p++;break}}return ge.decodeTextCompaction(f,d,p,o),r}static decodeTextCompaction(t,r,o,f){let d=qt.ALPHA,p=qt.ALPHA,s=0;for(;s<o;){let h=t[s],y="";switch(d){case qt.ALPHA:if(h<26)y=String.fromCharCode(65+h);else switch(h){case 26:y=" ";break;case ge.LL:d=qt.LOWER;break;case ge.ML:d=qt.MIXED;break;case ge.PS:p=d,d=qt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(r[s]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.LOWER:if(h<26)y=String.fromCharCode(97+h);else switch(h){case 26:y=" ";break;case ge.AS:p=d,d=qt.ALPHA_SHIFT;break;case ge.ML:d=qt.MIXED;break;case ge.PS:p=d,d=qt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(r[s]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.MIXED:if(h<ge.PL)y=ge.MIXED_CHARS[h];else switch(h){case ge.PL:d=qt.PUNCT;break;case 26:y=" ";break;case ge.LL:d=qt.LOWER;break;case ge.AL:d=qt.ALPHA;break;case ge.PS:p=d,d=qt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(r[s]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.PUNCT:if(h<ge.PAL)y=ge.PUNCT_CHARS[h];else switch(h){case ge.PAL:d=qt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(r[s]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.ALPHA_SHIFT:if(d=p,h<26)y=String.fromCharCode(65+h);else switch(h){case 26:y=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.PUNCT_SHIFT:if(d=p,h<ge.PAL)y=ge.PUNCT_CHARS[h];else switch(h){case ge.PAL:d=qt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(r[s]);break;case ge.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break}y!==""&&f.append(y),s++}}static byteCompaction(t,r,o,f,d){let p=new ts,s=0,h=0,y=!1;switch(t){case ge.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),_=r[f++];for(;f<r[0]&&!y;)switch(x[s++]=_,h=900*h+_,_=r[f++],_){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:f--,y=!0;break;default:if(s%5===0&&s>0){for(let S=0;S<6;++S)p.write(Number(Wr(h)>>Wr(8*(5-S))));h=0,s=0}break}f===r[0]&&_<ge.TEXT_COMPACTION_MODE_LATCH&&(x[s++]=_);for(let S=0;S<s;S++)p.write(x[S]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;f<r[0]&&!y;){let S=r[f++];if(S<ge.TEXT_COMPACTION_MODE_LATCH)s++,h=900*h+S;else switch(S){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:f--,y=!0;break}if(s%5===0&&s>0){for(let O=0;O<6;++O)p.write(Number(Wr(h)>>Wr(8*(5-O))));h=0,s=0}}break}return d.append(Nt.decode(p.toByteArray(),o)),f}static numericCompaction(t,r,o){let f=0,d=!1,p=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!d;){let s=t[r++];if(r===t[0]&&(d=!0),s<ge.TEXT_COMPACTION_MODE_LATCH)p[f]=s,f++;else switch(s){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:r--,d=!0;break}(f%ge.MAX_NUMERIC_CODEWORDS===0||s===ge.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(o.append(ge.decodeBase900toBase10(p,f)),f=0)}return r}static decodeBase900toBase10(t,r){let o=Wr(0);for(let d=0;d<r;d++)o+=ge.EXP900[r-d-1]*Wr(t[d]);let f=o.toString();if(f.charAt(0)!=="1")throw new te;return f.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=ns()?ga():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class wt{constructor(){}static decode(t,r,o,f,d,p,s){let h=new ei(t,r,o,f,d),y=null,x=null,_;for(let D=!0;;D=!1){if(r!=null&&(y=wt.getRowIndicatorColumn(t,h,r,!0,p,s)),f!=null&&(x=wt.getRowIndicatorColumn(t,h,f,!1,p,s)),_=wt.merge(y,x),_==null)throw pe.getNotFoundInstance();let B=_.getBoundingBox();if(D&&B!=null&&(B.getMinY()<h.getMinY()||B.getMaxY()>h.getMaxY()))h=B;else break}_.setBoundingBox(h);let S=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,y),_.setDetectionResultColumn(S,x);let O=y!=null;for(let D=1;D<=S;D++){let B=O?D:S-D;if(_.getDetectionResultColumn(B)!==void 0)continue;let k;B===0||B===S?k=new Hs(h,B===0):k=new ni(h),_.setDetectionResultColumn(B,k);let U=-1,z=U;for(let G=h.getMinY();G<=h.getMaxY();G++){if(U=wt.getStartColumn(_,B,G,O),U<0||U>h.getMaxX()){if(z===-1)continue;U=z}let H=wt.detectCodeword(t,h.getMinX(),h.getMaxX(),O,U,G,p,s);H!=null&&(k.setCodeword(G,H),z=U,p=Math.min(p,H.getWidth()),s=Math.max(s,H.getWidth()))}}return wt.createDecoderResult(_)}static merge(t,r){if(t==null&&r==null)return null;let o=wt.getBarcodeMetadata(t,r);if(o==null)return null;let f=ei.merge(wt.adjustBoundingBox(t),wt.adjustBoundingBox(r));return new En(o,f)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let o=wt.getMax(r),f=0;for(let s of r)if(f+=o-s,s>0)break;let d=t.getCodewords();for(let s=0;f>0&&d[s]==null;s++)f--;let p=0;for(let s=r.length-1;s>=0&&(p+=o-r[s],!(r[s]>0));s--);for(let s=d.length-1;p>0&&d[s]==null;s--)p--;return t.getBoundingBox().addMissingRows(f,p,t.isLeft())}static getMax(t){let r=-1;for(let o of t)r=Math.max(r,o);return r}static getBarcodeMetadata(t,r){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let f;return r==null||(f=r.getBarcodeMetadata())==null?o:o.getColumnCount()!==f.getColumnCount()&&o.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&o.getRowCount()!==f.getRowCount()?null:o}static getRowIndicatorColumn(t,r,o,f,d,p){let s=new Hs(r,f);for(let h=0;h<2;h++){let y=h===0?1:-1,x=Math.trunc(Math.trunc(o.getX()));for(let _=Math.trunc(Math.trunc(o.getY()));_<=r.getMaxY()&&_>=r.getMinY();_+=y){let S=wt.detectCodeword(t,0,t.getWidth(),f,x,_,d,p);S!=null&&(s.setCodeword(_,S),f?x=S.getStartX():x=S.getEndX())}}return s}static adjustCodewordCount(t,r){let o=r[0][1],f=o.getValue(),d=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-wt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(f.length===0){if(d<1||d>tt.MAX_CODEWORDS_IN_BARCODE)throw pe.getNotFoundInstance();o.setValue(d)}else f[0]!==d&&o.setValue(d)}static createDecoderResult(t){let r=wt.createBarcodeMatrix(t);wt.adjustCodewordCount(t,r);let o=new Array,f=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),d=[],p=new Array;for(let h=0;h<t.getBarcodeRowCount();h++)for(let y=0;y<t.getBarcodeColumnCount();y++){let x=r[h][y+1].getValue(),_=h*t.getBarcodeColumnCount()+y;x.length===0?o.push(_):x.length===1?f[_]=x[0]:(p.push(_),d.push(x))}let s=new Array(d.length);for(let h=0;h<s.length;h++)s[h]=d[h];return wt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),f,tt.toIntArray(o),tt.toIntArray(p),s)}static createDecoderResultFromAmbiguousValues(t,r,o,f,d){let p=new Int32Array(f.length),s=100;for(;s-- >0;){for(let h=0;h<p.length;h++)r[f[h]]=d[h][p[h]];try{return wt.decodeCodewords(r,t,o)}catch(h){if(!(h instanceof F))throw h}if(p.length===0)throw F.getChecksumInstance();for(let h=0;h<p.length;h++)if(p[h]<d[h].length-1){p[h]++;break}else if(p[h]=0,h===p.length-1)throw F.getChecksumInstance()}throw F.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let f=0;f<r.length;f++)for(let d=0;d<r[f].length;d++)r[f][d]=new di;let o=0;for(let f of t.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=r.length)continue;r[p][o].setValue(d.getValue())}}}o++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,o,f){let d=f?1:-1,p=null;if(wt.isValidBarcodeColumn(t,r-d)&&(p=t.getDetectionResultColumn(r-d).getCodeword(o)),p!=null)return f?p.getEndX():p.getStartX();if(p=t.getDetectionResultColumn(r).getCodewordNearby(o),p!=null)return f?p.getStartX():p.getEndX();if(wt.isValidBarcodeColumn(t,r-d)&&(p=t.getDetectionResultColumn(r-d).getCodewordNearby(o)),p!=null)return f?p.getEndX():p.getStartX();let s=0;for(;wt.isValidBarcodeColumn(t,r-d);){r-=d;for(let h of t.getDetectionResultColumn(r).getCodewords())if(h!=null)return(f?h.getEndX():h.getStartX())+d*s*(h.getEndX()-h.getStartX());s++}return f?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,o,f,d,p,s,h){d=wt.adjustCodewordStartColumn(t,r,o,f,d,p);let y=wt.getModuleBitCount(t,r,o,f,d,p);if(y==null)return null;let x,_=Rt.sum(y);if(f)x=d+_;else{for(let D=0;D<y.length/2;D++){let B=y[D];y[D]=y[y.length-1-D],y[y.length-1-D]=B}x=d,d=x-_}if(!wt.checkCodewordSkew(_,s,h))return null;let S=Wn.getDecodedValue(y),O=tt.getCodeword(S);return O===-1?null:new Kr(d,x,wt.getCodewordBucketNumber(S),O)}static getModuleBitCount(t,r,o,f,d,p){let s=d,h=new Int32Array(8),y=0,x=f?1:-1,_=f;for(;(f?s<o:s>=r)&&y<h.length;)t.get(s,p)===_?(h[y]++,s+=x):(y++,_=!_);return y===h.length||s===(f?o:r)&&y===h.length-1?h:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,o,f,d,p){let s=d,h=f?-1:1;for(let y=0;y<2;y++){for(;(f?s>=r:s<o)&&f===t.get(s,p);){if(Math.abs(d-s)>wt.CODEWORD_SKEW_SIZE)return d;s+=h}h=-h,f=!f}return s}static checkCodewordSkew(t,r,o){return r-wt.CODEWORD_SKEW_SIZE<=t&&t<=o+wt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,o){if(t.length===0)throw te.getFormatInstance();let f=1<<r+1,d=wt.correctErrors(t,o,f);wt.verifyCodewordCount(t,f);let p=ge.decode(t,""+r);return p.setErrorsCorrected(d),p.setErasures(o.length),p}static correctErrors(t,r,o){if(r!=null&&r.length>o/2+wt.MAX_ERRORS||o<0||o>wt.MAX_EC_CODEWORDS)throw F.getChecksumInstance();return wt.errorCorrection.decode(t,o,r)}static verifyCodewordCount(t,r){if(t.length<4)throw te.getFormatInstance();let o=t[0];if(o>t.length)throw te.getFormatInstance();if(o===0)if(r<t.length)t[0]=t.length-r;else throw te.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),o=0,f=r.length-1;for(;!((t&1)!==o&&(o=t&1,f--,f<0));)r[f]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return wt.getCodewordBucketNumber(wt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new ti;for(let o=0;o<t.length;o++){r.format("Row %2d: ",o);for(let f=0;f<t[o].length;f++){let d=t[o][f];d.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}r.format("%n")}return r.toString()}}wt.CODEWORD_SKEW_SIZE=2,wt.MAX_ERRORS=3,wt.MAX_EC_CODEWORDS=512,wt.errorCorrection=new Xr;class Qn{decode(t,r=null){let o=Qn.decode(t,r,!1);if(o==null||o.length===0||o[0]==null)throw pe.getNotFoundInstance();return o[0]}decodeMultiple(t,r=null){try{return Qn.decode(t,r,!0)}catch(o){throw o instanceof te||o instanceof F?pe.getNotFoundInstance():o}}static decode(t,r,o){const f=new Array,d=ut.detectMultiple(t,r,o);for(const p of d.getPoints()){const s=wt.decode(d.getBits(),p[4],p[5],p[6],p[7],Qn.getMinCodewordWidth(p),Qn.getMaxCodewordWidth(p)),h=new Ee(s.getText(),s.getRawBytes(),void 0,p,_e.PDF_417);h.putMetadata(mt.ERROR_CORRECTION_LEVEL,s.getECLevel());const y=s.getOther();y!=null&&h.putMetadata(mt.PDF417_EXTRA_METADATA,y),f.push(h)}return f.map(p=>p)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?re.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Qn.getMaxWidth(t[0],t[4]),Qn.getMaxWidth(t[6],t[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(Qn.getMaxWidth(t[1],t[5]),Qn.getMaxWidth(t[7],t[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Qn.getMinWidth(t[0],t[4]),Qn.getMinWidth(t[6],t[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(Qn.getMinWidth(t[1],t[5]),Qn.getMinWidth(t[7],t[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}reset(){}}class pi extends E{}pi.kind="ReaderException";class rs{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!c(t)&&t.get(Be.TRY_HARDER)===!0,o=c(t)?null:t.get(Be.POSSIBLE_FORMATS),f=new Array;if(!c(o)){const d=o.some(p=>p===_e.UPC_A||p===_e.UPC_E||p===_e.EAN_13||p===_e.EAN_8||p===_e.CODABAR||p===_e.CODE_39||p===_e.CODE_93||p===_e.CODE_128||p===_e.ITF||p===_e.RSS_14||p===_e.RSS_EXPANDED);d&&!r&&f.push(new _r(t,this.verbose)),o.includes(_e.QR_CODE)&&f.push(new zn),o.includes(_e.DATA_MATRIX)&&f.push(new Jr),o.includes(_e.AZTEC)&&f.push(new Yi),o.includes(_e.PDF_417)&&f.push(new Qn),d&&r&&f.push(new _r(t,this.verbose))}f.length===0&&(r||f.push(new _r(t,this.verbose)),f.push(new zn),f.push(new Jr),f.push(new Yi),f.push(new Qn),r&&f.push(new _r(t,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new pi("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(o){if(o instanceof pi)continue}throw new pe("No MultiFormat Readers were able to detect the code.")}}class is extends xe{constructor(t=null,r=500){const o=new rs;o.setHints(t),super(o,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class qs extends xe{constructor(t=500){super(new Qn,t)}}class Gs extends xe{constructor(t=500){super(new zn,t)}}var Fn;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(Fn||(Fn={}));var yn=Fn;class mi{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Rn(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let o=r[r.length-1];const f=this.field;for(let d=r.length;d<=t;d++){const p=o.multiply(new Rn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));r.push(p),o=p}}return r[t]}encode(t,r){if(r===0)throw new N("No error correction bytes");const o=t.length-r;if(o<=0)throw new N("No data bytes provided");const f=this.buildGenerator(r),d=new Int32Array(o);Y.arraycopy(t,0,d,0,o);let p=new Rn(this.field,d);p=p.multiplyByMonomial(r,1);const h=p.divide(f)[1].getCoefficients(),y=r-h.length;for(let x=0;x<y;x++)t[o+x]=0;Y.arraycopy(h,0,t,o+y,h.length)}}class vn{constructor(){}static applyMaskPenaltyRule1(t){return vn.applyMaskPenaltyRule1Internal(t,!0)+vn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const o=t.getArray(),f=t.getWidth(),d=t.getHeight();for(let p=0;p<d-1;p++){const s=o[p];for(let h=0;h<f-1;h++){const y=s[h];y===s[h+1]&&y===o[p+1][h]&&y===o[p+1][h+1]&&r++}}return vn.N2*r}static applyMaskPenaltyRule3(t){let r=0;const o=t.getArray(),f=t.getWidth(),d=t.getHeight();for(let p=0;p<d;p++)for(let s=0;s<f;s++){const h=o[p];s+6<f&&h[s]===1&&h[s+1]===0&&h[s+2]===1&&h[s+3]===1&&h[s+4]===1&&h[s+5]===0&&h[s+6]===1&&(vn.isWhiteHorizontal(h,s-4,s)||vn.isWhiteHorizontal(h,s+7,s+11))&&r++,p+6<d&&o[p][s]===1&&o[p+1][s]===0&&o[p+2][s]===1&&o[p+3][s]===1&&o[p+4][s]===1&&o[p+5][s]===0&&o[p+6][s]===1&&(vn.isWhiteVertical(o,s,p-4,p)||vn.isWhiteVertical(o,s,p+7,p+11))&&r++}return r*vn.N3}static isWhiteHorizontal(t,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let f=r;f<o;f++)if(t[f]===1)return!1;return!0}static isWhiteVertical(t,r,o,f){o=Math.max(o,0),f=Math.min(f,t.length);for(let d=o;d<f;d++)if(t[d][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const o=t.getArray(),f=t.getWidth(),d=t.getHeight();for(let h=0;h<d;h++){const y=o[h];for(let x=0;x<f;x++)y[x]===1&&r++}const p=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-p)*10/p)*vn.N4}static getDataMaskBit(t,r,o){let f,d;switch(t){case 0:f=o+r&1;break;case 1:f=o&1;break;case 2:f=r%3;break;case 3:f=(o+r)%3;break;case 4:f=Math.floor(o/2)+Math.floor(r/3)&1;break;case 5:d=o*r,f=(d&1)+d%3;break;case 6:d=o*r,f=(d&1)+d%3&1;break;case 7:d=o*r,f=d%3+(o+r&1)&1;break;default:throw new N("Invalid mask pattern: "+t)}return f===0}static applyMaskPenaltyRule1Internal(t,r){let o=0;const f=r?t.getHeight():t.getWidth(),d=r?t.getWidth():t.getHeight(),p=t.getArray();for(let s=0;s<f;s++){let h=0,y=-1;for(let x=0;x<d;x++){const _=r?p[s][x]:p[x][s];_===y?h++:(h>=5&&(o+=vn.N1+(h-5)),h=1,y=_)}h>=5&&(o+=vn.N1+(h-5))}return o}}vn.N1=3,vn.N2=3,vn.N3=40,vn.N4=10;class Zi{constructor(t,r){this.width=t,this.height=r;const o=new Array(r);for(let f=0;f!==r;f++)o[f]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,o){this.bytes[r][t]=o}setBoolean(t,r,o){this.bytes[r][t]=o?1:0}clear(t){for(const r of this.bytes)se.fill(r,t)}equals(t){if(!(t instanceof Zi))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let o=0,f=this.height;o<f;++o){const d=this.bytes[o],p=r.bytes[o];for(let s=0,h=this.width;s<h;++s)if(d[s]!==p[s])return!1}return!0}toString(){const t=new ot;for(let r=0,o=this.height;r<o;++r){const f=this.bytes[r];for(let d=0,p=this.width;d<p;++d)switch(f[d]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Bi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ot;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Bi.NUM_MASK_PATTERNS}}Bi.NUM_MASK_PATTERNS=8;class Wt extends E{}Wt.kind="WriterException";class nt{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,o,f,d){nt.clearMatrix(d),nt.embedBasicPatterns(o,d),nt.embedTypeInfo(r,f,d),nt.maybeEmbedVersionInfo(o,d),nt.embedDataBits(t,f,d)}static embedBasicPatterns(t,r){nt.embedPositionDetectionPatternsAndSeparators(r),nt.embedDarkDotAtLeftBottomCorner(r),nt.maybeEmbedPositionAdjustmentPatterns(t,r),nt.embedTimingPatterns(r)}static embedTypeInfo(t,r,o){const f=new Ce;nt.makeTypeInfoBits(t,r,f);for(let d=0,p=f.getSize();d<p;++d){const s=f.get(f.getSize()-1-d),h=nt.TYPE_INFO_COORDINATES[d],y=h[0],x=h[1];if(o.setBoolean(y,x,s),d<8){const _=o.getWidth()-d-1;o.setBoolean(_,8,s)}else{const S=o.getHeight()-7+(d-8);o.setBoolean(8,S,s)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const o=new Ce;nt.makeVersionInfoBits(t,o);let f=17;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const s=o.get(f);f--,r.setBoolean(d,r.getHeight()-11+p,s),r.setBoolean(r.getHeight()-11+p,d,s)}}static embedDataBits(t,r,o){let f=0,d=-1,p=o.getWidth()-1,s=o.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);s>=0&&s<o.getHeight();){for(let h=0;h<2;++h){const y=p-h;if(!nt.isEmpty(o.get(y,s)))continue;let x;f<t.getSize()?(x=t.get(f),++f):x=!1,r!==255&&vn.getDataMaskBit(r,y,s)&&(x=!x),o.setBoolean(y,s,x)}s+=d}d=-d,s+=d,p-=2}if(f!==t.getSize())throw new Wt("Not all bits consumed: "+f+"/"+t.getSize())}static findMSBSet(t){return 32-re.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new N("0 polynomial");const o=nt.findMSBSet(r);for(t<<=o-1;nt.findMSBSet(t)>=o;)t^=r<<nt.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,r,o){if(!Bi.isValidMaskPattern(r))throw new Wt("Invalid mask pattern");const f=t.getBits()<<3|r;o.appendBits(f,5);const d=nt.calculateBCHCode(f,nt.TYPE_INFO_POLY);o.appendBits(d,10);const p=new Ce;if(p.appendBits(nt.TYPE_INFO_MASK_PATTERN,15),o.xor(p),o.getSize()!==15)throw new Wt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const o=nt.calculateBCHCode(t.getVersionNumber(),nt.VERSION_INFO_POLY);if(r.appendBits(o,12),r.getSize()!==18)throw new Wt("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const o=(r+1)%2;nt.isEmpty(t.get(r,6))&&t.setNumber(r,6,o),nt.isEmpty(t.get(6,r))&&t.setNumber(6,r,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Wt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,o){for(let f=0;f<8;++f){if(!nt.isEmpty(o.get(t+f,r)))throw new Wt;o.setNumber(t+f,r,0)}}static embedVerticalSeparationPattern(t,r,o){for(let f=0;f<7;++f){if(!nt.isEmpty(o.get(t,r+f)))throw new Wt;o.setNumber(t,r+f,0)}}static embedPositionAdjustmentPattern(t,r,o){for(let f=0;f<5;++f){const d=nt.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)o.setNumber(t+p,r+f,d[p])}}static embedPositionDetectionPattern(t,r,o){for(let f=0;f<7;++f){const d=nt.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)o.setNumber(t+p,r+f,d[p])}}static embedPositionDetectionPatternsAndSeparators(t){const r=nt.POSITION_DETECTION_PATTERN[0].length;nt.embedPositionDetectionPattern(0,0,t),nt.embedPositionDetectionPattern(t.getWidth()-r,0,t),nt.embedPositionDetectionPattern(0,t.getWidth()-r,t);const o=8;nt.embedHorizontalSeparationPattern(0,o-1,t),nt.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),nt.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const f=7;nt.embedVerticalSeparationPattern(f,0,t),nt.embedVerticalSeparationPattern(t.getHeight()-f-1,0,t),nt.embedVerticalSeparationPattern(f,t.getHeight()-f,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,f=nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let d=0,p=f.length;d!==p;d++){const s=f[d];if(s>=0)for(let h=0;h!==p;h++){const y=f[h];y>=0&&nt.isEmpty(r.get(y,s))&&nt.embedPositionAdjustmentPattern(y-2,s-2,r)}}}}nt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),nt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),nt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),nt.VERSION_INFO_POLY=7973,nt.TYPE_INFO_POLY=1335,nt.TYPE_INFO_MASK_PATTERN=21522;class Ys{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Gt{constructor(){}static calculateMaskPenalty(t){return vn.applyMaskPenaltyRule1(t)+vn.applyMaskPenaltyRule2(t)+vn.applyMaskPenaltyRule3(t)+vn.applyMaskPenaltyRule4(t)}static encode(t,r,o=null){let f=Gt.DEFAULT_BYTE_MODE_ENCODING;const d=o!==null&&o.get(yn.CHARACTER_SET)!==void 0;d&&(f=o.get(yn.CHARACTER_SET).toString());const p=this.chooseMode(t,f),s=new Ce;if(p===et.BYTE&&(d||Gt.DEFAULT_BYTE_MODE_ENCODING!==f)){const G=we.getCharacterSetECIByName(f);G!==void 0&&this.appendECI(G,s)}this.appendModeInfo(p,s);const h=new Ce;this.appendBytes(t,p,h,f);let y;if(o!==null&&o.get(yn.QR_VERSION)!==void 0){const G=Number.parseInt(o.get(yn.QR_VERSION).toString(),10);y=Ye.getVersionForNumber(G);const H=this.calculateBitsNeeded(p,s,h,y);if(!this.willFit(H,y,r))throw new Wt("Data too big for requested version")}else y=this.recommendVersion(r,p,s,h);const x=new Ce;x.appendBitArray(s);const _=p===et.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(_,y,p,x),x.appendBitArray(h);const S=y.getECBlocksForLevel(r),O=y.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(O,x);const D=this.interleaveWithECBytes(x,y.getTotalCodewords(),O,S.getNumBlocks()),B=new Bi;B.setECLevel(r),B.setMode(p),B.setVersion(y);const k=y.getDimensionForVersion(),U=new Zi(k,k),z=this.chooseMaskPattern(D,r,y,U);return B.setMaskPattern(z),nt.buildMatrix(D,r,y,z,U),B.setMatrix(U),B}static recommendVersion(t,r,o,f){const d=this.calculateBitsNeeded(r,o,f,Ye.getVersionForNumber(1)),p=this.chooseVersion(d,t),s=this.calculateBitsNeeded(r,o,f,p);return this.chooseVersion(s,t)}static calculateBitsNeeded(t,r,o,f){return r.getSize()+t.getCharacterCountBits(f)+o.getSize()}static getAlphanumericCode(t){return t<Gt.ALPHANUMERIC_TABLE.length?Gt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(we.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return et.KANJI;let o=!1,f=!1;for(let d=0,p=t.length;d<p;++d){const s=t.charAt(d);if(Gt.isDigit(s))o=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)f=!0;else return et.BYTE}return f?et.ALPHANUMERIC:o?et.NUMERIC:et.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=Nt.encode(t,we.SJIS)}catch{return!1}const o=r.length;if(o%2!==0)return!1;for(let f=0;f<o;f+=2){const d=r[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(t,r,o,f){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let s=0;s<Bi.NUM_MASK_PATTERNS;s++){nt.buildMatrix(t,r,o,s,f);let h=this.calculateMaskPenalty(f);h<d&&(d=h,p=s)}return p}static chooseVersion(t,r){for(let o=1;o<=40;o++){const f=Ye.getVersionForNumber(o);if(Gt.willFit(t,f,r))return f}throw new Wt("Data too big")}static willFit(t,r,o){const f=r.getTotalCodewords(),p=r.getECBlocksForLevel(o).getTotalECCodewords(),s=f-p,h=(t+7)/8;return s>=h}static terminateBits(t,r){const o=t*8;if(r.getSize()>o)throw new Wt("data bits cannot fit in the QR Code"+r.getSize()+" > "+o);for(let p=0;p<4&&r.getSize()<o;++p)r.appendBit(!1);const f=r.getSize()&7;if(f>0)for(let p=f;p<8;p++)r.appendBit(!1);const d=t-r.getSizeInBytes();for(let p=0;p<d;++p)r.appendBits((p&1)===0?236:17,8);if(r.getSize()!==o)throw new Wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,o,f,d,p){if(f>=o)throw new Wt("Block ID too large");const s=t%o,h=o-s,y=Math.floor(t/o),x=y+1,_=Math.floor(r/o),S=_+1,O=y-_,D=x-S;if(O!==D)throw new Wt("EC bytes mismatch");if(o!==h+s)throw new Wt("RS blocks mismatch");if(t!==(_+O)*h+(S+D)*s)throw new Wt("Total bytes mismatch");f<h?(d[0]=_,p[0]=O):(d[0]=S,p[0]=D)}static interleaveWithECBytes(t,r,o,f){if(t.getSizeInBytes()!==o)throw new Wt("Number of bits and data bytes does not match");let d=0,p=0,s=0;const h=new Array;for(let x=0;x<f;++x){const _=new Int32Array(1),S=new Int32Array(1);Gt.getNumDataBytesAndNumECBytesForBlockID(r,o,f,x,_,S);const O=_[0],D=new Uint8Array(O);t.toBytes(8*d,D,0,O);const B=Gt.generateECBytes(D,S[0]);h.push(new Ys(D,B)),p=Math.max(p,O),s=Math.max(s,B.length),d+=_[0]}if(o!==d)throw new Wt("Data bytes does not match offset");const y=new Ce;for(let x=0;x<p;++x)for(const _ of h){const S=_.getDataBytes();x<S.length&&y.appendBits(S[x],8)}for(let x=0;x<s;++x)for(const _ of h){const S=_.getErrorCorrectionBytes();x<S.length&&y.appendBits(S[x],8)}if(r!==y.getSizeInBytes())throw new Wt("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(t,r){const o=t.length,f=new Int32Array(o+r);for(let p=0;p<o;p++)f[p]=t[p]&255;new mi(Ct.QR_CODE_FIELD_256).encode(f,r);const d=new Uint8Array(r);for(let p=0;p<r;p++)d[p]=f[o+p];return d}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,o,f){const d=o.getCharacterCountBits(r);if(t>=1<<d)throw new Wt(t+" is bigger than "+((1<<d)-1));f.appendBits(t,d)}static appendBytes(t,r,o,f){switch(r){case et.NUMERIC:Gt.appendNumericBytes(t,o);break;case et.ALPHANUMERIC:Gt.appendAlphanumericBytes(t,o);break;case et.BYTE:Gt.append8BitBytes(t,o,f);break;case et.KANJI:Gt.appendKanjiBytes(t,o);break;default:throw new Wt("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Gt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const o=t.length;let f=0;for(;f<o;){const d=Gt.getDigit(t.charAt(f));if(f+2<o){const p=Gt.getDigit(t.charAt(f+1)),s=Gt.getDigit(t.charAt(f+2));r.appendBits(d*100+p*10+s,10),f+=3}else if(f+1<o){const p=Gt.getDigit(t.charAt(f+1));r.appendBits(d*10+p,7),f+=2}else r.appendBits(d,4),f++}}static appendAlphanumericBytes(t,r){const o=t.length;let f=0;for(;f<o;){const d=Gt.getAlphanumericCode(t.charCodeAt(f));if(d===-1)throw new Wt;if(f+1<o){const p=Gt.getAlphanumericCode(t.charCodeAt(f+1));if(p===-1)throw new Wt;r.appendBits(d*45+p,11),f+=2}else r.appendBits(d,6),f++}}static append8BitBytes(t,r,o){let f;try{f=Nt.encode(t,o)}catch(d){throw new Wt(d)}for(let d=0,p=f.length;d!==p;d++){const s=f[d];r.appendBits(s,8)}}static appendKanjiBytes(t,r){let o;try{o=Nt.encode(t,we.SJIS)}catch(d){throw new Wt(d)}const f=o.length;for(let d=0;d<f;d+=2){const p=o[d]&255,s=o[d+1]&255,h=p<<8&4294967295|s;let y=-1;if(h>=33088&&h<=40956?y=h-33088:h>=57408&&h<=60351&&(y=h-49472),y===-1)throw new Wt("Invalid byte sequence");const x=(y>>8)*192+(y&255);r.appendBits(x,13)}}static appendECI(t,r){r.appendBits(et.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Gt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Gt.DEFAULT_BYTE_MODE_ENCODING=we.UTF8.getName();class yi{write(t,r,o,f=null){if(t.length===0)throw new N("Found empty contents");if(r<0||o<0)throw new N("Requested dimensions are too small: "+r+"x"+o);let d=vt.L,p=yi.QUIET_ZONE_SIZE;f!==null&&(f.get(yn.ERROR_CORRECTION)!==void 0&&(d=vt.fromString(f.get(yn.ERROR_CORRECTION).toString())),f.get(yn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(yn.MARGIN).toString(),10)));const s=Gt.encode(t,d,f);return this.renderResult(s,r,o,p)}writeToDom(t,r,o,f,d=null){typeof t=="string"&&(t=document.querySelector(t));const p=this.write(r,o,f,d);t&&t.appendChild(p)}renderResult(t,r,o,f){const d=t.getMatrix();if(d===null)throw new jn;const p=d.getWidth(),s=d.getHeight(),h=p+f*2,y=s+f*2,x=Math.max(r,h),_=Math.max(o,y),S=Math.min(Math.floor(x/h),Math.floor(_/y)),O=Math.floor((x-p*S)/2),D=Math.floor((_-s*S)/2),B=this.createSVGElement(x,_);for(let k=0,U=D;k<s;k++,U+=S)for(let z=0,G=O;z<p;z++,G+=S)if(d.get(z,k)===1){const H=this.createSvgRectElement(G,U,S,S);B.appendChild(H)}return B}createSVGElement(t,r){const o=document.createElementNS(yi.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",r.toString()),o}createSvgRectElement(t,r,o,f){const d=document.createElementNS(yi.SVG_NS,"rect");return d.setAttributeNS(null,"x",t.toString()),d.setAttributeNS(null,"y",r.toString()),d.setAttributeNS(null,"height",o.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}yi.QUIET_ZONE_SIZE=4,yi.SVG_NS="http://www.w3.org/2000/svg";class Li{encode(t,r,o,f,d){if(t.length===0)throw new N("Found empty contents");if(r!==_e.QR_CODE)throw new N("Can only encode QR_CODE, but got "+r);if(o<0||f<0)throw new N(`Requested dimensions are too small: ${o}x${f}`);let p=vt.L,s=Li.QUIET_ZONE_SIZE;d!==null&&(d.get(yn.ERROR_CORRECTION)!==void 0&&(p=vt.fromString(d.get(yn.ERROR_CORRECTION).toString())),d.get(yn.MARGIN)!==void 0&&(s=Number.parseInt(d.get(yn.MARGIN).toString(),10)));const h=Gt.encode(t,p,d);return Li.renderResult(h,o,f,s)}static renderResult(t,r,o,f){const d=t.getMatrix();if(d===null)throw new jn;const p=d.getWidth(),s=d.getHeight(),h=p+f*2,y=s+f*2,x=Math.max(r,h),_=Math.max(o,y),S=Math.min(Math.floor(x/h),Math.floor(_/y)),O=Math.floor((x-p*S)/2),D=Math.floor((_-s*S)/2),B=new Dt(x,_);for(let k=0,U=D;k<s;k++,U+=S)for(let z=0,G=O;z<p;z++,G+=S)d.get(z,k)===1&&B.setRegion(G,U,S,S);return B}}Li.QUIET_ZONE_SIZE=4;class as{encode(t,r,o,f,d){let p;switch(r){case _e.QR_CODE:p=new Li;break;default:throw new N("No encoder available for format "+r)}return p.encode(t,r,o,f,d)}}class Ur extends Ze{constructor(t,r,o,f,d,p,s,h){if(super(p,s),this.yuvData=t,this.dataWidth=r,this.dataHeight=o,this.left=f,this.top=d,f+p>r||d+s>o)throw new N("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(p,s)}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const f=(t+this.top)*this.dataWidth+this.left;return Y.arraycopy(this.yuvData,f,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const o=t*r,f=new Uint8ClampedArray(o);let d=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Y.arraycopy(this.yuvData,d,f,0,o),f;for(let p=0;p<r;p++){const s=p*t;Y.arraycopy(this.yuvData,d,f,s,t),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(t,r,o,f){return new Ur(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,o,f,!1)}renderThumbnail(){const t=this.getWidth()/Ur.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Ur.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*r),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<r;p++){const s=p*t;for(let h=0;h<t;h++){const y=f[d+h*Ur.THUMBNAIL_SCALE_FACTOR]&255;o[s+h]=4278190080|y*65793}d+=this.dataWidth*Ur.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Ur.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ur.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const o=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<r;f++,d+=this.dataWidth){const p=d+t/2;for(let s=d,h=d+t-1;s<p;s++,h--){const y=o[s];o[s]=o[h],o[h]=y}}}invert(){return new pt(this)}}Ur.THUMBNAIL_SCALE_FACTOR=2;class ss extends Ze{constructor(t,r,o,f,d,p,s){if(super(r,o),this.dataWidth=f,this.dataHeight=d,this.left=p,this.top=s,t.BYTES_PER_ELEMENT===4){const h=r*o,y=new Uint8ClampedArray(h);for(let x=0;x<h;x++){const _=t[x],S=_>>16&255,O=_>>7&510,D=_&255;y[x]=(S+O+D)/4&255}this.luminances=y}else this.luminances=t;if(f===void 0&&(this.dataWidth=r),d===void 0&&(this.dataHeight=o),p===void 0&&(this.left=0),s===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+o>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const f=(t+this.top)*this.dataWidth+this.left;return Y.arraycopy(this.luminances,f,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const o=t*r,f=new Uint8ClampedArray(o);let d=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Y.arraycopy(this.luminances,d,f,0,o),f;for(let p=0;p<r;p++){const s=p*t;Y.arraycopy(this.luminances,d,f,s,t),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(t,r,o,f){return new ss(this.luminances,o,f,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new pt(this)}}class vo extends we{static forName(t){return this.getCharacterSetECIByName(t)}}class Ji{}Ji.ISO_8859_1=we.ISO8859_1;class vi{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class xo{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class os{constructor(t){this.previous=t}getPrevious(){return this.previous}}class xi extends os{constructor(t,r,o){super(t),this.value=r,this.bitCount=o}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new xi(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xi(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+re.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ls extends xi{constructor(t,r,o){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=o}appendTo(t,r){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+o],8)}addBinaryShift(t,r){return new ls(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Xs(M,t,r){return new ls(M,t,r)}function pa(M,t,r){return new xi(M,t,r)}const $i=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],wi=0,us=1,Cr=2,Ia=3,zr=4,ma=new xi(null,0,0),ea=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ol(M){for(let t of M)se.fill(t,-1);return M[wi][zr]=0,M[us][zr]=0,M[us][wi]=28,M[Ia][zr]=0,M[Cr][zr]=0,M[Cr][wi]=15,M}const Da=ol(se.createInt32Array(6,6));class dr{constructor(t,r,o,f){this.token=t,this.mode=r,this.binaryShiftByteCount=o,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let o=this.bitCount,f=this.token;if(t!==this.mode){let p=ea[this.mode][t];f=pa(f,p&65535,p>>16),o+=p>>16}let d=t===Cr?4:5;return f=pa(f,r,d),new dr(f,t,0,o+d)}shiftAndAppend(t,r){let o=this.token,f=this.mode===Cr?4:5;return o=pa(o,Da[this.mode][t],f),o=pa(o,r,5),new dr(o,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(t){let r=this.token,o=this.mode,f=this.bitCount;if(this.mode===zr||this.mode===Cr){let s=ea[o][wi];r=pa(r,s&65535,s>>16),f+=s>>16,o=wi}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new dr(r,o,this.binaryShiftByteCount+1,f+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(t+1)),p}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Xs(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new dr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(ea[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=dr.calculateBinaryShiftCost(t)-dr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let f=this.endBinaryShift(t.length).token;f!==null;f=f.getPrevious())r.unshift(f);let o=new Ce;for(const f of r)f.appendTo(o,t);return o}toString(){return Ve.format("%s bits=%d bytes=%d",$i[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}dr.INITIAL_STATE=new dr(ma,wi,0,0);function ri(M){const t=Ve.getCharCode(" "),r=Ve.getCharCode("."),o=Ve.getCharCode(",");M[wi][t]=1;const f=Ve.getCharCode("Z"),d=Ve.getCharCode("A");for(let S=d;S<=f;S++)M[wi][S]=S-d+2;M[us][t]=1;const p=Ve.getCharCode("z"),s=Ve.getCharCode("a");for(let S=s;S<=p;S++)M[us][S]=S-s+2;M[Cr][t]=1;const h=Ve.getCharCode("9"),y=Ve.getCharCode("0");for(let S=y;S<=h;S++)M[Cr][S]=S-y+2;M[Cr][o]=12,M[Cr][r]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<x.length;S++)M[Ia][Ve.getCharCode(x[S])]=S;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<_.length;S++)Ve.getCharCode(_[S])>0&&(M[zr][Ve.getCharCode(_[S])]=S);return M}const sn=ri(se.createInt32Array(5,256));class ii{constructor(t){this.text=t}encode(){const t=Ve.getCharCode(" "),r=Ve.getCharCode(`
`);let o=xo.singletonList(dr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,s=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ve.getCharCode("\r"):p=s===r?2:0;break;case Ve.getCharCode("."):p=s===t?3:0;break;case Ve.getCharCode(","):p=s===t?4:0;break;case Ve.getCharCode(":"):p=s===t?5:0;break;default:p=0}p>0?(o=ii.updateStateListForPair(o,d,p),d++):o=this.updateStateListForChar(o,d)}return xo.min(o,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const o=[];for(let f of t)this.updateStateForChar(f,r,o);return ii.simplifyStates(o)}updateStateForChar(t,r,o){let f=this.text[r]&255,d=sn[t.getMode()][f]>0,p=null;for(let s=0;s<=zr;s++){let h=sn[s][f];if(h>0){if(p==null&&(p=t.endBinaryShift(r)),!d||s===t.getMode()||s===Cr){const y=p.latchAndAppend(s,h);o.push(y)}if(!d&&Da[t.getMode()][s]>=0){const y=p.shiftAndAppend(s,h);o.push(y)}}}if(t.getBinaryShiftByteCount()>0||sn[t.getMode()][f]===0){let s=t.addBinaryShiftChar(r);o.push(s)}}static updateStateListForPair(t,r,o){const f=[];for(let d of t)this.updateStateForPair(d,r,o,f);return this.simplifyStates(f)}static updateStateForPair(t,r,o,f){let d=t.endBinaryShift(r);if(f.push(d.latchAndAppend(zr,o)),t.getMode()!==zr&&f.push(d.shiftAndAppend(zr,o)),o===3||o===4){let p=d.latchAndAppend(Cr,16-o).latchAndAppend(Cr,1);f.push(p)}if(t.getBinaryShiftByteCount()>0){let p=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);f.push(p)}}static simplifyStates(t){let r=[];for(const o of t){let f=!0;for(const d of r){if(d.isBetterThanOrEqualTo(o)){f=!1;break}o.isBetterThanOrEqualTo(d)&&(r=r.filter(p=>p!==d))}f&&r.push(o)}return r}}class ft{constructor(){}static encodeBytes(t){return ft.encode(t,ft.DEFAULT_EC_PERCENT,ft.DEFAULT_AZTEC_LAYERS)}static encode(t,r,o){let f=new ii(t).encode(),d=re.truncDivision(f.getSize()*r,100)+11,p=f.getSize()+d,s,h,y,x,_;if(o!==ft.DEFAULT_AZTEC_LAYERS){if(s=o<0,h=Math.abs(o),h>(s?ft.MAX_NB_BITS_COMPACT:ft.MAX_NB_BITS))throw new N(Ve.format("Illegal value %s for layers",o));y=ft.totalBitsInLayer(h,s),x=ft.WORD_SIZE[h];let H=y-y%x;if(_=ft.stuffBits(f,x),_.getSize()+d>H)throw new N("Data to large for user specified layer");if(s&&_.getSize()>x*64)throw new N("Data to large for user specified layer")}else{x=0,_=null;for(let H=0;;H++){if(H>ft.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(s=H<=3,h=s?H+1:H,y=ft.totalBitsInLayer(h,s),p>y)continue;(_==null||x!==ft.WORD_SIZE[h])&&(x=ft.WORD_SIZE[h],_=ft.stuffBits(f,x));let K=y-y%x;if(!(s&&_.getSize()>x*64)&&_.getSize()+d<=K)break}}let S=ft.generateCheckWords(_,y,x),O=_.getSize()/x,D=ft.generateModeMessage(s,h,O),B=(s?11:14)+h*4,k=new Int32Array(B),U;if(s){U=B;for(let H=0;H<k.length;H++)k[H]=H}else{U=B+1+2*re.truncDivision(re.truncDivision(B,2)-1,15);let H=re.truncDivision(B,2),K=re.truncDivision(U,2);for(let X=0;X<H;X++){let ee=X+re.truncDivision(X,15);k[H-X-1]=K-ee-1,k[H+X]=K+ee+1}}let z=new Dt(U);for(let H=0,K=0;H<h;H++){let X=(h-H)*4+(s?9:12);for(let ee=0;ee<X;ee++){let ae=ee*2;for(let oe=0;oe<2;oe++)S.get(K+ae+oe)&&z.set(k[H*2+oe],k[H*2+ee]),S.get(K+X*2+ae+oe)&&z.set(k[H*2+ee],k[B-1-H*2-oe]),S.get(K+X*4+ae+oe)&&z.set(k[B-1-H*2-oe],k[B-1-H*2-ee]),S.get(K+X*6+ae+oe)&&z.set(k[B-1-H*2-ee],k[H*2+oe])}K+=X*8}if(ft.drawModeMessage(z,s,U,D),s)ft.drawBullsEye(z,re.truncDivision(U,2),5);else{ft.drawBullsEye(z,re.truncDivision(U,2),7);for(let H=0,K=0;H<re.truncDivision(B,2)-1;H+=15,K+=16)for(let X=re.truncDivision(U,2)&1;X<U;X+=2)z.set(re.truncDivision(U,2)-K,X),z.set(re.truncDivision(U,2)+K,X),z.set(X,re.truncDivision(U,2)-K),z.set(X,re.truncDivision(U,2)+K)}let G=new vi;return G.setCompact(s),G.setSize(U),G.setLayers(h),G.setCodeWords(O),G.setMatrix(z),G}static drawBullsEye(t,r,o){for(let f=0;f<o;f+=2)for(let d=r-f;d<=r+f;d++)t.set(d,r-f),t.set(d,r+f),t.set(r-f,d),t.set(r+f,d);t.set(r-o,r-o),t.set(r-o+1,r-o),t.set(r-o,r-o+1),t.set(r+o,r-o),t.set(r+o,r-o+1),t.set(r+o,r+o-1)}static generateModeMessage(t,r,o){let f=new Ce;return t?(f.appendBits(r-1,2),f.appendBits(o-1,6),f=ft.generateCheckWords(f,28,4)):(f.appendBits(r-1,5),f.appendBits(o-1,11),f=ft.generateCheckWords(f,40,4)),f}static drawModeMessage(t,r,o,f){let d=re.truncDivision(o,2);if(r)for(let p=0;p<7;p++){let s=d-3+p;f.get(p)&&t.set(s,d-5),f.get(p+7)&&t.set(d+5,s),f.get(20-p)&&t.set(s,d+5),f.get(27-p)&&t.set(d-5,s)}else for(let p=0;p<10;p++){let s=d-5+p+re.truncDivision(p,5);f.get(p)&&t.set(s,d-7),f.get(p+10)&&t.set(d+7,s),f.get(29-p)&&t.set(s,d+7),f.get(39-p)&&t.set(d-7,s)}}static generateCheckWords(t,r,o){let f=t.getSize()/o,d=new mi(ft.getGF(o)),p=re.truncDivision(r,o),s=ft.bitsToWords(t,o,p);d.encode(s,p-f);let h=r%o,y=new Ce;y.appendBits(0,h);for(const x of Array.from(s))y.appendBits(x,o);return y}static bitsToWords(t,r,o){let f=new Int32Array(o),d,p;for(d=0,p=t.getSize()/r;d<p;d++){let s=0;for(let h=0;h<r;h++)s|=t.get(d*r+h)?1<<r-h-1:0;f[d]=s}return f}static getGF(t){switch(t){case 4:return Ct.AZTEC_PARAM;case 6:return Ct.AZTEC_DATA_6;case 8:return Ct.AZTEC_DATA_8;case 10:return Ct.AZTEC_DATA_10;case 12:return Ct.AZTEC_DATA_12;default:throw new N("Unsupported word size "+t)}}static stuffBits(t,r){let o=new Ce,f=t.getSize(),d=(1<<r)-2;for(let p=0;p<f;p+=r){let s=0;for(let h=0;h<r;h++)(p+h>=f||t.get(p+h))&&(s|=1<<r-1-h);(s&d)===d?(o.appendBits(s&d,r),p--):(s&d)===0?(o.appendBits(s|1,r),p--):o.appendBits(s,r)}return o}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}ft.DEFAULT_EC_PERCENT=33,ft.DEFAULT_AZTEC_LAYERS=0,ft.MAX_NB_BITS=32,ft.MAX_NB_BITS_COMPACT=4,ft.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ma{encode(t,r,o,f){return this.encodeWithHints(t,r,o,f,null)}encodeWithHints(t,r,o,f,d){let p=Ji.ISO_8859_1,s=ft.DEFAULT_EC_PERCENT,h=ft.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(yn.CHARACTER_SET)&&(p=vo.forName(d.get(yn.CHARACTER_SET).toString())),d.has(yn.ERROR_CORRECTION)&&(s=re.parseInt(d.get(yn.ERROR_CORRECTION).toString())),d.has(yn.AZTEC_LAYERS)&&(h=re.parseInt(d.get(yn.AZTEC_LAYERS).toString()))),Ma.encodeLayers(t,r,o,f,p,s,h)}static encodeLayers(t,r,o,f,d,p,s){if(r!==_e.AZTEC)throw new N("Can only encode AZTEC, but got "+r);let h=ft.encode(Ve.getBytes(t,d),p,s);return Ma.renderResult(h,o,f)}static renderResult(t,r,o){let f=t.getMatrix();if(f==null)throw new jn;let d=f.getWidth(),p=f.getHeight(),s=Math.max(r,d),h=Math.max(o,p),y=Math.min(s/d,h/p),x=(s-d*y)/2,_=(h-p*y)/2,S=new Dt(s,h);for(let O=0,D=_;O<p;O++,D+=y)for(let B=0,k=x;B<d;B++,k+=y)f.get(B,O)&&S.setRegion(k,D,y,y);return S}}a.AbstractExpandedDecoder=rn,a.ArgumentException=R,a.ArithmeticException=Mt,a.AztecCode=vi,a.AztecCodeReader=Yi,a.AztecCodeWriter=Ma,a.AztecDecoder=Jt,a.AztecDetector=Sa,a.AztecDetectorResult=la,a.AztecEncoder=ft,a.AztecHighLevelEncoder=ii,a.AztecPoint=Ln,a.BarcodeFormat=_e,a.Binarizer=q,a.BinaryBitmap=P,a.BitArray=Ce,a.BitMatrix=Dt,a.BitSource=jr,a.BrowserAztecCodeReader=Xi,a.BrowserBarcodeReader=Ki,a.BrowserCodeReader=xe,a.BrowserDatamatrixCodeReader=Kt,a.BrowserMultiFormatReader=is,a.BrowserPDF417Reader=qs,a.BrowserQRCodeReader=Gs,a.BrowserQRCodeSvgWriter=yi,a.CharacterSetECI=we,a.ChecksumException=F,a.Code128Reader=De,a.Code39Reader=Bt,a.DataMatrixDecodedBitStreamParser=Ar,a.DataMatrixReader=Jr,a.DecodeHintType=Be,a.DecoderResult=Me,a.DefaultGridSampler=fi,a.DetectorResult=Aa,a.EAN13Reader=qr,a.EncodeHintType=yn,a.Exception=E,a.FormatException=te,a.GenericGF=Ct,a.GenericGFPoly=Rn,a.GlobalHistogramBinarizer=he,a.GridSampler=Gi,a.GridSamplerInstance=vr,a.HTMLCanvasElementLuminanceSource=ht,a.HybridBinarizer=Ae,a.ITFReader=Ie,a.IllegalArgumentException=N,a.IllegalStateException=jn,a.InvertedLuminanceSource=pt,a.LuminanceSource=Ze,a.MathUtils=Rt,a.MultiFormatOneDReader=_r,a.MultiFormatReader=rs,a.MultiFormatWriter=as,a.NotFoundException=pe,a.OneDReader=$t,a.PDF417DecodedBitStreamParser=ge,a.PDF417DecoderErrorCorrection=Xr,a.PDF417Reader=Qn,a.PDF417ResultMetadata=gi,a.PerspectiveTransform=Pn,a.PlanarYUVLuminanceSource=Ur,a.QRCodeByteMatrix=Zi,a.QRCodeDataMask=tr,a.QRCodeDecodedBitStreamParser=an,a.QRCodeDecoderErrorCorrectionLevel=vt,a.QRCodeDecoderFormatInformation=mn,a.QRCodeEncoder=Gt,a.QRCodeEncoderQRCode=Bi,a.QRCodeMaskUtil=vn,a.QRCodeMatrixUtil=nt,a.QRCodeMode=et,a.QRCodeReader=zn,a.QRCodeVersion=Ye,a.QRCodeWriter=Li,a.RGBLuminanceSource=ss,a.RSS14Reader=Xt,a.RSSExpandedReader=Te,a.ReaderException=pi,a.ReedSolomonDecoder=qi,a.ReedSolomonEncoder=mi,a.ReedSolomonException=Mr,a.Result=Ee,a.ResultMetadataType=mt,a.ResultPoint=Fe,a.StringUtils=Ve,a.UnsupportedOperationException=pn,a.VideoInputDevice=L,a.WhiteRectangleDetector=wn,a.WriterException=Wt,a.ZXingArrays=se,a.ZXingCharset=vo,a.ZXingInteger=re,a.ZXingStandardCharsets=Ji,a.ZXingStringBuilder=ot,a.ZXingStringEncoding=Nt,a.ZXingSystem=Y,a.createAbstractExpandedDecoder=kr,Object.defineProperty(a,"__esModule",{value:!0})}))})(Yl,Yl.exports)),Yl.exports}var Nn=u_();const c_=Nc(Nn),f_=um({__proto__:null,default:c_},[Nn]);var Zp=(function(){function u(i,a,c){if(this.formatMap=new Map([[Xe.QR_CODE,Nn.BarcodeFormat.QR_CODE],[Xe.AZTEC,Nn.BarcodeFormat.AZTEC],[Xe.CODABAR,Nn.BarcodeFormat.CODABAR],[Xe.CODE_39,Nn.BarcodeFormat.CODE_39],[Xe.CODE_93,Nn.BarcodeFormat.CODE_93],[Xe.CODE_128,Nn.BarcodeFormat.CODE_128],[Xe.DATA_MATRIX,Nn.BarcodeFormat.DATA_MATRIX],[Xe.MAXICODE,Nn.BarcodeFormat.MAXICODE],[Xe.ITF,Nn.BarcodeFormat.ITF],[Xe.EAN_13,Nn.BarcodeFormat.EAN_13],[Xe.EAN_8,Nn.BarcodeFormat.EAN_8],[Xe.PDF_417,Nn.BarcodeFormat.PDF_417],[Xe.RSS_14,Nn.BarcodeFormat.RSS_14],[Xe.RSS_EXPANDED,Nn.BarcodeFormat.RSS_EXPANDED],[Xe.UPC_A,Nn.BarcodeFormat.UPC_A],[Xe.UPC_E,Nn.BarcodeFormat.UPC_E],[Xe.UPC_EAN_EXTENSION,Nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!f_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=c;var v=this.createZXingFormats(i),m=new Map;m.set(Nn.DecodeHintType.POSSIBLE_FORMATS,v),m.set(Nn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return u.prototype.decodeAsync=function(i){var a=this;return new Promise(function(c,v){try{c(a.decode(i))}catch(m){v(m)}})},u.prototype.decode=function(i){var a=new Nn.MultiFormatReader(this.verbose,this.hints),c=new Nn.HTMLCanvasElementLuminanceSource(i),v=new Nn.BinaryBitmap(new Nn.HybridBinarizer(c)),m=a.decode(v);return{text:m.text,format:Ay.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(a,c,v){i.set(a,c)}),i},u.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},u.prototype.createZXingFormats=function(i){for(var a=[],c=0,v=i;c<v.length;c++){var m=v[c];this.formatMap.has(m)?a.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return a},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),h_=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},d_=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Jp=(function(){function u(i,a,c){if(this.formatMap=new Map([[Xe.QR_CODE,"qr_code"],[Xe.AZTEC,"aztec"],[Xe.CODABAR,"codabar"],[Xe.CODE_39,"code_39"],[Xe.CODE_93,"code_93"],[Xe.CODE_128,"code_128"],[Xe.DATA_MATRIX,"data_matrix"],[Xe.ITF,"itf"],[Xe.EAN_13,"ean_13"],[Xe.EAN_8,"ean_8"],[Xe.PDF_417,"pdf417"],[Xe.UPC_A,"upc_a"],[Xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=c;var v=this.createBarcodeDetectorFormats(i);if(this.detector=new BarcodeDetector(v),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var i=new BarcodeDetector({formats:["qr_code"]});return typeof i<"u"},u.prototype.decodeAsync=function(i){return h_(this,void 0,void 0,function(){var a,c;return d_(this,function(v){switch(v.label){case 0:return[4,this.detector.detect(i)];case 1:if(a=v.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(a),[2,{text:c.rawValue,format:Ay.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(i){for(var a=null,c=0,v=0,m=i;v<m.length;v++){var w=m[v],C=w.boundingBox.width*w.boundingBox.height;C>c&&(c=C,a=w)}if(!a)throw"No largest barcode found";return a},u.prototype.createBarcodeDetectorFormats=function(i){for(var a=[],c=0,v=i;c<v.length;c++){var m=v[c];this.formatMap.has(m)?a.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},u.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},u.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(a,c,v){i.set(a,c)}),i},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),$p=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},em=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},g_=(function(){function u(i,a,c,v){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,a&&Jp.isSupported()?(this.primaryDecoder=new Jp(i,c,v),this.secondaryDecoder=new Zp(i,c,v)):this.primaryDecoder=new Zp(i,c,v)}return u.prototype.decodeAsync=function(i){return $p(this,void 0,void 0,function(){var a;return em(this,function(c){switch(c.label){case 0:a=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(i)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(i){return $p(this,void 0,void 0,function(){var a,c;return em(this,function(v){switch(v.label){case 0:a=performance.now(),v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(i)];case 2:return[2,v.sent()];case 3:if(c=v.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(i)];throw c;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(i){if(this.verbose){var a=performance.now()-i;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var i=0,a=0,c=this.executionResults;a<c.length;a++){var v=c[a];i+=v}var m=i/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),Md=(function(){var u=function(i,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,v){c.__proto__=v}||function(c,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(c[m]=v[m])},u(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");u(i,a);function c(){this.constructor=i}i.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),Tc=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},Oc=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Oy=(function(){function u(i,a){this.name=i,this.track=a}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(i){var a={};a[this.name]=i;var c={advanced:[a]};return this.track.applyConstraints(c)},u.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var a=i[this.name];return a}return null},u})(),p_=(function(u){Md(i,u);function i(a,c){return u.call(this,a,c)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(a){var c={};c[this.name]=a;var v={advanced:[c]};return this.track.applyConstraints(v)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),c=a[this.name];return{min:c.min,max:c.max,step:c.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i})(Oy),m_=(function(u){Md(i,u);function i(a){return u.call(this,"zoom",a)||this}return i})(p_),y_=(function(u){Md(i,u);function i(a){return u.call(this,"torch",a)||this}return i})(Oy),v_=(function(){function u(i){this.track=i}return u.prototype.zoomFeature=function(){return new m_(this.track)},u.prototype.torchFeature=function(){return new y_(this.track)},u})(),x_=(function(){function u(i,a,c){this.isClosed=!1,this.parentElement=i,this.mediaStream=a,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),i.append(this.surface)}return u.prototype.createVideoElement=function(i){var a=document.createElement("video");return a.style.width="".concat(i,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},u.prototype.setupSurface=function(){var i=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var c=i.surface.clientWidth,v=i.surface.clientHeight;i.callbacks.onRenderSurfaceReady(c,v),i.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(i,a,c,v){return Tc(this,void 0,void 0,function(){var m,w;return Oc(this,function(C){switch(C.label){case 0:return m=new u(i,a,v),c.aspectRatio?(w={aspectRatio:c.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:C.sent(),C.label=2;case 2:return m.setupSurface(),[2,m]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(i){this.failIfClosed();var a=this,c=function(){setTimeout(i,200),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(i){return Tc(this,void 0,void 0,function(){return Oc(this,function(a){if("aspectRatio"in i)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(i)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var i=this;return new Promise(function(a,c){var v=i.mediaStream.getVideoTracks(),m=v.length,w=0;i.mediaStream.getVideoTracks().forEach(function(C){i.mediaStream.removeTrack(C),C.stop(),++w,w>=m&&(i.isClosed=!0,i.parentElement.removeChild(i.surface),a())})})},u.prototype.getCapabilities=function(){return new v_(this.getFirstTrackOrFail())},u})(),w_=(function(){function u(i){this.mediaStream=i}return u.prototype.render=function(i,a,c){return Tc(this,void 0,void 0,function(){return Oc(this,function(v){return[2,x_.create(i,this.mediaStream,a,c)]})})},u.create=function(i){return Tc(this,void 0,void 0,function(){var a,c;return Oc(this,function(v){switch(v.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:i},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return c=v.sent(),[2,new u(c)]}})})},u})(),tm=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},nm=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},b_=(function(){function u(){}return u.failIfNotSupported=function(){return tm(this,void 0,void 0,function(){return nm(this,function(i){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(i){return tm(this,void 0,void 0,function(){return nm(this,function(a){return[2,w_.create(i)]})})},u})(),E_=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},__=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},A_=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var i=MediaStreamTrack;return MediaStreamTrack&&i.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var i=$o.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(i=$o.insecureContextCameraQueryError()),Promise.reject(i)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var i=location.host.split(":")[0];return i==="127.0.0.1"||i==="localhost"},u.getCamerasFromMediaDevices=function(){return E_(this,void 0,void 0,function(){var i,a,c,v,m,w,C;return __(this,function(T){switch(T.label){case 0:return i=function(E){for(var R=E.getVideoTracks(),N=0,P=R;N<P.length;N++){var F=P[N];F.enabled=!1,F.stop(),E.removeTrack(F)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=T.sent(),v=[],m=0,w=c;m<w.length;m++)C=w[m],C.kind==="videoinput"&&v.push({id:C.deviceId,label:C.label});return i(a),[2,v]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(i,a){var c=function(m){for(var w=[],C=0,T=m;C<T.length;C++){var E=T[C];E.kind==="video"&&w.push({id:E.id,label:E.label})}i(w)},v=MediaStreamTrack;v.getSources(c)})},u})(),qn;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(qn||(qn={}));var S_=(function(){function u(){this.state=qn.NOT_STARTED,this.onGoingTransactionNewState=qn.UNKNOWN}return u.prototype.directTransition=function(i){this.failIfTransitionOngoing(),this.validateTransition(i),this.state=i},u.prototype.startTransition=function(i){return this.failIfTransitionOngoing(),this.validateTransition(i),this.onGoingTransactionNewState=i,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===qn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var i=this.onGoingTransactionNewState;this.onGoingTransactionNewState=qn.UNKNOWN,this.directTransition(i)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===qn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=qn.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==qn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(i){switch(this.state){case qn.UNKNOWN:throw"Transition from unknown is not allowed";case qn.NOT_STARTED:this.failIfNewStateIs(i,[qn.PAUSED]);break;case qn.SCANNING:break;case qn.PAUSED:break}},u.prototype.failIfNewStateIs=function(i,a){for(var c=0,v=a;c<v.length;c++){var m=v[c];if(i===m)throw"Cannot transition from ".concat(this.state," to ").concat(i)}},u})(),C_=(function(){function u(i){this.stateManager=i}return u.prototype.startTransition=function(i){return this.stateManager.startTransition(i)},u.prototype.directTransition=function(i){this.stateManager.directTransition(i)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===qn.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==qn.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===qn.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===qn.PAUSED},u})(),T_=(function(){function u(){}return u.create=function(){return new C_(new S_)},u})(),O_=(function(){var u=function(i,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,v){c.__proto__=v}||function(c,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(c[m]=v[m])},u(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");u(i,a);function c(){this.constructor=i}i.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),Oi=(function(u){O_(i,u);function i(){return u!==null&&u.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i})(sa),N_=(function(){function u(i,a){this.logger=a,this.fps=Oi.SCAN_DEFAULT_FPS,i?(i.fps&&(this.fps=i.fps),this.disableFlip=i.disableFlip===!0,this.qrbox=i.qrbox,this.aspectRatio=i.aspectRatio,this.videoConstraints=i.videoConstraints):this.disableFlip=Oi.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ty.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!ba(this.qrbox)},u.create=function(i,a){return new u(i,a)},u})(),rm=(function(){function u(i,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.elementId=i,this.verbose=!1;var c;typeof a=="boolean"?this.verbose=a===!0:a&&(c=a,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new Cy(this.verbose),this.qrcode=new g_(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=T_.create()}return u.prototype.start=function(i,a,c,v){var m=this;if(!i)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;v?w=v:w=this.verbose?this.logger.log:function(){};var C=N_.create(a,this.logger);this.clearElement();var T=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=T,R=document.getElementById(this.elementId);R.clientWidth?R.clientWidth:Oi.DEFAULT_WIDTH,R.style.position="relative",this.shouldScan=!0,this.element=R;var N=this,P=this.stateManagerProxy.startTransition(qn.SCANNING);return new Promise(function(F,q){var Y=E?C.videoConstraints:N.createVideoConstraints(i);if(!Y){P.cancel(),q("videoConstraints should be defined");return}var J={};(!E||C.aspectRatio)&&(J.aspectRatio=C.aspectRatio);var ne={onRenderSurfaceReady:function(se,re){N.setupUi(se,re,C),N.isScanning=!0,N.foreverScan(C,c,w)}};b_.failIfNotSupported().then(function(se){se.create(Y).then(function(re){return re.render(m.element,J,ne).then(function(Ce){N.renderedCamera=Ce,P.execute(),F(null)}).catch(function(Ce){P.cancel(),q(Ce)})}).catch(function(re){P.cancel(),q($o.errorGettingUserMedia(re))})}).catch(function(se){P.cancel(),q($o.cameraStreamingNotSupported())})})},u.prototype.pause=function(i){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(qn.PAUSED),this.showPausedState(),(ba(i)||i!==!0)&&(i=!1),i&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var i=this,a=function(){i.stateManagerProxy.directTransition(qn.SCANNING),i.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var i=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(qn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(i.element){var m=document.getElementById(Oi.SHADED_REGION_ELEMENT_ID);m&&i.element.removeChild(m)}},v=this;return this.renderedCamera.close().then(function(){return v.renderedCamera=null,v.element&&(v.element.removeChild(v.canvasElement),v.canvasElement=null),c(),v.qrRegion&&(v.qrRegion=null),v.context&&(v.context=null),a.execute(),v.hidePausedState(),v.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(i,a){return this.scanFileV2(i,a).then(function(c){return c.decodedText})},u.prototype.scanFileV2=function(i,a){var c=this;if(!i||!(i instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ba(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(v,m){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(i);var w=new Image;w.onload=function(){var C=w.width,T=w.height,E=document.getElementById(c.elementId),R=E.clientWidth?E.clientWidth:Oi.DEFAULT_WIDTH,N=Math.max(E.clientHeight?E.clientHeight:T,Oi.FILE_SCAN_MIN_HEIGHT),P=c.computeCanvasDrawConfig(C,T,R,N);if(a){var F=c.createCanvasElement(R,N,"qr-canvas-visible");F.style.display="inline-block",E.appendChild(F);var q=F.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=R,q.canvas.height=N,q.drawImage(w,0,0,C,T,P.x,P.y,P.width,P.height)}var Y=Oi.FILE_SCAN_HIDDEN_CANVAS_PADDING,J=Math.max(w.width,P.width),ne=Math.max(w.height,P.height),se=J+2*Y,re=ne+2*Y,Ce=c.createCanvasElement(se,re);E.appendChild(Ce);var Ke=Ce.getContext("2d");if(!Ke)throw"Unable to get 2d context from canvas";Ke.canvas.width=se,Ke.canvas.height=re,Ke.drawImage(w,0,0,C,T,Y,Y,J,ne);try{c.qrcode.decodeRobustlyAsync(Ce).then(function(Be){v(Kp.createFromQrcodeResult(Be))}).catch(m)}catch(Be){m("QR code parse error, error = ".concat(Be))}},w.onerror=m,w.onabort=m,w.onstalled=m,w.onsuspend=m,w.src=URL.createObjectURL(i)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return A_.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(i){if(i){if(!Ty.isMediaStreamConstraintsValid(i,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(i)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(i){var a=[Xe.QR_CODE,Xe.AZTEC,Xe.CODABAR,Xe.CODE_39,Xe.CODE_93,Xe.CODE_128,Xe.DATA_MATRIX,Xe.MAXICODE,Xe.ITF,Xe.EAN_13,Xe.EAN_8,Xe.PDF_417,Xe.RSS_14,Xe.RSS_EXPANDED,Xe.UPC_A,Xe.UPC_E,Xe.UPC_EAN_EXTENSION];if(!i||typeof i=="boolean"||!i.formatsToSupport)return a;if(!Array.isArray(i.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(i.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],v=0,m=i.formatsToSupport;v<m.length;v++){var w=m[v];s_(w)?c.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},u.prototype.getUseBarCodeDetectorIfSupported=function(i){if(ba(i))return!0;if(!ba(i.useBarCodeDetectorIfSupported))return i.useBarCodeDetectorIfSupported!==!1;if(ba(i.experimentalFeatures))return!0;var a=i.experimentalFeatures;return ba(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(i,a,c){var v=this,m=c.qrbox;this.validateQrboxConfig(m);var w=this.toQrdimensions(i,a,m),C=function(E){if(E<Oi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Oi.MIN_QR_BOX_SIZE,"px.")},T=function(E){return E>i&&(v.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=i),E};C(w.width),C(w.height),w.width=T(w.width)},u.prototype.validateQrboxConfig=function(i){if(typeof i!="number"&&typeof i!="function"&&(i.width===void 0||i.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(i,a,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(i,a)}catch(v){throw new Error("qrbox config was passed as a function but it failed with unknown error"+v)}return c},u.prototype.setupUi=function(i,a,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(i,a,c);var v=ba(c.qrbox)?{width:i,height:a}:c.qrbox;this.validateQrboxConfig(v);var m=this.toQrdimensions(i,a,v);m.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=c.isShadedBoxEnabled()&&m.height<=a,C={x:0,y:0,width:i,height:a},T=w?this.getShadedRegionBounds(i,a,m):C,E=this.createCanvasElement(T.width,T.height),R={willReadFrequently:!0},N=E.getContext("2d",R);N.canvas.width=T.width,N.canvas.height=T.height,this.element.append(E),w&&this.possiblyInsertShadingElement(this.element,i,a,m),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=N,this.canvasElement=E},u.prototype.createScannerPausedUiElement=function(i){var a=document.createElement("div");a.innerText=$o.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",i.appendChild(a),this.scannerPausedUiElement=a},u.prototype.scanContext=function(i,a){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(v){return i(v.text,Kp.createFromQrcodeResult(v)),c.possiblyUpdateShaders(!0),!0}).catch(function(v){c.possiblyUpdateShaders(!1);var m=$o.codeParseError(v);return a(m,Sy.createFrom(m)),!1})},u.prototype.foreverScan=function(i,a,c){var v=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),w=m.videoWidth/m.clientWidth,C=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*w,E=this.qrRegion.height*C,R=this.qrRegion.x*w,N=this.qrRegion.y*C;this.context.drawImage(m,R,N,T,E,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){v.foreverScanTimeout=setTimeout(function(){v.foreverScan(i,a,c)},v.getTimeoutFps(i.fps))};this.scanContext(a,c).then(function(F){!F&&i.disableFlip!==!0?(v.context.translate(v.context.canvas.width,0),v.context.scale(-1,1),v.scanContext(a,c).finally(function(){P()})):P()}).catch(function(F){v.logger.logError("Error happend while scanning context",F),P()})}},u.prototype.createVideoConstraints=function(i){if(typeof i=="string")return{deviceId:{exact:i}};if(typeof i=="object"){var a="facingMode",c="deviceId",v={user:!0,environment:!0},m="exact",w=function(q){if(q in v)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},C=Object.keys(i);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var T=Object.keys(i)[0];if(T!==a&&T!==c)throw"Only '".concat(a,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(T===a){var E=i.facingMode;if(typeof E=="string"){if(w(E))return{facingMode:E}}else if(typeof E=="object")if(m in E){if(w(E["".concat(m)]))return{facingMode:{exact:E["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var R=typeof E;throw"Invalid type of 'facingMode' = ".concat(R)}}else{var N=i.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(m in N)return{deviceId:{exact:N["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var P=typeof N;throw"Invalid type of 'deviceId' = ".concat(P)}}}var F=typeof i;throw"Invalid type of 'cameraIdOrConfig' = ".concat(F)},u.prototype.computeCanvasDrawConfig=function(i,a,c,v){if(i<=c&&a<=v){var m=(c-i)/2,w=(v-a)/2;return{x:m,y:w,width:i,height:a}}else{var C=i,T=a;return i>c&&(a=c/i*a,i=c),a>v&&(i=v/a*i,a=v),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(T)+" to ".concat(i,"X").concat(a,".")),this.computeCanvasDrawConfig(i,a,c,v)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var i=document.getElementById(this.elementId);i&&(i.innerHTML="")},u.prototype.possiblyUpdateShaders=function(i){this.qrMatch!==i&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=i?Oi.BORDER_SHADER_MATCH_COLOR:Oi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=i)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(i,a,c){var v=i,m=a,w=document.createElement("canvas");return w.style.width="".concat(v,"px"),w.style.height="".concat(m,"px"),w.style.display="none",w.id=ba(c)?"qr-canvas":c,w},u.prototype.getShadedRegionBounds=function(i,a,c){if(c.width>i||c.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(i-c.width)/2,y:(a-c.height)/2,width:c.width,height:c.height}},u.prototype.possiblyInsertShadingElement=function(i,a,c,v){if(!(a-v.width<1||c-v.height<1)){var m=document.createElement("div");m.style.position="absolute";var w=(a-v.width)/2,C=(c-v.height)/2;if(m.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Oi.SHADED_REGION_ELEMENT_ID),a-v.width<11||c-v.height<11)this.hasBorderShaders=!1;else{var T=5,E=40;this.insertShaderBorders(m,E,T,-T,null,0,!0),this.insertShaderBorders(m,E,T,-T,null,0,!1),this.insertShaderBorders(m,E,T,null,-T,0,!0),this.insertShaderBorders(m,E,T,null,-T,0,!1),this.insertShaderBorders(m,T,E+T,-T,null,-T,!0),this.insertShaderBorders(m,T,E+T,null,-T,-T,!0),this.insertShaderBorders(m,T,E+T,-T,null,-T,!1),this.insertShaderBorders(m,T,E+T,null,-T,-T,!1),this.hasBorderShaders=!0}i.append(m)}},u.prototype.insertShaderBorders=function(i,a,c,v,m,w,C){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Oi.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(a,"px"),T.style.height="".concat(c,"px"),v!==null&&(T.style.top="".concat(v,"px")),m!==null&&(T.style.bottom="".concat(m,"px")),C?T.style.left="".concat(w,"px"):T.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),i.appendChild(T)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(i){return 1e3/i},u})(),Bd="data:image/svg+xml;base64,",R_=Bd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",I_=Bd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",im=Bd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",D_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",am=(function(){function u(){}return u.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},u})(),M_=(function(){function u(){this.data=am.createDefault();var i=localStorage.getItem(u.LOCAL_STORAGE_KEY);i?this.data=JSON.parse(i):this.reset()}return u.prototype.hasCameraPermissions=function(){return this.data.hasPermission},u.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},u.prototype.setHasPermission=function(i){this.data.hasPermission=i,this.flush()},u.prototype.setLastUsedCameraId=function(i){this.data.lastUsedCameraId=i,this.flush()},u.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},u.prototype.reset=function(){this.data=am.createDefault(),this.flush()},u.prototype.flush=function(){localStorage.setItem(u.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},u.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",u})(),B_=(function(){function u(){this.infoDiv=document.createElement("div")}return u.prototype.renderInto=function(i){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Wp.poweredBy();var a=document.createElement("a");a.innerText="ScanApp",a.href="https://scanapp.org",a.target="new",a.style.color="white",this.infoDiv.appendChild(a);var c=document.createElement("br"),v=document.createElement("br");this.infoDiv.appendChild(c),this.infoDiv.appendChild(v);var m=document.createElement("a");m.innerText=Wp.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),i.appendChild(this.infoDiv)},u.prototype.show=function(){this.infoDiv.style.display="block"},u.prototype.hide=function(){this.infoDiv.style.display="none"},u})(),L_=(function(){function u(i,a){this.isShowingInfoIcon=!0,this.onTapIn=i,this.onTapOut=a,this.infoIcon=document.createElement("img")}return u.prototype.renderInto=function(i){var a=this;this.infoIcon.alt="Info icon",this.infoIcon.src=im,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(c){return a.onHoverIn()},this.infoIcon.onmouseout=function(c){return a.onHoverOut()},this.infoIcon.onclick=function(c){return a.onClick()},i.appendChild(this.infoIcon)},u.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},u.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},u.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=D_,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=im,this.infoIcon.style.opacity="0.6")},u})(),k_=(function(){function u(){var i=this;this.infoDiv=new B_,this.infoIcon=new L_(function(){i.infoDiv.show()},function(){i.infoDiv.hide()})}return u.prototype.renderInto=function(i){this.infoDiv.renderInto(i),this.infoIcon.renderInto(i)},u})(),j_=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},P_=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},sm=(function(){function u(){}return u.hasPermissions=function(){return j_(this,void 0,void 0,function(){var i,a,c,v;return P_(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(i=m.sent(),a=0,c=i;a<c.length;a++)if(v=c[a],v.kind==="videoinput"&&v.label)return[2,!0];return[2,!1]}})})},u})(),Ms=(function(){function u(i){this.supportedScanTypes=this.validateAndReturnScanTypes(i)}return u.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},u.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},u.prototype.isCameraScanRequired=function(){for(var i=0,a=this.supportedScanTypes;i<a.length;i++){var c=a[i];if(u.isCameraScanType(c))return!0}return!1},u.isCameraScanType=function(i){return i===Ls.SCAN_TYPE_CAMERA},u.isFileScanType=function(i){return i===Ls.SCAN_TYPE_FILE},u.prototype.validateAndReturnScanTypes=function(i){if(!i||i.length===0)return sa.DEFAULT_SUPPORTED_SCAN_TYPE;var a=sa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(i.length>a)throw"Max ".concat(a," values expected for ")+"supportedScanTypes";for(var c=0,v=i;c<v.length;c++){var m=v[c];if(!sa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return i},u})(),Di=(function(){function u(){}return u.ALL_ELEMENT_CLASS="html5-qrcode-element",u.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",u.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",u.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",u.TORCH_BUTTON_ID="html5-qrcode-button-torch",u.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",u.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",u.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",u.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",u.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",u.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",u})(),Qa=(function(){function u(){}return u.createElement=function(i,a){var c=document.createElement(i);return c.id=a,c.classList.add(Di.ALL_ELEMENT_CLASS),i==="button"&&c.setAttribute("type","button"),c},u})(),Ny=function(u,i,a,c){function v(m){return m instanceof a?m:new a(function(w){w(m)})}return new(a||(a=Promise))(function(m,w){function C(R){try{E(c.next(R))}catch(N){w(N)}}function T(R){try{E(c.throw(R))}catch(N){w(N)}}function E(R){R.done?m(R.value):v(R.value).then(C,T)}E((c=c.apply(u,i||[])).next())})},Ry=function(u,i){var a={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},c,v,m,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(R){return T([E,R])}}function T(E){if(c)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(a=0)),a;)try{if(c=1,v&&(m=E[0]&2?v.return:E[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,E[1])).done)return m;switch(v=0,m&&(E=[E[0]&2,m.value]),E[0]){case 0:case 1:m=E;break;case 4:return a.label++,{value:E[1],done:!1};case 5:a.label++,v=E[1],E=[0];continue;case 7:E=a.ops.pop(),a.trys.pop();continue;default:if(m=a.trys,!(m=m.length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){a=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){a.label=E[1];break}if(E[0]===6&&a.label<m[1]){a.label=m[1],m=E;break}if(m&&a.label<m[2]){a.label=m[2],a.ops.push(E);break}m[2]&&a.ops.pop(),a.trys.pop();continue}E=i.call(u,a)}catch(R){E=[6,R],v=0}finally{c=m=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},om=(function(){function u(i,a,c){this.isTorchOn=!1,this.torchCapability=i,this.buttonController=a,this.onTorchActionFailureCallback=c}return u.prototype.isTorchEnabled=function(){return this.isTorchOn},u.prototype.flipState=function(){return Ny(this,void 0,void 0,function(){var i,a;return Ry(this,function(c){switch(c.label){case 0:this.buttonController.disable(),i=!this.isTorchOn,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.torchCapability.apply(i)];case 2:return c.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),i),[3,4];case 3:return a=c.sent(),this.propagateFailure(i,a),this.buttonController.enable(),[3,4];case 4:return[2]}})})},u.prototype.updateUiBasedOnLatestSettings=function(i,a){i===a?(this.buttonController.setText(a?un.torchOffButton():un.torchOnButton()),this.isTorchOn=a):this.propagateFailure(a),this.buttonController.enable()},u.prototype.propagateFailure=function(i,a){var c=i?un.torchOnFailedMessage():un.torchOffFailedMessage();a&&(c+="; Error = "+a),this.onTorchActionFailureCallback(c)},u.prototype.reset=function(){this.isTorchOn=!1},u})(),U_=(function(){function u(i,a){this.onTorchActionFailureCallback=a,this.torchButton=Qa.createElement("button",Di.TORCH_BUTTON_ID),this.torchController=new om(i,this,a)}return u.prototype.render=function(i,a){var c=this;this.torchButton.innerText=un.torchOnButton(),this.torchButton.style.display=a.display,this.torchButton.style.marginLeft=a.marginLeft;var v=this;this.torchButton.addEventListener("click",function(m){return Ny(c,void 0,void 0,function(){return Ry(this,function(w){switch(w.label){case 0:return[4,v.torchController.flipState()];case 1:return w.sent(),v.torchController.isTorchEnabled()?(v.torchButton.classList.remove(Di.TORCH_BUTTON_CLASS_TORCH_OFF),v.torchButton.classList.add(Di.TORCH_BUTTON_CLASS_TORCH_ON)):(v.torchButton.classList.remove(Di.TORCH_BUTTON_CLASS_TORCH_ON),v.torchButton.classList.add(Di.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),i.appendChild(this.torchButton)},u.prototype.updateTorchCapability=function(i){this.torchController=new om(i,this,this.onTorchActionFailureCallback)},u.prototype.getTorchButton=function(){return this.torchButton},u.prototype.hide=function(){this.torchButton.style.display="none"},u.prototype.show=function(){this.torchButton.style.display="inline-block"},u.prototype.disable=function(){this.torchButton.disabled=!0},u.prototype.enable=function(){this.torchButton.disabled=!1},u.prototype.setText=function(i){this.torchButton.innerText=i},u.prototype.reset=function(){this.torchButton.innerText=un.torchOnButton(),this.torchController.reset()},u.create=function(i,a,c,v){var m=new u(a,v);return m.render(i,c),m},u})(),z_=(function(){function u(i,a,c){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=a?"block":"none",i.appendChild(this.fileBasedScanRegion);var v=document.createElement("label");v.setAttribute("for",this.getFileScanInputId()),v.style.display="inline-block",this.fileBasedScanRegion.appendChild(v),this.fileSelectionButton=Qa.createElement("button",Di.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(C){v.click()}),v.append(this.fileSelectionButton),this.fileScanInput=Qa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",v.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(C){if(!(C==null||C.target==null)){var T=C.target;if(!(T.files&&T.files.length===0)){var E=T.files,R=E[0],N=R.name;m.setImageNameToButton(N),c(R)}}});var w=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(w),this.fileBasedScanRegion.addEventListener("dragenter",function(C){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(C){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(C){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(C){C.stopPropagation(),C.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var T=C.dataTransfer;if(T){var E=T.files;if(!E||E.length===0)return;for(var R=!1,N=0;N<E.length;++N){var P=E.item(N);if(P){var F=/image.*/;if(P.type.match(F)){R=!0;var q=P.name;m.setImageNameToButton(q),c(P),w.innerText=un.dragAndDropMessage();break}}}R||(w.innerText=un.dragAndDropMessageOnlyImages())}})}return u.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},u.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},u.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},u.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},u.prototype.createFileBasedScanRegion=function(){var i=document.createElement("div");return i.style.textAlign="center",i.style.margin="auto",i.style.width="80%",i.style.maxWidth="600px",i.style.border=this.fileBasedScanRegionDefaultBorder(),i.style.padding="10px",i.style.marginBottom="10px",i},u.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},u.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},u.prototype.createDragAndDropMessage=function(){var i=document.createElement("div");return i.innerText=un.dragAndDropMessage(),i.style.fontWeight="400",i},u.prototype.setImageNameToButton=function(i){var a=20;if(i.length>a){var c=i.substring(0,8),v=i.length,m=i.substring(v-8,v);i="".concat(c,"....").concat(m)}var w=un.fileSelectionChooseAnother()+" - "+i;this.fileSelectionButton.innerText=w},u.prototype.setInitialValueToButton=function(){var i=un.fileSelectionChooseImage()+" - "+un.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=i},u.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},u.create=function(i,a,c){var v=new u(i,a,c);return v},u})(),F_=(function(){function u(i){this.selectElement=Qa.createElement("select",Di.CAMERA_SELECTION_SELECT_ID),this.cameras=i,this.options=[]}return u.prototype.render=function(i){var a=document.createElement("span");a.style.marginRight="10px";var c=this.cameras.length;if(c===0)throw new Error("No cameras found");if(c===1)a.style.display="none";else{var v=un.selectCamera();a.innerText="".concat(v," (").concat(this.cameras.length,")  ")}for(var m=1,w=0,C=this.cameras;w<C.length;w++){var T=C[w],E=T.id,R=T.label==null?E:T.label;(!R||R==="")&&(R=[un.anonymousCameraPrefix(),m++].join(" "));var N=document.createElement("option");N.value=E,N.innerText=R,this.options.push(N),this.selectElement.appendChild(N)}a.appendChild(this.selectElement),i.appendChild(a)},u.prototype.disable=function(){this.selectElement.disabled=!0},u.prototype.isDisabled=function(){return this.selectElement.disabled===!0},u.prototype.enable=function(){this.selectElement.disabled=!1},u.prototype.getValue=function(){return this.selectElement.value},u.prototype.hasValue=function(i){for(var a=0,c=this.options;a<c.length;a++){var v=c[a];if(v.value===i)return!0}return!1},u.prototype.setValue=function(i){if(!this.hasValue(i))throw new Error("".concat(i," is not present in the camera list."));this.selectElement.value=i},u.prototype.hasSingleItem=function(){return this.cameras.length===1},u.prototype.numCameras=function(){return this.cameras.length},u.create=function(i,a){var c=new u(a);return c.render(i),c},u})(),H_=(function(){function u(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Qa.createElement("input",Di.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return u.prototype.render=function(i,a){this.zoomElementContainer.style.display=a?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",i.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var c=un.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.rangeText.style.marginRight="10px";var v=this;this.rangeInput.addEventListener("input",function(){return v.onValueChange()}),this.rangeInput.addEventListener("change",function(){return v.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},u.prototype.onValueChange=function(){var i=un.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},u.prototype.setValues=function(i,a,c,v){this.rangeInput.min=i.toString(),this.rangeInput.max=a.toString(),this.rangeInput.step=v.toString(),this.rangeInput.value=c.toString(),this.onValueChange()},u.prototype.show=function(){this.zoomElementContainer.style.display="block"},u.prototype.hide=function(){this.zoomElementContainer.style.display="none"},u.prototype.setOnCameraZoomValueChangeCallback=function(i){this.onChangeCallback=i},u.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},u.create=function(i,a){var c=new u;return c.render(i,a),c},u})(),Ni;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ni||(Ni={}));function V_(u){return{fps:u.fps,qrbox:u.qrbox,aspectRatio:u.aspectRatio,disableFlip:u.disableFlip,videoConstraints:u.videoConstraints}}function q_(u,i){return{formatsToSupport:u.formatsToSupport,useBarCodeDetectorIfSupported:u.useBarCodeDetectorIfSupported,experimentalFeatures:u.experimentalFeatures,verbose:i}}var G_=(function(){function u(i,a,c){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=i,this.config=this.createConfig(a),this.verbose=c===!0,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.scanTypeSelector=new Ms(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Cy(this.verbose),this.persistedDataManager=new M_,a.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return u.prototype.render=function(i,a){var c=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,w){if(i)i(m,w);else{if(c.lastMatchFound===m)return;c.lastMatchFound=m,c.setHeaderMessage(un.lastMatch(m),Ni.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,w){a&&a(m,w)};var v=document.getElementById(this.elementId);if(!v)throw"HTML Element with id=".concat(this.elementId," not found");v.innerHTML="",this.createBasicLayout(v),this.html5Qrcode=new rm(this.getScanRegionId(),q_(this.config,this.verbose))},u.prototype.pause=function(i){(ba(i)||i!==!0)&&(i=!1),this.getHtml5QrcodeOrFail().pause(i)},u.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},u.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},u.prototype.clear=function(){var i=this,a=function(){var c=document.getElementById(i.elementId);c&&(c.innerHTML="",i.resetBasicLayout(c))};return this.html5Qrcode?new Promise(function(c,v){if(!i.html5Qrcode){c();return}i.html5Qrcode.isScanning?i.html5Qrcode.stop().then(function(m){if(!i.html5Qrcode){c();return}i.html5Qrcode.clear(),a(),c()}).catch(function(m){i.verbose&&i.logger.logError("Unable to stop qrcode scanner",m),v(m)}):(i.html5Qrcode.clear(),a(),c())}):Promise.resolve()},u.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},u.prototype.applyVideoConstraints=function(i){return this.getHtml5QrcodeOrFail().applyVideoConstraints(i)},u.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},u.prototype.createConfig=function(i){return i?(i.fps||(i.fps=sa.SCAN_DEFAULT_FPS),i.rememberLastUsedCamera!==!sa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(i.rememberLastUsedCamera=sa.DEFAULT_REMEMBER_LAST_CAMERA_USED),i.supportedScanTypes||(i.supportedScanTypes=sa.DEFAULT_SUPPORTED_SCAN_TYPE),i):{fps:sa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:sa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:sa.DEFAULT_SUPPORTED_SCAN_TYPE}},u.prototype.createBasicLayout=function(i){i.style.position="relative",i.style.padding="0px",i.style.border="1px solid silver",this.createHeader(i);var a=document.createElement("div"),c=this.getScanRegionId();a.id=c,a.style.width="100%",a.style.minHeight="100px",a.style.textAlign="center",i.appendChild(a),Ms.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var v=document.createElement("div"),m=this.getDashboardId();v.id=m,v.style.width="100%",i.appendChild(v),this.setupInitialDashboard(v)},u.prototype.resetBasicLayout=function(i){i.style.border="none"},u.prototype.setupInitialDashboard=function(i){this.createSection(i),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},u.prototype.createHeader=function(i){var a=document.createElement("div");a.style.textAlign="left",a.style.margin="0px",i.appendChild(a);var c=new k_;c.renderInto(a);var v=document.createElement("div");v.id=this.getHeaderMessageContainerId(),v.style.display="none",v.style.textAlign="center",v.style.fontSize="14px",v.style.padding="2px 10px",v.style.margin="4px",v.style.borderTop="1px solid #f6f6f6",a.appendChild(v)},u.prototype.createSection=function(i){var a=document.createElement("div");a.id=this.getDashboardSectionId(),a.style.width="100%",a.style.padding="10px 0px 10px 0px",a.style.textAlign="left",i.appendChild(a)},u.prototype.createCameraListUi=function(i,a,c){var v=this;v.showHideScanTypeSwapLink(!1),v.setHeaderMessage(un.cameraPermissionRequesting());var m=function(){c||v.createPermissionButton(i,a)};rm.getCameras().then(function(w){v.persistedDataManager.setHasPermission(!0),v.showHideScanTypeSwapLink(!0),v.resetHeaderMessage(),w&&w.length>0?(i.removeChild(a),v.renderCameraSelection(w)):(v.setHeaderMessage(un.noCameraFound(),Ni.STATUS_WARNING),m())}).catch(function(w){v.persistedDataManager.setHasPermission(!1),c?c.disabled=!1:m(),v.setHeaderMessage(w,Ni.STATUS_WARNING),v.showHideScanTypeSwapLink(!0)})},u.prototype.createPermissionButton=function(i,a){var c=this,v=Qa.createElement("button",this.getCameraPermissionButtonId());v.innerText=un.cameraPermissionTitle(),v.addEventListener("click",function(){v.disabled=!0,c.createCameraListUi(i,a,v)}),a.appendChild(v)},u.prototype.createPermissionsUi=function(i,a){var c=this;if(Ms.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){sm.hasPermissions().then(function(v){v?c.createCameraListUi(i,a):(c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(i,a))}).catch(function(v){c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(i,a)});return}this.createPermissionButton(i,a)},u.prototype.createSectionControlPanel=function(){var i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");i.appendChild(a);var c=document.createElement("div");c.id=this.getDashboardSectionCameraScanRegionId(),c.style.display=Ms.isCameraScanType(this.currentScanType)?"block":"none",a.appendChild(c);var v=document.createElement("div");v.style.textAlign="center",c.appendChild(v),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(c,v),this.renderFileScanUi(a)},u.prototype.renderFileScanUi=function(i){var a=Ms.isFileScanType(this.currentScanType),c=this,v=function(m){if(!c.html5Qrcode)throw"html5Qrcode not defined";Ms.isFileScanType(c.currentScanType)&&(c.setHeaderMessage(un.loadingImage()),c.html5Qrcode.scanFileV2(m,!0).then(function(w){c.resetHeaderMessage(),c.qrCodeSuccessCallback(w.decodedText,w)}).catch(function(w){c.setHeaderMessage(w,Ni.STATUS_WARNING),c.qrCodeErrorCallback(w,Sy.createFrom(w))}))};this.fileSelectionUi=z_.create(i,a,v)},u.prototype.renderCameraSelection=function(i){var a=this,c=this,v=document.getElementById(this.getDashboardSectionCameraScanRegionId());v.style.textAlign="center";var m=H_.create(v,!1),w=function(Y){var J=Y.zoomFeature();if(J.isSupported()){m.setOnCameraZoomValueChangeCallback(function(se){J.apply(se)});var ne=1;a.config.defaultZoomValueIfSupported&&(ne=a.config.defaultZoomValueIfSupported),ne=o_(ne,J.min(),J.max()),m.setValues(J.min(),J.max(),ne,J.step()),m.show()}},C=F_.create(v,i),T=document.createElement("span"),E=Qa.createElement("button",Di.CAMERA_START_BUTTON_ID);E.innerText=un.scanButtonStartScanningText(),T.appendChild(E);var R=Qa.createElement("button",Di.CAMERA_STOP_BUTTON_ID);R.innerText=un.scanButtonStopScanningText(),R.style.display="none",R.disabled=!0,T.appendChild(R);var N,P=function(Y){if(!Y.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(Y.torchFeature()):N=U_.create(T,Y.torchFeature(),{display:"none",marginLeft:"5px"},function(J){c.setHeaderMessage(J,Ni.STATUS_WARNING)}),N.show()};v.appendChild(T);var F=function(Y){Y||(E.style.display="none"),E.innerText=un.scanButtonStartScanningText(),E.style.opacity="1",E.disabled=!1,Y&&(E.style.display="inline-block")};if(E.addEventListener("click",function(Y){E.innerText=un.scanButtonScanningStarting(),C.disable(),E.disabled=!0,E.style.opacity="0.5",a.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!1),c.resetHeaderMessage();var J=C.getValue();c.persistedDataManager.setLastUsedCameraId(J),c.html5Qrcode.start(J,V_(c.config),c.qrCodeSuccessCallback,c.qrCodeErrorCallback).then(function(ne){R.disabled=!1,R.style.display="inline-block",F(!1);var se=c.html5Qrcode.getRunningTrackCameraCapabilities();a.config.showTorchButtonIfSupported===!0&&P(se),a.config.showZoomSliderIfSupported===!0&&w(se)}).catch(function(ne){c.showHideScanTypeSwapLink(!0),C.enable(),F(!0),c.setHeaderMessage(ne,Ni.STATUS_WARNING)})}),C.hasSingleItem()&&E.click(),R.addEventListener("click",function(Y){if(!c.html5Qrcode)throw"html5Qrcode not defined";R.disabled=!0,c.html5Qrcode.stop().then(function(J){a.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!0),C.enable(),E.disabled=!1,R.style.display="none",E.style.display="inline-block",N&&(N.reset(),N.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),c.insertCameraScanImageToScanRegion()}).catch(function(J){R.disabled=!1,c.setHeaderMessage(J,Ni.STATUS_WARNING)})}),c.persistedDataManager.getLastUsedCameraId()){var q=c.persistedDataManager.getLastUsedCameraId();C.hasValue(q)?(C.setValue(q),E.click()):c.persistedDataManager.resetLastUsedCameraId()}},u.prototype.createSectionSwap=function(){var i=this,a=un.textIfCameraScanSelected(),c=un.textIfFileScanSelected(),v=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var w=Qa.createElement("span",this.getDashboardSectionSwapLinkId());w.style.textDecoration="underline",w.style.cursor="pointer",w.innerText=Ms.isCameraScanType(this.currentScanType)?a:c,w.addEventListener("click",function(){if(!i.sectionSwapAllowed){i.verbose&&i.logger.logError("Section swap called when not allowed");return}i.resetHeaderMessage(),i.fileSelectionUi.resetValue(),i.sectionSwapAllowed=!1,Ms.isCameraScanType(i.currentScanType)?(i.clearScanRegion(),i.getCameraScanRegion().style.display="none",i.fileSelectionUi.show(),w.innerText=c,i.currentScanType=Ls.SCAN_TYPE_FILE,i.insertFileScanImageToScanRegion()):(i.clearScanRegion(),i.getCameraScanRegion().style.display="block",i.fileSelectionUi.hide(),w.innerText=a,i.currentScanType=Ls.SCAN_TYPE_CAMERA,i.insertCameraScanImageToScanRegion(),i.startCameraScanIfPermissionExistsOnSwap()),i.sectionSwapAllowed=!0}),m.appendChild(w),v.appendChild(m)},u.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var i=this,a=this;if(this.persistedDataManager.hasCameraPermissions()){sm.hasPermissions().then(function(c){if(c){var v=document.getElementById(a.getCameraPermissionButtonId());if(!v)throw i.logger.logError("Permission button not found, fail;"),"Permission button not found";v.click()}else a.persistedDataManager.setHasPermission(!1)}).catch(function(c){a.persistedDataManager.setHasPermission(!1)});return}},u.prototype.resetHeaderMessage=function(){var i=document.getElementById(this.getHeaderMessageContainerId());i.style.display="none"},u.prototype.setHeaderMessage=function(i,a){a||(a=Ni.STATUS_DEFAULT);var c=this.getHeaderMessageDiv();switch(c.innerText=i,c.style.display="block",a){case Ni.STATUS_SUCCESS:c.style.background="rgba(106, 175, 80, 0.26)",c.style.color="#477735";break;case Ni.STATUS_WARNING:c.style.background="rgba(203, 36, 49, 0.14)",c.style.color="#cb2431";break;case Ni.STATUS_DEFAULT:default:c.style.background="rgba(0, 0, 0, 0)",c.style.color="rgb(17, 17, 17)";break}},u.prototype.showHideScanTypeSwapLink=function(i){this.scanTypeSelector.hasMoreThanOneScanType()&&(i!==!0&&(i=!1),this.sectionSwapAllowed=i,this.getDashboardSectionSwapLink().style.display=i?"inline-block":"none")},u.prototype.insertCameraScanImageToScanRegion=function(){var i=this,a=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){a.innerHTML="<br>",a.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(c){a.innerHTML="<br>",a.appendChild(i.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=R_,this.cameraScanImage.alt=un.cameraScanAltText()},u.prototype.insertFileScanImageToScanRegion=function(){var i=this,a=document.getElementById(this.getScanRegionId());if(this.fileScanImage){a.innerHTML="<br>",a.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(c){a.innerHTML="<br>",a.appendChild(i.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=I_,this.fileScanImage.alt=un.fileScanAltText()},u.prototype.clearScanRegion=function(){var i=document.getElementById(this.getScanRegionId());i.innerHTML=""},u.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},u.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},u.prototype.getDashboardSectionSwapLinkId=function(){return Di.SCAN_TYPE_CHANGE_ANCHOR_ID},u.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},u.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},u.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},u.prototype.getCameraPermissionButtonId=function(){return Di.CAMERA_PERMISSION_BUTTON_ID},u.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},u.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},u.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},u})();function Y_({user:u,handleLogout:i}){return Z.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[Z.jsx(kc,{user:u,role:"admin",onLogout:i}),Z.jsxs("div",{className:"max-w-md mx-auto p-6 pt-24",children:[Z.jsxs("div",{className:"bg-black text-white p-6 rounded-2xl shadow-xl mb-8 relative overflow-hidden",children:[Z.jsxs("div",{className:"relative z-10",children:[Z.jsx("p",{className:"text-gray-400 text-xs font-bold tracking-wider uppercase mb-1",children:"Admin Console"}),Z.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),Z.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[Z.jsx(Dd,{size:16}),u.email]})]}),Z.jsx("div",{className:"absolute -right-4 -bottom-4 w-32 h-32 bg-gray-800 rounded-full opacity-50 blur-2xl"})]}),Z.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4 px-1",children:"Menu"}),Z.jsxs("div",{className:"grid gap-4",children:[Z.jsxs(Ea,{to:"/scan",className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-all active:scale-[0.98]",children:[Z.jsx("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:Z.jsx(tu,{size:24})}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-bold text-gray-900",children:""}),Z.jsx("p",{className:"text-xs text-gray-500",children:"QRID"})]})]}),Z.jsxs(Ea,{to:"/admin/rewards",className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-all active:scale-[0.98]",children:[Z.jsx("div",{className:"w-12 h-12 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center",children:Z.jsx(tu,{size:24})}),Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-bold text-gray-900",children:""}),Z.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]})]}),Z.jsx(jc,{role:"admin"})]})}function X_({user:u,handleLogout:i}){return Z.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[Z.jsx(kc,{user:u,role:"user",onLogout:i}),Z.jsxs("div",{className:"max-w-md mx-auto p-6 pt-24 text-center",children:[Z.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-gray-100 mb-8 relative overflow-hidden",children:[Z.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-500 to-pink-500"}),Z.jsx("h2",{className:"text-gray-400 text-xs font-bold tracking-widest uppercase mb-6",children:"Member ID"}),Z.jsx("div",{className:"bg-white p-4 rounded-xl inline-block mb-6 shadow-inner border border-gray-100",children:Z.jsx("div",{style:{height:"auto",margin:"0 auto",maxWidth:150,width:"100%"},children:Z.jsx(a_,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:u.id,viewBox:"0 0 256 256"})})}),Z.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Your ID Code"}),Z.jsx("div",{className:"font-mono text-lg font-bold text-gray-800 bg-gray-50 py-2 px-4 rounded-lg break-all select-all",children:u.id}),Z.jsx("p",{className:"text-xs text-gray-400 mt-4",children:""})]}),Z.jsx("div",{className:"grid gap-4",children:Z.jsxs(Ea,{to:"/rewards",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-2xl shadow-lg flex items-center justify-between px-6 hover:opacity-90 transition-all active:scale-[0.98]",children:[Z.jsxs("div",{className:"text-left",children:[Z.jsx("p",{className:"text-xs font-bold opacity-80 uppercase",children:"Exchange"}),Z.jsx("p",{className:"font-bold text-lg",children:""})]}),Z.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:Z.jsx(tu,{size:24})})]})})]}),Z.jsx(jc,{role:"user"})]})}function K_(){const[u,i]=me.useState(null),[a,c]=me.useState(null),[v,m]=me.useState(!0);return me.useEffect(()=>{(async()=>{const{data:{session:T}}=await mr.auth.getSession();if(T?.user){i(T.user);const{data:E}=await mr.from("profiles").select("role").eq("id",T.user.id).single();c(E?.role||"user")}else i(null),c(null);m(!1)})();const{data:{subscription:C}}=mr.auth.onAuthStateChange((T,E)=>{E||(i(null),c(null))});return()=>C.unsubscribe()},[]),{user:u,role:a,loading:v}}const lm=({children:u,role:i,loading:a})=>a?Z.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400 text-sm",children:"Checking permissions..."}):i!=="admin"?Z.jsx(xm,{to:"/",replace:!0}):u;function W_(){const[u,i]=me.useState(""),[a,c]=me.useState(1),[v,m]=me.useState(""),[w,C]=me.useState(navigator.onLine),[T,E]=me.useState(!1);me.useEffect(()=>{const P=()=>{C(!0),R()},F=()=>C(!1);return window.addEventListener("online",P),window.addEventListener("offline",F),navigator.onLine&&R(),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",F)}},[]),me.useEffect(()=>{if(T){const P=new G_("reader",{fps:10,qrbox:{width:250,height:250}},!1);return P.render(F=>{i(F),E(!1),P.clear()},F=>{}),()=>{P.clear().catch(F=>console.error("Failed to clear scanner",F))}}},[T]);const R=async()=>{const P=await Fh.getUnsyncedTransactions();if(P.length>0){m(`... (${P.length})`);for(const F of P)await mr.from("point_transactions").insert({description:`: ${F.points}pt`,points_change:F.points}),await Fh.markAsSynced(F.id);m(""),setTimeout(()=>m(""),2e3)}},N=async P=>{if(P.preventDefault(),!!u)if(m("..."),navigator.onLine){const{error:F}=await mr.from("point_transactions").insert({description:`: ${a}pt`,points_change:a});F?m(": "+F.message):(m(`${a}pt  ()`),i(""))}else await Fh.addTransaction(u,a),m(`${a}pt  ()`),i("")};return Z.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[Z.jsxs("div",{className:"bg-white border-b border-gray-100 px-6 py-4 pt-12 flex justify-between items-center sticky top-0 z-10",children:[Z.jsx("h2",{className:"font-bold text-lg",children:""}),Z.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-3 py-1.5 rounded-full ${w?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[w?Z.jsx(zE,{size:14}):Z.jsx(PE,{size:14}),w?"ONLINE":"OFFLINE"]})]}),Z.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[Z.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-gray-100",children:[T?Z.jsxs("div",{className:"mb-6",children:[Z.jsx("div",{id:"reader",className:"rounded-xl overflow-hidden"}),Z.jsxs("button",{onClick:()=>E(!1),className:"w-full mt-2 py-3 bg-gray-100 text-gray-600 rounded-xl font-bold flex items-center justify-center gap-2",children:[Z.jsx(HE,{size:18}),""]})]}):Z.jsxs("button",{onClick:()=>E(!0),className:"w-full mb-6 py-4 bg-black text-white rounded-xl font-bold shadow-lg active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[Z.jsx(NE,{size:20}),"QR"]}),Z.jsxs("form",{onSubmit:N,className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"User ID"}),Z.jsx("input",{type:"text",value:u,onChange:P=>i(P.target.value),placeholder:"ID",className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-lg",required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Points"}),Z.jsx("div",{className:"flex gap-2",children:[1,2,3,5,10].map(P=>Z.jsx("button",{type:"button",onClick:()=>c(P),className:`flex-1 py-2 rounded-lg font-bold transition-all ${a===P?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:P},P))}),Z.jsx("input",{type:"number",value:a,onChange:P=>c(Number(P.target.value)),className:"w-full mt-3 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 font-bold text-center text-xl",min:"1",required:!0})]}),Z.jsxs("button",{type:"submit",className:"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-black active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[Z.jsx(gE,{size:20}),""]})]})]}),v&&Z.jsx("div",{className:"mt-4 p-4 bg-blue-50 text-blue-700 rounded-xl text-center text-sm font-bold animate-fade-in",children:v}),Z.jsx(Ea,{to:"/",className:"block text-center mt-8 text-gray-400 text-sm hover:text-gray-600",children:""})]})]})}function Q_(){const{user:u,role:i,loading:a}=K_();if(a)return Z.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400 text-sm",children:"Loading..."});const c=async()=>{await mr.auth.signOut(),window.location.href="/"};return Z.jsx(yx,{children:Z.jsxs(Kv,{children:[Z.jsx(uo,{path:"/",element:u?i==="admin"?Z.jsx(Y_,{user:u,handleLogout:c}):Z.jsx(X_,{user:u,handleLogout:c}):Z.jsx(Np,{})}),Z.jsx(uo,{path:"/login",element:Z.jsx(Np,{})}),Z.jsx(uo,{path:"/admin/login",element:Z.jsx(VE,{})}),Z.jsx(uo,{path:"/scan",element:Z.jsx(lm,{role:i,loading:a,children:Z.jsx(W_,{})})}),Z.jsx(uo,{path:"/rewards",element:u?Z.jsx(qE,{user:u}):Z.jsx(xm,{to:"/"})}),Z.jsx(uo,{path:"/admin/rewards",element:Z.jsx(lm,{role:i,loading:a,children:Z.jsx(GE,{user:u})})})]})})}const Z_=rv.createRoot(document.getElementById("root"));Z_.render(Z.jsx(Q_,{}));
